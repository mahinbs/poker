/*! For license information please see main.88c5ce1e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var a=s(43),r=Symbol.for("react.element"),l=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,l={},d=null,c=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:r,type:e,key:d,ref:c,props:l,_owner:i.current}}t.Fragment=l,t.jsx=d,t.jsxs=d},202:(e,t)=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),l=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,b={};function g(e,t,s){this.props=e,this.context=t,this.refs=b,this.updater=s||h}function f(){}function y(e,t,s){this.props=e,this.context=t,this.refs=b,this.updater=s||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=g.prototype;var v=y.prototype=new f;v.constructor=y,p(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,a){var r,l={},n=null,i=null;if(null!=t)for(r in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(n=""+t.key),t)w.call(t,r)&&!S.hasOwnProperty(r)&&(l[r]=t[r]);var o=arguments.length-2;if(1===o)l.children=a;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];l.children=d}if(e&&e.defaultProps)for(r in o=e.defaultProps)void 0===l[r]&&(l[r]=o[r]);return{$$typeof:s,type:e,key:n,ref:i,props:l,_owner:N.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var A=/\/+/g;function P(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function T(e,t,r,l,n){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return n=n(o=e),e=""===l?"."+P(o,0):l,j(n)?(r="",null!=e&&(r=e.replace(A,"$&/")+"/"),T(n,t,r,"",function(e){return e})):null!=n&&(k(n)&&(n=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(n,r+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(A,"$&/")+"/")+e)),t.push(n)),1;if(o=0,l=""===l?".":l+":",j(e))for(var d=0;d<e.length;d++){var c=l+P(i=e[d],d);o+=T(i,t,r,c,n)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(i=e.next()).done;)o+=T(i=i.value,t,r,c=l+P(i,d++),n);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function I(e,t,s){if(null==e)return e;var a=[],r=0;return T(e,a,"","",function(e){return t.call(s,e,r++)}),a}function _(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var D={current:null},E={transition:null},R={ReactCurrentDispatcher:D,ReactCurrentBatchConfig:E,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:I,forEach:function(e,t,s){I(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return I(e,function(){t++}),t},toArray:function(e){return I(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=r,t.Profiler=n,t.PureComponent=y,t.StrictMode=l,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=p({},e.props),l=e.key,n=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(n=t.ref,i=N.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)w.call(t,d)&&!S.hasOwnProperty(d)&&(r[d]=void 0===t[d]&&void 0!==o?o[d]:t[d])}var d=arguments.length-2;if(1===d)r.children=a;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];r.children=o}return{$$typeof:s,type:e.type,key:l,ref:n,props:r,_owner:i}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:_}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.transition;E.transition={};try{e()}finally{E.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return D.current.useCallback(e,t)},t.useContext=function(e){return D.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return D.current.useDeferredValue(e)},t.useEffect=function(e,t){return D.current.useEffect(e,t)},t.useId=function(){return D.current.useId()},t.useImperativeHandle=function(e,t,s){return D.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return D.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return D.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return D.current.useMemo(e,t)},t.useReducer=function(e,t,s){return D.current.useReducer(e,t,s)},t.useRef=function(e){return D.current.useRef(e)},t.useState=function(e){return D.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return D.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return D.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,r=e[a];if(!(0<l(r,t)))break e;e[a]=t,e[s]=r,s=a}}function a(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,r=e.length,n=r>>>1;a<n;){var i=2*(a+1)-1,o=e[i],d=i+1,c=e[d];if(0>l(o,s))d<r&&0>l(c,o)?(e[a]=c,e[d]=s,a=d):(e[a]=o,e[i]=s,a=i);else{if(!(d<r&&0>l(c,s)))break e;e[a]=c,e[d]=s,a=d}}}return t}function l(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var n=performance;t.unstable_now=function(){return n.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],u=1,m=null,x=3,h=!1,p=!1,b=!1,g="function"===typeof setTimeout?setTimeout:null,f="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(c);null!==t;){if(null===t.callback)r(c);else{if(!(t.startTime<=e))break;r(c),t.sortIndex=t.expirationTime,s(d,t)}t=a(c)}}function j(e){if(b=!1,v(e),!p)if(null!==a(d))p=!0,E(w);else{var t=a(c);null!==t&&R(j,t.startTime-e)}}function w(e,s){p=!1,b&&(b=!1,f(k),k=-1),h=!0;var l=x;try{for(v(s),m=a(d);null!==m&&(!(m.expirationTime>s)||e&&!T());){var n=m.callback;if("function"===typeof n){m.callback=null,x=m.priorityLevel;var i=n(m.expirationTime<=s);s=t.unstable_now(),"function"===typeof i?m.callback=i:m===a(d)&&r(d),v(s)}else r(d);m=a(d)}if(null!==m)var o=!0;else{var u=a(c);null!==u&&R(j,u.startTime-s),o=!1}return o}finally{m=null,x=l,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,C=null,k=-1,A=5,P=-1;function T(){return!(t.unstable_now()-P<A)}function I(){if(null!==C){var e=t.unstable_now();P=e;var s=!0;try{s=C(!0,e)}finally{s?N():(S=!1,C=null)}}else S=!1}if("function"===typeof y)N=function(){y(I)};else if("undefined"!==typeof MessageChannel){var _=new MessageChannel,D=_.port2;_.port1.onmessage=I,N=function(){D.postMessage(null)}}else N=function(){g(I,0)};function E(e){C=e,S||(S=!0,N())}function R(e,s){k=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,E(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return a(d)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var s=x;x=t;try{return e()}finally{x=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=x;x=e;try{return t()}finally{x=s}},t.unstable_scheduleCallback=function(e,r,l){var n=t.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?n+l:n:l=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:r,priorityLevel:e,startTime:l,expirationTime:i=l+i,sortIndex:-1},l>n?(e.sortIndex=l,s(c,e),null===a(d)&&e===a(c)&&(b?(f(k),k=-1):b=!0,R(j,l-n))):(e.sortIndex=i,s(d,e),p||h||(p=!0,E(w))),e},t.unstable_shouldYield=T,t.unstable_wrapCallback=function(e){var t=x;return function(){var s=x;x=t;try{return e.apply(this,arguments)}finally{x=s}}}},391:(e,t,s)=>{var a=s(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},555:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function r(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,s){return(t=r(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){l(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}s.d(t,{A:()=>i})},579:(e,t,s)=>{e.exports=s(153)},730:(e,t,s)=>{var a=s(43),r=s(853);function l(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(i[e]=t,e=0;e<t.length;e++)n.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},h={};function p(e,t,s,a,r,l,n){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=l,this.removeEmptyString=n}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){b[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];b[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){b[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){b[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){b[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){b[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){b[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){b[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){b[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function f(e){return e[1].toUpperCase()}function y(e,t,s,a){var r=b.hasOwnProperty(t)?b[t]:null;(null!==r?0!==r.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,a){if(null===t||"undefined"===typeof t||function(e,t,s,a){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,a))return!0;if(a)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,r,a)&&(s=null),a||null===r?function(e){return!!u.call(h,e)||!u.call(x,e)&&(m.test(e)?h[e]=!0:(x[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):r.mustUseProperty?e[r.propertyName]=null===s?3!==r.type&&"":s:(t=r.attributeName,a=r.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(r=r.type)||4===r&&!0===s?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){b[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),b.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){b[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),A=Symbol.for("react.context"),P=Symbol.for("react.forward_ref"),T=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),D=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(xa){var t=xa.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function q(e,t){if(!e||B)return"";B=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(da){var a=da}Reflect.construct(e,[],t)}else{try{t.call()}catch(da){a=da}e.call(t.prototype)}else{try{throw Error()}catch(da){a=da}e()}}catch(da){if(da&&a&&"string"===typeof da.stack){for(var r=da.stack.split("\n"),l=a.stack.split("\n"),n=r.length-1,i=l.length-1;1<=n&&0<=i&&r[n]!==l[i];)i--;for(;1<=n&&0<=i;n--,i--)if(r[n]!==l[i]){if(1!==n||1!==i)do{if(n--,0>--i||r[n]!==l[i]){var o="\n"+r[n].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=n&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case T:return"Suspense";case I:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case A:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case P:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case _:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case D:t=e._payload,e=e._init;try{return z(e(t))}catch(xa){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var r=s.get,l=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(e){a=""+e,l.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var s=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function Y(e,t){var s=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){$(e,t);var s=H(t.value),a=t.type;if(null!=s)"number"===a?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Q(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,a){if(e=e.options,t){t={};for(var r=0;r<s.length;r++)t["$"+s[r]]=!0;for(s=0;s<e.length;s++)r=t.hasOwnProperty("$"+e[s].value),e[s].selected!==r&&(e[s].selected=r),r&&a&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,r=0;r<e.length;r++){if(e[r].value===s)return e[r].selected=!0,void(a&&(e[r].defaultSelected=!0));null!==t||e[r].disabled||(t=e[r])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(l(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function re(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(l(92));if(te(s)){if(1<s.length)throw Error(l(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function le(e,t){var s=H(t.value),a=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=a&&(e.defaultValue=""+a)}function ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,s,a,r){MSApp.execUnsafeLocalFunction(function(){return e(t,s)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function he(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function pe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),r=he(s,t[s],a);"float"===s&&(s="cssFloat"),a?e.setProperty(s,r):e[s]=r}}Object.keys(me).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var be=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(l(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(l(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(l(62))}}function fe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Ne=null;function Se(e){if(e=Ar(e)){if("function"!==typeof je)throw Error(l(280));var t=e.stateNode;t&&(t=Tr(t),je(e.stateNode,e.type,t))}}function Ce(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function ke(){if(we){var e=we,t=Ne;if(Ne=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ae(e,t){return e(t)}function Pe(){}var Te=!1;function Ie(e,t,s){if(Te)return e(t,s);Te=!0;try{return Ae(e,t,s)}finally{Te=!1,(null!==we||null!==Ne)&&(Pe(),ke())}}function _e(e,t){var s=e.stateNode;if(null===s)return null;var a=Tr(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(l(231,t,typeof s));return s}var De=!1;if(c)try{var Ee={};Object.defineProperty(Ee,"passive",{get:function(){De=!0}}),window.addEventListener("test",Ee,Ee),window.removeEventListener("test",Ee,Ee)}catch(ca){De=!1}function Re(e,t,s,a,r,l,n,i,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(c){this.onError(c)}}var Le=!1,Oe=null,Me=!1,Fe=null,Be={onError:function(e){Le=!0,Oe=e}};function qe(e,t,s,a,r,l,n,i,o){Le=!1,Oe=null,Re.apply(Be,arguments)}function Ue(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function ze(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(Ue(e)!==e)throw Error(l(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(l(188));return t!==e?null:e}for(var s=e,a=t;;){var r=s.return;if(null===r)break;var n=r.alternate;if(null===n){if(null!==(a=r.return)){s=a;continue}break}if(r.child===n.child){for(n=r.child;n;){if(n===s)return We(r),e;if(n===a)return We(r),t;n=n.sibling}throw Error(l(188))}if(s.return!==a.return)s=r,a=n;else{for(var i=!1,o=r.child;o;){if(o===s){i=!0,s=r,a=n;break}if(o===a){i=!0,a=r,s=n;break}o=o.sibling}if(!i){for(o=n.child;o;){if(o===s){i=!0,s=n,a=r;break}if(o===a){i=!0,a=n,s=r;break}o=o.sibling}if(!i)throw Error(l(189))}}if(s.alternate!==a)throw Error(l(190))}if(3!==s.tag)throw Error(l(188));return s.stateNode.current===s?e:t}(e),null!==e?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Je=r.unstable_scheduleCallback,Ke=r.unstable_cancelCallback,Qe=r.unstable_shouldYield,Ge=r.unstable_requestPaint,Ye=r.unstable_now,$e=r.unstable_getCurrentPriorityLevel,Ze=r.unstable_ImmediatePriority,Xe=r.unstable_UserBlockingPriority,et=r.unstable_NormalPriority,tt=r.unstable_LowPriority,st=r.unstable_IdlePriority,at=null,rt=null;var lt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(nt(e)/it|0)|0},nt=Math.log,it=Math.LN2;var ot=64,dt=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var s=e.pendingLanes;if(0===s)return 0;var a=0,r=e.suspendedLanes,l=e.pingedLanes,n=268435455&s;if(0!==n){var i=n&~r;0!==i?a=ct(i):0!==(l&=n)&&(a=ct(l))}else 0!==(n=s&~r)?a=ct(n):0!==l&&(a=ct(l));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&r)&&((r=a&-a)>=(l=t&-t)||16===r&&0!==(4194240&l)))return t;if(0!==(4&a)&&(a|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)r=1<<(s=31-lt(t)),a|=e[s],t&=~r;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ot;return 0===(4194240&(ot<<=1))&&(ot=64),e}function pt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function bt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-lt(t)]=s}function gt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-lt(s),r=1<<a;r&t|e[a]&t&&(e[a]|=t),s&=~r}}var ft=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,jt,wt,Nt,St,Ct=!1,kt=[],At=null,Pt=null,Tt=null,It=new Map,_t=new Map,Dt=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":At=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":Tt=null;break;case"pointerover":case"pointerout":It.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":_t.delete(t.pointerId)}}function Lt(e,t,s,a,r,l){return null===e||e.nativeEvent!==l?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:l,targetContainers:[r]},null!==t&&(null!==(t=Ar(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==r&&-1===t.indexOf(r)&&t.push(r),e)}function Ot(e){var t=kr(e.target);if(null!==t){var s=Ue(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=ze(s)))return e.blockedOn=t,void St(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=Ar(s))&&jt(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);ye=a,s.target.dispatchEvent(a),ye=null,t.shift()}return!0}function Ft(e,t,s){Mt(e)&&s.delete(t)}function Bt(){Ct=!1,null!==At&&Mt(At)&&(At=null),null!==Pt&&Mt(Pt)&&(Pt=null),null!==Tt&&Mt(Tt)&&(Tt=null),It.forEach(Ft),_t.forEach(Ft)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Bt)))}function Ut(e){function t(t){return qt(t,e)}if(0<kt.length){qt(kt[0],e);for(var s=1;s<kt.length;s++){var a=kt[s];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==At&&qt(At,e),null!==Pt&&qt(Pt,e),null!==Tt&&qt(Tt,e),It.forEach(t),_t.forEach(t),s=0;s<Dt.length;s++)(a=Dt[s]).blockedOn===e&&(a.blockedOn=null);for(;0<Dt.length&&null===(s=Dt[0]).blockedOn;)Ot(s),null===s.blockedOn&&Dt.shift()}var zt=v.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,s,a){var r=ft,l=zt.transition;zt.transition=null;try{ft=1,Jt(e,t,s,a)}finally{ft=r,zt.transition=l}}function Vt(e,t,s,a){var r=ft,l=zt.transition;zt.transition=null;try{ft=4,Jt(e,t,s,a)}finally{ft=r,zt.transition=l}}function Jt(e,t,s,a){if(Wt){var r=Qt(e,t,s,a);if(null===r)$a(e,t,a,Kt,s),Rt(e,a);else if(function(e,t,s,a,r){switch(t){case"focusin":return At=Lt(At,e,t,s,a,r),!0;case"dragenter":return Pt=Lt(Pt,e,t,s,a,r),!0;case"mouseover":return Tt=Lt(Tt,e,t,s,a,r),!0;case"pointerover":var l=r.pointerId;return It.set(l,Lt(It.get(l)||null,e,t,s,a,r)),!0;case"gotpointercapture":return l=r.pointerId,_t.set(l,Lt(_t.get(l)||null,e,t,s,a,r)),!0}return!1}(r,e,t,s,a))a.stopPropagation();else if(Rt(e,a),4&t&&-1<Et.indexOf(e)){for(;null!==r;){var l=Ar(r);if(null!==l&&vt(l),null===(l=Qt(e,t,s,a))&&$a(e,t,a,Kt,s),l===r)break;r=l}null!==r&&a.stopPropagation()}else $a(e,t,a,null,s)}}var Kt=null;function Qt(e,t,s,a){if(Kt=null,null!==(e=kr(e=ve(a))))if(null===(t=Ue(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=ze(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case Xe:return 4;case et:case tt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Zt=null;function Xt(){if(Zt)return Zt;var e,t,s=$t,a=s.length,r="value"in Yt?Yt.value:Yt.textContent,l=r.length;for(e=0;e<a&&s[e]===r[e];e++);var n=a-e;for(t=1;t<=n&&s[a-t]===r[l-t];t++);return Zt=r.slice(e,1<t?1-t:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ts(){return!0}function ss(){return!1}function as(e){function t(t,s,a,r,l){for(var n in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=r,this.target=l,this.currentTarget=null,e)e.hasOwnProperty(n)&&(t=e[n],this[n]=t?t(r):r[n]);return this.isDefaultPrevented=(null!=r.defaultPrevented?r.defaultPrevented:!1===r.returnValue)?ts:ss,this.isPropagationStopped=ss,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var rs,ls,ns,is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=as(is),ds=M({},is,{view:0,detail:0}),cs=as(ds),us=M({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&"mousemove"===e.type?(rs=e.screenX-ns.screenX,ls=e.screenY-ns.screenY):ls=rs=0,ns=e),rs)},movementY:function(e){return"movementY"in e?e.movementY:ls}}),ms=as(us),xs=as(M({},us,{dataTransfer:0})),hs=as(M({},ds,{relatedTarget:0})),ps=as(M({},is,{animationName:0,elapsedTime:0,pseudoElement:0})),bs=M({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gs=as(bs),fs=as(M({},is,{data:0})),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},js={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=js[e])&&!!t[e]}function Ns(){return ws}var Ss=M({},ds,{key:function(e){if(e.key){var t=ys[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=es(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(e){return"keypress"===e.type?es(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?es(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=as(Ss),ks=as(M({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),As=as(M({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns})),Ps=as(M({},is,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ts=M({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Is=as(Ts),_s=[9,13,27,32],Ds=c&&"CompositionEvent"in window,Es=null;c&&"documentMode"in document&&(Es=document.documentMode);var Rs=c&&"TextEvent"in window&&!Es,Ls=c&&(!Ds||Es&&8<Es&&11>=Es),Os=String.fromCharCode(32),Ms=!1;function Fs(e,t){switch(e){case"keyup":return-1!==_s.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qs=!1;var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function zs(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Us[e.type]:"textarea"===t}function Ws(e,t,s,a){Ce(a),0<(t=Xa(t,"onChange")).length&&(s=new os("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Hs=null,Vs=null;function Js(e){Va(e,0)}function Ks(e){if(K(Pr(e)))return e}function Qs(e,t){if("change"===e)return t}var Gs=!1;if(c){var Ys;if(c){var $s="oninput"in document;if(!$s){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),$s="function"===typeof Zs.oninput}Ys=$s}else Ys=!1;Gs=Ys&&(!document.documentMode||9<document.documentMode)}function Xs(){Hs&&(Hs.detachEvent("onpropertychange",ea),Vs=Hs=null)}function ea(e){if("value"===e.propertyName&&Ks(Vs)){var t=[];Ws(t,Vs,e,ve(e)),Ie(Js,t)}}function ta(e,t,s){"focusin"===e?(Xs(),Vs=s,(Hs=t).attachEvent("onpropertychange",ea)):"focusout"===e&&Xs()}function sa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ks(Vs)}function aa(e,t){if("click"===e)return Ks(t)}function ra(e,t){if("input"===e||"change"===e)return Ks(t)}var la="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function na(e,t){if(la(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var r=s[a];if(!u.call(t,r)||!la(e[r],t[r]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ma(e,t){var s,a=ua(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ua(a)}}function ha(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ha(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pa(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(ga){s=!1}if(!s)break;t=Q((e=t.contentWindow).document)}return t}function ba(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function ya(e){var t=pa(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&ha(s.ownerDocument.documentElement,s)){if(null!==a&&ba(s))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var r=s.textContent.length,l=Math.min(a.start,r);a=void 0===a.end?l:Math.min(a.end,r),!e.extend&&l>a&&(r=a,a=l,l=r),r=ma(s,l);var n=ma(s,a);r&&n&&(1!==e.rangeCount||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==n.node||e.focusOffset!==n.offset)&&((t=t.createRange()).setStart(r.node,r.offset),e.removeAllRanges(),l>a?(e.addRange(t),e.extend(n.node,n.offset)):(t.setEnd(n.node,n.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ja=c&&"documentMode"in document&&11>=document.documentMode,wa=null,Na=null,Sa=null,Ca=!1;function ka(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Ca||null==wa||wa!==Q(a)||("selectionStart"in(a=wa)&&ba(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},Sa&&na(Sa,a)||(Sa=a,0<(a=Xa(Na,"onSelect")).length&&(t=new os("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=wa)))}function Aa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Pa={animationend:Aa("Animation","AnimationEnd"),animationiteration:Aa("Animation","AnimationIteration"),animationstart:Aa("Animation","AnimationStart"),transitionend:Aa("Transition","TransitionEnd")},Ta={},Ia={};function _a(e){if(Ta[e])return Ta[e];if(!Pa[e])return e;var t,s=Pa[e];for(t in s)if(s.hasOwnProperty(t)&&t in Ia)return Ta[e]=s[t];return e}c&&(Ia=document.createElement("div").style,"AnimationEvent"in window||(delete Pa.animationend.animation,delete Pa.animationiteration.animation,delete Pa.animationstart.animation),"TransitionEvent"in window||delete Pa.transitionend.transition);var Da=_a("animationend"),Ea=_a("animationiteration"),Ra=_a("animationstart"),La=_a("transitionend"),Oa=new Map,Ma="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(e,t){Oa.set(e,t),o(t,[e])}for(var Ba=0;Ba<Ma.length;Ba++){var qa=Ma[Ba];Fa(qa.toLowerCase(),"on"+(qa[0].toUpperCase()+qa.slice(1)))}Fa(Da,"onAnimationEnd"),Fa(Ea,"onAnimationIteration"),Fa(Ra,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(La,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wa=new Set("cancel close invalid load scroll toggle".split(" ").concat(za));function Ha(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,r,n,i,o,d){if(qe.apply(this,arguments),Le){if(!Le)throw Error(l(198));var c=Oe;Le=!1,Oe=null,Me||(Me=!0,Fe=c)}}(a,t,void 0,e),e.currentTarget=null}function Va(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],r=a.event;a=a.listeners;e:{var l=void 0;if(t)for(var n=a.length-1;0<=n;n--){var i=a[n],o=i.instance,d=i.currentTarget;if(i=i.listener,o!==l&&r.isPropagationStopped())break e;Ha(r,i,d),l=o}else for(n=0;n<a.length;n++){if(o=(i=a[n]).instance,d=i.currentTarget,i=i.listener,o!==l&&r.isPropagationStopped())break e;Ha(r,i,d),l=o}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Ja(e,t){var s=t[Nr];void 0===s&&(s=t[Nr]=new Set);var a=e+"__bubble";s.has(a)||(Ya(t,e,2,!1),s.add(a))}function Ka(e,t,s){var a=0;t&&(a|=4),Ya(s,e,a,t)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function Ga(e){if(!e[Qa]){e[Qa]=!0,n.forEach(function(t){"selectionchange"!==t&&(Wa.has(t)||Ka(t,!1,e),Ka(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qa]||(t[Qa]=!0,Ka("selectionchange",!1,t))}}function Ya(e,t,s,a){switch(Gt(t)){case 1:var r=Ht;break;case 4:r=Vt;break;default:r=Jt}s=r.bind(null,t,s,e),r=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(r=!0),a?void 0!==r?e.addEventListener(t,s,{capture:!0,passive:r}):e.addEventListener(t,s,!0):void 0!==r?e.addEventListener(t,s,{passive:r}):e.addEventListener(t,s,!1)}function $a(e,t,s,a,r){var l=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var n=a.tag;if(3===n||4===n){var i=a.stateNode.containerInfo;if(i===r||8===i.nodeType&&i.parentNode===r)break;if(4===n)for(n=a.return;null!==n;){var o=n.tag;if((3===o||4===o)&&((o=n.stateNode.containerInfo)===r||8===o.nodeType&&o.parentNode===r))return;n=n.return}for(;null!==i;){if(null===(n=kr(i)))return;if(5===(o=n.tag)||6===o){a=l=n;continue e}i=i.parentNode}}a=a.return}Ie(function(){var a=l,r=ve(s),n=[];e:{var i=Oa.get(e);if(void 0!==i){var o=os,d=e;switch(e){case"keypress":if(0===es(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":d="focus",o=hs;break;case"focusout":d="blur",o=hs;break;case"beforeblur":case"afterblur":o=hs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=As;break;case Da:case Ea:case Ra:o=ps;break;case La:o=Ps;break;case"scroll":o=cs;break;case"wheel":o=Is;break;case"copy":case"cut":case"paste":o=gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=ks}var c=0!==(4&t),u=!c&&"scroll"===e,m=c?null!==i?i+"Capture":null:i;c=[];for(var x,h=a;null!==h;){var p=(x=h).stateNode;if(5===x.tag&&null!==p&&(x=p,null!==m&&(null!=(p=_e(h,m))&&c.push(Za(h,p,x)))),u)break;h=h.return}0<c.length&&(i=new o(i,d,null,s,r),n.push({event:i,listeners:c}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===ye||!(d=s.relatedTarget||s.fromElement)||!kr(d)&&!d[wr])&&(o||i)&&(i=r.window===r?r:(i=r.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=a,null!==(d=(d=s.relatedTarget||s.toElement)?kr(d):null)&&(d!==(u=Ue(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(o=null,d=a),o!==d)){if(c=ms,p="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=ks,p="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==o?i:Pr(o),x=null==d?i:Pr(d),(i=new c(p,h+"leave",o,s,r)).target=u,i.relatedTarget=x,p=null,kr(r)===a&&((c=new c(m,h+"enter",d,s,r)).target=x,c.relatedTarget=u,p=c),u=p,o&&d)e:{for(m=d,h=0,x=c=o;x;x=er(x))h++;for(x=0,p=m;p;p=er(p))x++;for(;0<h-x;)c=er(c),h--;for(;0<x-h;)m=er(m),x--;for(;h--;){if(c===m||null!==m&&c===m.alternate)break e;c=er(c),m=er(m)}c=null}else c=null;null!==o&&tr(n,i,o,c,!1),null!==d&&null!==u&&tr(n,u,d,c,!0)}if("select"===(o=(i=a?Pr(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===o&&"file"===i.type)var b=Qs;else if(zs(i))if(Gs)b=ra;else{b=sa;var g=ta}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(b=aa);switch(b&&(b=b(e,a))?Ws(n,b,s,r):(g&&g(e,i,a),"focusout"===e&&(g=i._wrapperState)&&g.controlled&&"number"===i.type&&ee(i,"number",i.value)),g=a?Pr(a):window,e){case"focusin":(zs(g)||"true"===g.contentEditable)&&(wa=g,Na=a,Sa=null);break;case"focusout":Sa=Na=wa=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,ka(n,s,r);break;case"selectionchange":if(ja)break;case"keydown":case"keyup":ka(n,s,r)}var f;if(Ds)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qs?Fs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Ls&&"ko"!==s.locale&&(qs||"onCompositionStart"!==y?"onCompositionEnd"===y&&qs&&(f=Xt()):($t="value"in(Yt=r)?Yt.value:Yt.textContent,qs=!0)),0<(g=Xa(a,y)).length&&(y=new fs(y,e,null,s,r),n.push({event:y,listeners:g}),f?y.data=f:null!==(f=Bs(s))&&(y.data=f))),(f=Rs?function(e,t){switch(e){case"compositionend":return Bs(t);case"keypress":return 32!==t.which?null:(Ms=!0,Os);case"textInput":return(e=t.data)===Os&&Ms?null:e;default:return null}}(e,s):function(e,t){if(qs)return"compositionend"===e||!Ds&&Fs(e,t)?(e=Xt(),Zt=$t=Yt=null,qs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ls&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(a=Xa(a,"onBeforeInput")).length&&(r=new fs("onBeforeInput","beforeinput",null,s,r),n.push({event:r,listeners:a}),r.data=f))}Va(n,t)})}function Za(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Xa(e,t){for(var s=t+"Capture",a=[];null!==e;){var r=e,l=r.stateNode;5===r.tag&&null!==l&&(r=l,null!=(l=_e(e,s))&&a.unshift(Za(e,l,r)),null!=(l=_e(e,t))&&a.push(Za(e,l,r))),e=e.return}return a}function er(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function tr(e,t,s,a,r){for(var l=t._reactName,n=[];null!==s&&s!==a;){var i=s,o=i.alternate,d=i.stateNode;if(null!==o&&o===a)break;5===i.tag&&null!==d&&(i=d,r?null!=(o=_e(s,l))&&n.unshift(Za(s,o,i)):r||null!=(o=_e(s,l))&&n.push(Za(s,o,i))),s=s.return}0!==n.length&&e.push({event:t,listeners:n})}var sr=/\r\n?/g,ar=/\u0000|\uFFFD/g;function lr(e){return("string"===typeof e?e:""+e).replace(sr,"\n").replace(ar,"")}function nr(e,t,s){if(t=lr(t),lr(e)!==t&&s)throw Error(l(425))}function ir(){}var or=null,dr=null;function cr(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ur="function"===typeof setTimeout?setTimeout:void 0,mr="function"===typeof clearTimeout?clearTimeout:void 0,xr="function"===typeof Promise?Promise:void 0,hr="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof xr?function(e){return xr.resolve(null).then(e).catch(pr)}:ur;function pr(e){setTimeout(function(){throw e})}function br(e,t){var s=t,a=0;do{var r=s.nextSibling;if(e.removeChild(s),r&&8===r.nodeType)if("/$"===(s=r.data)){if(0===a)return e.removeChild(r),void Ut(t);a--}else"$"!==s&&"$?"!==s&&"$!"!==s||a++;s=r}while(s);Ut(t)}function gr(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function fr(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var yr=Math.random().toString(36).slice(2),vr="__reactFiber$"+yr,jr="__reactProps$"+yr,wr="__reactContainer$"+yr,Nr="__reactEvents$"+yr,Sr="__reactListeners$"+yr,Cr="__reactHandles$"+yr;function kr(e){var t=e[vr];if(t)return t;for(var s=e.parentNode;s;){if(t=s[wr]||s[vr]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=fr(e);null!==e;){if(s=e[vr])return s;e=fr(e)}return t}s=(e=s).parentNode}return null}function Ar(e){return!(e=e[vr]||e[wr])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Pr(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(l(33))}function Tr(e){return e[jr]||null}var Ir=[],_r=-1;function Dr(e){return{current:e}}function Er(e){0>_r||(e.current=Ir[_r],Ir[_r]=null,_r--)}function Rr(e,t){_r++,Ir[_r]=e.current,e.current=t}var Lr={},Or=Dr(Lr),Mr=Dr(!1),Fr=Lr;function Br(e,t){var s=e.type.contextTypes;if(!s)return Lr;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var r,l={};for(r in s)l[r]=t[r];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function qr(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ur(){Er(Mr),Er(Or)}function zr(e,t,s){if(Or.current!==Lr)throw Error(l(168));Rr(Or,t),Rr(Mr,s)}function Wr(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return s;for(var r in a=a.getChildContext())if(!(r in t))throw Error(l(108,W(e)||"Unknown",r));return M({},s,a)}function Hr(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Lr,Fr=Or.current,Rr(Or,e),Rr(Mr,Mr.current),!0}function Vr(e,t,s){var a=e.stateNode;if(!a)throw Error(l(169));s?(e=Wr(e,t,Fr),a.__reactInternalMemoizedMergedChildContext=e,Er(Mr),Er(Or),Rr(Or,e)):Er(Mr),Rr(Mr,s)}var Jr=null,Kr=!1,Qr=!1;function Gr(e){null===Jr?Jr=[e]:Jr.push(e)}function Yr(){if(!Qr&&null!==Jr){Qr=!0;var e=0,t=ft;try{var s=Jr;for(ft=1;e<s.length;e++){var a=s[e];do{a=a(!0)}while(null!==a)}Jr=null,Kr=!1}catch(ia){throw null!==Jr&&(Jr=Jr.slice(e+1)),Je(Ze,Yr),ia}finally{ft=t,Qr=!1}}return null}var $r=[],Zr=0,Xr=null,el=0,tl=[],sl=0,al=null,rl=1,ll="";function nl(e,t){$r[Zr++]=el,$r[Zr++]=Xr,Xr=e,el=t}function il(e,t,s){tl[sl++]=rl,tl[sl++]=ll,tl[sl++]=al,al=e;var a=rl;e=ll;var r=32-lt(a)-1;a&=~(1<<r),s+=1;var l=32-lt(t)+r;if(30<l){var n=r-r%5;l=(a&(1<<n)-1).toString(32),a>>=n,r-=n,rl=1<<32-lt(t)+r|s<<r|a,ll=l+e}else rl=1<<l|s<<r|a,ll=e}function ol(e){null!==e.return&&(nl(e,1),il(e,1,0))}function dl(e){for(;e===Xr;)Xr=$r[--Zr],$r[Zr]=null,el=$r[--Zr],$r[Zr]=null;for(;e===al;)al=tl[--sl],tl[sl]=null,ll=tl[--sl],tl[sl]=null,rl=tl[--sl],tl[sl]=null}var cl=null,ul=null,ml=!1,xl=null;function hl(e,t){var s=qd(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function pl(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,cl=e,ul=gr(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,cl=e,ul=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==al?{id:rl,overflow:ll}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=qd(18,null,null,0)).stateNode=t,s.return=e,e.child=s,cl=e,ul=null,!0);default:return!1}}function bl(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function gl(e){if(ml){var t=ul;if(t){var s=t;if(!pl(e,t)){if(bl(e))throw Error(l(418));t=gr(s.nextSibling);var a=cl;t&&pl(e,t)?hl(a,s):(e.flags=-4097&e.flags|2,ml=!1,cl=e)}}else{if(bl(e))throw Error(l(418));e.flags=-4097&e.flags|2,ml=!1,cl=e}}}function fl(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;cl=e}function yl(e){if(e!==cl)return!1;if(!ml)return fl(e),ml=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!cr(e.type,e.memoizedProps)),t&&(t=ul)){if(bl(e))throw vl(),Error(l(418));for(;t;)hl(e,t),t=gr(t.nextSibling)}if(fl(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(l(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){ul=gr(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}ul=null}}else ul=cl?gr(e.stateNode.nextSibling):null;return!0}function vl(){for(var e=ul;e;)e=gr(e.nextSibling)}function jl(){ul=cl=null,ml=!1}function wl(e){null===xl?xl=[e]:xl.push(e)}var Nl=v.ReactCurrentBatchConfig;function Sl(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(l(309));var a=s.stateNode}if(!a)throw Error(l(147,e));var r=a,n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:(t=function(e){var t=r.refs;null===e?delete t[n]:t[n]=e},t._stringRef=n,t)}if("string"!==typeof e)throw Error(l(284));if(!s._owner)throw Error(l(290,e))}return e}function Cl(e,t){throw e=Object.prototype.toString.call(t),Error(l(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kl(e){return(0,e._init)(e._payload)}function Al(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function r(e,t){return(e=zd(e,t)).index=0,e.sibling=null,e}function n(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=2,s):a:(t.flags|=2,s):(t.flags|=1048576,s)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=Jd(s,e.mode,a)).return=e,t):((t=r(t,s)).return=e,t)}function d(e,t,s,a){var l=s.type;return l===N?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===l||"object"===typeof l&&null!==l&&l.$$typeof===D&&kl(l)===t.type)?((a=r(t,s.props)).ref=Sl(e,t,s),a.return=e,a):((a=Wd(s.type,s.key,s.props,null,e.mode,a)).ref=Sl(e,t,s),a.return=e,a)}function c(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Kd(s,e.mode,a)).return=e,t):((t=r(t,s.children||[])).return=e,t)}function u(e,t,s,a,l){return null===t||7!==t.tag?((t=Hd(s,e.mode,a,l)).return=e,t):((t=r(t,s)).return=e,t)}function m(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Jd(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Wd(t.type,t.key,t.props,null,e.mode,s)).ref=Sl(e,null,t),s.return=e,s;case w:return(t=Kd(t,e.mode,s)).return=e,t;case D:return m(e,(0,t._init)(t._payload),s)}if(te(t)||L(t))return(t=Hd(t,e.mode,s,null)).return=e,t;Cl(e,t)}return null}function x(e,t,s,a){var r=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==r?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===r?d(e,t,s,a):null;case w:return s.key===r?c(e,t,s,a):null;case D:return x(e,t,(r=s._init)(s._payload),a)}if(te(s)||L(s))return null!==r?null:u(e,t,s,a,null);Cl(e,s)}return null}function h(e,t,s,a,r){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(s)||null,""+a,r);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return d(t,e=e.get(null===a.key?s:a.key)||null,a,r);case w:return c(t,e=e.get(null===a.key?s:a.key)||null,a,r);case D:return h(e,t,s,(0,a._init)(a._payload),r)}if(te(a)||L(a))return u(t,e=e.get(s)||null,a,r,null);Cl(t,a)}return null}function p(r,l,i,o){for(var d=null,c=null,u=l,p=l=0,b=null;null!==u&&p<i.length;p++){u.index>p?(b=u,u=null):b=u.sibling;var g=x(r,u,i[p],o);if(null===g){null===u&&(u=b);break}e&&u&&null===g.alternate&&t(r,u),l=n(g,l,p),null===c?d=g:c.sibling=g,c=g,u=b}if(p===i.length)return s(r,u),ml&&nl(r,p),d;if(null===u){for(;p<i.length;p++)null!==(u=m(r,i[p],o))&&(l=n(u,l,p),null===c?d=u:c.sibling=u,c=u);return ml&&nl(r,p),d}for(u=a(r,u);p<i.length;p++)null!==(b=h(u,r,p,i[p],o))&&(e&&null!==b.alternate&&u.delete(null===b.key?p:b.key),l=n(b,l,p),null===c?d=b:c.sibling=b,c=b);return e&&u.forEach(function(e){return t(r,e)}),ml&&nl(r,p),d}function b(r,i,o,d){var c=L(o);if("function"!==typeof c)throw Error(l(150));if(null==(o=c.call(o)))throw Error(l(151));for(var u=c=null,p=i,b=i=0,g=null,f=o.next();null!==p&&!f.done;b++,f=o.next()){p.index>b?(g=p,p=null):g=p.sibling;var y=x(r,p,f.value,d);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(r,p),i=n(y,i,b),null===u?c=y:u.sibling=y,u=y,p=g}if(f.done)return s(r,p),ml&&nl(r,b),c;if(null===p){for(;!f.done;b++,f=o.next())null!==(f=m(r,f.value,d))&&(i=n(f,i,b),null===u?c=f:u.sibling=f,u=f);return ml&&nl(r,b),c}for(p=a(r,p);!f.done;b++,f=o.next())null!==(f=h(p,r,b,f.value,d))&&(e&&null!==f.alternate&&p.delete(null===f.key?b:f.key),i=n(f,i,b),null===u?c=f:u.sibling=f,u=f);return e&&p.forEach(function(e){return t(r,e)}),ml&&nl(r,b),c}return function e(a,l,n,o){if("object"===typeof n&&null!==n&&n.type===N&&null===n.key&&(n=n.props.children),"object"===typeof n&&null!==n){switch(n.$$typeof){case j:e:{for(var d=n.key,c=l;null!==c;){if(c.key===d){if((d=n.type)===N){if(7===c.tag){s(a,c.sibling),(l=r(c,n.props.children)).return=a,a=l;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===D&&kl(d)===c.type){s(a,c.sibling),(l=r(c,n.props)).ref=Sl(a,c,n),l.return=a,a=l;break e}s(a,c);break}t(a,c),c=c.sibling}n.type===N?((l=Hd(n.props.children,a.mode,o,n.key)).return=a,a=l):((o=Wd(n.type,n.key,n.props,null,a.mode,o)).ref=Sl(a,l,n),o.return=a,a=o)}return i(a);case w:e:{for(c=n.key;null!==l;){if(l.key===c){if(4===l.tag&&l.stateNode.containerInfo===n.containerInfo&&l.stateNode.implementation===n.implementation){s(a,l.sibling),(l=r(l,n.children||[])).return=a,a=l;break e}s(a,l);break}t(a,l),l=l.sibling}(l=Kd(n,a.mode,o)).return=a,a=l}return i(a);case D:return e(a,l,(c=n._init)(n._payload),o)}if(te(n))return p(a,l,n,o);if(L(n))return b(a,l,n,o);Cl(a,n)}return"string"===typeof n&&""!==n||"number"===typeof n?(n=""+n,null!==l&&6===l.tag?(s(a,l.sibling),(l=r(l,n)).return=a,a=l):(s(a,l),(l=Jd(n,a.mode,o)).return=a,a=l),i(a)):s(a,l)}}var Pl=Al(!0),Tl=Al(!1),Il=Dr(null),_l=null,Dl=null,El=null;function Rl(){El=Dl=_l=null}function Ll(e){var t=Il.current;Er(Il),e._currentValue=t}function Ol(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Ml(e,t){_l=e,El=Dl=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Ai=!0),e.firstContext=null)}function Fl(e){var t=e._currentValue;if(El!==e)if(e={context:e,memoizedValue:t,next:null},null===Dl){if(null===_l)throw Error(l(308));Dl=e,_l.dependencies={lanes:0,firstContext:e}}else Dl=Dl.next=e;return t}var Bl=null;function ql(e){null===Bl?Bl=[e]:Bl.push(e)}function Ul(e,t,s,a){var r=t.interleaved;return null===r?(s.next=s,ql(t)):(s.next=r.next,r.next=s),t.interleaved=s,zl(e,a)}function zl(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Wl=!1;function Hl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kl(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Mo)){var r=a.pending;return null===r?t.next=t:(t.next=r.next,r.next=t),a.pending=t,zl(e,s)}return null===(r=a.interleaved)?(t.next=t,ql(a)):(t.next=r.next,r.next=t),a.interleaved=t,zl(e,s)}function Ql(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,gt(e,s)}}function Gl(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var r=null,l=null;if(null!==(s=s.firstBaseUpdate)){do{var n={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===l?r=l=n:l=l.next=n,s=s.next}while(null!==s);null===l?r=l=t:l=l.next=t}else r=l=t;return s={baseState:a.baseState,firstBaseUpdate:r,lastBaseUpdate:l,shared:a.shared,effects:a.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Yl(e,t,s,a){var r=e.updateQueue;Wl=!1;var l=r.firstBaseUpdate,n=r.lastBaseUpdate,i=r.shared.pending;if(null!==i){r.shared.pending=null;var o=i,d=o.next;o.next=null,null===n?l=d:n.next=d,n=o;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==n&&(null===i?c.firstBaseUpdate=d:i.next=d,c.lastBaseUpdate=o))}if(null!==l){var u=r.baseState;for(n=0,c=d=o=null,i=l;;){var m=i.lane,x=i.eventTime;if((a&m)===m){null!==c&&(c=c.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,p=i;switch(m=t,x=s,p.tag){case 1:if("function"===typeof(h=p.payload)){u=h.call(x,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(m="function"===typeof(h=p.payload)?h.call(x,u,m):h)||void 0===m)break e;u=M({},u,m);break e;case 2:Wl=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(m=r.effects)?r.effects=[i]:m.push(i))}else x={eventTime:x,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(d=c=x,o=u):c=c.next=x,n|=m;if(null===(i=i.next)){if(null===(i=r.shared.pending))break;i=(m=i).next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}if(null===c&&(o=u),r.baseState=o,r.firstBaseUpdate=d,r.lastBaseUpdate=c,null!==(t=r.shared.interleaved)){r=t;do{n|=r.lane,r=r.next}while(r!==t)}else null===l&&(r.shared.lanes=0);Vo|=n,e.lanes=n,e.memoizedState=u}}function $l(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],r=a.callback;if(null!==r){if(a.callback=null,a=s,"function"!==typeof r)throw Error(l(191,r));r.call(a)}}}var Zl={},Xl=Dr(Zl),en=Dr(Zl),tn=Dr(Zl);function sn(e){if(e===Zl)throw Error(l(174));return e}function an(e,t){switch(Rr(tn,t),Rr(en,e),Rr(Xl,Zl),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Er(Xl),Rr(Xl,t)}function rn(){Er(Xl),Er(en),Er(tn)}function ln(e){sn(tn.current);var t=sn(Xl.current),s=oe(t,e.type);t!==s&&(Rr(en,e),Rr(Xl,s))}function nn(e){en.current===e&&(Er(Xl),Er(en))}var on=Dr(0);function dn(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cn=[];function un(){for(var e=0;e<cn.length;e++)cn[e]._workInProgressVersionPrimary=null;cn.length=0}var mn=v.ReactCurrentDispatcher,xn=v.ReactCurrentBatchConfig,hn=0,pn=null,bn=null,gn=null,fn=!1,yn=!1,vn=0,jn=0;function wn(){throw Error(l(321))}function Nn(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!la(e[s],t[s]))return!1;return!0}function Sn(e,t,s,a,r,n){if(hn=n,pn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mn.current=null===e||null===e.memoizedState?ii:oi,e=s(a,r),yn){n=0;do{if(yn=!1,vn=0,25<=n)throw Error(l(301));n+=1,gn=bn=null,t.updateQueue=null,mn.current=di,e=s(a,r)}while(yn)}if(mn.current=ni,t=null!==bn&&null!==bn.next,hn=0,gn=bn=pn=null,fn=!1,t)throw Error(l(300));return e}function Cn(){var e=0!==vn;return vn=0,e}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gn?pn.memoizedState=gn=e:gn=gn.next=e,gn}function An(){if(null===bn){var e=pn.alternate;e=null!==e?e.memoizedState:null}else e=bn.next;var t=null===gn?pn.memoizedState:gn.next;if(null!==t)gn=t,bn=e;else{if(null===e)throw Error(l(310));e={memoizedState:(bn=e).memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},null===gn?pn.memoizedState=gn=e:gn=gn.next=e}return gn}function Pn(e,t){return"function"===typeof t?t(e):t}function Tn(e){var t=An(),s=t.queue;if(null===s)throw Error(l(311));s.lastRenderedReducer=e;var a=bn,r=a.baseQueue,n=s.pending;if(null!==n){if(null!==r){var i=r.next;r.next=n.next,n.next=i}a.baseQueue=r=n,s.pending=null}if(null!==r){n=r.next,a=a.baseState;var o=i=null,d=null,c=n;do{var u=c.lane;if((hn&u)===u)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(o=d=m,i=a):d=d.next=m,pn.lanes|=u,Vo|=u}c=c.next}while(null!==c&&c!==n);null===d?i=a:d.next=o,la(a,t.memoizedState)||(Ai=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=d,s.lastRenderedState=a}if(null!==(e=s.interleaved)){r=e;do{n=r.lane,pn.lanes|=n,Vo|=n,r=r.next}while(r!==e)}else null===r&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function In(e){var t=An(),s=t.queue;if(null===s)throw Error(l(311));s.lastRenderedReducer=e;var a=s.dispatch,r=s.pending,n=t.memoizedState;if(null!==r){s.pending=null;var i=r=r.next;do{n=e(n,i.action),i=i.next}while(i!==r);la(n,t.memoizedState)||(Ai=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),s.lastRenderedState=n}return[n,a]}function _n(){}function Dn(e,t){var s=pn,a=An(),r=t(),n=!la(a.memoizedState,r);if(n&&(a.memoizedState=r,Ai=!0),a=a.queue,Hn(Ln.bind(null,s,a,e),[e]),a.getSnapshot!==t||n||null!==gn&&1&gn.memoizedState.tag){if(s.flags|=2048,Bn(9,Rn.bind(null,s,a,r,t),void 0,null),null===Fo)throw Error(l(349));0!==(30&hn)||En(s,t,r)}return r}function En(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=pn.updateQueue)?(t={lastEffect:null,stores:null},pn.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Rn(e,t,s,a){t.value=s,t.getSnapshot=a,On(t)&&Mn(e)}function Ln(e,t,s){return s(function(){On(t)&&Mn(e)})}function On(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!la(e,s)}catch(ga){return!0}}function Mn(e){var t=zl(e,1);null!==t&&ud(t,e,1,-1)}function Fn(e){var t=kn();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pn,lastRenderedState:e},t.queue=e,e=e.dispatch=si.bind(null,pn,e),[t.memoizedState,e]}function Bn(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},null===(t=pn.updateQueue)?(t={lastEffect:null,stores:null},pn.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function qn(){return An().memoizedState}function Un(e,t,s,a){var r=kn();pn.flags|=e,r.memoizedState=Bn(1|t,s,void 0,void 0===a?null:a)}function zn(e,t,s,a){var r=An();a=void 0===a?null:a;var l=void 0;if(null!==bn){var n=bn.memoizedState;if(l=n.destroy,null!==a&&Nn(a,n.deps))return void(r.memoizedState=Bn(t,s,l,a))}pn.flags|=e,r.memoizedState=Bn(1|t,s,l,a)}function Wn(e,t){return Un(8390656,8,e,t)}function Hn(e,t){return zn(2048,8,e,t)}function Vn(e,t){return zn(4,2,e,t)}function Jn(e,t){return zn(4,4,e,t)}function Kn(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qn(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,zn(4,4,Kn.bind(null,t,e),s)}function Gn(){}function Yn(e,t){var s=An();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&Nn(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function $n(e,t){var s=An();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&Nn(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Zn(e,t,s){return 0===(21&hn)?(e.baseState&&(e.baseState=!1,Ai=!0),e.memoizedState=s):(la(s,t)||(s=ht(),pn.lanes|=s,Vo|=s,e.baseState=!0),t)}function Xn(e,t){var s=ft;ft=0!==s&&4>s?s:4,e(!0);var a=xn.transition;xn.transition={};try{e(!1),t()}finally{ft=s,xn.transition=a}}function ei(){return An().memoizedState}function ti(e,t,s){var a=cd(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},ai(e))ri(t,s);else if(null!==(s=Ul(e,t,s,a))){ud(s,e,a,dd()),li(s,t,a)}}function si(e,t,s){var a=cd(e),r={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(ai(e))ri(t,r);else{var l=e.alternate;if(0===e.lanes&&(null===l||0===l.lanes)&&null!==(l=t.lastRenderedReducer))try{var n=t.lastRenderedState,i=l(n,s);if(r.hasEagerState=!0,r.eagerState=i,la(i,n)){var o=t.interleaved;return null===o?(r.next=r,ql(t)):(r.next=o.next,o.next=r),void(t.interleaved=r)}}catch(da){}null!==(s=Ul(e,t,r,a))&&(ud(s,e,a,r=dd()),li(s,t,a))}}function ai(e){var t=e.alternate;return e===pn||null!==t&&t===pn}function ri(e,t){yn=fn=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function li(e,t,s){if(0!==(4194240&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,gt(e,s)}}var ni={readContext:Fl,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},ii={readContext:Fl,useCallback:function(e,t){return kn().memoizedState=[e,void 0===t?null:t],e},useContext:Fl,useEffect:Wn,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Un(4194308,4,Kn.bind(null,t,e),s)},useLayoutEffect:function(e,t){return Un(4194308,4,e,t)},useInsertionEffect:function(e,t){return Un(4,2,e,t)},useMemo:function(e,t){var s=kn();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=kn();return t=void 0!==s?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ti.bind(null,pn,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},kn().memoizedState=e},useState:Fn,useDebugValue:Gn,useDeferredValue:function(e){return kn().memoizedState=e},useTransition:function(){var e=Fn(!1),t=e[0];return e=Xn.bind(null,e[1]),kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=pn,r=kn();if(ml){if(void 0===s)throw Error(l(407));s=s()}else{if(s=t(),null===Fo)throw Error(l(349));0!==(30&hn)||En(a,t,s)}r.memoizedState=s;var n={value:s,getSnapshot:t};return r.queue=n,Wn(Ln.bind(null,a,n,e),[e]),a.flags|=2048,Bn(9,Rn.bind(null,a,n,s,t),void 0,null),s},useId:function(){var e=kn(),t=Fo.identifierPrefix;if(ml){var s=ll;t=":"+t+"R"+(s=(rl&~(1<<32-lt(rl)-1)).toString(32)+s),0<(s=vn++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=jn++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oi={readContext:Fl,useCallback:Yn,useContext:Fl,useEffect:Hn,useImperativeHandle:Qn,useInsertionEffect:Vn,useLayoutEffect:Jn,useMemo:$n,useReducer:Tn,useRef:qn,useState:function(){return Tn(Pn)},useDebugValue:Gn,useDeferredValue:function(e){return Zn(An(),bn.memoizedState,e)},useTransition:function(){return[Tn(Pn)[0],An().memoizedState]},useMutableSource:_n,useSyncExternalStore:Dn,useId:ei,unstable_isNewReconciler:!1},di={readContext:Fl,useCallback:Yn,useContext:Fl,useEffect:Hn,useImperativeHandle:Qn,useInsertionEffect:Vn,useLayoutEffect:Jn,useMemo:$n,useReducer:In,useRef:qn,useState:function(){return In(Pn)},useDebugValue:Gn,useDeferredValue:function(e){var t=An();return null===bn?t.memoizedState=e:Zn(t,bn.memoizedState,e)},useTransition:function(){return[In(Pn)[0],An().memoizedState]},useMutableSource:_n,useSyncExternalStore:Dn,useId:ei,unstable_isNewReconciler:!1};function ci(e,t){if(e&&e.defaultProps){for(var s in t=M({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function ui(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:M({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var mi={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=dd(),r=cd(e),l=Jl(a,r);l.payload=t,void 0!==s&&null!==s&&(l.callback=s),null!==(t=Kl(e,l,r))&&(ud(t,e,r,a),Ql(t,e,r))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=dd(),r=cd(e),l=Jl(a,r);l.tag=1,l.payload=t,void 0!==s&&null!==s&&(l.callback=s),null!==(t=Kl(e,l,r))&&(ud(t,e,r,a),Ql(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=dd(),a=cd(e),r=Jl(s,a);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=Kl(e,r,a))&&(ud(t,e,a,s),Ql(t,e,a))}};function xi(e,t,s,a,r,l,n){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,l,n):!t.prototype||!t.prototype.isPureReactComponent||(!na(s,a)||!na(r,l))}function hi(e,t,s){var a=!1,r=Lr,l=t.contextType;return"object"===typeof l&&null!==l?l=Fl(l):(r=qr(t)?Fr:Or.current,l=(a=null!==(a=t.contextTypes)&&void 0!==a)?Br(e,r):Lr),t=new t(s,l),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mi,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=l),t}function pi(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function bi(e,t,s,a){var r=e.stateNode;r.props=s,r.state=e.memoizedState,r.refs={},Hl(e);var l=t.contextType;"object"===typeof l&&null!==l?r.context=Fl(l):(l=qr(t)?Fr:Or.current,r.context=Br(e,l)),r.state=e.memoizedState,"function"===typeof(l=t.getDerivedStateFromProps)&&(ui(e,t,l,s),r.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof r.getSnapshotBeforeUpdate||"function"!==typeof r.UNSAFE_componentWillMount&&"function"!==typeof r.componentWillMount||(t=r.state,"function"===typeof r.componentWillMount&&r.componentWillMount(),"function"===typeof r.UNSAFE_componentWillMount&&r.UNSAFE_componentWillMount(),t!==r.state&&mi.enqueueReplaceState(r,r.state,null),Yl(e,s,r,a),r.state=e.memoizedState),"function"===typeof r.componentDidMount&&(e.flags|=4194308)}function gi(e,t){try{var s="",a=t;do{s+=U(a),a=a.return}while(a);var r=s}catch(fa){r="\nError generating stack: "+fa.message+"\n"+fa.stack}return{value:e,source:t,stack:r,digest:null}}function fi(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function yi(e,t){try{console.error(t.value)}catch(xa){setTimeout(function(){throw xa})}}var vi="function"===typeof WeakMap?WeakMap:Map;function ji(e,t,s){(s=Jl(-1,s)).tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Xo||(Xo=!0,ed=a),yi(0,t)},s}function wi(e,t,s){(s=Jl(-1,s)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var r=t.value;s.payload=function(){return a(r)},s.callback=function(){yi(0,t)}}var l=e.stateNode;return null!==l&&"function"===typeof l.componentDidCatch&&(s.callback=function(){yi(0,t),"function"!==typeof a&&(null===td?td=new Set([this]):td.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function Ni(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new vi;var r=new Set;a.set(t,r)}else void 0===(r=a.get(t))&&(r=new Set,a.set(t,r));r.has(s)||(r.add(s),e=Rd.bind(null,e,t,s),t.then(e,e))}function Si(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ci(e,t,s,a,r){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Jl(-1,1)).tag=2,Kl(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=r,e)}var ki=v.ReactCurrentOwner,Ai=!1;function Pi(e,t,s,a){t.child=null===e?Tl(t,null,s,a):Pl(t,e.child,s,a)}function Ti(e,t,s,a,r){s=s.render;var l=t.ref;return Ml(t,r),a=Sn(e,t,s,a,l,r),s=Cn(),null===e||Ai?(ml&&s&&ol(t),t.flags|=1,Pi(e,t,a,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Zi(e,t,r))}function Ii(e,t,s,a,r){if(null===e){var l=s.type;return"function"!==typeof l||Ud(l)||void 0!==l.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Wd(s.type,null,a,t,t.mode,r)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=l,_i(e,t,l,a,r))}if(l=e.child,0===(e.lanes&r)){var n=l.memoizedProps;if((s=null!==(s=s.compare)?s:na)(n,a)&&e.ref===t.ref)return Zi(e,t,r)}return t.flags|=1,(e=zd(l,a)).ref=t.ref,e.return=t,t.child=e}function _i(e,t,s,a,r){if(null!==e){var l=e.memoizedProps;if(na(l,a)&&e.ref===t.ref){if(Ai=!1,t.pendingProps=a=l,0===(e.lanes&r))return t.lanes=e.lanes,Zi(e,t,r);0!==(131072&e.flags)&&(Ai=!0)}}return Ri(e,t,s,a,r)}function Di(e,t,s){var a=t.pendingProps,r=a.children,l=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rr(zo,Uo),Uo|=s;else{if(0===(1073741824&s))return e=null!==l?l.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Rr(zo,Uo),Uo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==l?l.baseLanes:s,Rr(zo,Uo),Uo|=a}else null!==l?(a=l.baseLanes|s,t.memoizedState=null):a=s,Rr(zo,Uo),Uo|=a;return Pi(e,t,r,s),t.child}function Ei(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ri(e,t,s,a,r){var l=qr(s)?Fr:Or.current;return l=Br(t,l),Ml(t,r),s=Sn(e,t,s,a,l,r),a=Cn(),null===e||Ai?(ml&&a&&ol(t),t.flags|=1,Pi(e,t,s,r),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Zi(e,t,r))}function Li(e,t,s,a,r){if(qr(s)){var l=!0;Hr(t)}else l=!1;if(Ml(t,r),null===t.stateNode)$i(e,t),hi(t,s,a),bi(t,s,a,r),a=!0;else if(null===e){var n=t.stateNode,i=t.memoizedProps;n.props=i;var o=n.context,d=s.contextType;"object"===typeof d&&null!==d?d=Fl(d):d=Br(t,d=qr(s)?Fr:Or.current);var c=s.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof n.getSnapshotBeforeUpdate;u||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==a||o!==d)&&pi(t,n,a,d),Wl=!1;var m=t.memoizedState;n.state=m,Yl(t,a,n,r),o=t.memoizedState,i!==a||m!==o||Mr.current||Wl?("function"===typeof c&&(ui(t,s,c,a),o=t.memoizedState),(i=Wl||xi(t,s,i,a,m,o,d))?(u||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.flags|=4194308)):("function"===typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),n.props=a,n.state=o,n.context=d,a=i):("function"===typeof n.componentDidMount&&(t.flags|=4194308),a=!1)}else{n=t.stateNode,Vl(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ci(t.type,i),n.props=d,u=t.pendingProps,m=n.context,"object"===typeof(o=s.contextType)&&null!==o?o=Fl(o):o=Br(t,o=qr(s)?Fr:Or.current);var x=s.getDerivedStateFromProps;(c="function"===typeof x||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==u||m!==o)&&pi(t,n,a,o),Wl=!1,m=t.memoizedState,n.state=m,Yl(t,a,n,r);var h=t.memoizedState;i!==u||m!==h||Mr.current||Wl?("function"===typeof x&&(ui(t,s,x,a),h=t.memoizedState),(d=Wl||xi(t,s,d,a,m,h,o)||!1)?(c||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(a,h,o),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(a,h,o)),"function"===typeof n.componentDidUpdate&&(t.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),n.props=a,n.state=h,n.context=o,a=d):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Oi(e,t,s,a,l,r)}function Oi(e,t,s,a,r,l){Ei(e,t);var n=0!==(128&t.flags);if(!a&&!n)return r&&Vr(t,s,!1),Zi(e,t,l);a=t.stateNode,ki.current=t;var i=n&&"function"!==typeof s.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&n?(t.child=Pl(t,e.child,null,l),t.child=Pl(t,null,i,l)):Pi(e,t,i,l),t.memoizedState=a.state,r&&Vr(t,s,!0),t.child}function Mi(e){var t=e.stateNode;t.pendingContext?zr(0,t.pendingContext,t.pendingContext!==t.context):t.context&&zr(0,t.context,!1),an(e,t.containerInfo)}function Fi(e,t,s,a,r){return jl(),wl(r),t.flags|=256,Pi(e,t,s,a),t.child}var Bi,qi,Ui,zi,Wi={dehydrated:null,treeContext:null,retryLane:0};function Hi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vi(e,t,s){var a,r=t.pendingProps,n=on.current,i=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&n)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(n|=1),Rr(on,1&n),null===e)return gl(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=r.children,e=r.fallback,i?(r=t.mode,i=t.child,o={mode:"hidden",children:o},0===(1&r)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=Vd(o,r,0,null),e=Hd(e,r,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Hi(s),t.memoizedState=Wi,e):Ji(t,o));if(null!==(n=e.memoizedState)&&null!==(a=n.dehydrated))return function(e,t,s,a,r,n,i){if(s)return 256&t.flags?(t.flags&=-257,Ki(e,t,i,a=fi(Error(l(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(n=a.fallback,r=t.mode,a=Vd({mode:"visible",children:a.children},r,0,null),(n=Hd(n,r,i,null)).flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,0!==(1&t.mode)&&Pl(t,e.child,null,i),t.child.memoizedState=Hi(i),t.memoizedState=Wi,n);if(0===(1&t.mode))return Ki(e,t,i,null);if("$!"===r.data){if(a=r.nextSibling&&r.nextSibling.dataset)var o=a.dgst;return a=o,Ki(e,t,i,a=fi(n=Error(l(419)),a,void 0))}if(o=0!==(i&e.childLanes),Ai||o){if(null!==(a=Fo)){switch(i&-i){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}0!==(r=0!==(r&(a.suspendedLanes|i))?0:r)&&r!==n.retryLane&&(n.retryLane=r,zl(e,r),ud(a,e,r,-1))}return Sd(),Ki(e,t,i,a=fi(Error(l(421))))}return"$?"===r.data?(t.flags|=128,t.child=e.child,t=Od.bind(null,e),r._reactRetry=t,null):(e=n.treeContext,ul=gr(r.nextSibling),cl=t,ml=!0,xl=null,null!==e&&(tl[sl++]=rl,tl[sl++]=ll,tl[sl++]=al,rl=e.id,ll=e.overflow,al=t),t=Ji(t,a.children),t.flags|=4096,t)}(e,t,o,r,a,n,s);if(i){i=r.fallback,o=t.mode,a=(n=e.child).sibling;var d={mode:"hidden",children:r.children};return 0===(1&o)&&t.child!==n?((r=t.child).childLanes=0,r.pendingProps=d,t.deletions=null):(r=zd(n,d)).subtreeFlags=14680064&n.subtreeFlags,null!==a?i=zd(a,i):(i=Hd(i,o,s,null)).flags|=2,i.return=t,r.return=t,r.sibling=i,t.child=r,r=i,i=t.child,o=null===(o=e.child.memoizedState)?Hi(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=Wi,r}return e=(i=e.child).sibling,r=zd(i,{mode:"visible",children:r.children}),0===(1&t.mode)&&(r.lanes=s),r.return=t,r.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r}function Ji(e,t){return(t=Vd({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,s,a){return null!==a&&wl(a),Pl(t,e.child,null,s),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qi(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Ol(e.return,t,s)}function Gi(e,t,s,a,r){var l=e.memoizedState;null===l?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:r}:(l.isBackwards=t,l.rendering=null,l.renderingStartTime=0,l.last=a,l.tail=s,l.tailMode=r)}function Yi(e,t,s){var a=t.pendingProps,r=a.revealOrder,l=a.tail;if(Pi(e,t,a.children,s),0!==(2&(a=on.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qi(e,s,t);else if(19===e.tag)Qi(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Rr(on,a),0===(1&t.mode))t.memoizedState=null;else switch(r){case"forwards":for(s=t.child,r=null;null!==s;)null!==(e=s.alternate)&&null===dn(e)&&(r=s),s=s.sibling;null===(s=r)?(r=t.child,t.child=null):(r=s.sibling,s.sibling=null),Gi(t,!1,r,s,l);break;case"backwards":for(s=null,r=t.child,t.child=null;null!==r;){if(null!==(e=r.alternate)&&null===dn(e)){t.child=r;break}e=r.sibling,r.sibling=s,s=r,r=e}Gi(t,!0,s,null,l);break;case"together":Gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $i(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zi(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Vo|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(l(153));if(null!==t.child){for(s=zd(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=zd(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Xi(e,t){if(!ml)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function eo(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=14680064&r.subtreeFlags,a|=14680064&r.flags,r.return=e,r=r.sibling;else for(r=e.child;null!==r;)s|=r.lanes|r.childLanes,a|=r.subtreeFlags,a|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function to(e,t,s){var a=t.pendingProps;switch(dl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(t),null;case 1:case 17:return qr(t.type)&&Ur(),eo(t),null;case 3:return a=t.stateNode,rn(),Er(Mr),Er(Or),un(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(yl(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==xl&&(pd(xl),xl=null))),qi(e,t),eo(t),null;case 5:nn(t);var r=sn(tn.current);if(s=t.type,null!==e&&null!=t.stateNode)Ui(e,t,s,a,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(l(166));return eo(t),null}if(e=sn(Xl.current),yl(t)){a=t.stateNode,s=t.type;var n=t.memoizedProps;switch(a[vr]=t,a[jr]=n,e=0!==(1&t.mode),s){case"dialog":Ja("cancel",a),Ja("close",a);break;case"iframe":case"object":case"embed":Ja("load",a);break;case"video":case"audio":for(r=0;r<za.length;r++)Ja(za[r],a);break;case"source":Ja("error",a);break;case"img":case"image":case"link":Ja("error",a),Ja("load",a);break;case"details":Ja("toggle",a);break;case"input":Y(a,n),Ja("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!n.multiple},Ja("invalid",a);break;case"textarea":re(a,n),Ja("invalid",a)}for(var o in ge(s,n),r=null,n)if(n.hasOwnProperty(o)){var d=n[o];"children"===o?"string"===typeof d?a.textContent!==d&&(!0!==n.suppressHydrationWarning&&nr(a.textContent,d,e),r=["children",d]):"number"===typeof d&&a.textContent!==""+d&&(!0!==n.suppressHydrationWarning&&nr(a.textContent,d,e),r=["children",""+d]):i.hasOwnProperty(o)&&null!=d&&"onScroll"===o&&Ja("scroll",a)}switch(s){case"input":J(a),X(a,n,!0);break;case"textarea":J(a),ne(a);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(a.onclick=ir)}a=r,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===r.nodeType?r:r.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),"select"===s&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[vr]=t,e[jr]=a,Bi(e,t,!1,!1),t.stateNode=e;e:{switch(o=fe(s,a),s){case"dialog":Ja("cancel",e),Ja("close",e),r=a;break;case"iframe":case"object":case"embed":Ja("load",e),r=a;break;case"video":case"audio":for(r=0;r<za.length;r++)Ja(za[r],e);r=a;break;case"source":Ja("error",e),r=a;break;case"img":case"image":case"link":Ja("error",e),Ja("load",e),r=a;break;case"details":Ja("toggle",e),r=a;break;case"input":Y(e,a),r=G(e,a),Ja("invalid",e);break;case"option":default:r=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},r=M({},a,{value:void 0}),Ja("invalid",e);break;case"textarea":re(e,a),r=ae(e,a),Ja("invalid",e)}for(n in ge(s,r),d=r)if(d.hasOwnProperty(n)){var c=d[n];"style"===n?pe(e,c):"dangerouslySetInnerHTML"===n?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===n?"string"===typeof c?("textarea"!==s||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(i.hasOwnProperty(n)?null!=c&&"onScroll"===n&&Ja("scroll",e):null!=c&&y(e,n,c,o))}switch(s){case"input":J(e),X(e,a,!1);break;case"textarea":J(e),ne(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(n=a.value)?se(e,!!a.multiple,n,!1):null!=a.defaultValue&&se(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof r.onClick&&(e.onclick=ir)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return eo(t),null;case 6:if(e&&null!=t.stateNode)zi(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(l(166));if(s=sn(tn.current),sn(Xl.current),yl(t)){if(a=t.stateNode,s=t.memoizedProps,a[vr]=t,(n=a.nodeValue!==s)&&null!==(e=cl))switch(e.tag){case 3:nr(a.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&nr(a.nodeValue,s,0!==(1&e.mode))}n&&(t.flags|=4)}else(a=(9===s.nodeType?s:s.ownerDocument).createTextNode(a))[vr]=t,t.stateNode=a}return eo(t),null;case 13:if(Er(on),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ml&&null!==ul&&0!==(1&t.mode)&&0===(128&t.flags))vl(),jl(),t.flags|=98560,n=!1;else if(n=yl(t),null!==a&&null!==a.dehydrated){if(null===e){if(!n)throw Error(l(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(l(317));n[vr]=t}else jl(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;eo(t),n=!1}else null!==xl&&(pd(xl),xl=null),n=!0;if(!n)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&on.current)?0===Wo&&(Wo=3):Sd())),null!==t.updateQueue&&(t.flags|=4),eo(t),null);case 4:return rn(),qi(e,t),null===e&&Ga(t.stateNode.containerInfo),eo(t),null;case 10:return Ll(t.type._context),eo(t),null;case 19:if(Er(on),null===(n=t.memoizedState))return eo(t),null;if(a=0!==(128&t.flags),null===(o=n.rendering))if(a)Xi(n,!1);else{if(0!==Wo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=dn(e))){for(t.flags|=128,Xi(n,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;null!==s;)e=a,(n=s).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,e=o.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Rr(on,1&on.current|2),t.child}e=e.sibling}null!==n.tail&&Ye()>$o&&(t.flags|=128,a=!0,Xi(n,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=dn(o))){if(t.flags|=128,a=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Xi(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!ml)return eo(t),null}else 2*Ye()-n.renderingStartTime>$o&&1073741824!==s&&(t.flags|=128,a=!0,Xi(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=n.last)?s.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Ye(),t.sibling=null,s=on.current,Rr(on,a?1&s|2:1&s),t):(eo(t),null);case 22:case 23:return vd(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&Uo)&&(eo(t),6&t.subtreeFlags&&(t.flags|=8192)):eo(t),null;case 24:case 25:return null}throw Error(l(156,t.tag))}function so(e,t){switch(dl(t),t.tag){case 1:return qr(t.type)&&Ur(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return rn(),Er(Mr),Er(Or),un(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return nn(t),null;case 13:if(Er(on),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(l(340));jl()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Er(on),null;case 4:return rn(),null;case 10:return Ll(t.type._context),null;case 22:case 23:return vd(),null;default:return null}}Bi=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},qi=function(){},Ui=function(e,t,s,a){var r=e.memoizedProps;if(r!==a){e=t.stateNode,sn(Xl.current);var l,n=null;switch(s){case"input":r=G(e,r),a=G(e,a),n=[];break;case"select":r=M({},r,{value:void 0}),a=M({},a,{value:void 0}),n=[];break;case"textarea":r=ae(e,r),a=ae(e,a),n=[];break;default:"function"!==typeof r.onClick&&"function"===typeof a.onClick&&(e.onclick=ir)}for(c in ge(s,a),s=null,r)if(!a.hasOwnProperty(c)&&r.hasOwnProperty(c)&&null!=r[c])if("style"===c){var o=r[c];for(l in o)o.hasOwnProperty(l)&&(s||(s={}),s[l]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(i.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in a){var d=a[c];if(o=null!=r?r[c]:void 0,a.hasOwnProperty(c)&&d!==o&&(null!=d||null!=o))if("style"===c)if(o){for(l in o)!o.hasOwnProperty(l)||d&&d.hasOwnProperty(l)||(s||(s={}),s[l]="");for(l in d)d.hasOwnProperty(l)&&o[l]!==d[l]&&(s||(s={}),s[l]=d[l])}else s||(n||(n=[]),n.push(c,s)),s=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,o=o?o.__html:void 0,null!=d&&o!==d&&(n=n||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(n=n||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(i.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&Ja("scroll",e),n||o===d||(n=[])):(n=n||[]).push(c,d))}s&&(n=n||[]).push("style",s);var c=n;(t.updateQueue=c)&&(t.flags|=4)}},zi=function(e,t,s,a){s!==a&&(t.flags|=4)};var ao=!1,ro=!1,lo="function"===typeof WeakSet?WeakSet:Set,no=null;function io(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(ga){Ed(e,t,ga)}else s.current=null}function oo(e,t,s){try{s()}catch(ga){Ed(e,t,ga)}}var co=!1;function uo(e,t,s){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var r=a=a.next;do{if((r.tag&e)===e){var l=r.destroy;r.destroy=void 0,void 0!==l&&oo(t,s,l)}r=r.next}while(r!==a)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function xo(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function ho(e){var t=e.alternate;null!==t&&(e.alternate=null,ho(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[vr],delete t[jr],delete t[Nr],delete t[Sr],delete t[Cr])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function po(e){return 5===e.tag||3===e.tag||4===e.tag}function bo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||po(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function go(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=ir));else if(4!==a&&null!==(e=e.child))for(go(e,t,s),e=e.sibling;null!==e;)go(e,t,s),e=e.sibling}function fo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&null!==(e=e.child))for(fo(e,t,s),e=e.sibling;null!==e;)fo(e,t,s),e=e.sibling}var yo=null,vo=!1;function jo(e,t,s){for(s=s.child;null!==s;)wo(e,t,s),s=s.sibling}function wo(e,t,s){if(rt&&"function"===typeof rt.onCommitFiberUnmount)try{rt.onCommitFiberUnmount(at,s)}catch(va){}switch(s.tag){case 5:ro||io(s,t);case 6:var a=yo,r=vo;yo=null,jo(e,t,s),vo=r,null!==(yo=a)&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):yo.removeChild(s.stateNode));break;case 18:null!==yo&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?br(e.parentNode,s):1===e.nodeType&&br(e,s),Ut(e)):br(yo,s.stateNode));break;case 4:a=yo,r=vo,yo=s.stateNode.containerInfo,vo=!0,jo(e,t,s),yo=a,vo=r;break;case 0:case 11:case 14:case 15:if(!ro&&(null!==(a=s.updateQueue)&&null!==(a=a.lastEffect))){r=a=a.next;do{var l=r,n=l.destroy;l=l.tag,void 0!==n&&(0!==(2&l)||0!==(4&l))&&oo(s,t,n),r=r.next}while(r!==a)}jo(e,t,s);break;case 1:if(!ro&&(io(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(va){Ed(s,t,va)}jo(e,t,s);break;case 21:jo(e,t,s);break;case 22:1&s.mode?(ro=(a=ro)||null!==s.memoizedState,jo(e,t,s),ro=a):jo(e,t,s);break;default:jo(e,t,s)}}function No(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new lo),t.forEach(function(t){var a=Md.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}}function So(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var r=s[a];try{var n=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:yo=o.stateNode,vo=!1;break e;case 3:case 4:yo=o.stateNode.containerInfo,vo=!0;break e}o=o.return}if(null===yo)throw Error(l(160));wo(n,i,r),yo=null,vo=!1;var d=r.alternate;null!==d&&(d.return=null),r.return=null}catch(da){Ed(r,t,da)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Co(t,e),t=t.sibling}function Co(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(So(t,e),ko(e),4&a){try{uo(3,e,e.return),mo(3,e)}catch(oa){Ed(e,e.return,oa)}try{uo(5,e,e.return)}catch(oa){Ed(e,e.return,oa)}}break;case 1:So(t,e),ko(e),512&a&&null!==s&&io(s,s.return);break;case 5:if(So(t,e),ko(e),512&a&&null!==s&&io(s,s.return),32&e.flags){var r=e.stateNode;try{ue(r,"")}catch(oa){Ed(e,e.return,oa)}}if(4&a&&null!=(r=e.stateNode)){var n=e.memoizedProps,i=null!==s?s.memoizedProps:n,o=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===o&&"radio"===n.type&&null!=n.name&&$(r,n),fe(o,i);var c=fe(o,n);for(i=0;i<d.length;i+=2){var u=d[i],m=d[i+1];"style"===u?pe(r,m):"dangerouslySetInnerHTML"===u?ce(r,m):"children"===u?ue(r,m):y(r,u,m,c)}switch(o){case"input":Z(r,n);break;case"textarea":le(r,n);break;case"select":var x=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!n.multiple;var h=n.value;null!=h?se(r,!!n.multiple,h,!1):x!==!!n.multiple&&(null!=n.defaultValue?se(r,!!n.multiple,n.defaultValue,!0):se(r,!!n.multiple,n.multiple?[]:"",!1))}r[jr]=n}catch(oa){Ed(e,e.return,oa)}}break;case 6:if(So(t,e),ko(e),4&a){if(null===e.stateNode)throw Error(l(162));r=e.stateNode,n=e.memoizedProps;try{r.nodeValue=n}catch(oa){Ed(e,e.return,oa)}}break;case 3:if(So(t,e),ko(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(oa){Ed(e,e.return,oa)}break;case 4:default:So(t,e),ko(e);break;case 13:So(t,e),ko(e),8192&(r=e.child).flags&&(n=null!==r.memoizedState,r.stateNode.isHidden=n,!n||null!==r.alternate&&null!==r.alternate.memoizedState||(Yo=Ye())),4&a&&No(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(ro=(c=ro)||u,So(t,e),ro=c):So(t,e),ko(e),8192&a){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(no=e,u=e.child;null!==u;){for(m=no=u;null!==no;){switch(h=(x=no).child,x.tag){case 0:case 11:case 14:case 15:uo(4,x,x.return);break;case 1:io(x,x.return);var p=x.stateNode;if("function"===typeof p.componentWillUnmount){a=x,s=x.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(oa){Ed(a,s,oa)}}break;case 5:io(x,x.return);break;case 22:if(null!==x.memoizedState){Io(m);continue}}null!==h?(h.return=x,no=h):Io(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{r=m.stateNode,c?"function"===typeof(n=r.style).setProperty?n.setProperty("display","none","important"):n.display="none":(o=m.stateNode,i=void 0!==(d=m.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,o.style.display=he("display",i))}catch(oa){Ed(e,e.return,oa)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(oa){Ed(e,e.return,oa)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:So(t,e),ko(e),4&a&&No(e);case 21:}}function ko(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(po(s)){var a=s;break e}s=s.return}throw Error(l(160))}switch(a.tag){case 5:var r=a.stateNode;32&a.flags&&(ue(r,""),a.flags&=-33),fo(e,bo(e),r);break;case 3:case 4:var n=a.stateNode.containerInfo;go(e,bo(e),n);break;default:throw Error(l(161))}}catch(Ua){Ed(e,e.return,Ua)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ao(e,t,s){no=e,Po(e,t,s)}function Po(e,t,s){for(var a=0!==(1&e.mode);null!==no;){var r=no,l=r.child;if(22===r.tag&&a){var n=null!==r.memoizedState||ao;if(!n){var i=r.alternate,o=null!==i&&null!==i.memoizedState||ro;i=ao;var d=ro;if(ao=n,(ro=o)&&!d)for(no=r;null!==no;)o=(n=no).child,22===n.tag&&null!==n.memoizedState?_o(r):null!==o?(o.return=n,no=o):_o(r);for(;null!==l;)no=l,Po(l,t,s),l=l.sibling;no=r,ao=i,ro=d}To(e)}else 0!==(8772&r.subtreeFlags)&&null!==l?(l.return=r,no=l):To(e)}}function To(e){for(;null!==no;){var t=no;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:ro||mo(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!ro)if(null===s)a.componentDidMount();else{var r=t.elementType===t.type?s.memoizedProps:ci(t.type,s.memoizedProps);a.componentDidUpdate(r,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;null!==n&&$l(t,n,a);break;case 3:var i=t.updateQueue;if(null!==i){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}$l(t,i,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ut(m)}}}break;default:throw Error(l(163))}ro||512&t.flags&&xo(t)}catch(x){Ed(t,t.return,x)}}if(t===e){no=null;break}if(null!==(s=t.sibling)){s.return=t.return,no=s;break}no=t.return}}function Io(e){for(;null!==no;){var t=no;if(t===e){no=null;break}var s=t.sibling;if(null!==s){s.return=t.return,no=s;break}no=t.return}}function _o(e){for(;null!==no;){var t=no;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{mo(4,t)}catch(Ua){Ed(t,s,Ua)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var r=t.return;try{a.componentDidMount()}catch(Ua){Ed(t,r,Ua)}}var l=t.return;try{xo(t)}catch(Ua){Ed(t,l,Ua)}break;case 5:var n=t.return;try{xo(t)}catch(Ua){Ed(t,n,Ua)}}}catch(Ua){Ed(t,t.return,Ua)}if(t===e){no=null;break}var i=t.sibling;if(null!==i){i.return=t.return,no=i;break}no=t.return}}var Do,Eo=Math.ceil,Ro=v.ReactCurrentDispatcher,Lo=v.ReactCurrentOwner,Oo=v.ReactCurrentBatchConfig,Mo=0,Fo=null,Bo=null,qo=0,Uo=0,zo=Dr(0),Wo=0,Ho=null,Vo=0,Jo=0,Ko=0,Qo=null,Go=null,Yo=0,$o=1/0,Zo=null,Xo=!1,ed=null,td=null,sd=!1,ad=null,rd=0,ld=0,nd=null,id=-1,od=0;function dd(){return 0!==(6&Mo)?Ye():-1!==id?id:id=Ye()}function cd(e){return 0===(1&e.mode)?1:0!==(2&Mo)&&0!==qo?qo&-qo:null!==Nl.transition?(0===od&&(od=ht()),od):0!==(e=ft)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function ud(e,t,s,a){if(50<ld)throw ld=0,nd=null,Error(l(185));bt(e,s,a),0!==(2&Mo)&&e===Fo||(e===Fo&&(0===(2&Mo)&&(Jo|=s),4===Wo&&bd(e,qo)),md(e,a),1===s&&0===Mo&&0===(1&t.mode)&&($o=Ye()+500,Kr&&Yr()))}function md(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,r=e.expirationTimes,l=e.pendingLanes;0<l;){var n=31-lt(l),i=1<<n,o=r[n];-1===o?0!==(i&s)&&0===(i&a)||(r[n]=mt(i,t)):o<=t&&(e.expiredLanes|=i),l&=~i}}(e,t);var a=ut(e,e===Fo?qo:0);if(0===a)null!==s&&Ke(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=s&&Ke(s),1===t)0===e.tag?function(e){Kr=!0,Gr(e)}(gd.bind(null,e)):Gr(gd.bind(null,e)),hr(function(){0===(6&Mo)&&Yr()}),s=null;else{switch(yt(a)){case 1:s=Ze;break;case 4:s=Xe;break;case 16:default:s=et;break;case 536870912:s=st}s=Fd(s,xd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function xd(e,t){if(id=-1,od=0,0!==(6&Mo))throw Error(l(327));var s=e.callbackNode;if(_d()&&e.callbackNode!==s)return null;var a=ut(e,e===Fo?qo:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=Cd(e,a);else{t=a;var r=Mo;Mo|=2;var n=Nd();for(Fo===e&&qo===t||(Zo=null,$o=Ye()+500,jd(e,t));;)try{Ad();break}catch(va){wd(e,va)}Rl(),Ro.current=n,Mo=r,null!==Bo?t=0:(Fo=null,qo=0,t=Wo)}if(0!==t){if(2===t&&(0!==(r=xt(e))&&(a=r,t=hd(e,r))),1===t)throw s=Ho,jd(e,0),bd(e,a),md(e,Ye()),s;if(6===t)bd(e,a);else{if(r=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var a=0;a<s.length;a++){var r=s[a],l=r.getSnapshot;r=r.value;try{if(!la(l(),r))return!1}catch(i){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(r)&&(2===(t=Cd(e,a))&&(0!==(n=xt(e))&&(a=n,t=hd(e,n))),1===t))throw s=Ho,jd(e,0),bd(e,a),md(e,Ye()),s;switch(e.finishedWork=r,e.finishedLanes=a,t){case 0:case 1:throw Error(l(345));case 2:case 5:Id(e,Go,Zo);break;case 3:if(bd(e,a),(130023424&a)===a&&10<(t=Yo+500-Ye())){if(0!==ut(e,0))break;if(((r=e.suspendedLanes)&a)!==a){dd(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=ur(Id.bind(null,e,Go,Zo),t);break}Id(e,Go,Zo);break;case 4:if(bd(e,a),(4194240&a)===a)break;for(t=e.eventTimes,r=-1;0<a;){var i=31-lt(a);n=1<<i,(i=t[i])>r&&(r=i),a&=~n}if(a=r,10<(a=(120>(a=Ye()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Eo(a/1960))-a)){e.timeoutHandle=ur(Id.bind(null,e,Go,Zo),a);break}Id(e,Go,Zo);break;default:throw Error(l(329))}}}return md(e,Ye()),e.callbackNode===s?xd.bind(null,e):null}function hd(e,t){var s=Qo;return e.current.memoizedState.isDehydrated&&(jd(e,t).flags|=256),2!==(e=Cd(e,t))&&(t=Go,Go=s,null!==t&&pd(t)),e}function pd(e){null===Go?Go=e:Go.push.apply(Go,e)}function bd(e,t){for(t&=~Ko,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-lt(t),a=1<<s;e[s]=-1,t&=~a}}function gd(e){if(0!==(6&Mo))throw Error(l(327));_d();var t=ut(e,0);if(0===(1&t))return md(e,Ye()),null;var s=Cd(e,t);if(0!==e.tag&&2===s){var a=xt(e);0!==a&&(t=a,s=hd(e,a))}if(1===s)throw s=Ho,jd(e,0),bd(e,t),md(e,Ye()),s;if(6===s)throw Error(l(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Id(e,Go,Zo),md(e,Ye()),null}function fd(e,t){var s=Mo;Mo|=1;try{return e(t)}finally{0===(Mo=s)&&($o=Ye()+500,Kr&&Yr())}}function yd(e){null!==ad&&0===ad.tag&&0===(6&Mo)&&_d();var t=Mo;Mo|=1;var s=Oo.transition,a=ft;try{if(Oo.transition=null,ft=1,e)return e()}finally{ft=a,Oo.transition=s,0===(6&(Mo=t))&&Yr()}}function vd(){Uo=zo.current,Er(zo)}function jd(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,mr(s)),null!==Bo)for(s=Bo.return;null!==s;){var a=s;switch(dl(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&Ur();break;case 3:rn(),Er(Mr),Er(Or),un();break;case 5:nn(a);break;case 4:rn();break;case 13:case 19:Er(on);break;case 10:Ll(a.type._context);break;case 22:case 23:vd()}s=s.return}if(Fo=e,Bo=e=zd(e.current,null),qo=Uo=t,Wo=0,Ho=null,Ko=Jo=Vo=0,Go=Qo=null,null!==Bl){for(t=0;t<Bl.length;t++)if(null!==(a=(s=Bl[t]).interleaved)){s.interleaved=null;var r=a.next,l=s.pending;if(null!==l){var n=l.next;l.next=r,a.next=n}s.pending=a}Bl=null}return e}function wd(e,t){for(;;){var s=Bo;try{if(Rl(),mn.current=ni,fn){for(var a=pn.memoizedState;null!==a;){var r=a.queue;null!==r&&(r.pending=null),a=a.next}fn=!1}if(hn=0,gn=bn=pn=null,yn=!1,vn=0,Lo.current=null,null===s||null===s.return){Wo=1,Ho=t,Bo=null;break}e:{var n=e,i=s.return,o=s,d=t;if(t=qo,o.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Si(i);if(null!==h){h.flags&=-257,Ci(h,i,o,0,t),1&h.mode&&Ni(n,c,t),d=c;var p=(t=h).updateQueue;if(null===p){var b=new Set;b.add(d),t.updateQueue=b}else p.add(d);break e}if(0===(1&t)){Ni(n,c,t),Sd();break e}d=Error(l(426))}else if(ml&&1&o.mode){var g=Si(i);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),Ci(g,i,o,0,t),wl(gi(d,o));break e}}n=d=gi(d,o),4!==Wo&&(Wo=2),null===Qo?Qo=[n]:Qo.push(n),n=i;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t,Gl(n,ji(0,d,t));break e;case 1:o=d;var f=n.type,y=n.stateNode;if(0===(128&n.flags)&&("function"===typeof f.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===td||!td.has(y)))){n.flags|=65536,t&=-t,n.lanes|=t,Gl(n,wi(n,o,t));break e}}n=n.return}while(null!==n)}Td(s)}catch(v){t=v,Bo===s&&null!==s&&(Bo=s=s.return);continue}break}}function Nd(){var e=Ro.current;return Ro.current=ni,null===e?ni:e}function Sd(){0!==Wo&&3!==Wo&&2!==Wo||(Wo=4),null===Fo||0===(268435455&Vo)&&0===(268435455&Jo)||bd(Fo,qo)}function Cd(e,t){var s=Mo;Mo|=2;var a=Nd();for(Fo===e&&qo===t||(Zo=null,jd(e,t));;)try{kd();break}catch(ia){wd(e,ia)}if(Rl(),Mo=s,Ro.current=a,null!==Bo)throw Error(l(261));return Fo=null,qo=0,Wo}function kd(){for(;null!==Bo;)Pd(Bo)}function Ad(){for(;null!==Bo&&!Qe();)Pd(Bo)}function Pd(e){var t=Do(e.alternate,e,Uo);e.memoizedProps=e.pendingProps,null===t?Td(e):Bo=t,Lo.current=null}function Td(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=to(s,t,Uo)))return void(Bo=s)}else{if(null!==(s=so(s,t)))return s.flags&=32767,void(Bo=s);if(null===e)return Wo=6,void(Bo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bo=t);Bo=t=e}while(null!==t);0===Wo&&(Wo=5)}function Id(e,t,s){var a=ft,r=Oo.transition;try{Oo.transition=null,ft=1,function(e,t,s,a){do{_d()}while(null!==ad);if(0!==(6&Mo))throw Error(l(327));s=e.finishedWork;var r=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(l(177));e.callbackNode=null,e.callbackPriority=0;var n=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var r=31-lt(s),l=1<<r;t[r]=0,a[r]=-1,e[r]=-1,s&=~l}}(e,n),e===Fo&&(Bo=Fo=null,qo=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||sd||(sd=!0,Fd(et,function(){return _d(),null})),n=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||n){n=Oo.transition,Oo.transition=null;var i=ft;ft=1;var o=Mo;Mo|=4,Lo.current=null,function(e,t){if(or=Wt,ba(e=pa())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var r=a.anchorOffset,n=a.focusNode;a=a.focusOffset;try{s.nodeType,n.nodeType}catch(rr){s=null;break e}var i=0,o=-1,d=-1,c=0,u=0,m=e,x=null;t:for(;;){for(var h;m!==s||0!==r&&3!==m.nodeType||(o=i+r),m!==n||0!==a&&3!==m.nodeType||(d=i+a),3===m.nodeType&&(i+=m.nodeValue.length),null!==(h=m.firstChild);)x=m,m=h;for(;;){if(m===e)break t;if(x===s&&++c===r&&(o=i),x===n&&++u===a&&(d=i),null!==(h=m.nextSibling))break;x=(m=x).parentNode}m=h}s=-1===o||-1===d?null:{start:o,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(dr={focusedElem:e,selectionRange:s},Wt=!1,no=t;null!==no;)if(e=(t=no).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,no=e;else for(;null!==no;){t=no;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var b=p.memoizedProps,g=p.memoizedState,f=t.stateNode,y=f.getSnapshotBeforeUpdate(t.elementType===t.type?b:ci(t.type,b),g);f.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(l(163))}}catch(rr){Ed(t,t.return,rr)}if(null!==(e=t.sibling)){e.return=t.return,no=e;break}no=t.return}p=co,co=!1}(e,s),Co(s,e),ya(dr),Wt=!!or,dr=or=null,e.current=s,Ao(s,e,r),Ge(),Mo=o,ft=i,Oo.transition=n}else e.current=s;if(sd&&(sd=!1,ad=e,rd=r),n=e.pendingLanes,0===n&&(td=null),function(e){if(rt&&"function"===typeof rt.onCommitFiberRoot)try{rt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),md(e,Ye()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)r=t[s],a(r.value,{componentStack:r.stack,digest:r.digest});if(Xo)throw Xo=!1,e=ed,ed=null,e;0!==(1&rd)&&0!==e.tag&&_d(),n=e.pendingLanes,0!==(1&n)?e===nd?ld++:(ld=0,nd=e):ld=0,Yr()}(e,t,s,a)}finally{Oo.transition=r,ft=a}return null}function _d(){if(null!==ad){var e=yt(rd),t=Oo.transition,s=ft;try{if(Oo.transition=null,ft=16>e?16:e,null===ad)var a=!1;else{if(e=ad,ad=null,rd=0,0!==(6&Mo))throw Error(l(331));var r=Mo;for(Mo|=4,no=e.current;null!==no;){var n=no,i=n.child;if(0!==(16&no.flags)){var o=n.deletions;if(null!==o){for(var d=0;d<o.length;d++){var c=o[d];for(no=c;null!==no;){var u=no;switch(u.tag){case 0:case 11:case 15:uo(8,u,n)}var m=u.child;if(null!==m)m.return=u,no=m;else for(;null!==no;){var x=(u=no).sibling,h=u.return;if(ho(u),u===c){no=null;break}if(null!==x){x.return=h,no=x;break}no=h}}}var p=n.alternate;if(null!==p){var b=p.child;if(null!==b){p.child=null;do{var g=b.sibling;b.sibling=null,b=g}while(null!==b)}}no=n}}if(0!==(2064&n.subtreeFlags)&&null!==i)i.return=n,no=i;else e:for(;null!==no;){if(0!==(2048&(n=no).flags))switch(n.tag){case 0:case 11:case 15:uo(9,n,n.return)}var f=n.sibling;if(null!==f){f.return=n.return,no=f;break e}no=n.return}}var y=e.current;for(no=y;null!==no;){var v=(i=no).child;if(0!==(2064&i.subtreeFlags)&&null!==v)v.return=i,no=v;else e:for(i=y;null!==no;){if(0!==(2048&(o=no).flags))try{switch(o.tag){case 0:case 11:case 15:mo(9,o)}}catch(w){Ed(o,o.return,w)}if(o===i){no=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,no=j;break e}no=o.return}}if(Mo=r,Yr(),rt&&"function"===typeof rt.onPostCommitFiberRoot)try{rt.onPostCommitFiberRoot(at,e)}catch(w){}a=!0}return a}finally{ft=s,Oo.transition=t}}return!1}function Dd(e,t,s){e=Kl(e,t=ji(0,t=gi(s,t),1),1),t=dd(),null!==e&&(bt(e,1,t),md(e,t))}function Ed(e,t,s){if(3===e.tag)Dd(e,e,s);else for(;null!==t;){if(3===t.tag){Dd(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===td||!td.has(a))){t=Kl(t,e=wi(t,e=gi(s,e),1),1),e=dd(),null!==t&&(bt(t,1,e),md(t,e));break}}t=t.return}}function Rd(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),t=dd(),e.pingedLanes|=e.suspendedLanes&s,Fo===e&&(qo&s)===s&&(4===Wo||3===Wo&&(130023424&qo)===qo&&500>Ye()-Yo?jd(e,0):Ko|=s),md(e,t)}function Ld(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=dd();null!==(e=zl(e,t))&&(bt(e,t,s),md(e,s))}function Od(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Ld(e,s)}function Md(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,r=e.memoizedState;null!==r&&(s=r.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(l(314))}null!==a&&a.delete(t),Ld(e,s)}function Fd(e,t){return Je(e,t)}function Bd(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qd(e,t,s,a){return new Bd(e,t,s,a)}function Ud(e){return!(!(e=e.prototype)||!e.isReactComponent)}function zd(e,t){var s=e.alternate;return null===s?((s=qd(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Wd(e,t,s,a,r,n){var i=2;if(a=e,"function"===typeof e)Ud(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case N:return Hd(s.children,r,n,t);case S:i=8,r|=8;break;case C:return(e=qd(12,s,t,2|r)).elementType=C,e.lanes=n,e;case T:return(e=qd(13,s,t,r)).elementType=T,e.lanes=n,e;case I:return(e=qd(19,s,t,r)).elementType=I,e.lanes=n,e;case E:return Vd(s,r,n,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:i=10;break e;case A:i=9;break e;case P:i=11;break e;case _:i=14;break e;case D:i=16,a=null;break e}throw Error(l(130,null==e?e:typeof e,""))}return(t=qd(i,s,t,r)).elementType=e,t.type=a,t.lanes=n,t}function Hd(e,t,s,a){return(e=qd(7,e,a,t)).lanes=s,e}function Vd(e,t,s,a){return(e=qd(22,e,a,t)).elementType=E,e.lanes=s,e.stateNode={isHidden:!1},e}function Jd(e,t,s){return(e=qd(6,e,null,t)).lanes=s,e}function Kd(e,t,s){return(t=qd(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qd(e,t,s,a,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=a,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Gd(e,t,s,a,r,l,n,i,o){return e=new Qd(e,t,s,i,o),1===t?(t=1,!0===l&&(t|=8)):t=0,l=qd(3,null,null,t),e.current=l,l.stateNode=e,l.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hl(l),e}function Yd(e){if(!e)return Lr;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(qr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(l(171))}if(1===e.tag){var s=e.type;if(qr(s))return Wr(e,s,t)}return t}function $d(e,t,s,a,r,l,n,i,o){return(e=Gd(s,a,!0,e,0,l,0,i,o)).context=Yd(null),s=e.current,(l=Jl(a=dd(),r=cd(s))).callback=void 0!==t&&null!==t?t:null,Kl(s,l,r),e.current.lanes=r,bt(e,r,a),md(e,a),e}function Zd(e,t,s,a){var r=t.current,l=dd(),n=cd(r);return s=Yd(s),null===t.context?t.context=s:t.pendingContext=s,(t=Jl(l,n)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Kl(r,t,n))&&(ud(e,r,n,l),Ql(e,r,n)),n}function Xd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ec(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function tc(e,t){ec(e,t),(e=e.alternate)&&ec(e,t)}Do=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Mr.current)Ai=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return Ai=!1,function(e,t,s){switch(t.tag){case 3:Mi(t),jl();break;case 5:ln(t);break;case 1:qr(t.type)&&Hr(t);break;case 4:an(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,r=t.memoizedProps.value;Rr(Il,a._currentValue),a._currentValue=r;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Rr(on,1&on.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Vi(e,t,s):(Rr(on,1&on.current),null!==(e=Zi(e,t,s))?e.sibling:null);Rr(on,1&on.current);break;case 19:if(a=0!==(s&t.childLanes),0!==(128&e.flags)){if(a)return Yi(e,t,s);t.flags|=128}if(null!==(r=t.memoizedState)&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rr(on,on.current),a)break;return null;case 22:case 23:return t.lanes=0,Di(e,t,s)}return Zi(e,t,s)}(e,t,s);Ai=0!==(131072&e.flags)}else Ai=!1,ml&&0!==(1048576&t.flags)&&il(t,el,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;$i(e,t),e=t.pendingProps;var r=Br(t,Or.current);Ml(t,s),r=Sn(null,t,a,e,r,s);var n=Cn();return t.flags|=1,"object"===typeof r&&null!==r&&"function"===typeof r.render&&void 0===r.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,qr(a)?(n=!0,Hr(t)):n=!1,t.memoizedState=null!==r.state&&void 0!==r.state?r.state:null,Hl(t),r.updater=mi,t.stateNode=r,r._reactInternals=t,bi(t,a,e,s),t=Oi(null,t,a,!0,n,s)):(t.tag=0,ml&&n&&ol(t),Pi(null,t,r,s),t=t.child),t;case 16:a=t.elementType;e:{switch($i(e,t),e=t.pendingProps,a=(r=a._init)(a._payload),t.type=a,r=t.tag=function(e){if("function"===typeof e)return Ud(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===P)return 11;if(e===_)return 14}return 2}(a),e=ci(a,e),r){case 0:t=Ri(null,t,a,e,s);break e;case 1:t=Li(null,t,a,e,s);break e;case 11:t=Ti(null,t,a,e,s);break e;case 14:t=Ii(null,t,a,ci(a.type,e),s);break e}throw Error(l(306,a,""))}return t;case 0:return a=t.type,r=t.pendingProps,Ri(e,t,a,r=t.elementType===a?r:ci(a,r),s);case 1:return a=t.type,r=t.pendingProps,Li(e,t,a,r=t.elementType===a?r:ci(a,r),s);case 3:e:{if(Mi(t),null===e)throw Error(l(387));a=t.pendingProps,r=(n=t.memoizedState).element,Vl(e,t),Yl(t,a,null,s);var i=t.memoizedState;if(a=i.element,n.isDehydrated){if(n={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Fi(e,t,a,s,r=gi(Error(l(423)),t));break e}if(a!==r){t=Fi(e,t,a,s,r=gi(Error(l(424)),t));break e}for(ul=gr(t.stateNode.containerInfo.firstChild),cl=t,ml=!0,xl=null,s=Tl(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(jl(),a===r){t=Zi(e,t,s);break e}Pi(e,t,a,s)}t=t.child}return t;case 5:return ln(t),null===e&&gl(t),a=t.type,r=t.pendingProps,n=null!==e?e.memoizedProps:null,i=r.children,cr(a,r)?i=null:null!==n&&cr(a,n)&&(t.flags|=32),Ei(e,t),Pi(e,t,i,s),t.child;case 6:return null===e&&gl(t),null;case 13:return Vi(e,t,s);case 4:return an(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Pl(t,null,a,s):Pi(e,t,a,s),t.child;case 11:return a=t.type,r=t.pendingProps,Ti(e,t,a,r=t.elementType===a?r:ci(a,r),s);case 7:return Pi(e,t,t.pendingProps,s),t.child;case 8:case 12:return Pi(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,r=t.pendingProps,n=t.memoizedProps,i=r.value,Rr(Il,a._currentValue),a._currentValue=i,null!==n)if(la(n.value,i)){if(n.children===r.children&&!Mr.current){t=Zi(e,t,s);break e}}else for(null!==(n=t.child)&&(n.return=t);null!==n;){var o=n.dependencies;if(null!==o){i=n.child;for(var d=o.firstContext;null!==d;){if(d.context===a){if(1===n.tag){(d=Jl(-1,s&-s)).tag=2;var c=n.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}n.lanes|=s,null!==(d=n.alternate)&&(d.lanes|=s),Ol(n.return,s,t),o.lanes|=s;break}d=d.next}}else if(10===n.tag)i=n.type===t.type?null:n.child;else if(18===n.tag){if(null===(i=n.return))throw Error(l(341));i.lanes|=s,null!==(o=i.alternate)&&(o.lanes|=s),Ol(i,s,t),i=n.sibling}else i=n.child;if(null!==i)i.return=n;else for(i=n;null!==i;){if(i===t){i=null;break}if(null!==(n=i.sibling)){n.return=i.return,i=n;break}i=i.return}n=i}Pi(e,t,r.children,s),t=t.child}return t;case 9:return r=t.type,a=t.pendingProps.children,Ml(t,s),a=a(r=Fl(r)),t.flags|=1,Pi(e,t,a,s),t.child;case 14:return r=ci(a=t.type,t.pendingProps),Ii(e,t,a,r=ci(a.type,r),s);case 15:return _i(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,r=t.pendingProps,r=t.elementType===a?r:ci(a,r),$i(e,t),t.tag=1,qr(a)?(e=!0,Hr(t)):e=!1,Ml(t,s),hi(t,a,r),bi(t,a,r,s),Oi(null,t,a,!0,e,s);case 19:return Yi(e,t,s);case 22:return Di(e,t,s)}throw Error(l(156,t.tag))};var sc="function"===typeof reportError?reportError:function(e){console.error(e)};function ac(e){this._internalRoot=e}function rc(e){this._internalRoot=e}function lc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(){}function oc(e,t,s,a,r){var l=s._reactRootContainer;if(l){var n=l;if("function"===typeof r){var i=r;r=function(){var e=Xd(n);i.call(e)}}Zd(t,n,e,r)}else n=function(e,t,s,a,r){if(r){if("function"===typeof a){var l=a;a=function(){var e=Xd(n);l.call(e)}}var n=$d(t,a,e,0,null,!1,0,"",ic);return e._reactRootContainer=n,e[wr]=n.current,Ga(8===e.nodeType?e.parentNode:e),yd(),n}for(;r=e.lastChild;)e.removeChild(r);if("function"===typeof a){var i=a;a=function(){var e=Xd(o);i.call(e)}}var o=Gd(e,0,!1,null,0,!1,0,"",ic);return e._reactRootContainer=o,e[wr]=o.current,Ga(8===e.nodeType?e.parentNode:e),yd(function(){Zd(t,o,s,a)}),o}(s,t,e,r,a);return Xd(n)}rc.prototype.render=ac.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(l(409));Zd(e,t,null,null)},rc.prototype.unmount=ac.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yd(function(){Zd(null,e,null,null)}),t[wr]=null}},rc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<Dt.length&&0!==t&&t<Dt[s].priority;s++);Dt.splice(s,0,e),0===s&&Ot(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ct(t.pendingLanes);0!==s&&(gt(t,1|s),md(t,Ye()),0===(6&Mo)&&($o=Ye()+500,Yr()))}break;case 13:yd(function(){var t=zl(e,1);if(null!==t){var s=dd();ud(t,e,1,s)}}),tc(e,1)}},jt=function(e){if(13===e.tag){var t=zl(e,134217728);if(null!==t)ud(t,e,134217728,dd());tc(e,134217728)}},wt=function(e){if(13===e.tag){var t=cd(e),s=zl(e,t);if(null!==s)ud(s,e,t,dd());tc(e,t)}},Nt=function(){return ft},St=function(e,t){var s=ft;try{return ft=e,t()}finally{ft=s}},je=function(e,t,s){switch(t){case"input":if(Z(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var r=Tr(a);if(!r)throw Error(l(90));K(a),Z(a,r)}}}break;case"textarea":le(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Ae=fd,Pe=yd;var dc={usingClientEntryPoint:!1,Events:[Ar,Pr,Tr,Ce,ke,fd]},cc={findFiberByHostInstance:kr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{at=mc.inject(uc),rt=mc}catch(ca){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dc,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!lc(t))throw Error(l(200));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!lc(e))throw Error(l(299));var s=!1,a="",r=sc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(r=t.onRecoverableError)),t=Gd(e,1,!1,null,0,s,0,a,r),e[wr]=t.current,Ga(8===e.nodeType?e.parentNode:e),new ac(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(l(188));throw e=Object.keys(e).join(","),Error(l(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return yd(e)},t.hydrate=function(e,t,s){if(!nc(t))throw Error(l(200));return oc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!lc(e))throw Error(l(405));var a=null!=s&&s.hydratedSources||null,r=!1,n="",i=sc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(r=!0),void 0!==s.identifierPrefix&&(n=s.identifierPrefix),void 0!==s.onRecoverableError&&(i=s.onRecoverableError)),t=$d(t,null,e,1,null!=s?s:null,r,0,n,i),e[wr]=t.current,Ga(e),a)for(e=0;e<a.length;e++)r=(r=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,r]:t.mutableSourceEagerHydrationData.push(s,r);return new rc(t)},t.render=function(e,t,s){if(!nc(t))throw Error(l(200));return oc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(l(40));return!!e._reactRootContainer&&(yd(function(){oc(null,null,e,!1,function(){e._reactRootContainer=null,e[wr]=null})}),!0)},t.unstable_batchedUpdates=fd,t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!nc(s))throw Error(l(200));if(null==e||void 0===e._reactInternals)throw Error(l(38));return oc(e,t,s,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,s)=>{e.exports=s(234)},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)},980:(e,t,s)=>{s.d(t,{AT:()=>n,Dv:()=>w,IX:()=>u,KG:()=>g,Od:()=>o,Ox:()=>v,R2:()=>i,Re:()=>x,Yt:()=>f,Zl:()=>m,bM:()=>y,bS:()=>d,h2:()=>N,ie:()=>S,iw:()=>p,oA:()=>b,o_:()=>j,rj:()=>c,staffAPI:()=>h,z5:()=>l});var a=s(555);const r={USER_ID:"userId",USER_EMAIL:"userEmail",USER_ROLE:"userRole",CLUB_ID:"clubId",TENANT_ID:"tenantId",AUTH_TOKEN:"authToken"},l=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem(r.USER_ID),s=localStorage.getItem(r.CLUB_ID),a=localStorage.getItem(r.TENANT_ID),l=localStorage.getItem(r.AUTH_TOKEN);return t&&(e["x-user-id"]=t),s&&(e["x-club-id"]=s),a&&(e["x-tenant-id"]=a),l&&(e.Authorization="Bearer ".concat(l)),e},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="".concat("https://poker-crm-backend.onrender.com/api").concat(e),r=(0,a.A)((0,a.A)({},t),{},{headers:(0,a.A)((0,a.A)({},l()),t.headers)});try{const e=await fetch(s,r);if(!e.ok){let t;try{t=await e.json()}catch(ia){t={message:e.statusText||"API Error: ".concat(e.status)}}if(401===e.status)throw new Error(t.message||"Invalid email or password");throw new Error(t.message||"API Error: ".concat(e.status))}return 204===e.status?null:await e.json()}catch(n){throw console.error("API Request Error:",n),n}},i={login:async(e,t)=>{const s=await n("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(s.user)if(localStorage.setItem(r.USER_ID,s.user.id),localStorage.setItem(r.USER_EMAIL,s.user.email),localStorage.setItem("user",JSON.stringify({id:s.user.id,email:s.user.email,name:s.user.displayName||s.user.email,displayName:s.user.displayName,isMasterAdmin:s.user.isMasterAdmin||!1,staffId:s.user.staffId})),s.clubRoles&&s.clubRoles.length>0){const e=s.clubRoles[0];localStorage.setItem(r.USER_ROLE,e.role),localStorage.setItem(r.CLUB_ID,e.club.id),localStorage.setItem(r.TENANT_ID,e.club.tenantId)}else if(s.tenantRoles&&s.tenantRoles.length>0){const e=s.tenantRoles[0];localStorage.setItem(r.USER_ROLE,e.role),localStorage.setItem(r.TENANT_ID,e.tenant.id)}else s.user.isMasterAdmin&&localStorage.setItem(r.USER_ROLE,"MASTER_ADMIN");return s},logout:()=>{Object.values(r).forEach(e=>{localStorage.removeItem(e)})},getCurrentUser:()=>{const e=localStorage.getItem("user"),t=e?JSON.parse(e):{};return{userId:localStorage.getItem(r.USER_ID),email:localStorage.getItem(r.USER_EMAIL),role:localStorage.getItem(r.USER_ROLE),clubId:localStorage.getItem(r.CLUB_ID),tenantId:localStorage.getItem(r.TENANT_ID),isMasterAdmin:t.isMasterAdmin||!1,displayName:t.displayName||null}},isAuthenticated:()=>!!localStorage.getItem(r.USER_ID)},o={getClubs:async()=>await n("/clubs"),getClub:async e=>await n("/clubs/".concat(e)),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),getClubRevenue:async e=>await n("/clubs/".concat(e,"/revenue")),createClub:async e=>await n("/clubs",{method:"POST",body:JSON.stringify(e)}),updateClub:async(e,t)=>await n("/clubs/".concat(e),{method:"PUT",body:JSON.stringify(t)}),getActiveTablesForRakeCollection:async e=>await n("/clubs/".concat(e,"/rake-collections/active-tables")),createRakeCollection:async(e,t)=>await n("/clubs/".concat(e,"/rake-collections"),{method:"POST",body:JSON.stringify(t)}),getRakeCollections:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return""!==s&&null!==s&&void 0!==s})),a=new URLSearchParams(s).toString();return await n("/clubs/".concat(e,"/rake-collections").concat(a?"?".concat(a):""))},getRakeCollectionStats:async(e,t,s)=>{const a=new URLSearchParams;return t&&a.append("startDate",t),s&&a.append("endDate",s),await n("/clubs/".concat(e,"/rake-collections/stats").concat(a.toString()?"?".concat(a.toString()):""))},getBuyOutRequests:async e=>await n("/clubs/".concat(e,"/buyout-requests")),approveBuyOutRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyout-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)}),rejectBuyOutRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyout-requests/").concat(t,"/reject"),{method:"POST",body:JSON.stringify(s)}),getBuyInRequests:async e=>await n("/clubs/".concat(e,"/buyin-requests")),approveBuyInRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyin-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)}),rejectBuyInRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyin-requests/").concat(t,"/reject"),{method:"POST",body:JSON.stringify(s)}),getAttendanceRecords:async(e,t,s,a)=>{const r=new URLSearchParams;return t&&r.append("startDate",t),s&&r.append("endDate",s),a&&r.append("staffId",a),await n("/clubs/".concat(e,"/attendance").concat(r.toString()?"?".concat(r.toString()):""))},getAttendanceStats:async(e,t,s)=>{const a=new URLSearchParams;return t&&a.append("startDate",t),s&&a.append("endDate",s),await n("/clubs/".concat(e,"/attendance/stats").concat(a.toString()?"?".concat(a.toString()):""))},getSalaryPayments:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return""!==s&&null!==s&&void 0!==s})),a=new URLSearchParams(s).toString();return await n("/clubs/".concat(e,"/payroll/salary").concat(a?"?".concat(a):""))},createAttendanceRecord:async(e,t)=>await n("/clubs/".concat(e,"/attendance"),{method:"POST",body:JSON.stringify(t)})},d={getPlayers:async e=>await n("/clubs/".concat(e,"/players")),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),createPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players"),{method:"POST",body:JSON.stringify(t)}),updatePlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t),{method:"PUT",body:JSON.stringify(s)}),updateKycStatus:async(e,t,s,a)=>await n("/clubs/".concat(e,"/players/").concat(t,"/kyc-status"),{method:"PUT",body:JSON.stringify({kycStatus:s,approvedBy:a})}),getKycPending:async e=>(await n("/clubs/".concat(e,"/players"))).filter(e=>"pending"===e.kycStatus),getPendingApprovalPlayers:async e=>await n("/clubs/".concat(e,"/players-pending-approval")),getSuspendedPlayers:async e=>await n("/clubs/".concat(e,"/players-suspended"))},c={getTables:async e=>await n("/clubs/".concat(e,"/tables")),getTable:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t)),createTable:async(e,t)=>await n("/clubs/".concat(e,"/tables"),{method:"POST",body:JSON.stringify(t)}),updateTable:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteTable:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t),{method:"DELETE"}),assignSeat:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/assign-seat"),{method:"POST",body:JSON.stringify(s)}),pauseSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/pause-session"),{method:"POST"}),resumeSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/resume-session"),{method:"POST"}),endSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/end-session"),{method:"POST"}),updateSessionParams:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/session-params"),{method:"PATCH",body:JSON.stringify(s)})},u={getWaitlist:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?status=".concat(t):"";return await n("/clubs/".concat(e,"/waitlist").concat(s))},addToWaitlist:async(e,t)=>await n("/clubs/".concat(e,"/waitlist"),{method:"POST",body:JSON.stringify(t)}),updateWaitlist:async(e,t,s)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"PUT",body:JSON.stringify(s)}),seatPlayer:async(e,t,s,a)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"PUT",body:JSON.stringify({status:"SEATED",tableNumber:s,seatedBy:a,seatedAt:(new Date).toISOString()})}),cancelWaitlist:async(e,t)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"DELETE"})},m={getMenu:async e=>await n("/clubs/".concat(e,"/fnb/menu")),createMenuItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/menu"),{method:"POST",body:JSON.stringify(t)}),updateMenuItem:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/menu/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getOrders:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=new URLSearchParams;return t&&r.append("status",t),r.append("page",s.toString()),r.append("limit",a.toString()),await n("/clubs/".concat(e,"/fnb/orders?").concat(r.toString()))},createOrder:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders"),{method:"POST",body:JSON.stringify(t)}),updateOrderStatus:async(e,t,s,a)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t),{method:"PUT",body:JSON.stringify({status:s,processedBy:a})}),createKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations"),{method:"POST",body:JSON.stringify(t)}),getKitchenStations:async function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?activeOnly=true":"";return await n("/clubs/".concat(e,"/fnb/kitchen-stations").concat(t))},getKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t)),updateKitchenStation:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t),{method:"DELETE"}),getStationStatistics:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t,"/statistics")),acceptOrder:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/accept"),{method:"POST",body:JSON.stringify({stationId:s,isAccepted:!0})}),rejectOrder:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({rejectedReason:s,isAccepted:!1})}),markOrderReady:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/ready"),{method:"POST"}),markOrderDelivered:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/delivered"),{method:"POST"}),getAllMenuCategories:async e=>await n("/clubs/".concat(e,"/fnb/categories/all")),createMenuCategory:async(e,t)=>await n("/clubs/".concat(e,"/fnb/categories"),{method:"POST",body:JSON.stringify({categoryName:t})}),deleteMenuCategory:async(e,t)=>await n("/clubs/".concat(e,"/fnb/categories/").concat(t),{method:"DELETE"}),getInventory:async e=>await n("/clubs/".concat(e,"/fnb/inventory")),createInventoryItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/inventory"),{method:"POST",body:JSON.stringify(t)}),updateInventory:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/inventory/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getSuppliers:async function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?activeOnly=true":"";return await n("/clubs/".concat(e,"/fnb/suppliers").concat(t))},createSupplier:async(e,t)=>await n("/clubs/".concat(e,"/fnb/suppliers"),{method:"POST",body:JSON.stringify(t)}),updateSupplier:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/suppliers/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteSupplier:async(e,t)=>await n("/clubs/".concat(e,"/fnb/suppliers/").concat(t),{method:"DELETE"}),deleteMenuItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/menu/").concat(t),{method:"DELETE"})},x={getTournaments:async e=>{const t=await n("/clubs/".concat(e,"/tournaments"));return(null===t||void 0===t?void 0:t.tournaments)||t||[]},getTournamentById:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t)),createTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments"),{method:"POST",body:JSON.stringify(t)}),updateTournament:async(e,t,s)=>await n("/clubs/".concat(e,"/tournaments/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t),{method:"DELETE"}),startTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/start"),{method:"POST"}),endTournament:async(e,t,s)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/end"),{method:"POST",body:JSON.stringify(s)}),getTournamentPlayers:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/players")),getTournamentWinners:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/winners"))},h={getStaff:async e=>await n("/clubs/".concat(e,"/staff")),createStaff:async(e,t)=>await n("/clubs/".concat(e,"/staff"),{method:"POST",body:JSON.stringify(t)}),getAllStaffMembers:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.role&&s.append("role",t.role),t.status&&s.append("status",t.status),t.search&&s.append("search",t.search),t.sortBy&&s.append("sortBy",t.sortBy),t.sortOrder&&s.append("sortOrder",t.sortOrder);const a=s.toString();return await n("/clubs/".concat(e,"/staff-management").concat(a?"?"+a:""))},createStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/create"),{method:"POST",body:JSON.stringify(t)}),getStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t)),updateStaffMember:async(e,t,s)=>await n("/clubs/".concat(e,"/staff-management/").concat(t),{method:"PUT",body:JSON.stringify(s)}),suspendStaffMember:async(e,t,s)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/suspend"),{method:"POST",body:JSON.stringify({reason:s})}),reactivateStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/reactivate"),{method:"POST"}),deleteStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t),{method:"DELETE"}),resetStaffPassword:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/reset-password"),{method:"POST"}),updateStaff:async(e,t,s)=>await n("/clubs/".concat(e,"/staff/").concat(t),{method:"PUT",body:JSON.stringify(s)}),getAllChatableUsers:async e=>await n("/clubs/".concat(e,"/chat/chatable-users"))},p={getShifts:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/shifts").concat(t?"?"+t:""))},getShiftById:async(e,t)=>await n("/clubs/".concat(e,"/shifts/").concat(t)),createShift:async(e,t)=>await n("/clubs/".concat(e,"/shifts"),{method:"POST",body:JSON.stringify(t)}),updateShift:async(e,t,s)=>await n("/clubs/".concat(e,"/shifts/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteShift:async(e,t)=>await n("/clubs/".concat(e,"/shifts/").concat(t),{method:"DELETE"}),copyShifts:async(e,t)=>await n("/clubs/".concat(e,"/shifts/copy"),{method:"POST",body:JSON.stringify(t)}),getDealers:async(e,t)=>{const s=t?"?date=".concat(t):"";return await n("/clubs/".concat(e,"/shifts-dealers").concat(s))},getAvailableDealersForDate:async(e,t)=>await n("/clubs/".concat(e,"/shifts/available-dealers?date=").concat(t)),deleteMultipleShifts:async(e,t)=>await n("/clubs/".concat(e,"/shifts/delete-multiple"),{method:"POST",body:JSON.stringify({shiftIds:t})})},b={processSalary:async(e,t)=>await n("/clubs/".concat(e,"/payroll/salary"),{method:"POST",body:JSON.stringify(t)}),getSalaryPayments:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/salary").concat(t?"?"+t:""))},getSalaryPaymentById:async(e,t)=>await n("/clubs/".concat(e,"/payroll/salary/").concat(t)),getAllStaffForPayroll:async e=>await n("/clubs/".concat(e,"/payroll/staff")),getDealersForPayroll:async e=>await n("/clubs/".concat(e,"/payroll/dealers")),getTipSettings:async(e,t)=>{const s=t?"?dealerId=".concat(t):"";return await n("/clubs/".concat(e,"/payroll/tips/settings").concat(s))},updateTipSettings:async(e,t,s)=>{const a=s?"?dealerId=".concat(s):"";return await n("/clubs/".concat(e,"/payroll/tips/settings").concat(a),{method:"POST",body:JSON.stringify(t)})},processDealerTips:async(e,t)=>await n("/clubs/".concat(e,"/payroll/tips"),{method:"POST",body:JSON.stringify(t)}),getDealerTips:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/tips").concat(t?"?"+t:""))},getDealerTipsSummary:async function(e,t){const s=new URLSearchParams(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).toString();return await n("/clubs/".concat(e,"/payroll/tips/").concat(t,"/summary").concat(s?"?"+s:""))},processDealerCashout:async(e,t)=>await n("/clubs/".concat(e,"/payroll/cashout"),{method:"POST",body:JSON.stringify(t)}),getDealerCashouts:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/cashout").concat(t?"?"+t:""))}},g={processPlayerBonus:async(e,t)=>await n("/clubs/".concat(e,"/bonuses/players"),{method:"POST",body:JSON.stringify(t)}),getPlayerBonuses:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/bonuses/players").concat(t?"?"+t:""))},getPlayersForBonus:async(e,t)=>{const s=t?"?search=".concat(encodeURIComponent(t)):"";return await n("/clubs/".concat(e,"/bonuses/players/list").concat(s))},processStaffBonus:async(e,t)=>await n("/clubs/".concat(e,"/bonuses/staff"),{method:"POST",body:JSON.stringify(t)}),getStaffBonuses:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/bonuses/staff").concat(t?"?"+t:""))},getStaffForBonus:async(e,t)=>{const s=t?"?search=".concat(encodeURIComponent(t)):"";return await n("/clubs/".concat(e,"/bonuses/staff/list").concat(s))}},f={getAffiliates:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/affiliates").concat(t?"?"+t:""))},getAffiliateReferrals:async function(e,t){const s=new URLSearchParams(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).toString();return await n("/clubs/".concat(e,"/affiliates/").concat(t,"/referrals").concat(s?"?"+s:""))},processAffiliatePayment:async(e,t)=>await n("/clubs/".concat(e,"/affiliates/payments"),{method:"POST",body:JSON.stringify(t)}),getAffiliateTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/affiliates/transactions").concat(t?"?"+t:""))}},y={getAllTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/financial-overrides/transactions").concat(t?"?"+t:""))},editTransaction:async(e,t,s)=>await n("/clubs/".concat(e,"/financial-overrides/transactions/").concat(t,"/edit"),{method:"PUT",body:JSON.stringify(s)}),cancelTransaction:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await n("/clubs/".concat(e,"/financial-overrides/transactions/").concat(t,"/cancel"),{method:"POST",body:JSON.stringify(s)})}},v={getTenants:async()=>await n("/tenants"),getTenant:async e=>await n("/tenants/".concat(e),{method:"GET"}),createTenant:async e=>{const t="string"===typeof e?{name:e}:e;return await n("/tenants",{method:"POST",body:JSON.stringify(t)})},createSuperAdmin:async(e,t,s)=>await n("/tenants/".concat(e,"/super-admins"),{method:"POST",body:JSON.stringify({email:t,displayName:s})}),setupTenant:async(e,t)=>await n("/tenants/".concat(e,"/setup"),{method:"POST",body:JSON.stringify(t)}),createClub:async(e,t)=>await n("/tenants/".concat(e,"/clubs"),{method:"POST",body:JSON.stringify(t)}),createClubWithBranding:async(e,t)=>{const s={name:t.name};return t.description&&(s.description=t.description),t.skinColor&&(s.skinColor=t.skinColor),t.gradient&&(s.gradient=t.gradient),t.logoUrl&&(s.logoUrl=t.logoUrl),t.videoUrl&&(s.videoUrl=t.videoUrl),await n("/tenants/".concat(e,"/clubs"),{method:"POST",body:JSON.stringify(s)})},getLogoUploadUrl:async(e,t)=>await n("/tenants/".concat(e,"/clubs/").concat(t,"/logo-upload-url"),{method:"POST"}),uploadLogo:async(e,t)=>{const s=await fetch(e,{method:"PUT",headers:{"Content-Type":"image/png"},body:t});if(!s.ok)throw new Error("Failed to upload logo");return s},getLogoPublicUrl:async(e,t)=>(await n("/tenants/".concat(e,"/clubs/").concat(t,"/logo-url"))).logoUrl},j={getCurrentUser:async()=>{const e=localStorage.getItem(r.USER_ID);if(!e)throw new Error("User not logged in");return await n("/users/".concat(e))},getAllClubs:async()=>await n("/clubs/master-admin/all"),updateClubStatus:async(e,t,s)=>await n("/clubs/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t,reason:s})}),updateClubDetails:async(e,t)=>await n("/clubs/".concat(e,"/master-admin/details"),{method:"PUT",body:JSON.stringify(t)}),updateClubSubscription:async(e,t)=>await n("/clubs/".concat(e,"/subscription"),{method:"PUT",body:JSON.stringify(t)}),updateClubTerms:async(e,t)=>await n("/clubs/".concat(e,"/terms"),{method:"PUT",body:JSON.stringify({termsAndConditions:t})}),updateClubRummyEnabled:async(e,t)=>await n("/clubs/".concat(e,"/rummy-enabled"),{method:"PUT",body:JSON.stringify({rummyEnabled:t})}),createTenantWithClub:async e=>await n("/tenants/with-club",{method:"POST",body:JSON.stringify(e)}),getDashboardStats:async()=>{try{const e=await j.getAllClubs(),t=await v.getTenants(),s=e.length,a=e.filter(e=>"active"===e.status).length,r=e.filter(e=>"suspended"===e.status).length,l=e.filter(e=>"killed"===e.status).length,n=e.reduce((e,t)=>e+(parseFloat(t.subscriptionPrice)||0),0);return{totalTenants:t.length,totalClubs:s,activeClubs:a,suspendedClubs:r,killedClubs:l,monthlyRevenue:n,clubs:e,tenants:t}}catch(e){return console.error("Error loading dashboard stats:",e),{totalTenants:0,totalClubs:0,activeClubs:0,suspendedClubs:0,killedClubs:0,monthlyRevenue:0,clubs:[],tenants:[]}}}},w={getClubs:async()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("superadminuser")||"{}"),s=e.id||t.userId;if(!s)throw new Error("User not logged in");return await n("/users/".concat(s,"/clubs"))},getClub:async e=>await n("/clubs/".concat(e)),getClubRevenue:async e=>await n("/clubs/".concat(e,"/revenue")),getAllPlayers:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/players?").concat(t))},createPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players"),{method:"POST",body:JSON.stringify(t)}),getPendingApprovalPlayers:async e=>await n("/clubs/".concat(e,"/players-pending-approval")),approvePlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/approve"),{method:"POST",body:JSON.stringify({notes:s})}),rejectPlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({reason:s})}),suspendPlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/suspend"),{method:"POST",body:JSON.stringify(s)}),unsuspendPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t,"/unsuspend"),{method:"POST"}),getSuspendedPlayers:async e=>await n("/clubs/".concat(e,"/players-suspended")),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),getPlayers:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/players?").concat(t))},getPlayerBalance:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t,"/balance")),getTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/transactions").concat(t?"?"+t:""))},createTransaction:async(e,t)=>await n("/clubs/".concat(e,"/transactions"),{method:"POST",body:JSON.stringify(t)}),getCreditRequests:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?status=".concat(t):"";return await n("/clubs/".concat(e,"/credit-requests").concat(s))},approveCreditRequest:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await n("/clubs/".concat(e,"/credit-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)})},rejectCreditRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/credit-requests/").concat(t,"/deny"),{method:"POST",body:JSON.stringify(s)}),unlockCredit:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/enable-credit"),{method:"POST",body:JSON.stringify(s)}),updateCreditLimit:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/credit-limit"),{method:"PATCH",body:JSON.stringify(s)}),getVipProducts:async e=>await n("/clubs/".concat(e,"/vip-products")),createVipProduct:async(e,t)=>await n("/clubs/".concat(e,"/vip-products"),{method:"POST",body:JSON.stringify(t)}),updateVipProduct:async(e,t,s)=>await n("/clubs/".concat(e,"/vip-products/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteVipProduct:async(e,t)=>await n("/clubs/".concat(e,"/vip-products/").concat(t),{method:"DELETE"}),createVipProductImageUploadUrl:async(e,t)=>await n("/clubs/".concat(e,"/vip-products/upload-url"),{method:"POST",body:JSON.stringify({filename:t})}),uploadToSignedUrl:async(e,t)=>{try{const s=await fetch(e,{method:"PUT",body:t,headers:{"Content-Type":t.type||"image/png","Cache-Control":"3600"}});if(!s.ok){const t=await s.text().catch(()=>"Unknown error");throw console.error("Upload failed:",{status:s.status,statusText:s.statusText,error:t,url:e.substring(0,100)+"..."}),new Error("Upload failed (".concat(s.status,"): ").concat(s.statusText))}return s}catch(s){throw console.error("Upload error:",s),s}},getPushNotifications:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?notificationType=".concat(t):"";return await n("/clubs/".concat(e,"/push-notifications").concat(s))},createPushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications"),{method:"POST",body:JSON.stringify(t)}),updatePushNotification:async(e,t,s)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deletePushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t),{method:"DELETE"}),createPushNotificationUploadUrl:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await n("/clubs/".concat(e,"/push-notifications/upload-url"),{method:"POST",body:JSON.stringify({filename:t,isVideo:s})})},sendPushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t,"/send"),{method:"POST"}),getNotificationInbox:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const r=JSON.parse(localStorage.getItem("user")||"{}").id;if(!r)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/inbox?recipientType=").concat(t,"&page=").concat(s,"&limit=").concat(a),{headers:{"x-user-id":r}})},getUnreadNotificationCount:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff";const s=JSON.parse(localStorage.getItem("user")||"{}").id;if(!s)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/unread-count?recipientType=").concat(t),{headers:{"x-user-id":s}})},markNotificationAsRead:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"staff";const a=JSON.parse(localStorage.getItem("user")||"{}").id;if(!a)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/").concat(t,"/mark-read"),{method:"POST",headers:{"x-user-id":a},body:JSON.stringify({recipientType:s})})},markAllNotificationsAsRead:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff";const s=JSON.parse(localStorage.getItem("user")||"{}").id;if(!s)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/mark-all-read"),{method:"POST",headers:{"x-user-id":s},body:JSON.stringify({recipientType:t})})}},N={createStaffChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/staff/sessions"),{method:"POST",body:JSON.stringify({recipientStaffId:t,subject:s})}),getStaffChatSessions:async function(e){let{page:t=1,limit:s=10,search:a,role:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=new URLSearchParams;return l.append("page",t.toString()),l.append("limit",s.toString()),a&&l.append("search",a),r&&l.append("role",r),await n("/clubs/".concat(e,"/chat/staff/sessions?").concat(l.toString()))},createPlayerChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/player/sessions"),{method:"POST",body:JSON.stringify({playerId:t,subject:s})}),getPlayerChatSessions:async function(e){let{page:t=1,limit:s=10,status:a,search:r}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const l=new URLSearchParams;return l.append("page",t.toString()),l.append("limit",s.toString()),a&&l.append("status",a),r&&l.append("search",r),await n("/clubs/".concat(e,"/chat/player/sessions?").concat(l.toString()))},sendMessage:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t,"/messages"),{method:"POST",body:JSON.stringify({message:s})}),getSessionMessages:async function(e,t){let{page:s=1,limit:a=50}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new URLSearchParams;return r.append("page",s.toString()),r.append("limit",a.toString()),await n("/clubs/".concat(e,"/chat/sessions/").concat(t,"/messages?").concat(r.toString()))},updateChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getUnreadCounts:async e=>await n("/clubs/".concat(e,"/chat/unread-counts")),getChatableUsers:async function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?excludeExisting=true":"";return await n("/clubs/".concat(e,"/chat/chatable-users").concat(t))},archiveChatSession:async(e,t)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t),{method:"DELETE"})},S={getLeavePolicies:async e=>await n("/clubs/".concat(e,"/leave-policies")),createLeavePolicy:async(e,t)=>await n("/clubs/".concat(e,"/leave-policies"),{method:"POST",body:JSON.stringify(t)}),updateLeavePolicy:async(e,t,s)=>await n("/clubs/".concat(e,"/leave-policies/").concat(encodeURIComponent(t)),{method:"PUT",body:JSON.stringify(s)}),deleteLeavePolicy:async(e,t)=>await n("/clubs/".concat(e,"/leave-policies/").concat(encodeURIComponent(t)),{method:"DELETE"}),getMyLeaveApplications:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.status&&s.append("status",t.status),t.startDate&&s.append("startDate",t.startDate),t.endDate&&s.append("endDate",t.endDate),t.page&&s.append("page",t.page.toString()),t.limit&&s.append("limit",t.limit.toString());const a=s.toString();return await n("/clubs/".concat(e,"/leave-applications/my-leaves").concat(a?"?"+a:""))},getLeaveBalance:async e=>await n("/clubs/".concat(e,"/leave-applications/balance")),getPendingLeaveApplications:async e=>await n("/clubs/".concat(e,"/leave-applications/pending")),getLeaveApplicationsForApproval:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.status&&s.append("status",t.status),t.role&&s.append("role",t.role),t.startDate&&s.append("startDate",t.startDate),t.endDate&&s.append("endDate",t.endDate),t.search&&s.append("search",t.search),t.page&&s.append("page",t.page.toString()),t.limit&&s.append("limit",t.limit.toString());const a=s.toString();return await n("/clubs/".concat(e,"/leave-applications/for-approval").concat(a?"?"+a:""))},createLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications"),{method:"POST",body:JSON.stringify(t)}),approveLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/approve"),{method:"POST"}),rejectLeaveApplication:async(e,t,s)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({rejectionReason:s})}),cancelLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/cancel"),{method:"POST"})}}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var l=t[a]={exports:{}};return e[a](l,l.exports,s),l.exports}s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};s.r(a),s.d(a,{Decoder:()=>Ki,Encoder:()=>Ji,PacketType:()=>Vi,isPacketValid:()=>$i,protocol:()=>Hi});var r=s(43),l=s(391);function n(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}var i=s(555);const o=["sri"],d=["page"],c=["page","matches"],u=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],x=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var h="popstate";function p(){return w(function(e,t){let{pathname:s,search:a,hash:r}=e.location;return y("",{pathname:s,search:a,hash:r},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:v(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function b(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(ia){}}}function f(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return(0,i.A)((0,i.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?j(t):t),{},{state:s,key:t&&t.key||a||Math.random().toString(36).substring(2,10)})}function v(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function j(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function w(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:r=document.defaultView,v5Compat:l=!1}=a,n=r.history,o="POP",d=null,c=u();function u(){return(n.state||{idx:null}).idx}function m(){o="POP";let e=u(),t=null==e?null:e-c;c=e,d&&d({action:o,location:p.location,delta:t})}function x(e){return N(e)}null==c&&(c=0,n.replaceState((0,i.A)((0,i.A)({},n.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(r,n)},listen(e){if(d)throw new Error("A history only accepts one active listener");return r.addEventListener(h,m),d=e,()=>{r.removeEventListener(h,m),d=null}},createHref:e=>t(r,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let a=y(p.location,e,t);s&&s(a,e),c=u()+1;let i=f(a,c),m=p.createHref(a);try{n.pushState(i,"",m)}catch(x){if(x instanceof DOMException&&"DataCloneError"===x.name)throw x;r.location.assign(m)}l&&d&&d({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let a=y(p.location,e,t);s&&s(a,e),c=u();let r=f(a,c),i=p.createHref(a);n.replaceState(r,"",i),l&&d&&d({action:o,location:p.location,delta:0})},go:e=>n.go(e)};return p}function N(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="http://localhost";"undefined"!==typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href),b(s,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:v(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}new WeakMap;function S(e,t){return C(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function C(e,t,s,a){let r=q(("string"===typeof t?j(t):t).pathname||"/",s);if(null==r)return null;let l=k(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(l);let n=null;for(let i=0;null==n&&i<l.length;++i){let e=B(r);n=O(l[i],e,a)}return n}function k(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r=arguments.length>4&&void 0!==arguments[4]&&arguments[4],l=function(e,l){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:l,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(a)&&n)return;b(o.relativePath.startsWith(a),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(a,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(a.length)}let d=V([a,o.relativePath]),c=s.concat(o);e.children&&e.children.length>0&&(b(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(d,'".')),k(e.children,t,c,d,n)),(null!=e.path||e.index)&&t.push({path:d,score:L(d,e.index),routesMeta:c})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!==(s=e.path)&&void 0!==s&&s.includes("?"))for(let a of A(e.path))l(e,t,!0,a);else l(e,t)}),t}function A(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,r=s.endsWith("?"),l=s.replace(/\?$/,"");if(0===a.length)return r?[l,""]:[l];let n=A(a.join("/")),i=[];return i.push(...n.map(e=>""===e?l:[l,e].join("/"))),r&&i.push(...n),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,T=3,I=2,_=1,D=10,E=-2,R=e=>"*"===e;function L(e,t){let s=e.split("/"),a=s.length;return s.some(R)&&(a+=E),t&&(a+=I),s.filter(e=>!R(e)).reduce((e,t)=>e+(P.test(t)?T:""===t?_:D),a)}function O(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,r={},l="/",n=[];for(let i=0;i<a.length;++i){let e=a[i],o=i===a.length-1,d="/"===l?t:t.slice(l.length)||"/",c=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},d),u=e.route;if(!c&&o&&s&&!a[a.length-1].route.index&&(c=M({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},d)),!c)return null;Object.assign(r,c.params),n.push({params:r,pathname:V([l,c.pathname]),pathnameBase:J(V([l,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(l=V([l,c.pathnameBase]))}return n}function M(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=F(e.path,e.caseSensitive,e.end),r=t.match(s);if(!r)return null;let l=r[0],n=l.replace(/(.)\/+$/,"$1"),i=r.slice(1),o=a.reduce((e,t,s)=>{let{paramName:a,isOptional:r}=t;if("*"===a){let e=i[s]||"";n=l.slice(0,l.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[s];return e[a]=r&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{});return{params:o,pathname:l,pathnameBase:n,pattern:e}}function F(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let a=[],r="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),r+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":""!==e&&"/"!==e&&(r+="(?:(?=\\/|$))"),[new RegExp(r,t?void 0:"i"),a]}function B(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return g(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function q(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}function U(e,t,s,a){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(a),"].  Please separate it out to the `to.").concat(s,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function W(e){let t=z(e);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function H(e,t,s){let a,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=j(e):(a=(0,i.A)({},e),b(!a.pathname||!a.pathname.includes("?"),U("?","pathname","search",a)),b(!a.pathname||!a.pathname.includes("#"),U("#","pathname","hash",a)),b(!a.search||!a.search.includes("#"),U("#","search","hash",a)));let l,n=""===e||""===a.pathname,o=n?"/":a.pathname;if(null==o)l=s;else{let e=t.length-1;if(!r&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}l=e>=0?t[e]:"/"}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:s,search:a="",hash:r=""}="string"===typeof e?j(e):e,l=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:l,search:K(a),hash:Q(r)}}(a,l),c=o&&"/"!==o&&o.endsWith("/"),u=(n||"."===o)&&s.endsWith("/");return d.pathname.endsWith("/")||!c&&!u||(d.pathname+="/"),d}var V=e=>e.join("/").replace(/\/\/+/g,"/"),J=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),K=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",Q=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function G(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var Y=["POST","PUT","PATCH","DELETE"],$=(new Set(Y),["GET",...Y]);new Set($),Symbol("ResetLoaderData");var Z=r.createContext(null);Z.displayName="DataRouter";var X=r.createContext(null);X.displayName="DataRouterState";var ee=r.createContext(!1);var te=r.createContext({isTransitioning:!1});te.displayName="ViewTransition";var se=r.createContext(new Map);se.displayName="Fetchers";var ae=r.createContext(null);ae.displayName="Await";var re=r.createContext(null);re.displayName="Navigation";var le=r.createContext(null);le.displayName="Location";var ne=r.createContext({outlet:null,matches:[],isDataRoute:!1});ne.displayName="Route";var ie=r.createContext(null);ie.displayName="RouteError";function oe(){return null!=r.useContext(le)}function de(){return b(oe(),"useLocation() may be used only in the context of a <Router> component."),r.useContext(le).location}var ce="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ue(e){r.useContext(re).static||r.useLayoutEffect(e)}function me(){let{isDataRoute:e}=r.useContext(ne);return e?function(){let{router:e}=je("useNavigate"),t=Ne("useNavigate"),s=r.useRef(!1);ue(()=>{s.current=!0});let a=r.useCallback(async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};g(s.current,ce),s.current&&("number"===typeof a?e.navigate(a):await e.navigate(a,(0,i.A)({fromRouteId:t},r)))},[e,t]);return a}():function(){b(oe(),"useNavigate() may be used only in the context of a <Router> component.");let e=r.useContext(Z),{basename:t,navigator:s}=r.useContext(re),{matches:a}=r.useContext(ne),{pathname:l}=de(),n=JSON.stringify(W(a)),i=r.useRef(!1);ue(()=>{i.current=!0});let o=r.useCallback(function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(g(i.current,ce),!i.current)return;if("number"===typeof a)return void s.go(a);let o=H(a,JSON.parse(n),l,"path"===r.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:V([t,o.pathname])),(r.replace?s.replace:s.push)(o,r.state,r)},[t,s,n,l,e]);return o}()}r.createContext(null);function xe(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:s}=r.useContext(ne),{pathname:a}=de(),l=JSON.stringify(W(s));return r.useMemo(()=>H(e,JSON.parse(l),a,"path"===t),[e,l,a,t])}function he(e,t,s,a,l){b(oe(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=r.useContext(re),{matches:o}=r.useContext(ne),d=o[o.length-1],c=d?d.params:{},u=d?d.pathname:"/",m=d?d.pathnameBase:"/",x=d&&d.route;{let e=x&&x.path||"";ke(u,!x||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,p=de();if(t){var f;let e="string"===typeof t?j(t):t;b("/"===m||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(m)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(m,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=p;let y=h.pathname||"/",v=y;if("/"!==m){let e=m.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=S(e,{pathname:v});g(x||null!=w,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),g(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let N=ye(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([m,n.encodeLocation?n.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:V([m,n.encodeLocation?n.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,s,a,l);return t&&N?r.createElement(le.Provider,{value:{location:(0,i.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},N):N}function pe(){let e=Se(),t=G(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,a="rgba(200,200,200, 0.5)",l={padding:"0.5rem",backgroundColor:a},n={padding:"2px 4px",backgroundColor:a},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=r.createElement(r.Fragment,null,r.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),r.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",r.createElement("code",{style:n},"ErrorBoundary")," or"," ",r.createElement("code",{style:n},"errorElement")," prop on your route.")),r.createElement(r.Fragment,null,r.createElement("h2",null,"Unexpected Application Error!"),r.createElement("h3",{style:{fontStyle:"italic"}},t),s?r.createElement("pre",{style:l},s):null,i)}var be=r.createElement(pe,null),ge=class extends r.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?r.createElement(ne.Provider,{value:this.props.routeContext},r.createElement(ie.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function fe(e){let{routeContext:t,match:s,children:a}=e,l=r.useContext(Z);return l&&l.static&&l.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(l.staticContext._deepestRenderedBoundaryId=s.route.id),r.createElement(ne.Provider,{value:t},a)}function ye(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let l=e,n=null===s||void 0===s?void 0:s.errors;if(null!=n){let e=l.findIndex(e=>e.route.id&&void 0!==(null===n||void 0===n?void 0:n[e.route.id]));b(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(n).join(","))),l=l.slice(0,Math.min(l.length,e+1))}let i=!1,o=-1;if(s)for(let r=0;r<l.length;r++){let e=l[r];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=r),e.route.id){let{loaderData:t,errors:a}=s,r=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||r){i=!0,l=o>=0?l.slice(0,o+1):[l[0]];break}}}return l.reduceRight((e,d,c)=>{let u,m=!1,x=null,h=null;s&&(u=n&&d.route.id?n[d.route.id]:void 0,x=d.route.errorElement||be,i&&(o<0&&0===c?(ke("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):o===c&&(m=!0,h=d.route.hydrateFallbackElement||null)));let p=t.concat(l.slice(0,c+1)),b=()=>{let t;return t=u?x:m?h:d.route.Component?r.createElement(d.route.Component,null):d.route.element?d.route.element:e,r.createElement(fe,{match:d,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(d.route.ErrorBoundary||d.route.errorElement||0===c)?r.createElement(ge,{location:s.location,revalidation:s.revalidation,component:x,error:u,children:b(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:a}):b()},null)}function ve(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function je(e){let t=r.useContext(Z);return b(t,ve(e)),t}function we(e){let t=r.useContext(X);return b(t,ve(e)),t}function Ne(e){let t=function(e){let t=r.useContext(ne);return b(t,ve(e)),t}(e),s=t.matches[t.matches.length-1];return b(s.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),s.route.id}function Se(){var e;let t=r.useContext(ie),s=we("useRouteError"),a=Ne("useRouteError");return void 0!==t?t:null===(e=s.errors)||void 0===e?void 0:e[a]}var Ce={};function ke(e,t,s){t||Ce[e]||(Ce[e]=!0,g(!1,s))}var Ae={};function Pe(e,t){e||Ae[t]||(Ae[t]=!0,console.warn(t))}r.memo(function(e){let{routes:t,future:s,state:a,unstable_onError:r}=e;return he(t,void 0,a,r,s)});function Te(e){let{to:t,replace:s,state:a,relative:l}=e;b(oe(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=r.useContext(re);g(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=r.useContext(ne),{pathname:o}=de(),d=me(),c=H(t,W(i),o,"path"===l),u=JSON.stringify(c);return r.useEffect(()=>{d(JSON.parse(u),{replace:s,state:a,relative:l})},[d,u,l,s,a]),null}function Ie(e){b(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function _e(e){let{basename:t="/",children:s=null,location:a,navigationType:l="POP",navigator:n,static:i=!1}=e;b(!oe(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),d=r.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);"string"===typeof a&&(a=j(a));let{pathname:c="/",search:u="",hash:m="",state:x=null,key:h="default"}=a,p=r.useMemo(()=>{let e=q(c,o);return null==e?null:{location:{pathname:e,search:u,hash:m,state:x,key:h},navigationType:l}},[o,c,u,m,x,h,l]);return g(null!=p,'<Router basename="'.concat(o,'"> is not able to match the URL "').concat(c).concat(u).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==p?null:r.createElement(re.Provider,{value:d},r.createElement(le.Provider,{children:s,value:p}))}function De(e){let{children:t,location:s}=e;return he(Ee(t),s)}r.Component;function Ee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];return r.Children.forEach(e,(e,a)=>{if(!r.isValidElement(e))return;let l=[...t,a];if(e.type===r.Fragment)return void s.push.apply(s,Ee(e.props.children,l));b(e.type===Ie,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),b(!e.props.index||!e.props.children,"An index route cannot have child routes.");let n={id:e.props.id||l.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=Ee(e.props.children,l)),s.push(n)}),s}var Re="get",Le="application/x-www-form-urlencoded";function Oe(e){return null!=e&&"string"===typeof e.tagName}var Me=null;var Fe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Be(e){return null==e||Fe.has(e)?e:(g(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Le,'"')),null)}function qe(e,t){let s,a,r,l,n;if(Oe(i=e)&&"form"===i.tagName.toLowerCase()){let n=e.getAttribute("action");a=n?q(n,t):null,s=e.getAttribute("method")||Re,r=Be(e.getAttribute("enctype"))||Le,l=new FormData(e)}else if(function(e){return Oe(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Oe(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let n=e.form;if(null==n)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||n.getAttribute("action");if(a=i?q(i,t):null,s=e.getAttribute("formmethod")||n.getAttribute("method")||Re,r=Be(e.getAttribute("formenctype"))||Be(n.getAttribute("enctype"))||Le,l=new FormData(n,e),!function(){if(null===Me)try{new FormData(document.createElement("form"),0),Me=!1}catch(ia){Me=!0}return Me}()){let{name:t,type:s,value:a}=e;if("image"===s){let e=t?"".concat(t,"."):"";l.append("".concat(e,"x"),"0"),l.append("".concat(e,"y"),"0")}else t&&l.append(t,a)}}else{if(Oe(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Re,a=null,r=Le,n=e}var i;return l&&"text/plain"===r&&(n=l,l=void 0),{action:a,method:s.toLowerCase(),encType:r,formData:l,body:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function Ue(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function ze(e,t,s){let a="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname="_root.".concat(s):t&&"/"===q(a.pathname,t)?a.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(s):a.pathname="".concat(a.pathname.replace(/\/$/,""),".").concat(s),a}async function We(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function He(e){return null!=e&&"string"===typeof e.page}function Ve(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Je(e,t,s,a,r,l){let n=(e,t)=>!s[t]||e.route.id!==s[t].route.id,i=(e,t)=>{var a;return s[t].pathname!==e.pathname||(null===(a=s[t].route.path)||void 0===a?void 0:a.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===l?t.filter((e,t)=>n(e,t)||i(e,t)):"data"===l?t.filter((t,l)=>{let o=a.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(n(t,l)||i(t,l))return!0;if(t.route.shouldRevalidate){var d;let a=t.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:(null===(d=s[0])||void 0===d?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function Ke(e,t){let{includeHydrateFallback:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let r=[a.module];return a.clientActionModule&&(r=r.concat(a.clientActionModule)),a.clientLoaderModule&&(r=r.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(r=r.concat(a.hydrateFallbackModule)),a.imports&&(r=r.concat(a.imports)),r}).flat(1),[...new Set(a)];var a}function Qe(e,t){let s=new Set,a=new Set(t);return e.reduce((e,r)=>{if(t&&!He(r)&&"script"===r.as&&r.href&&a.has(r.href))return e;let l=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}(r));return s.has(l)||(s.add(l),e.push({key:l,link:r})),e},[])}function Ge(e,t){return"lazy"===e.mode&&!0===t}function Ye(){let e=r.useContext(Z);return Ue(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function $e(){let e=r.useContext(X);return Ue(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Ze=r.createContext(void 0);function Xe(){let e=r.useContext(Ze);return Ue(e,"You must render this element inside a <HydratedRouter> element"),e}function et(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function tt(e,t,s){if(s&&!lt)return[e[0]];if(t){let s=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,s+1)}return e}Ze.displayName="FrameworkContext";function st(e){let{page:t}=e,s=n(e,d),{router:a}=Ye(),l=r.useMemo(()=>S(a.routes,t,a.basename),[a.routes,t,a.basename]);return l?r.createElement(rt,(0,i.A)({page:t,matches:l},s)):null}function at(e){let{manifest:t,routeModules:s}=Xe(),[a,l]=r.useState([]);return r.useEffect(()=>{let a=!1;return async function(e,t,s){return Qe((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await We(a,s);return e.links?e.links():[]}return[]}))).flat(1).filter(Ve).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,i.A)((0,i.A)({},e),{},{rel:"prefetch",as:"style"}):(0,i.A)((0,i.A)({},e),{},{rel:"prefetch"})))}(e,t,s).then(e=>{a||l(e)}),()=>{a=!0}},[e,t,s]),a}function rt(e){let{page:t,matches:s}=e,a=n(e,c),l=de(),{manifest:o,routeModules:d}=Xe(),{basename:u}=Ye(),{loaderData:m,matches:x}=$e(),h=r.useMemo(()=>Je(t,s,x,o,l,"data"),[t,s,x,o,l]),p=r.useMemo(()=>Je(t,s,x,o,l,"assets"),[t,s,x,o,l]),b=r.useMemo(()=>{if(t===l.pathname+l.search+l.hash)return[];let e=new Set,a=!1;if(s.forEach(t=>{var s;let r=o.routes[t.route.id];r&&r.hasLoader&&(!h.some(e=>e.route.id===t.route.id)&&t.route.id in m&&null!==(s=d[t.route.id])&&void 0!==s&&s.shouldRevalidate||r.hasClientLoader?a=!0:e.add(t.route.id))}),0===e.size)return[];let r=ze(t,u,"data");return a&&e.size>0&&r.searchParams.set("_routes",s.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[r.pathname+r.search]},[u,m,l,o,h,s,t,d]),g=r.useMemo(()=>Ke(p,o),[p,o]),f=at(p);return r.createElement(r.Fragment,null,b.map(e=>r.createElement("link",(0,i.A)({key:e,rel:"prefetch",as:"fetch",href:e},a))),g.map(e=>r.createElement("link",(0,i.A)({key:e,rel:"modulepreload",href:e},a))),f.map(e=>{let{key:t,link:s}=e;return r.createElement("link",(0,i.A)({key:t,nonce:a.nonce},s))}))}var lt=!1;function nt(e){let{manifest:t,serverHandoffString:s,isSpaMode:a,renderMeta:l,routeDiscovery:d,ssr:c}=Xe(),{router:u,static:m,staticContext:x}=Ye(),{matches:h}=$e(),p=r.useContext(ee),b=Ge(d,c);l&&(l.didRenderScripts=!0);let g=tt(h,null,a);r.useEffect(()=>{lt=!0},[]);let f=r.useMemo(()=>{var a;if(p)return null;let l=x?"window.__reactRouterContext = ".concat(s,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",d=m?"".concat(null!==(a=t.hmr)&&void 0!==a&&a.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(b?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,s)=>{let a="route".concat(s),r=t.routes[e.route.id];Ue(r,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:l,clientLoaderModule:n,clientMiddlewareModule:i,hydrateFallbackModule:o,module:d}=r,c=[...l?[{module:l,varName:"".concat(a,"_clientAction")}]:[],...n?[{module:n,varName:"".concat(a,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(a,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(a,"_HydrateFallback")}]:[],{module:d,varName:"".concat(a,"_main")}];return 1===c.length?"import * as ".concat(a," from ").concat(JSON.stringify(d),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(a," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(b?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:s}=e,a=n(e,o),r=new Set(t.state.matches.map(e=>e.route.id)),l=t.state.location.pathname.split("/").filter(Boolean),d=["/"];for(l.pop();l.length>0;)d.push("/".concat(l.join("/"))),l.pop();d.forEach(e=>{let s=S(t.routes,e,t.basename);s&&s.forEach(e=>r.add(e.route.id))});let c=[...r].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return(0,i.A)((0,i.A)({},a),{},{routes:c,sri:!!s||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return r.createElement(r.Fragment,null,r.createElement("script",(0,i.A)((0,i.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:l},type:void 0})),r.createElement("script",(0,i.A)((0,i.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:d},type:"module",async:!0})))},[]),y=lt||p?[]:(v=t.entry.imports.concat(Ke(g,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let j="object"===typeof t.sri?t.sri:{};return Pe(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),lt||p?null:r.createElement(r.Fragment,null,"object"===typeof t.sri?r.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,b?null:r.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),r.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>r.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),f)}function it(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}r.Component;function ot(e){let{error:t,isOutsideRemixApp:s}=e;console.error(t);let a,l=r.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(G(t))return r.createElement(dt,{title:"Unhandled Thrown Response!"},r.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),l);if(t instanceof Error)a=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);a=new Error(e)}return r.createElement(dt,{title:"Application Error!",isOutsideRemixApp:s},r.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),r.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},a.stack),l)}function dt(e){var t;let{title:s,renderScripts:a,isOutsideRemixApp:l,children:n}=e,{routeModules:i}=Xe();return null!==(t=i.root)&&void 0!==t&&t.Layout&&!l?n:r.createElement("html",{lang:"en"},r.createElement("head",null,r.createElement("meta",{charSet:"utf-8"}),r.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),r.createElement("title",null,s)),r.createElement("body",null,r.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,a?r.createElement(nt,null):null)))}var ct="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{ct&&(window.__reactRouterVersion="7.9.4")}catch(ia){}function ut(e){let{basename:t,children:s,window:a}=e,l=r.useRef();null==l.current&&(l.current=p({window:a,v5Compat:!0}));let n=l.current,[i,o]=r.useState({action:n.action,location:n.location}),d=r.useCallback(e=>{r.startTransition(()=>o(e))},[o]);return r.useLayoutEffect(()=>n.listen(d),[n,d]),r.createElement(_e,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:n})}var mt=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=r.forwardRef(function(e,t){let s,{onClick:a,discover:l="render",prefetch:o="none",relative:d,reloadDocument:c,replace:m,state:x,target:h,to:p,preventScrollReset:f,viewTransition:y}=e,j=n(e,u),{basename:w}=r.useContext(re),N="string"===typeof p&&mt.test(p),S=!1;if("string"===typeof p&&N&&(s=p,ct))try{let e=new URL(window.location.href),t=p.startsWith("//")?new URL(e.protocol+p):new URL(p),s=q(t.pathname,w);t.origin===e.origin&&null!=s?p=s+t.search+t.hash:S=!0}catch(ia){g(!1,'<Link to="'.concat(p,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(oe(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:a}=r.useContext(re),{hash:l,pathname:n,search:i}=xe(e,{relative:t}),o=n;return"/"!==s&&(o="/"===n?s:V([s,n])),a.createHref({pathname:o,search:i,hash:l})}(p,{relative:d}),[k,A,P]=function(e,t){let s=r.useContext(Ze),[a,l]=r.useState(!1),[n,i]=r.useState(!1),{onFocus:o,onBlur:d,onMouseEnter:c,onMouseLeave:u,onTouchStart:m}=t,x=r.useRef(null);r.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return x.current&&e.observe(x.current),()=>{e.disconnect()}}},[e]),r.useEffect(()=>{if(a){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[a]);let h=()=>{l(!0)},p=()=>{l(!1),i(!1)};return s?"intent"!==e?[n,x,{}]:[n,x,{onFocus:et(o,h),onBlur:et(d,p),onMouseEnter:et(c,h),onMouseLeave:et(u,p),onTouchStart:et(m,h)}]:[!1,x,{}]}(o,j),T=function(e){let{target:t,replace:s,state:a,preventScrollReset:l,relative:n,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=me(),d=de(),c=xe(e,{relative:n});return r.useCallback(r=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(r,t)){r.preventDefault();let t=void 0!==s?s:v(d)===v(c);o(e,{replace:t,state:a,preventScrollReset:l,relative:n,viewTransition:i})}},[d,o,c,s,a,t,e,l,n,i])}(p,{replace:m,state:x,target:h,preventScrollReset:f,relative:d,viewTransition:y});let I=r.createElement("a",(0,i.A)((0,i.A)((0,i.A)({},j),P),{},{href:s||C,onClick:S||c?a:function(e){a&&a(e),e.defaultPrevented||T(e)},ref:it(t,A),target:h,"data-discover":N||"render"!==l?void 0:"true"}));return k&&!N?r.createElement(r.Fragment,null,I,r.createElement(st,{page:C})):I});xt.displayName="Link",r.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:a=!1,className:l="",end:o=!1,style:d,to:c,viewTransition:u,children:x}=e,h=n(e,m),p=xe(c,{relative:h.relative}),g=de(),f=r.useContext(X),{navigator:y,basename:v}=r.useContext(re),j=null!=f&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=r.useContext(te);b(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:a}=bt("useViewTransitionState"),l=xe(e,{relative:t});if(!s.isTransitioning)return!1;let n=q(s.currentLocation.pathname,a)||s.currentLocation.pathname,i=q(s.nextLocation.pathname,a)||s.nextLocation.pathname;return null!=M(l.pathname,i)||null!=M(l.pathname,n)}(p)&&!0===u,w=y.encodeLocation?y.encodeLocation(p).pathname:p.pathname,N=g.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;a||(N=N.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&v&&(S=q(S,v)||S);const C="/"!==w&&w.endsWith("/")?w.length-1:w.length;let k,A=N===w||!o&&N.startsWith(w)&&"/"===N.charAt(C),P=null!=S&&(S===w||!o&&S.startsWith(w)&&"/"===S.charAt(w.length)),T={isActive:A,isPending:P,isTransitioning:j},I=A?s:void 0;k="function"===typeof l?l(T):[l,A?"active":null,P?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let _="function"===typeof d?d(T):d;return r.createElement(xt,(0,i.A)((0,i.A)({},h),{},{"aria-current":I,className:k,ref:t,style:_,to:c,viewTransition:u}),"function"===typeof x?x(T):x)}).displayName="NavLink";var ht=r.forwardRef((e,t)=>{let{discover:s="render",fetcherKey:a,navigate:l,reloadDocument:o,replace:d,state:c,method:u=Re,action:m,onSubmit:h,relative:p,preventScrollReset:g,viewTransition:f}=e,y=n(e,x),j=yt(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:s}=r.useContext(re),a=r.useContext(ne);b(a,"useFormAction must be used inside a RouteContext");let[l]=a.matches.slice(-1),n=(0,i.A)({},xe(e||".",{relative:t})),o=de();if(null==e){n.search=o.search;let e=new URLSearchParams(n.search),t=e.getAll("index"),s=t.some(e=>""===e);if(s){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let s=e.toString();n.search=s?"?".concat(s):""}}e&&"."!==e||!l.route.index||(n.search=n.search?n.search.replace(/^\?/,"?index&"):"?index");"/"!==s&&(n.pathname="/"===n.pathname?s:V([s,n.pathname]));return v(n)}(m,{relative:p}),N="get"===u.toLowerCase()?"get":"post",S="string"===typeof m&&mt.test(m);return r.createElement("form",(0,i.A)((0,i.A)({ref:t,method:N,action:w,onSubmit:o?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;j(t||e.currentTarget,{fetcherKey:a,method:s,navigate:l,replace:d,state:c,relative:p,preventScrollReset:g,viewTransition:f})}},y),{},{"data-discover":S||"render"!==s?void 0:"true"}))});function pt(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function bt(e){let t=r.useContext(Z);return b(t,pt(e)),t}ht.displayName="Form";var gt=0,ft=()=>"__".concat(String(++gt),"__");function yt(){let{router:e}=bt("useSubmit"),{basename:t}=r.useContext(re),s=Ne("useRouteId");return r.useCallback(async function(a){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:l,method:n,encType:i,formData:o,body:d}=qe(a,t);if(!1===r.navigate){let t=r.fetcherKey||ft();await e.fetch(t,s,r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:d,formMethod:r.method||n,formEncType:r.encType||i,flushSync:r.flushSync})}else await e.navigate(r.action||l,{preventScrollReset:r.preventScrollReset,formData:o,body:d,formMethod:r.method||n,formEncType:r.encType||i,replace:r.replace,state:r.state,fromRouteId:s,flushSync:r.flushSync,viewTransition:r.viewTransition})},[e,t,s])}var vt,jt;function wt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Nt(e,t,s){wt(e,t),t.set(e,s)}function St(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function Ct(e,t){return e.get(St(e,t))}function kt(e,t,s){return e.set(St(e,t),s),s}var At={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Pt=new(vt=new WeakMap,jt=new WeakMap,class{constructor(){Nt(this,vt,At),Nt(this,jt,!1)}setTimeoutProvider(e){kt(vt,this,e)}setTimeout(e,t){return Ct(vt,this).setTimeout(e,t)}clearTimeout(e){Ct(vt,this).clearTimeout(e)}setInterval(e,t){return Ct(vt,this).setInterval(e,t)}clearInterval(e){Ct(vt,this).clearInterval(e)}});var Tt="undefined"===typeof window||"Deno"in globalThis;function It(){}function _t(e){return"number"===typeof e&&e>=0&&e!==1/0}function Dt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function Et(e,t){return"function"===typeof e?e(t):e}function Rt(e,t){return"function"===typeof e?e(t):e}function Lt(e,t){const{type:s="all",exact:a,fetchStatus:r,predicate:l,queryKey:n,stale:i}=e;if(n)if(a){if(t.queryHash!==Mt(n,t.options))return!1}else if(!Bt(t.queryKey,n))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!==typeof i||t.isStale()===i)&&((!r||r===t.state.fetchStatus)&&!(l&&!l(t)))}function Ot(e,t){const{exact:s,status:a,predicate:r,mutationKey:l}=e;if(l){if(!t.options.mutationKey)return!1;if(s){if(Ft(t.options.mutationKey)!==Ft(l))return!1}else if(!Bt(t.options.mutationKey,l))return!1}return(!a||t.state.status===a)&&!(r&&!r(t))}function Mt(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||Ft)(e)}function Ft(e){return JSON.stringify(e,(e,t)=>Ht(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function Bt(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Object.keys(t).every(s=>Bt(e[s],t[s])))}var qt=Object.prototype.hasOwnProperty;function Ut(e,t){if(e===t)return e;const s=Wt(e)&&Wt(t);if(!s&&(!Ht(e)||!Ht(t)))return t;const a=(s?e:Object.keys(e)).length,r=s?t:Object.keys(t),l=r.length,n=s?new Array(l):{};let i=0;for(let o=0;o<l;o++){const l=s?o:r[o],d=e[l],c=t[l];if(d===c){n[l]=d,(s?o<a:qt.call(e,l))&&i++;continue}if(null===d||null===c||"object"!==typeof d||"object"!==typeof c){n[l]=c;continue}const u=Ut(d,c);n[l]=u,u===d&&i++}return a===l&&i===a?e:n}function zt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Wt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Ht(e){if(!Vt(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!Vt(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Vt(e){return"[object Object]"===Object.prototype.toString.call(e)}function Jt(e,t,s){return"function"===typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?Ut(e,t):t}function Kt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=[...e,t];return s&&a.length>s?a.slice(1):a}function Qt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var Gt=Symbol();function Yt(e,t){return!e.queryFn&&null!==t&&void 0!==t&&t.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==Gt?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}function $t(e,t){return"function"===typeof e?e(...t):!!e}function Zt(e,t){wt(e,t),t.add(e)}var Xt=function(e){setTimeout(e,0)};var es,ts,ss,as,rs,ls,ns=function(){let e=[],t=0,s=e=>{e()},a=e=>{e()},r=Xt;const l=a=>{t?e.push(a):r(()=>{s(a)})};return{batch:l=>{let n;t++;try{n=l()}finally{t--,t||(()=>{const t=e;e=[],t.length&&r(()=>{a(()=>{t.forEach(e=>{s(e)})})})})()}return n},batchCalls:e=>function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];l(()=>{e(...s)})},schedule:l,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{r=e}}}(),is=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},os=new(es=new WeakMap,ts=new WeakMap,ss=new WeakMap,class extends is{constructor(){super(),Nt(this,es,void 0),Nt(this,ts,void 0),Nt(this,ss,void 0),kt(ss,this,e=>{if(!Tt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){Ct(ts,this)||this.setEventListener(Ct(ss,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Ct(ts,this))||void 0===e||e.call(this),kt(ts,this,void 0))}setEventListener(e){var t;kt(ss,this,e),null===(t=Ct(ts,this))||void 0===t||t.call(this),kt(ts,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){Ct(es,this)!==e&&(kt(es,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"===typeof Ct(es,this)?Ct(es,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),ds=new(as=new WeakMap,rs=new WeakMap,ls=new WeakMap,class extends is{constructor(){super(),Nt(this,as,!0),Nt(this,rs,void 0),Nt(this,ls,void 0),kt(ls,this,e=>{if(!Tt&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){Ct(rs,this)||this.setEventListener(Ct(ls,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Ct(rs,this))||void 0===e||e.call(this),kt(rs,this,void 0))}setEventListener(e){var t;kt(ls,this,e),null===(t=Ct(rs,this))||void 0===t||t.call(this),kt(rs,this,e(this.setOnline.bind(this)))}setOnline(e){Ct(as,this)!==e&&(kt(as,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return Ct(as,this)}});function cs(){let e,t;const s=new Promise((s,a)=>{e=s,t=a});function a(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{a({status:"fulfilled",value:t}),e(t)},s.reject=e=>{a({status:"rejected",reason:e}),t(e)},s}function us(e){return Math.min(1e3*2**e,3e4)}function ms(e){return"online"!==(null!==e&&void 0!==e?e:"online")||ds.isOnline()}var xs,hs=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function ps(e){let t,s=!1,a=0;const r=cs(),l=()=>"pending"!==r.status,n=()=>os.isFocused()&&("always"===e.networkMode||ds.isOnline())&&e.canRun(),i=()=>ms(e.networkMode)&&e.canRun(),o=e=>{var s;l()||(null===(s=t)||void 0===s||s(),r.resolve(e))},d=e=>{var s;l()||(null===(s=t)||void 0===s||s(),r.reject(e))},c=()=>new Promise(s=>{var a;t=e=>{(l()||n())&&s(e)},null===(a=e.onPause)||void 0===a||a.call(e)}).then(()=>{var s;(t=void 0,l())||(null===(s=e.onContinue)||void 0===s||s.call(e))}),u=()=>{if(l())return;let t;const r=0===a?e.initialPromise:void 0;try{t=null!==r&&void 0!==r?r:e.fn()}catch(i){t=Promise.reject(i)}Promise.resolve(t).then(o).catch(t=>{var r,i,o;if(l())return;const m=null!==(r=e.retry)&&void 0!==r?r:Tt?0:3,x=null!==(i=e.retryDelay)&&void 0!==i?i:us,h="function"===typeof x?x(a,t):x,p=!0===m||"number"===typeof m&&a<m||"function"===typeof m&&m(a,t);var b;!s&&p?(a++,null===(o=e.onFail)||void 0===o||o.call(e,a,t),(b=h,new Promise(e=>{Pt.setTimeout(e,b)})).then(()=>n()?void 0:c()).then(()=>{s?d(t):u()})):d(t)})};return{promise:r,status:()=>r.status,cancel:t=>{if(!l()){var s;const a=new hs(t);d(a),null===(s=e.onCancel)||void 0===s||s.call(e,a)}},continue:()=>{var e;return null===(e=t)||void 0===e||e(),r},cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:i,start:()=>(i()?u():c().then(u),r)}}var bs,gs,fs,ys,vs,js,ws,Ns,Ss,Cs=(xs=new WeakMap,class{constructor(){Nt(this,xs,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),_t(this.gcTime)&&kt(xs,this,Pt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:Tt?1/0:3e5)}clearGcTimeout(){Ct(xs,this)&&(Pt.clearTimeout(Ct(xs,this)),kt(xs,this,void 0))}}),ks=(bs=new WeakMap,gs=new WeakMap,fs=new WeakMap,ys=new WeakMap,vs=new WeakMap,js=new WeakMap,ws=new WeakMap,Ns=new WeakSet,class extends Cs{constructor(e){var t;super(),Zt(this,Ns),Nt(this,bs,void 0),Nt(this,gs,void 0),Nt(this,fs,void 0),Nt(this,ys,void 0),Nt(this,vs,void 0),Nt(this,js,void 0),Nt(this,ws,void 0),kt(ws,this,!1),kt(js,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],kt(ys,this,e.client),kt(fs,this,Ct(ys,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,kt(bs,this,Is(this.options)),this.state=null!==(t=e.state)&&void 0!==t?t:Ct(bs,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null===(e=Ct(vs,this))||void 0===e?void 0:e.promise}setOptions(e){if(this.options=(0,i.A)((0,i.A)({},Ct(js,this)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Is(this.options);void 0!==e.data&&(this.setState(Ts(e.data,e.dataUpdatedAt)),kt(bs,this,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||Ct(fs,this).remove(this)}setData(e,t){const s=Jt(this.state.data,e,this.options);return St(Ns,this,As).call(this,{data:s,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),s}setState(e,t){St(Ns,this,As).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const a=null===(t=Ct(vs,this))||void 0===t?void 0:t.promise;return null===(s=Ct(vs,this))||void 0===s||s.cancel(e),a?a.then(It).catch(It):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ct(bs,this))}isActive(){return this.observers.some(e=>!1!==Rt(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===Et(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Dt(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=Ct(vs,this))||void 0===e||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=Ct(vs,this))||void 0===e||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),Ct(fs,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(Ct(vs,this)&&(Ct(ws,this)?Ct(vs,this).cancel({revert:!0}):Ct(vs,this).cancelRetry()),this.scheduleGc()),Ct(fs,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||St(Ns,this,As).call(this,{type:"invalidate"})}async fetch(e,t){var s,a,r;if("idle"!==this.state.fetchStatus&&"rejected"!==(null===(s=Ct(vs,this))||void 0===s?void 0:s.status()))if(void 0!==this.state.data&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(Ct(vs,this))return Ct(vs,this).continueRetry(),Ct(vs,this).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const l=new AbortController,n=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(kt(ws,this,!0),l.signal)})},o=()=>{const e=Yt(this.options,t),s=(()=>{const e={client:Ct(ys,this),queryKey:this.queryKey,meta:this.meta};return n(e),e})();return kt(ws,this,!1),this.options.persister?this.options.persister(e,s,this):e(s)},d=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:Ct(ys,this),state:this.state,fetchFn:o};return n(e),e})();var c;(null===(a=this.options.behavior)||void 0===a||a.onFetch(d,this),kt(gs,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(r=d.fetchOptions)||void 0===r?void 0:r.meta))&&St(Ns,this,As).call(this,{type:"fetch",meta:null===(c=d.fetchOptions)||void 0===c?void 0:c.meta});kt(vs,this,ps({initialPromise:null===t||void 0===t?void 0:t.initialPromise,fn:d.fetchFn,onCancel:e=>{e instanceof hs&&e.revert&&this.setState((0,i.A)((0,i.A)({},Ct(gs,this)),{},{fetchStatus:"idle"})),l.abort()},onFail:(e,t)=>{St(Ns,this,As).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{St(Ns,this,As).call(this,{type:"pause"})},onContinue:()=>{St(Ns,this,As).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{var u,m,x,h;const e=await Ct(vs,this).start();if(void 0===e)throw new Error("".concat(this.queryHash," data is undefined"));return this.setData(e),null===(u=(m=Ct(fs,this).config).onSuccess)||void 0===u||u.call(m,e,this),null===(x=(h=Ct(fs,this).config).onSettled)||void 0===x||x.call(h,e,this.state.error,this),e}catch(y){var p,b,g,f;if(y instanceof hs){if(y.silent)return Ct(vs,this).promise;if(y.revert){if(void 0===this.state.data)throw y;return this.state.data}}throw St(Ns,this,As).call(this,{type:"error",error:y}),null===(p=(b=Ct(fs,this).config).onError)||void 0===p||p.call(b,y,this),null===(g=(f=Ct(fs,this).config).onSettled)||void 0===g||g.call(f,this.state.data,y,this),y}finally{this.scheduleGc()}}});function As(e){this.state=(t=>{var s;switch(e.type){case"failed":return(0,i.A)((0,i.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,i.A)((0,i.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,i.A)((0,i.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,i.A)((0,i.A)((0,i.A)({},t),Ps(t.data,this.options)),{},{fetchMeta:null!==(s=e.meta)&&void 0!==s?s:null});case"success":const a=(0,i.A)((0,i.A)((0,i.A)({},t),Ts(e.data,e.dataUpdatedAt)),{},{dataUpdateCount:t.dataUpdateCount+1},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return kt(gs,this,e.manual?a:void 0),a;case"error":const r=e.error;return(0,i.A)((0,i.A)({},t),{},{error:r,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"});case"invalidate":return(0,i.A)((0,i.A)({},t),{},{isInvalidated:!0});case"setState":return(0,i.A)((0,i.A)({},t),e.state)}})(this.state),ns.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),Ct(fs,this).notify({query:this,type:"updated",action:e})})}function Ps(e,t){return(0,i.A)({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:ms(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function Ts(e,t){return{data:e,dataUpdatedAt:null!==t&&void 0!==t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function Is(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,a=s?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!==a&&void 0!==a?a:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var _s,Ds,Es,Rs,Ls,Os,Ms,Fs,Bs=(Ss=new WeakMap,class extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Nt(this,Ss,void 0),this.config=e,kt(Ss,this,new Map)}build(e,t,s){var a;const r=t.queryKey,l=null!==(a=t.queryHash)&&void 0!==a?a:Mt(r,t);let n=this.get(l);return n||(n=new ks({client:e,queryKey:r,queryHash:l,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(r)}),this.add(n)),n}add(e){Ct(Ss,this).has(e.queryHash)||(Ct(Ss,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=Ct(Ss,this).get(e.queryHash);t&&(e.destroy(),t===e&&Ct(Ss,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){ns.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return Ct(Ss,this).get(e)}getAll(){return[...Ct(Ss,this).values()]}find(e){const t=(0,i.A)({exact:!0},e);return this.getAll().find(e=>Lt(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Lt(e,t)):t}notify(e){ns.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){ns.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){ns.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),qs=(_s=new WeakMap,Ds=new WeakMap,Es=new WeakMap,Rs=new WeakMap,Ls=new WeakSet,class extends Cs{constructor(e){super(),Zt(this,Ls),Nt(this,_s,void 0),Nt(this,Ds,void 0),Nt(this,Es,void 0),Nt(this,Rs,void 0),kt(_s,this,e.client),this.mutationId=e.mutationId,kt(Es,this,e.mutationCache),kt(Ds,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){Ct(Ds,this).includes(e)||(Ct(Ds,this).push(e),this.clearGcTimeout(),Ct(Es,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){kt(Ds,this,Ct(Ds,this).filter(t=>t!==e)),this.scheduleGc(),Ct(Es,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){Ct(Ds,this).length||("pending"===this.state.status?this.scheduleGc():Ct(Es,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=Ct(Rs,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){var t;const s=()=>{St(Ls,this,Us).call(this,{type:"continue"})},a={client:Ct(_s,this),meta:this.options.meta,mutationKey:this.options.mutationKey};kt(Rs,this,ps({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{St(Ls,this,Us).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{St(Ls,this,Us).call(this,{type:"pause"})},onContinue:s,retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Ct(Es,this).canRun(this)}));const r="pending"===this.state.status,l=!Ct(Rs,this).canStart();try{var n,i,o,d,c,u,m,x;if(r)s();else{var h,p,b,g;St(Ls,this,Us).call(this,{type:"pending",variables:e,isPaused:l}),await(null===(h=(p=Ct(Es,this).config).onMutate)||void 0===h?void 0:h.call(p,e,this,a));const t=await(null===(b=(g=this.options).onMutate)||void 0===b?void 0:b.call(g,e,a));t!==this.state.context&&St(Ls,this,Us).call(this,{type:"pending",context:t,variables:e,isPaused:l})}const t=await Ct(Rs,this).start();return await(null===(n=(i=Ct(Es,this).config).onSuccess)||void 0===n?void 0:n.call(i,t,e,this.state.context,this,a)),await(null===(o=(d=this.options).onSuccess)||void 0===o?void 0:o.call(d,t,e,this.state.context,a)),await(null===(c=(u=Ct(Es,this).config).onSettled)||void 0===c?void 0:c.call(u,t,null,this.state.variables,this.state.context,this,a)),await(null===(m=(x=this.options).onSettled)||void 0===m?void 0:m.call(x,t,null,e,this.state.context,a)),St(Ls,this,Us).call(this,{type:"success",data:t}),t}catch(k){try{var f,y,v,j,w,N,S,C;throw await(null===(f=(y=Ct(Es,this).config).onError)||void 0===f?void 0:f.call(y,k,e,this.state.context,this,a)),await(null===(v=(j=this.options).onError)||void 0===v?void 0:v.call(j,k,e,this.state.context,a)),await(null===(w=(N=Ct(Es,this).config).onSettled)||void 0===w?void 0:w.call(N,void 0,k,this.state.variables,this.state.context,this,a)),await(null===(S=(C=this.options).onSettled)||void 0===S?void 0:S.call(C,void 0,k,e,this.state.context,a)),k}finally{St(Ls,this,Us).call(this,{type:"error",error:k})}}finally{Ct(Es,this).runNext(this)}}});function Us(e){this.state=(t=>{switch(e.type){case"failed":return(0,i.A)((0,i.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,i.A)((0,i.A)({},t),{},{isPaused:!0});case"continue":return(0,i.A)((0,i.A)({},t),{},{isPaused:!1});case"pending":return(0,i.A)((0,i.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,i.A)((0,i.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,i.A)((0,i.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),ns.batch(()=>{Ct(Ds,this).forEach(t=>{t.onMutationUpdate(e)}),Ct(Es,this).notify({mutation:this,type:"updated",action:e})})}var zs,Ws,Hs,Vs,Js,Ks,Qs,Gs,Ys=(Os=new WeakMap,Ms=new WeakMap,Fs=new WeakMap,class extends is{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),Nt(this,Os,void 0),Nt(this,Ms,void 0),Nt(this,Fs,void 0),this.config=e,kt(Os,this,new Set),kt(Ms,this,new Map),kt(Fs,this,0)}build(e,t,s){var a;const r=new qs({client:e,mutationCache:this,mutationId:kt(Fs,this,(a=Ct(Fs,this),++a)),options:e.defaultMutationOptions(t),state:s});return this.add(r),r}add(e){Ct(Os,this).add(e);const t=$s(e);if("string"===typeof t){const s=Ct(Ms,this).get(t);s?s.push(e):Ct(Ms,this).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(Ct(Os,this).delete(e)){const t=$s(e);if("string"===typeof t){const s=Ct(Ms,this).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&Ct(Ms,this).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=$s(e);if("string"===typeof t){const s=Ct(Ms,this).get(t),a=null===s||void 0===s?void 0:s.find(e=>"pending"===e.state.status);return!a||a===e}return!0}runNext(e){const t=$s(e);if("string"===typeof t){var s,a;const r=null===(s=Ct(Ms,this).get(t))||void 0===s?void 0:s.find(t=>t!==e&&t.state.isPaused);return null!==(a=null===r||void 0===r?void 0:r.continue())&&void 0!==a?a:Promise.resolve()}return Promise.resolve()}clear(){ns.batch(()=>{Ct(Os,this).forEach(e=>{this.notify({type:"removed",mutation:e})}),Ct(Os,this).clear(),Ct(Ms,this).clear()})}getAll(){return Array.from(Ct(Os,this))}find(e){const t=(0,i.A)({exact:!0},e);return this.getAll().find(e=>Ot(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>Ot(e,t))}notify(e){ns.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return ns.batch(()=>Promise.all(e.map(e=>e.continue().catch(It))))}});function $s(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}function Zs(e){return{onFetch:(t,s)=>{var a,r,l;const n=t.options,i=null===(a=t.fetchOptions)||void 0===a||null===(a=a.meta)||void 0===a||null===(a=a.fetchMore)||void 0===a?void 0:a.direction,o=(null===(r=t.state.data)||void 0===r?void 0:r.pages)||[],d=(null===(l=t.state.data)||void 0===l?void 0:l.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const m=async()=>{let s=!1;const a=Yt(t.options,t.fetchOptions),r=async(e,r,l)=>{if(s)return Promise.reject();if(null==r&&e.pages.length)return Promise.resolve(e);const n=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:r,direction:l?"backward":"forward",meta:t.options.meta};var a;return a=e,Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)}),e})(),i=await a(n),{maxPages:o}=t.options,d=l?Qt:Kt;return{pages:d(e.pages,i,o),pageParams:d(e.pageParams,r,o)}};if(i&&o.length){const e="backward"===i,t={pages:o,pageParams:d},s=(e?ea:Xs)(n,t);c=await r(t,s,e)}else{const t=null!==e&&void 0!==e?e:o.length;do{var l;const e=0===u?null!==(l=d[0])&&void 0!==l?l:n.initialPageParam:Xs(n,c);if(u>0&&null==e)break;c=await r(c,e),u++}while(u<t)}return c};t.options.persister?t.fetchFn=()=>{var e,a;return null===(e=(a=t.options).persister)||void 0===e?void 0:e.call(a,m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=m}}}function Xs(e,t){let{pages:s,pageParams:a}=t;const r=s.length-1;return s.length>0?e.getNextPageParam(s[r],s,a[r],a):void 0}function ea(e,t){var s;let{pages:a,pageParams:r}=t;return a.length>0?null===(s=e.getPreviousPageParam)||void 0===s?void 0:s.call(e,a[0],a,r[0],r):void 0}var ta=(zs=new WeakMap,Ws=new WeakMap,Hs=new WeakMap,Vs=new WeakMap,Js=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,Gs=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Nt(this,zs,void 0),Nt(this,Ws,void 0),Nt(this,Hs,void 0),Nt(this,Vs,void 0),Nt(this,Js,void 0),Nt(this,Ks,void 0),Nt(this,Qs,void 0),Nt(this,Gs,void 0),kt(zs,this,e.queryCache||new Bs),kt(Ws,this,e.mutationCache||new Ys),kt(Hs,this,e.defaultOptions||{}),kt(Vs,this,new Map),kt(Js,this,new Map),kt(Ks,this,0)}mount(){var e;kt(Ks,this,(e=Ct(Ks,this),e++,e)),1===Ct(Ks,this)&&(kt(Qs,this,os.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ct(zs,this).onFocus())})),kt(Gs,this,ds.subscribe(async e=>{e&&(await this.resumePausedMutations(),Ct(zs,this).onOnline())})))}unmount(){var e,t,s;kt(Ks,this,(e=Ct(Ks,this),e--,e)),0===Ct(Ks,this)&&(null===(t=Ct(Qs,this))||void 0===t||t.call(this),kt(Qs,this,void 0),null===(s=Ct(Gs,this))||void 0===s||s.call(this),kt(Gs,this,void 0))}isFetching(e){return Ct(zs,this).findAll((0,i.A)((0,i.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return Ct(Ws,this).findAll((0,i.A)((0,i.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=Ct(zs,this).get(s.queryHash))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=Ct(zs,this).build(this,t),a=s.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(Et(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return Ct(zs,this).findAll(e).map(e=>{let{queryKey:t,state:s}=e;return[t,s.data]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),r=Ct(zs,this).get(a.queryHash),l=function(e,t){return"function"===typeof e?e(t):e}(t,null===r||void 0===r?void 0:r.state.data);if(void 0!==l)return Ct(zs,this).build(this,a).setData(l,(0,i.A)((0,i.A)({},s),{},{manual:!0}))}setQueriesData(e,t,s){return ns.batch(()=>Ct(zs,this).findAll(e).map(e=>{let{queryKey:a}=e;return[a,this.setQueryData(a,t,s)]}))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=Ct(zs,this).get(s.queryHash))||void 0===t?void 0:t.state}removeQueries(e){const t=Ct(zs,this);ns.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=Ct(zs,this);return ns.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries((0,i.A)({type:"active"},e),t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,i.A)({revert:!0},t),a=ns.batch(()=>Ct(zs,this).findAll(e).map(e=>e.cancel(s)));return Promise.all(a).then(It).catch(It)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ns.batch(()=>{var s,a;return Ct(zs,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null===e||void 0===e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries((0,i.A)((0,i.A)({},e),{},{type:null!==(s=null!==(a=null===e||void 0===e?void 0:e.refetchType)&&void 0!==a?a:null===e||void 0===e?void 0:e.type)&&void 0!==s?s:"active"}),t)})}refetchQueries(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(0,i.A)((0,i.A)({},s),{},{cancelRefetch:null===(t=s.cancelRefetch)||void 0===t||t}),r=ns.batch(()=>Ct(zs,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,a);return a.throwOnError||(t=t.catch(It)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(r).then(It)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=Ct(zs,this).build(this,t);return s.isStaleByTime(Et(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(It).catch(It)}fetchInfiniteQuery(e){return e.behavior=Zs(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(It).catch(It)}ensureInfiniteQueryData(e){return e.behavior=Zs(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return ds.isOnline()?Ct(Ws,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return Ct(zs,this)}getMutationCache(){return Ct(Ws,this)}getDefaultOptions(){return Ct(Hs,this)}setDefaultOptions(e){kt(Hs,this,e)}setQueryDefaults(e,t){Ct(Vs,this).set(Ft(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Ct(Vs,this).values()],s={};return t.forEach(t=>{Bt(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){Ct(Js,this).set(Ft(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Ct(Js,this).values()],s={};return t.forEach(t=>{Bt(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t=(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},Ct(Hs,this).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=Mt(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gt&&(t.enabled=!1),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},Ct(Hs,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){Ct(zs,this).clear(),Ct(Ws,this).clear()}}),sa=s(579),aa=r.createContext(void 0),ra=e=>{const t=r.useContext(aa);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},la=e=>{let{client:t,children:s}=e;return r.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,sa.jsx)(aa.Provider,{value:t,children:s})};function na(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let ia={data:""},oa=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||ia},da=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ca=/\/\*[^]*?\*\/|  +/g,ua=/\n+/g,ma=(e,t)=>{let s="",a="",r="";for(let l in e){let n=e[l];"@"==l[0]?"i"==l[1]?s=l+" "+n+";":a+="f"==l[1]?ma(n,l):l+"{"+ma(n,"k"==l[1]?"":t)+"}":"object"==typeof n?a+=ma(n,t?t.replace(/([^,])+/g,e=>l.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):l):null!=n&&(l=/^--/.test(l)?l:l.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=ma.p?ma.p(l,n):l+":"+n+";")}return s+(t&&r?t+"{"+r+"}":r)+a},xa={},ha=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+ha(e[s]);return t}return e},pa=(e,t,s,a,r)=>{let l=ha(e),n=xa[l]||(xa[l]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(l));if(!xa[n]){let t=l!==e?e:(e=>{let t,s,a=[{}];for(;t=da.exec(e.replace(ca,""));)t[4]?a.shift():t[3]?(s=t[3].replace(ua," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(ua," ").trim();return a[0]})(e);xa[n]=ma(r?{["@keyframes "+n]:t}:t,s?"":"."+n)}let i=s&&xa.g?xa.g:null;return s&&(xa.g=xa[n]),((e,t,s,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(xa[n],t,a,i),n};function ba(e){let t=this||{},s=e.call?e(t.p):e;return pa(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,r)=>{let l=t[r];if(l&&l.call){let e=l(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;l=t?"."+t:e&&"object"==typeof e?e.props?"":ma(e,""):!1===e?"":e}return e+a+(null==l?"":l)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,oa(t.target),t.g,t.o,t.k)}ba.bind({g:1});let ga,fa,ya,va=ba.bind({k:1});function ja(e,t){let s=this||{};return function(){let a=arguments;function r(l,n){let i=Object.assign({},l),o=i.className||r.className;s.p=Object.assign({theme:fa&&fa()},i),s.o=/ *go\d+/.test(o),i.className=ba.apply(s,a)+(o?" "+o:""),t&&(i.ref=n);let d=e;return e[0]&&(d=i.as||e,delete i.as),ya&&d[0]&&ya(i),ga(d,i)}return t?t(r):r}}var wa,Na,Sa,Ca,ka,Aa,Pa,Ta,Ia,_a,Da,Ea,Ra,La,Oa,Ma,Fa=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Ba=(()=>{let e=0;return()=>(++e).toString()})(),qa=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ua="default",za=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return(0,i.A)((0,i.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,s)});case 1:return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,i.A)((0,i.A)({},e),t.toast):e)});case 2:let{toast:a}=t;return za(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=t;return(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.map(e=>e.id===r||void 0===r?(0,i.A)((0,i.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,i.A)((0,i.A)({},e),{},{toasts:[]}):(0,i.A)((0,i.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,i.A)((0,i.A)({},e),{},{pausedAt:t.time});case 6:let l=t.time-(e.pausedAt||0);return(0,i.A)((0,i.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,i.A)((0,i.A)({},e),{},{pauseDuration:e.pauseDuration+l}))})}},Wa=[],Ha={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Va={},Ja=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua;Va[t]=za(Va[t]||Ha,e),Wa.forEach(e=>{let[s,a]=e;s===t&&a(Va[t])})},Ka=e=>Object.keys(Va).forEach(t=>Ja(e,t)),Qa=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua;return t=>{Ja(t,e)}},Ga={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ya=e=>(t,s)=>{let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return(0,i.A)((0,i.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||Ba()})}(t,e,s);return Qa(a.toasterId||(e=>Object.keys(Va).find(t=>Va[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},$a=(e,t)=>Ya("blank")(e,t);$a.error=Ya("error"),$a.success=Ya("success"),$a.loading=Ya("loading"),$a.custom=Ya("custom"),$a.dismiss=(e,t)=>{let s={type:3,toastId:e};t?Qa(t)(s):Ka(s)},$a.dismissAll=e=>$a.dismiss(void 0,e),$a.remove=(e,t)=>{let s={type:4,toastId:e};t?Qa(t)(s):Ka(s)},$a.removeAll=e=>$a.remove(void 0,e),$a.promise=(e,t,s)=>{let a=$a.loading(t.loading,(0,i.A)((0,i.A)({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let r=t.success?Fa(t.success,e):void 0;return r?$a.success(r,(0,i.A)((0,i.A)({id:a},s),null==s?void 0:s.success)):$a.dismiss(a),e}).catch(e=>{let r=t.error?Fa(t.error,e):void 0;r?$a.error(r,(0,i.A)((0,i.A)({id:a},s),null==s?void 0:s.error)):$a.dismiss(a)}),e};var Za=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:a}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ua,[s,a]=(0,r.useState)(Va[t]||Ha),l=(0,r.useRef)(Va[t]);(0,r.useEffect)(()=>(l.current!==Va[t]&&a(Va[t]),Wa.push([t,a]),()=>{let e=Wa.findIndex(e=>{let[s]=e;return s===t});e>-1&&Wa.splice(e,1)}),[t]);let n=s.toasts.map(t=>{var s,a,r;return(0,i.A)((0,i.A)((0,i.A)((0,i.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||Ga[t.type],style:(0,i.A)((0,i.A)((0,i.A)({},e.style),null==(r=e[t.type])?void 0:r.style),t.style)})});return(0,i.A)((0,i.A)({},s),{},{toasts:n})}(e,t),l=(0,r.useRef)(new Map).current,n=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(l.has(e))return;let s=setTimeout(()=>{l.delete(e),o({type:4,toastId:e})},t);l.set(e,s)},[]);(0,r.useEffect)(()=>{if(a)return;let e=Date.now(),r=s.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>$a.dismiss(s.id,t),a);s.visible&&$a.dismiss(s.id)});return()=>{r.forEach(e=>e&&clearTimeout(e))}},[s,a,t]);let o=(0,r.useCallback)(Qa(t),[t]),d=(0,r.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,r.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,r.useCallback)(()=>{a&&o({type:6,time:Date.now()})},[a,o]),m=(0,r.useCallback)((e,t)=>{let{reverseOrder:a=!1,gutter:r=8,defaultPosition:l}=t||{},n=s.filter(t=>(t.position||l)===(e.position||l)&&t.height),i=n.findIndex(t=>t.id===e.id),o=n.filter((e,t)=>t<i&&e.visible).length;return n.filter(e=>e.visible).slice(...a?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+r,0)},[s]);return(0,r.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)n(e.id,e.removeDelay);else{let t=l.get(e.id);t&&(clearTimeout(t),l.delete(e.id))}})},[s,n]),{toasts:s,handlers:{updateHeight:c,startPause:d,endPause:u,calculateOffset:m}}},Xa=va(wa||(wa=na(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),er=va(Na||(Na=na(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),tr=va(Sa||(Sa=na(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),sr=ja("div")(Ca||(Ca=na(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Xa,er,e=>e.secondary||"#fff",tr),ar=va(ka||(ka=na(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),rr=ja("div")(Aa||(Aa=na(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",ar),lr=va(Pa||(Pa=na(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),nr=va(Ta||(Ta=na(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),ir=ja("div")(Ia||(Ia=na(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",lr,nr,e=>e.secondary||"#fff"),or=ja("div")(_a||(_a=na(["\n  position: absolute;\n"]))),dr=ja("div")(Da||(Da=na(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),cr=va(Ea||(Ea=na(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),ur=ja("div")(Ra||(Ra=na(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),cr),mr=e=>{let{toast:t}=e,{icon:s,type:a,iconTheme:l}=t;return void 0!==s?"string"==typeof s?r.createElement(ur,null,s):s:"blank"===a?null:r.createElement(dr,null,r.createElement(rr,(0,i.A)({},l)),"loading"!==a&&r.createElement(or,null,"error"===a?r.createElement(sr,(0,i.A)({},l)):r.createElement(ir,(0,i.A)({},l))))},xr=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),hr=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),pr=ja("div")(La||(La=na(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),br=ja("div")(Oa||(Oa=na(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),gr=r.memo(e=>{let{toast:t,position:s,style:a,children:l}=e,n=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,r]=qa()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[xr(s),hr(s)];return{animation:t?"".concat(va(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(va(r)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},o=r.createElement(mr,{toast:t}),d=r.createElement(br,(0,i.A)({},t.ariaProps),Fa(t.message,t));return r.createElement(pr,{className:t.className,style:(0,i.A)((0,i.A)((0,i.A)({},n),a),t.style)},"function"==typeof l?l({icon:o,message:d}):r.createElement(r.Fragment,null,o,d))});!function(e,t,s,a){ma.p=t,ga=e,fa=s,ya=a}(r.createElement);var fr=e=>{let{id:t,className:s,style:a,onHeightUpdate:l,children:n}=e,i=r.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;l(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,l]);return r.createElement("div",{ref:i,className:s,style:a},n)},yr=ba(Ma||(Ma=na(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),vr=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:a,gutter:l,children:n,toasterId:o,containerStyle:d,containerClassName:c}=e,{toasts:u,handlers:m}=Za(a,o);return r.createElement("div",{"data-rht-toaster":o||"",style:(0,i.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},d),className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(e=>{let a=e.position||s,o=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,i.A)((0,i.A)({left:0,right:0,display:"flex",position:"absolute",transition:qa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},a),r)})(a,m.calculateOffset(e,{reverseOrder:t,gutter:l,defaultPosition:s}));return r.createElement(fr,{id:e.id,key:e.id,onHeightUpdate:m.updateHeight,className:e.visible?yr:"",style:o},"custom"===e.type?Fa(e.message,e):n?n(e):r.createElement(gr,{toast:e,position:a}))}))},jr=$a,wr=s(980);const Nr={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",ADMIN:"/admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},Sr=e=>{let{children:t,requiredRole:s}=e;const a=wr.R2.isAuthenticated(),r=wr.R2.getCurrentUser(),l=de();if(!a)return"MASTER_ADMIN"===s?(0,sa.jsx)(Te,{to:"/master-admin/signin",state:{from:l},replace:!0}):"SUPER_ADMIN"===s?(0,sa.jsx)(Te,{to:"/super-admin/signin",state:{from:l},replace:!0}):(0,sa.jsx)(Te,{to:"/login",state:{from:l},replace:!0});if(s){if(!((null===r||void 0===r?void 0:r.isMasterAdmin)&&"MASTER_ADMIN"===s||(null===r||void 0===r?void 0:r.role)===s)){const e=(e=>{if(null!==e&&void 0!==e&&e.isMasterAdmin)return"/master-admin";const t=localStorage.getItem("user"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=JSON.parse(localStorage.getItem("adminuser")||"{}"),r=JSON.parse(localStorage.getItem("masteradminuser")||"{}");let l=null===e||void 0===e?void 0:e.role;l||(s.userId||"SUPER_ADMIN"===s.role?l="SUPER_ADMIN":a.userId||"ADMIN"===a.role?l="ADMIN":r.userId||"MASTER_ADMIN"===r.role?l="MASTER_ADMIN":t&&(l=JSON.parse(t).role));if(!l){const e=wr.R2.getCurrentUser();l=null===e||void 0===e?void 0:e.role}return l&&Nr[l]?Nr[l]:"/login"})(r);return console.warn("Access denied. Required: ".concat(s,", Current: ").concat(null===r||void 0===r?void 0:r.role,". Redirecting to ").concat(e)),(0,sa.jsx)(Te,{to:e,replace:!0})}}return t};function Cr(){const e=me();return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center p-4",children:(0,sa.jsxs)("div",{className:"text-center max-w-md",children:[(0,sa.jsx)("div",{className:"text-9xl font-bold text-red-500 mb-4",children:"404"}),(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Page Not Found"}),(0,sa.jsx)("p",{className:"text-gray-400 mb-6",children:"The page you're looking for doesn't exist or you don't have permission to access it."}),(0,sa.jsx)("button",{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium transition-colors",children:"Go Back Home"})]})})}var kr,Ar,Pr,Tr,Ir,_r,Dr,Er,Rr,Lr,Or,Mr,Fr,Br,qr,Ur,zr=(kr=new WeakMap,Ar=new WeakMap,Pr=new WeakMap,Tr=new WeakMap,Ir=new WeakMap,_r=new WeakMap,Dr=new WeakMap,Er=new WeakMap,Rr=new WeakMap,Lr=new WeakMap,Or=new WeakMap,Mr=new WeakMap,Fr=new WeakMap,Br=new WeakMap,qr=new WeakMap,Ur=new WeakSet,class extends is{constructor(e,t){super(),Zt(this,Ur),Nt(this,kr,void 0),Nt(this,Ar,void 0),Nt(this,Pr,void 0),Nt(this,Tr,void 0),Nt(this,Ir,void 0),Nt(this,_r,void 0),Nt(this,Dr,void 0),Nt(this,Er,void 0),Nt(this,Rr,void 0),Nt(this,Lr,void 0),Nt(this,Or,void 0),Nt(this,Mr,void 0),Nt(this,Fr,void 0),Nt(this,Br,void 0),Nt(this,qr,new Set),this.options=t,kt(kr,this,e),kt(Er,this,null),kt(Dr,this,cs()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(Ct(Ar,this).addObserver(this),Zr(Ct(Ar,this),this.options)?St(Ur,this,Wr).call(this):this.updateResult(),St(Ur,this,Kr).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Xr(Ct(Ar,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Xr(Ct(Ar,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,St(Ur,this,Qr).call(this),St(Ur,this,Gr).call(this),Ct(Ar,this).removeObserver(this)}setOptions(e){const t=this.options,s=Ct(Ar,this);if(this.options=Ct(kr,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof Rt(this.options.enabled,Ct(Ar,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");St(Ur,this,Yr).call(this),Ct(Ar,this).setOptions(this.options),t._defaulted&&!zt(this.options,t)&&Ct(kr,this).getQueryCache().notify({type:"observerOptionsUpdated",query:Ct(Ar,this),observer:this});const a=this.hasListeners();a&&el(Ct(Ar,this),s,this.options,t)&&St(Ur,this,Wr).call(this),this.updateResult(),!a||Ct(Ar,this)===s&&Rt(this.options.enabled,Ct(Ar,this))===Rt(t.enabled,Ct(Ar,this))&&Et(this.options.staleTime,Ct(Ar,this))===Et(t.staleTime,Ct(Ar,this))||St(Ur,this,Hr).call(this);const r=St(Ur,this,Vr).call(this);!a||Ct(Ar,this)===s&&Rt(this.options.enabled,Ct(Ar,this))===Rt(t.enabled,Ct(Ar,this))&&r===Ct(Br,this)||St(Ur,this,Jr).call(this,r)}getOptimisticResult(e){const t=Ct(kr,this).getQueryCache().build(Ct(kr,this),e),s=this.createResult(t,e);return function(e,t){if(!zt(e.getCurrentResult(),t))return!0;return!1}(this,s)&&(kt(Tr,this,s),kt(_r,this,this.options),kt(Ir,this,Ct(Ar,this).state)),s}getCurrentResult(){return Ct(Tr,this)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null===t||void 0===t||t(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==Ct(Dr,this).status||Ct(Dr,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){Ct(qr,this).add(e)}getCurrentQuery(){return Ct(Ar,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return this.fetch((0,i.A)({},t))}fetchOptimistic(e){const t=Ct(kr,this).defaultQueryOptions(e),s=Ct(kr,this).getQueryCache().build(Ct(kr,this),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return St(Ur,this,Wr).call(this,(0,i.A)((0,i.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),Ct(Tr,this)))}createResult(e,t){const s=Ct(Ar,this),a=this.options,r=Ct(Tr,this),l=Ct(Ir,this),n=Ct(_r,this),o=e!==s?e.state:Ct(Pr,this),{state:d}=e;let c,u=(0,i.A)({},d),m=!1;if(t._optimisticResults){const r=this.hasListeners(),l=!r&&Zr(e,t),n=r&&el(e,s,t,a);(l||n)&&(u=(0,i.A)((0,i.A)({},u),Ps(d.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:x,errorUpdatedAt:h,status:p}=u;c=u.data;let b=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===p){let e;var g;if(null!==r&&void 0!==r&&r.isPlaceholderData&&t.placeholderData===(null===n||void 0===n?void 0:n.placeholderData))e=r.data,b=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(g=Ct(Or,this))||void 0===g?void 0:g.state.data,Ct(Or,this)):t.placeholderData;void 0!==e&&(p="success",c=Jt(null===r||void 0===r?void 0:r.data,e,t),m=!0)}if(t.select&&void 0!==c&&!b)if(r&&c===(null===l||void 0===l?void 0:l.data)&&t.select===Ct(Rr,this))c=Ct(Lr,this);else try{kt(Rr,this,t.select),c=t.select(c),c=Jt(null===r||void 0===r?void 0:r.data,c,t),kt(Lr,this,c),kt(Er,this,null)}catch(S){kt(Er,this,S)}Ct(Er,this)&&(x=Ct(Er,this),c=Ct(Lr,this),h=Date.now(),p="error");const f="fetching"===u.fetchStatus,y="pending"===p,v="error"===p,j=y&&f,w=void 0!==c,N={status:p,fetchStatus:u.fetchStatus,isPending:y,isSuccess:"success"===p,isError:v,isInitialLoading:j,isLoading:j,data:c,dataUpdatedAt:u.dataUpdatedAt,error:x,errorUpdatedAt:h,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:f,isRefetching:f&&!y,isLoadingError:v&&!w,isPaused:"paused"===u.fetchStatus,isPlaceholderData:m,isRefetchError:v&&w,isStale:tl(e,t),refetch:this.refetch,promise:Ct(Dr,this),isEnabled:!1!==Rt(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===N.status?e.reject(N.error):void 0!==N.data&&e.resolve(N.data)},a=()=>{const e=kt(Dr,this,N.promise=cs());t(e)},r=Ct(Dr,this);switch(r.status){case"pending":e.queryHash===s.queryHash&&t(r);break;case"fulfilled":"error"!==N.status&&N.data===r.value||a();break;case"rejected":"error"===N.status&&N.error===r.reason||a()}}return N}updateResult(){const e=Ct(Tr,this),t=this.createResult(Ct(Ar,this),this.options);if(kt(Ir,this,Ct(Ar,this).state),kt(_r,this,this.options),void 0!==Ct(Ir,this).data&&kt(Or,this,Ct(Ar,this)),zt(t,e))return;kt(Tr,this,t);St(Ur,this,$r).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"===typeof t?t():t;if("all"===s||!s&&!Ct(qr,this).size)return!0;const a=new Set(null!==s&&void 0!==s?s:Ct(qr,this));return this.options.throwOnError&&a.add("error"),Object.keys(Ct(Tr,this)).some(t=>{const s=t;return Ct(Tr,this)[s]!==e[s]&&a.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&St(Ur,this,Kr).call(this)}});function Wr(e){St(Ur,this,Yr).call(this);let t=Ct(Ar,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(It)),t}function Hr(){St(Ur,this,Qr).call(this);const e=Et(this.options.staleTime,Ct(Ar,this));if(Tt||Ct(Tr,this).isStale||!_t(e))return;const t=Dt(Ct(Tr,this).dataUpdatedAt,e)+1;kt(Mr,this,Pt.setTimeout(()=>{Ct(Tr,this).isStale||this.updateResult()},t))}function Vr(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(Ct(Ar,this)):this.options.refetchInterval)&&void 0!==e&&e}function Jr(e){St(Ur,this,Gr).call(this),kt(Br,this,e),!Tt&&!1!==Rt(this.options.enabled,Ct(Ar,this))&&_t(Ct(Br,this))&&0!==Ct(Br,this)&&kt(Fr,this,Pt.setInterval(()=>{(this.options.refetchIntervalInBackground||os.isFocused())&&St(Ur,this,Wr).call(this)},Ct(Br,this)))}function Kr(){St(Ur,this,Hr).call(this),St(Ur,this,Jr).call(this,St(Ur,this,Vr).call(this))}function Qr(){Ct(Mr,this)&&(Pt.clearTimeout(Ct(Mr,this)),kt(Mr,this,void 0))}function Gr(){Ct(Fr,this)&&(Pt.clearInterval(Ct(Fr,this)),kt(Fr,this,void 0))}function Yr(){const e=Ct(kr,this).getQueryCache().build(Ct(kr,this),this.options);if(e===Ct(Ar,this))return;const t=Ct(Ar,this);kt(Ar,this,e),kt(Pr,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function $r(e){ns.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(Ct(Tr,this))}),Ct(kr,this).getQueryCache().notify({query:Ct(Ar,this),type:"observerResultsUpdated"})})}function Zr(e,t){return function(e,t){return!1!==Rt(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Xr(e,t,t.refetchOnMount)}function Xr(e,t,s){if(!1!==Rt(t.enabled,e)&&"static"!==Et(t.staleTime,e)){const a="function"===typeof s?s(e):s;return"always"===a||!1!==a&&tl(e,t)}return!1}function el(e,t,s,a){return(e!==t||!1===Rt(a.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&tl(e,s)}function tl(e,t){return!1!==Rt(t.enabled,e)&&e.isStaleByTime(Et(t.staleTime,e))}function sl(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var al,rl,ll,nl,il,ol=r.createContext(sl()),dl=r.createContext(!1),cl=(dl.Provider,(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()}));function ul(e,t,s){var a,l,n,i;const o=r.useContext(dl),d=r.useContext(ol),c=ra(s),u=c.defaultQueryOptions(e);null===(a=c.getDefaultOptions().queries)||void 0===a||null===(l=a._experimental_beforeQuery)||void 0===l||l.call(a,u),u._optimisticResults=o?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,s=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:t,t),a=e.staleTime;e.staleTime="function"===typeof a?function(){return s(a(...arguments))}:s(a),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,d),(e=>{r.useEffect(()=>{e.clearReset()},[e])})(d);const m=!c.getQueryCache().get(u.queryHash),[x]=r.useState(()=>new t(c,u)),h=x.getOptimisticResult(u),p=!o&&!1!==e.subscribed;if(r.useSyncExternalStore(r.useCallback(e=>{const t=p?x.subscribe(ns.batchCalls(e)):It;return x.updateResult(),t},[x,p]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),r.useEffect(()=>{x.setOptions(u)},[u,x]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(u,h))throw cl(u,x,d);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:a,query:r,suspense:l}=e;return t.isError&&!s.isReset()&&!t.isFetching&&r&&(l&&void 0===t.data||$t(a,[t.error,r]))})({result:h,errorResetBoundary:d,throwOnError:u.throwOnError,query:c.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw h.error;if(null===(n=c.getDefaultOptions().queries)||void 0===n||null===(i=n._experimental_afterQuery)||void 0===i||i.call(n,u,h),u.experimental_prefetchInRender&&!Tt&&((e,t)=>e.isLoading&&e.isFetching&&!t)(h,o)){var b;const e=m?cl(u,x,d):null===(b=c.getQueryCache().get(u.queryHash))||void 0===b?void 0:b.promise;null===e||void 0===e||e.catch(It).finally(()=>{x.updateResult()})}return u.notifyOnChangeProps?h:x.trackResult(h)}function ml(e,t){return ul(e,zr,t)}var xl=(al=new WeakMap,rl=new WeakMap,ll=new WeakMap,nl=new WeakMap,il=new WeakSet,class extends is{constructor(e,t){super(),Zt(this,il),Nt(this,al,void 0),Nt(this,rl,void 0),Nt(this,ll,void 0),Nt(this,nl,void 0),kt(al,this,e),this.setOptions(t),this.bindMethods(),St(il,this,hl).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=Ct(al,this).defaultMutationOptions(e),zt(this.options,s)||Ct(al,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Ct(ll,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&Ft(s.mutationKey)!==Ft(this.options.mutationKey)?this.reset():"pending"===(null===(t=Ct(ll,this))||void 0===t?void 0:t.state.status)&&Ct(ll,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=Ct(ll,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){St(il,this,hl).call(this),St(il,this,pl).call(this,e)}getCurrentResult(){return Ct(rl,this)}reset(){var e;null===(e=Ct(ll,this))||void 0===e||e.removeObserver(this),kt(ll,this,void 0),St(il,this,hl).call(this),St(il,this,pl).call(this)}mutate(e,t){var s;return kt(nl,this,t),null===(s=Ct(ll,this))||void 0===s||s.removeObserver(this),kt(ll,this,Ct(al,this).getMutationCache().build(Ct(al,this),this.options)),Ct(ll,this).addObserver(this),Ct(ll,this).execute(e)}});function hl(){var e,t;const s=null!==(e=null===(t=Ct(ll,this))||void 0===t?void 0:t.state)&&void 0!==e?e:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};kt(rl,this,(0,i.A)((0,i.A)({},s),{},{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))}function pl(e){ns.batch(()=>{if(Ct(nl,this)&&this.hasListeners()){const d=Ct(rl,this).variables,c=Ct(rl,this).context,u={client:Ct(al,this),meta:this.options.meta,mutationKey:this.options.mutationKey};var t,s,a,r;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(s=Ct(nl,this)).onSuccess)||void 0===t||t.call(s,e.data,d,c,u),null===(a=(r=Ct(nl,this)).onSettled)||void 0===a||a.call(r,e.data,null,d,c,u);else if("error"===(null===e||void 0===e?void 0:e.type)){var l,n,i,o;null===(l=(n=Ct(nl,this)).onError)||void 0===l||l.call(n,e.error,d,c,u),null===(i=(o=Ct(nl,this)).onSettled)||void 0===i||i.call(o,void 0,e.error,d,c,u)}}this.listeners.forEach(e=>{e(Ct(rl,this))})})}function bl(e,t){const s=ra(t),[a]=r.useState(()=>new xl(s,e));r.useEffect(()=>{a.setOptions(e)},[a,e]);const l=r.useSyncExternalStore(r.useCallback(e=>a.subscribe(ns.batchCalls(e)),[a]),()=>a.getCurrentResult(),()=>a.getCurrentResult()),n=r.useCallback((e,t)=>{a.mutate(e,t).catch(It)},[a]);if(l.error&&$t(a.options.throwOnError,[l.error]))throw l.error;return(0,i.A)((0,i.A)({},l),{},{mutate:n,mutateAsync:l.mutate})}var gl=s(950);const fl=["Dashboard","Notifications","Player Management","Tables & Waitlist","Rake Collection","Push Notifications","Tournaments","Chat"];function yl(e){let{activeItem:t,setActiveItem:s,menuItems:a=fl,onSignOut:l=null,clubInfo:n=null}=e;const[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(window.innerWidth<1024),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=(null===n||void 0===n?void 0:n.rummyEnabled)||!1?[...a,"Rummy"]:a,g=localStorage.getItem("clubId"),{data:f}=ml({queryKey:["unreadNotificationCount",g,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(g,"staff"),enabled:!!g,refetchInterval:3e4}),{data:y}=ml({queryKey:["unreadChatCounts",g],queryFn:()=>wr.h2.getUnreadCounts(g),enabled:!!g,refetchInterval:1e4}),v=((null===y||void 0===y?void 0:y.staffChats)||0)+((null===y||void 0===y?void 0:y.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const{data:j}=ml({queryKey:["club",g],queryFn:()=>wr.Od.getClub(g),enabled:!!g}),w=JSON.parse(localStorage.getItem("user")||"{}"),N=w.email||"manager@pokerroom.com",S=w.displayName||"Manager",C=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[c&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-yellow-500 to-green-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>d(!o),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&o&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>d(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-yellow-500/20 via-green-600/30 to-emerald-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(c?o?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-green-300 to-teal-400 drop-shadow-lg mb-6",children:"Manager Portal"}),(0,sa.jsxs)("div",{onClick:()=>x(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-400 to-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"M"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:S}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:N})]})]}),m&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>x(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),N?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?jr.error("Password must be at least 8 characters"):C.mutate({email:N,currentPassword:h.currentPassword,newPassword:h.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:C.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:C.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),j&&j.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:j.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:b.map((e,a)=>(0,sa.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-yellow-400/20 hover:to-green-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===f||void 0===f?void 0:f.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f.unreadCount>9?"9+":f.unreadCount}),"Chat"===e&&v>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:v>9?"9+":v})]})},a))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function vl(e){let{selectedClubId:t,playersData:s,playersLoading:a,pendingPlayers:l,pendingLoading:n,suspendedPlayers:o=[],suspendedLoading:d=!1,onRefresh:c}=e;const[u,m]=(0,r.useState)("all"),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)("All"),[g,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(1),[j,w]=(0,r.useState)(1),[N,S]=(0,r.useState)(1),C=10,[k,A]=(0,r.useState)({name:"",email:"",phoneNumber:"",referralCode:"",panCard:"",aadhaarFile:null,panCardFile:null,initialBalance:0}),[P,T]=(0,r.useState)(null),[I,_]=(0,r.useState)(!1),[D,E]=(0,r.useState)(null),[R,L]=(0,r.useState)(!1),[O,M]=(0,r.useState)(null),[F,B]=(0,r.useState)(!1),[q,U]=(0,r.useState)(null),[z,W]=(0,r.useState)({type:"temporary",reason:"",duration:""}),H=ra(),{data:V,isLoading:J}=ml({queryKey:["playerDetails",t,null===O||void 0===O?void 0:O.id],queryFn:async()=>{if(!O||!t)return null;const e=await wr.Dv.getPlayer(t,O.id);let s=[];try{const e=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/player-documents/my"),{headers:{"x-player-id":O.id,"x-club-id":t}});if(e.ok){const t=await e.json();s=t.documents||[]}}catch(r){console.error("Error fetching documents:",r)}const a=e.kycDocuments||O.kycDocuments||[];if(Array.isArray(a)&&a.length>0){const e=new Set(s.map(e=>e.url));a.forEach(t=>{t.url&&!e.has(t.url)&&s.push(t)})}return(0,i.A)((0,i.A)({},e),{},{documents:s})},enabled:!!O&&!!t&&R}),K=bl({mutationFn:async e=>{let{playerId:s,file:a,documentType:r}=e;const l=new FormData;l.append("file",a),l.append("type",r),l.append("name",a.name);const n=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/player-documents/upload"),{method:"POST",headers:{"x-player-id":s,"x-club-id":t},body:l});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to upload document")}return n.json()}}),Q=bl({mutationFn:async e=>{const s=await wr.Dv.createPlayer(t,e),a=[];return k.aadhaarFile&&a.push(K.mutateAsync({playerId:s.id,file:k.aadhaarFile,documentType:"government_id"})),k.panCardFile&&a.push(K.mutateAsync({playerId:s.id,file:k.panCardFile,documentType:"pan_card"})),a.length>0&&await Promise.all(a),s},onSuccess:e=>{E({player:{name:e.name,email:e.email,tempPassword:e.tempPassword}}),_(!0),A({name:"",email:"",phoneNumber:"",referralCode:"",panCard:"",aadhaarFile:null,panCardFile:null,initialBalance:0}),H.invalidateQueries(["clubPlayers",t])},onError:e=>{jr.error(e.message||"Failed to create player")}}),G=bl({mutationFn:e=>{let{playerId:s,notes:a}=e;return wr.Dv.approvePlayer(t,s,a)},onSuccess:()=>{jr.success("Player approved successfully!"),T(null),c()},onError:e=>{jr.error(e.message||"Failed to approve player")}}),Y=bl({mutationFn:e=>{let{playerId:s,reason:a}=e;return wr.Dv.rejectPlayer(t,s,a)},onSuccess:()=>{jr.success("Player rejected"),T(null),c()},onError:e=>{jr.error(e.message||"Failed to reject player")}}),$=bl({mutationFn:async e=>{let{playerId:s,suspensionType:a,reason:r,duration:l}=e;const n={type:a,reason:r};return"temporary"===a&&l&&(n.duration="".concat(l," days")),await wr.Dv.suspendPlayer(t,s,n)},onSuccess:()=>{jr.success("Player suspended successfully"),B(!1),U(null),W({type:"temporary",reason:"",duration:""}),c(),H.invalidateQueries(["clubPlayers",t]),H.invalidateQueries(["suspendedPlayers",t])},onError:e=>{jr.error(e.message||"Failed to suspend player")}}),Z=bl({mutationFn:async e=>await wr.Dv.unsuspendPlayer(t,e),onSuccess:()=>{jr.success("Player unsuspended successfully"),c(),H.invalidateQueries(["clubPlayers",t]),H.invalidateQueries(["suspendedPlayers",t])},onError:e=>{jr.error(e.message||"Failed to unsuspend player")}}),{data:X=[],isLoading:ee}=ml({queryKey:["fieldUpdateRequests",t],queryFn:async()=>[],enabled:!!t&&"field-updates"===u}),te=bl({mutationFn:async e=>{let{requestId:t,approved:s,notes:a}=e;return{success:!0}},onSuccess:()=>{jr.success("Field update request processed"),H.invalidateQueries(["fieldUpdateRequests",t])},onError:e=>{jr.error(e.message||"Failed to process field update request")}}),se=((null===s||void 0===s?void 0:s.players)||[]).filter(e=>{var t,s,a;const r=!x||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))||(null===(a=e.playerId)||void 0===a?void 0:a.toLowerCase().includes(x.toLowerCase())),l="All"===p||e.status===p;return r&&l}),ae=Math.ceil(se.length/C),re=(y-1)*C,le=re+C,ne=se.slice(re,le),ie=Math.ceil(l.length/C),oe=(j-1)*C,de=oe+C,ce=l.slice(oe,de),ue=Math.ceil(X.length/C),me=(N-1)*C,xe=me+C,he=X.slice(me,xe);(0,r.useEffect)(()=>{v(1)},[x,p]);return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Player Management"}),(0,sa.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"all",label:"All Players"},{id:"create",label:"Create Players"},{id:"approval",label:"Player Approval"},{id:"field-updates",label:"Player Fields Update Approval"}].map(e=>(0,sa.jsx)("button",{onClick:()=>{return t=e.id,m(t),v(1),w(1),void S(1);var t},className:"px-6 py-3 font-semibold transition-all ".concat(u===e.id?"bg-gradient-to-r from-red-400 to-purple-600 text-white border-b-2 border-purple-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,sa.jsxs)("div",{className:"mt-6",children:["all"===u&&(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 flex gap-4",children:[(0,sa.jsx)("input",{type:"text",placeholder:"Search by name, email, or ID...",value:x,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500"}),(0,sa.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",children:[(0,sa.jsx)("option",{value:"All",children:"All Status"}),(0,sa.jsx)("option",{value:"Active",children:"Active"}),(0,sa.jsx)("option",{value:"Pending",children:"Pending"}),(0,sa.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),a?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading players..."})]}):(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,sa.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,sa.jsxs)("span",{children:["Showing ",re+1,"-",Math.min(le,se.length)," of ",se.length," players"]})}),(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"ID"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Balance"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Registered"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===ne.length?(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-400",children:"No players found"})}):ne.map(e=>(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium cursor-pointer",onClick:()=>{M(e),L(!0)},children:e.name}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.playerId||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.phoneNumber||"-"}),(0,sa.jsxs)("td",{className:"px-6 py-4 text-gray-400",children:["\u20b9",e.balance||0]}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Active"===e.status?"bg-emerald-600/20 text-emerald-400":"Pending"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-red-600/20 text-red-400"),children:e.status})}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("approved"===e.kycStatus||"verified"===e.kycStatus?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"),children:e.kycStatus||"pending"})}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("div",{className:"flex gap-2",children:"Suspended"===e.status?(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("Are you sure you want to unsuspend ".concat(e.name,"?"))&&Z.mutate(e.id)},disabled:Z.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors disabled:opacity-50",children:"Unsuspend"}):(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e),B(!0)},className:"bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",children:"Suspend"})})})]},e.id))})]}),ae>1&&(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",y," of ",ae]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===y,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>v(e=>Math.min(ae,e+1)),disabled:y===ae,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})]}),"create"===u&&(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create New Player"}),!t&&(0,sa.jsx)("div",{className:"mb-6 p-4 bg-yellow-900/30 border border-yellow-500/50 rounded-lg",children:(0,sa.jsx)("p",{className:"text-yellow-400 font-semibold",children:"\u26a0\ufe0f Please select a club from the sidebar dropdown to create a player"})}),(0,sa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!t)return void jr.error("Please select a club first");if(k.panCard&&k.panCard.trim()){if(!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(k.panCard.trim()))return void jr.error("PAN card must be in format: ABCDE1234F (5 letters, 4 digits, 1 letter)")}if(!k.aadhaarFile)return void jr.error("Please upload Aadhaar document");if(!k.panCardFile)return void jr.error("Please upload PAN card document");const s=5242880;if(k.aadhaarFile.size>s)return void jr.error("Aadhaar document must be less than 5MB");if(k.panCardFile.size>s)return void jr.error("PAN card document must be less than 5MB");const a=["image/jpeg","image/jpg","image/png","application/pdf"];if(!a.includes(k.aadhaarFile.type))return void jr.error("Aadhaar document must be JPG, PNG, or PDF");if(!a.includes(k.panCardFile.type))return void jr.error("PAN card document must be JPG, PNG, or PDF");const r={name:k.name,email:k.email,phoneNumber:k.phoneNumber,affiliateCode:k.referralCode||void 0,panCard:k.panCard||void 0,initialBalance:k.initialBalance||0};Q.mutate(r)},className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Player Name *"}),(0,sa.jsx)("input",{type:"text",value:k.name,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,sa.jsx)("input",{type:"email",value:k.email,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{email:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone Number *"}),(0,sa.jsx)("input",{type:"tel",value:k.phoneNumber,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{phoneNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Referral Code (Optional)"}),(0,sa.jsx)("input",{type:"text",value:k.referralCode||"",onChange:e=>A((0,i.A)((0,i.A)({},k),{},{referralCode:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Referral code"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Card Number"}),(0,sa.jsx)("input",{type:"text",value:k.panCard,onChange:e=>{const t=e.target.value.toUpperCase();t.length<=10&&/^[A-Z0-9]*$/.test(t)&&A((0,i.A)((0,i.A)({},k),{},{panCard:t}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white font-mono",placeholder:"ABCDE1234F",maxLength:10}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Format: 5 letters, 4 digits, 1 letter (e.g., ABCDE1234F)"})]}),(0,sa.jsxs)("div",{className:"col-span-2",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Aadhaar Document *"}),(0,sa.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&A((0,i.A)((0,i.A)({},k),{},{aadhaarFile:s}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500",required:!0}),k.aadhaarFile&&(0,sa.jsxs)("p",{className:"text-xs text-emerald-400 mt-1",children:["\u2713 ",k.aadhaarFile.name]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload Aadhaar card (JPG, PNG, or PDF, max 5MB)"})]}),(0,sa.jsxs)("div",{className:"col-span-2",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Card Document *"}),(0,sa.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&A((0,i.A)((0,i.A)({},k),{},{panCardFile:s}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500",required:!0}),k.panCardFile&&(0,sa.jsxs)("p",{className:"text-xs text-emerald-400 mt-1",children:["\u2713 ",k.panCardFile.name]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PAN card document (JPG, PNG, or PDF, max 5MB)"})]}),(0,sa.jsxs)("div",{className:"col-span-2",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Initial Balance (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:k.initialBalance,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{initialBalance:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsx)("div",{className:"flex gap-4 mt-6",children:(0,sa.jsx)("button",{type:"submit",disabled:Q.isLoading||K.isLoading||!t,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:Q.isLoading||K.isLoading?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,sa.jsx)("span",{children:"Creating Player & Uploading Documents..."})]}):t?"Create Player":"Select a Club First"})})]})]}),"approval"===u&&(0,sa.jsx)("div",{className:"space-y-6",children:n?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading pending players..."})]}):0===l.length?(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 border border-slate-700 text-center",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\u2705"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No pending approvals"})]}):(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Player Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Registration Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Document"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===ce.length?(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-400",children:"No pending players found"})}):ce.map(e=>(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.phoneNumber||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.registrationDate||e.createdAt).toLocaleDateString()}),(0,sa.jsx)("td",{className:"px-6 py-4",children:e.kycDocumentUrl?(0,sa.jsx)("a",{href:e.kycDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"View Document"}):(0,sa.jsx)("span",{className:"text-gray-500",children:"No document"})}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:"Pending"})}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>{T(e),G.mutate({playerId:e.id,notes:"Approved by Super Admin"})},disabled:G.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Approve"}),(0,sa.jsx)("button",{onClick:()=>{const t=prompt("Enter rejection reason:");t&&Y.mutate({playerId:e.id,reason:t})},disabled:Y.isLoading,className:"bg-red-600 hover:bg-red-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Reject"})]})})]},e.id))})]}),ie>1&&(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",j," of ",ie]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>w(e=>Math.max(1,e-1)),disabled:1===j,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>w(e=>Math.min(ie,e+1)),disabled:j===ie,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})}),"field-updates"===u&&(0,sa.jsxs)("div",{className:"space-y-6",children:[ee?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading field update requests..."})]}):0===X.length?(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 border border-slate-700 text-center",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcdd"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No pending field update requests"})]}):(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,sa.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,sa.jsxs)("span",{children:["Showing ",me+1,"-",Math.min(xe,X.length)," of ",X.length," field update requests"]})}),(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Player Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Fields Updated"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Requested Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===he.length?(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-400",children:"No field update requests found"})}):he.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium",children:e.playerName}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("div",{className:"space-y-1",children:null===(t=e.fields)||void 0===t?void 0:t.map((e,t)=>(0,sa.jsxs)("div",{className:"text-sm",children:[(0,sa.jsxs)("span",{className:"text-gray-400",children:[e.fieldName,":"]})," ",(0,sa.jsx)("span",{className:"text-gray-500 line-through",children:e.currentValue||"N/A"})," \u2192 ",(0,sa.jsx)("span",{className:"text-emerald-400",children:e.requestedValue})]},t))})}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.requestedDate||e.createdAt).toLocaleDateString()}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status||"Pending"})}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>{te.mutate({requestId:e.id,approved:!0,notes:"Approved by Super Admin"})},disabled:te.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Approve"}),(0,sa.jsx)("button",{onClick:()=>{const t=prompt("Enter rejection reason:");t&&te.mutate({requestId:e.id,approved:!1,notes:t})},disabled:te.isLoading,className:"bg-red-600 hover:bg-red-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Reject"})]})})]},e.id)})})]}),ue>1&&(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",N," of ",ue]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===N,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>S(e=>Math.min(ue,e+1)),disabled:N===ue,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]}),"suspend"===u&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Player Suspension Management"}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:"\ud83d\udca1 To suspend a player:"}),(0,sa.jsx)("p",{className:"text-gray-300",children:'Go to the "All Players" tab and click the "Suspend" button next to any player.'})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,sa.jsx)("div",{className:"p-4 text-sm text-gray-400",children:d?"Loading...":"Showing ".concat(o.length," suspended players")}),d?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading suspended players..."})]}):0===o.length?(0,sa.jsx)("div",{className:"p-12 text-center",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No suspended players"})}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"p-4 text-sm text-gray-400",children:["Showing ",Math.min((suspendPage-1)*C+1,o.length)," - ",Math.min(suspendPage*C,o.length)," of ",o.length," suspended players"]}),(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Suspended Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Reason"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:o.slice((suspendPage-1)*C,suspendPage*C).map(e=>(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:e.suspendedAt?new Date(e.suspendedAt).toLocaleDateString():"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:e.suspensionReason||e.reason||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to unsuspend ".concat(e.name,"?"))&&wr.Dv.unsuspendPlayer(t,e.id).then(()=>{jr.success("Player unsuspended successfully"),c()}).catch(e=>{jr.error(e.message||"Failed to unsuspend player")})},className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Unsuspend"})})]},e.id))})]}),Math.ceil(o.length/C)>1&&(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",suspendPage," of ",Math.ceil(o.length/C)]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>setSuspendPage(e=>Math.max(1,e-1)),disabled:1===suspendPage,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>setSuspendPage(e=>Math.min(Math.ceil(o.length/C),e+1)),disabled:suspendPage>=Math.ceil(o.length/C),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})]})]})]})]}),I&&D&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-500 rounded-full mb-4",children:(0,sa.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"\ud83c\udf89 Player Created!"}),(0,sa.jsx)("p",{className:"text-emerald-400 text-sm",children:"Save these credentials securely!"})]}),(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-emerald-500/30",children:[(0,sa.jsxs)("h3",{className:"text-emerald-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Player Login Credentials"]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",D.player.name]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",D.player.email]}),(0,sa.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,sa.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:D.player.tempPassword}),(0,sa.jsx)("p",{className:"text-yellow-300 text-xs mt-1",children:"Player must reset password on first login"})]})]})]})}),(0,sa.jsx)("button",{onClick:()=>{_(!1),E(null),m("all")},className:"w-full mt-6 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Got it! Close"})]})}),R&&O&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-purple-500 shadow-2xl my-8",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Player Details"}),(0,sa.jsx)("button",{onClick:()=>{L(!1),M(null)},className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),J?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Loading player details..."})]}):V?(0,sa.jsxs)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,sa.jsxs)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Basic Information"]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Name"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:V.name||O.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Email"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:V.email||O.email})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Phone Number"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:V.phoneNumber||O.phoneNumber||"-"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Player ID"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:V.playerId||O.playerId||"-"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"PAN Card"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:V.panCard||O.panCard||"-"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Status"}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded text-xs font-semibold ".concat("Active"===(V.status||O.status)?"bg-emerald-600/20 text-emerald-400":"Pending"===(V.status||O.status)?"bg-yellow-600/20 text-yellow-400":"bg-red-600/20 text-red-400"),children:V.status||O.status})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"KYC Status"}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded text-xs font-semibold ".concat("approved"===(V.kycStatus||O.kycStatus)||"verified"===(V.kycStatus||O.kycStatus)?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"),children:V.kycStatus||O.kycStatus||"pending"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Registration Date"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:new Date(V.createdAt||O.createdAt).toLocaleDateString()})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Balance"}),(0,sa.jsxs)("p",{className:"text-white font-medium",children:["\u20b9",V.balance||O.balance||0]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,sa.jsxs)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"KYC Documents"]}),V.documents&&V.documents.length>0?(0,sa.jsx)("div",{className:"space-y-6",children:V.documents.map((e,t)=>{const s=(e=>{if(!e)return"Unknown";const t=e.toLowerCase();return"government_id"===t||"aadhaar"===t||"aadhar"===t?"Aadhaar Card":"pan_card"===t||"pan"===t?"PAN Card":e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")})(e.type||e.documentType),a=s.includes("Aadhaar");return(0,sa.jsxs)("div",{className:"bg-slate-700/70 rounded-xl p-6 border-2 ".concat(a?"border-blue-500/50 shadow-lg shadow-blue-500/10":"border-purple-500/50 shadow-lg shadow-purple-500/10"),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,sa.jsx)("span",{className:"px-4 py-2 rounded-lg text-sm font-bold ".concat(a?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-purple-600/30 text-purple-300 border border-purple-500/50"),children:s})}),(0,sa.jsx)("p",{className:"text-white font-semibold text-lg mb-2",children:e.name||e.fileName||"Document ".concat(t+1)}),e.uploadedAt&&(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["\ud83d\udcc5 Uploaded: ",new Date(e.uploadedAt).toLocaleDateString()]})]}),(0,sa.jsx)("div",{className:"flex gap-2",children:e.url&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-md",children:[(0,sa.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),(0,sa.jsxs)("a",{href:e.url,download:!0,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-md",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})]})})]}),e.url&&(0,sa.jsx)("div",{className:"mt-3",children:e.url.match(/\.(jpg|jpeg|png|gif)$/i)?(0,sa.jsx)("img",{src:e.url,alt:e.name||"Document",className:"max-w-full h-auto rounded-lg border border-slate-600 max-h-64",onError:e=>{e.target.style.display="none"}}):e.url.match(/\.pdf$/i)?(0,sa.jsx)("iframe",{src:e.url,className:"w-full h-64 rounded-lg border border-slate-600",title:e.name||"PDF Document"}):(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Preview not available for this file type"}),(0,sa.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Click Preview or Download to view"})]})})]},e.id||t)})}):(0,sa.jsx)("div",{className:"text-center py-8",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No KYC documents uploaded yet"})})]})]}):(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-red-400",children:"Failed to load player details"})}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>{L(!1),M(null)},className:"bg-purple-600 hover:bg-purple-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Close"})})]})}),F&&q&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-red-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Suspend Player"}),(0,sa.jsx)("button",{onClick:()=>{B(!1),U(null),W({type:"temporary",reason:"",duration:""})},className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[(0,sa.jsxs)("p",{className:"text-white font-medium mb-1",children:["Player: ",(0,sa.jsx)("span",{className:"text-red-400",children:q.name})]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Email: ",q.email]})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),z.reason&&z.reason.trim()?$.mutate({playerId:q.id,suspensionType:z.type,reason:z.reason.trim(),duration:"temporary"===z.type&&z.duration?z.duration:void 0}):jr.error("Please provide a reason for suspension")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Suspension Type *"}),(0,sa.jsxs)("select",{value:z.type,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{type:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:!0,children:[(0,sa.jsx)("option",{value:"temporary",children:"Temporary"}),(0,sa.jsx)("option",{value:"permanent",children:"Permanent"})]})]}),"temporary"===z.type&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (days) *"}),(0,sa.jsx)("input",{type:"number",min:"1",value:z.duration,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{duration:e.target.value})),placeholder:"Enter number of days",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:"temporary"===z.type})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason for Suspension *"}),(0,sa.jsx)("textarea",{value:z.reason,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{reason:e.target.value})),placeholder:"Enter detailed reason for suspending this player...",rows:4,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{B(!1),U(null),W({type:"temporary",reason:"",duration:""})},className:"flex-1 bg-slate-700 hover:bg-slate-600 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:$.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:$.isLoading?(0,sa.jsxs)("span",{className:"flex items-center justify-center",children:[(0,sa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Suspending..."]}):"Suspend Player"})]})]})]})]})})]})}function jl(e){let{clubId:t}=e;const s=ra(),[a,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),{data:c=[],isLoading:u,refetch:m}=ml({queryKey:["buyOutRequests",t],queryFn:()=>wr.Od.getBuyOutRequests(t),enabled:!!t,refetchInterval:5e3}),x=bl({mutationFn:e=>{let{requestId:s,amount:a}=e;return wr.Od.approveBuyOutRequest(t,s,{amount:a})},onSuccess:()=>{jr.success("Buy-out request approved and balance updated!"),s.invalidateQueries(["buyOutRequests",t]),l(null)},onError:e=>{jr.error(e.message||"Failed to approve buy-out request")}}),h=bl({mutationFn:e=>{let{requestId:s,reason:a}=e;return wr.Od.rejectBuyOutRequest(t,s,{reason:a})},onSuccess:()=>{jr.success("Buy-out request rejected!"),s.invalidateQueries(["buyOutRequests",t]),l(null),i(!1),d("")},onError:e=>{jr.error(e.message||"Failed to reject buy-out request")}}),p=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},b=c.filter(e=>"pending"===e.status);return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Table Buy-Out Requests"}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:[b.length," pending request",1!==b.length?"s":""]})]}),u?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading buy-out requests..."}):0===b.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending buy-out requests"}):(0,sa.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold text-white",children:e.playerName}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Table ",e.tableNumber]}),e.seatNumber&&(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Seat ",e.seatNumber]})]}),(0,sa.jsxs)("div",{className:"text-xl font-bold text-green-400 mb-2",children:["\u20b9",Number(e.requestedAmount||e.currentTableBalance||0).toLocaleString("en-IN")]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Call time started: ",p(e.callTimeStartedAt)]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Requested at: ",p(e.requestedAt)]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Approve buy-out request for ".concat(e.playerName,"? Amount: \u20b9").concat(Number(e.requestedAmount||e.currentTableBalance||0).toLocaleString("en-IN")))&&x.mutate({requestId:e.id,amount:e.requestedAmount||e.currentTableBalance||0})})(e),disabled:x.isPending,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:x.isPending?"Processing...":"Approve"}),(0,sa.jsx)("button",{onClick:()=>(e=>{l(e),i(!0)})(e),disabled:h.isPending,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Reject"})]})]})},e.id))})]}),n&&a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 max-w-md w-full mx-4",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold mb-4 text-white",children:"Reject Buy-Out Request"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["Reject buy-out request for ",(0,sa.jsx)("strong",{children:a.playerName}),"?"]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for Rejection ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Enter reason for rejection...",rows:"4",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{o.trim()?h.mutate({requestId:a.id,reason:o}):jr.error("Please provide a reason for rejection")},disabled:h.isPending||!o.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:h.isPending?"Rejecting...":"Reject Request"}),(0,sa.jsx)("button",{onClick:()=>{i(!1),l(null),d("")},className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})})]})}function wl(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("live-tables"),{data:l,isLoading:n}=(ra(),ml({queryKey:["tables",t],queryFn:()=>wr.rj.getTables(t),enabled:!!t})),{data:i,isLoading:o}=ml({queryKey:["waitlist",t],queryFn:()=>wr.IX.getWaitlist(t),enabled:!!t}),d=l||[],c=i||[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),!t&&(0,sa.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100 flex items-center gap-3",children:[(0,sa.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.3 2.647-1.3 3.412 0l7 12a1.5 1.5 0 01-1.302 2.25H2.847a1.5 1.5 0 01-1.302-2.25l7-12zM9 13a1 1 0 112 0v2a1 1 0 11-2 0v-2zm0-6a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z",clipRule:"evenodd"})}),(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club from the sidebar dropdown to manage tables."})]}),(0,sa.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"live-tables",label:"Live Tables"},{id:"table-management",label:"Table Management"},{id:"table-buy-in",label:"Table Buy-In"},{id:"table-buy-out",label:"Table Buy-Out"}].map(e=>(0,sa.jsx)("button",{onClick:()=>a(e.id),className:"px-6 py-3 font-semibold transition-all ".concat(s===e.id?"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,sa.jsxs)("div",{className:"mt-6",children:["live-tables"===s&&(0,sa.jsx)(Nl,{selectedClubId:t,tables:d,tablesLoading:n}),"table-management"===s&&(0,sa.jsx)(kl,{selectedClubId:t,tables:d,tablesLoading:n}),"table-buy-in"===s&&(0,sa.jsx)(Al,{selectedClubId:t,tables:d,waitlist:c,waitlistLoading:o}),"table-buy-out"===s&&(0,sa.jsx)(Pl,{selectedClubId:t,tables:d})]})]})}function Nl(e){let{selectedClubId:t,tables:s,tablesLoading:a}=e;const[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)({minPlayTime:30,callTime:5,cashOutWindow:10,sessionTimeout:120}),[x,h]=(0,r.useState)("Active"),p=s.filter(e=>("AVAILABLE"===e.status||"OCCUPIED"===e.status)&&"RUMMY"!==e.tableType),b=e=>{if(!e.notes)return null;const t=e.notes.match(/Dealer:.*?\(([^)]+)\)/i);return t?t[1]:null},g=e=>{var t,s,a,r,l,n,i,d;c(e),o(!0);const u=e.notes?e.notes.split("|").map(e=>e.trim()):[],x=(null===(t=u[3])||void 0===t||null===(s=t.match(/\d+/))||void 0===s?void 0:s[0])||"30",p=(null===(a=u[4])||void 0===a||null===(r=a.match(/\d+/))||void 0===r?void 0:r[0])||"5",b=(null===(l=u[5])||void 0===l||null===(n=l.match(/\d+/))||void 0===n?void 0:n[0])||"10",g=(null===(i=u[6])||void 0===i||null===(d=i.match(/\d+/))||void 0===d?void 0:d[0])||"120";m({minPlayTime:parseInt(x),callTime:parseInt(p),cashOutWindow:parseInt(b),sessionTimeout:parseInt(g)}),h("OCCUPIED"===e.status?"Active":"Paused")};return(0,sa.jsxs)("div",{className:"space-y-6",children:[i&&d&&(0,sa.jsx)(Sl,{table:d,tables:p,sessionParams:u,setSessionParams:m,sessionStatus:x,setSessionStatus:h,clubId:t,onClose:()=>{o(!1),c(null)},onSelectTable:e=>{c(e),g(e)}}),!i&&(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - Hologram View"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Manage live tables, seat players, and handle buy-ins using table hologram."})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",p.length]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",p.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),a?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tables..."})]}):0===p.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Create and activate tables in Table Management"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all cursor-pointer",onClick:()=>n(e),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,sa.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]}),b(e)&&(0,sa.jsxs)("div",{className:"flex justify-between text-sm pt-1 border-t border-slate-600",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"\ud83d\udc64 Dealer:"}),(0,sa.jsx)("span",{className:"text-purple-400 font-semibold",children:b(e)})]})]}),(0,sa.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"w-full mt-4 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83c\udfaf"}),(0,sa.jsx)("span",{children:"View Table Hologram"})]}),(0,sa.jsxs)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"w-full mt-2 bg-gradient-to-r from-purple-600 to-pink-700 hover:from-purple-500 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\u2699\ufe0f"}),(0,sa.jsx)("span",{children:"Edit Session Control"})]})]},e.id))})]}),l&&(0,sa.jsx)(Cl,{table:l,onClose:()=>n(null),clubId:t})]})}function Sl(e){let{table:t,tables:s,sessionParams:a,setSessionParams:l,sessionStatus:n,setSessionStatus:o,clubId:d,onClose:c,onSelectTable:u}=e;const m=ra(),[x,h]=(0,r.useState)(d);(0,r.useEffect)(()=>{d&&h(d)},[d]);const p=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.pauseSession(x,t.id)},onSuccess:()=>{o("Paused"),jr.success("Session paused successfully"),m.invalidateQueries(["tables",x])},onError:e=>{jr.error(e.message||"Failed to pause session")}}),b=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.resumeSession(x,t.id)},onSuccess:()=>{o("Active"),jr.success("Session resumed successfully"),m.invalidateQueries(["tables",x])},onError:e=>{jr.error(e.message||"Failed to resume session")}}),g=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.endSession(x,t.id)},onSuccess:()=>{jr.success("Session ended successfully"),m.invalidateQueries(["tables",x]),c()},onError:e=>{jr.error(e.message||"Failed to end session")}}),f=bl({mutationFn:async e=>{if(!x)throw new Error("Club ID not found");return await wr.rj.updateSessionParams(x,t.id,e)},onSuccess:e=>{jr.success("Session parameters updated successfully"),m.invalidateQueries(["tables",x]),e.sessionParams&&l(e.sessionParams)},onError:e=>{jr.error(e.message||"Failed to update session parameters")}}),y=(e,t)=>{const s={[e]:parseInt(t)};f.mutate(s)},v=e=>{const t=e.notes?e.notes.split("|").map(e=>e.trim()):[];return t[1]||e.tableType};return(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-blue-900/50 via-purple-900/50 to-indigo-900/50 rounded-2xl p-8 border-2 border-blue-500/30 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Table Session Control"}),(0,sa.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Table Sessions"}),(0,sa.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,sa.jsx)("div",{onClick:()=>u(e),className:"p-4 rounded-lg cursor-pointer transition-all ".concat(e.id===t.id?"bg-blue-600/30 border-2 border-blue-500":"bg-slate-700/50 border border-slate-600 hover:bg-slate-700"),children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"font-semibold text-white",children:["Table ",e.tableNumber," - ",v(e).split(" | ")[0]]}),(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:v(e)})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"OCCUPIED"===e.status?"Active":"Paused"})]})},e.id))}),(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-blue-600/20 border border-blue-500/30 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-blue-300 mb-2",children:["Selected: Table ",t.tableNumber," - ",v(t).split(" | ")[0]]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Game:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:v(t)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:(e=>{var t;const s=e.notes?e.notes.split("|").map(e=>e.trim()):[];return(null===(t=s[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"\u20b9".concat(e.minBuyIn||0,"/\u20b9").concat(e.maxBuyIn||0)})(t)})]})]}),(0,sa.jsxs)("div",{className:"text-sm mt-2",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Players:"}),(0,sa.jsxs)("span",{className:"text-white ml-2",children:[t.currentSeats||0,"/",t.maxSeats]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Session Actions"}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:"Current Status"}),(0,sa.jsx)("div",{className:"text-4xl font-bold ".concat("Active"===n?"text-green-400":"text-yellow-400"),children:n})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("button",{onClick:()=>{"Active"===n?p.mutate():b.mutate()},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"Active"===n?"\u23f8":"\u25b6"}),(0,sa.jsx)("span",{children:"Active"===n?"Pause Session":"Resume Session"})]}),(0,sa.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to end this session? This action cannot be undone.")&&g.mutate()},className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\u2b1b"}),(0,sa.jsx)("span",{children:"End Session"})]})]}),(0,sa.jsx)("div",{className:"mt-6 p-4 bg-slate-700/50 rounded-lg",children:(0,sa.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"Session parameters can be modified on the right panel."})})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Timing & Parameters"}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"MIN PLAY TIME"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.minPlayTime,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{minPlayTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,sa.jsx)("button",{onClick:()=>y("minPlayTime",a.minPlayTime),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.minPlayTime," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CALL TIME"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.callTime,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{callTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,sa.jsx)("button",{onClick:()=>y("callTime",a.callTime),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.callTime," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CASH-OUT WINDOW"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.cashOutWindow,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{cashOutWindow:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,sa.jsx)("button",{onClick:()=>y("cashOutWindow",a.cashOutWindow),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.cashOutWindow," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"SESSION TIMEOUT"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.sessionTimeout,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{sessionTimeout:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,sa.jsx)("button",{onClick:()=>y("sessionTimeout",a.sessionTimeout),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.sessionTimeout," mins"]})]})]})]})]})]})}function Cl(e){var t,s,a,l,n,i,o,d,c;let{table:u,onClose:m,clubId:x}=e;const h=ra(),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)("00:00:00"),y=(()=>{if(!u.notes)return null;const e=u.notes.match(/Dealer:\s*([a-f0-9-]{36})\s*\(([^)]+)\)/i);return e?{id:e[1],name:e[2]}:null})(),v=bl({mutationFn:async()=>{if(!u||!y)return;const e=(u.notes||"").replace(/\s*\|\s*Dealer:.*$/i,"").trim();return wr.rj.updateTable(x,u.id,{notes:e})},onSuccess:()=>{jr.success("Dealer unassigned successfully"),h.invalidateQueries(["tables",x]),h.invalidateQueries(["staff",x]),h.invalidateQueries(["all-tables",x]),h.invalidateQueries(["rummy-tables",x]),m()},onError:e=>{jr.error(e.message||"Failed to unassign dealer")}});(0,r.useEffect)(()=>{x&&(async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("userId"),s=localStorage.getItem("tenantId"),a=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://poker-crm-backend.onrender.com/api"}.REACT_APP_API_URL||"http://localhost:3333/api","/clubs/").concat(x),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"x-user-id":t||"","x-tenant-id":s||"","x-club-id":x}});if(a.ok){const e=await a.json();console.log("Club data fetched:",e),b(e)}else console.error("Failed to fetch club data:",a.status,await a.text())}catch(e){console.error("Error fetching club data:",e)}})()},[x]),(0,r.useEffect)(()=>{var e,t;if(!u)return void f("00:00:00");if("AVAILABLE"===u.status||"PAUSED"===u.status){var s;const e=null===(s=u.notes)||void 0===s?void 0:s.match(/Paused Elapsed: (\d+)/);if(e){const t=parseInt(e[1],10);if(!isNaN(t)&&t>=0){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;f("".concat(String(e).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0")))}else f("00:00:00")}else f("00:00:00");return}if("OCCUPIED"!==u.status)return void f("00:00:00");const a=null===(e=u.notes)||void 0===e?void 0:e.match(/Session Started: ([^|]+)/),r=null===(t=u.notes)||void 0===t?void 0:t.match(/Paused Elapsed: (\d+)/);if(!a||!a[1])return console.warn("No session start time found in notes:",u.notes),void f("00:00:00");const l=a[1].trim(),n=new Date(l);if(isNaN(n.getTime()))return console.error("Invalid session start time:",l,"Full notes:",u.notes),void f("00:00:00");const i=r?parseInt(r[1],10):0;(isNaN(i)||i<0)&&console.warn("Invalid paused elapsed time, using 0:",null===r||void 0===r?void 0:r[1]);const o=()=>{const e=(new Date).getTime()-n.getTime();if(isNaN(e))return void f("00:00:00");const t=Math.floor(e/1e3)+i;if(isNaN(t)||t<0)return void f("00:00:00");const s=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;f("".concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")))};o();const d=setInterval(o,1e3);return()=>clearInterval(d)},[u]);const j=Array.from({length:u.maxSeats},(e,t)=>t+1),w=[],N=u.notes?u.notes.split("|").map(e=>e.trim()):[],S=(null===p||void 0===p?void 0:p.logoUrl)||null;console.log("Club logo URL:",S,"Club data:",p);const C=(null===(t=u.notes)||void 0===t||null===(s=t.match(/Game Type: ([^|]+)/))||void 0===s||null===(a=s[1])||void 0===a?void 0:a.trim())||N[1]||u.tableType,k=(null===(l=u.notes)||void 0===l||null===(n=l.match(/Stakes: ([^|]+)/))||void 0===n||null===(i=n[1])||void 0===i?void 0:i.trim())||(null===(o=N[2])||void 0===o?void 0:o.replace("Stakes:","").trim())||"\u20b9".concat(u.minBuyIn||0,"/\u20b9").concat(u.maxBuyIn||0),A=null===(d=u.notes)||void 0===d?void 0:d.match(/Table Value: \u20b9?([\d,]+)/),P=A?parseInt(A[1].replace(/,/g,"")):(u.currentSeats||0)*((u.minBuyIn+u.maxBuyIn)/2||25e3);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-blue-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-3xl font-bold text-white",children:["Table ",u.tableNumber," - ",C]}),(0,sa.jsxs)("p",{className:"text-gray-400",children:["Stakes: ",k]})]}),(0,sa.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsx)("div",{className:"mb-6 flex justify-center",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 px-6 py-3 rounded-2xl shadow-xl border-2 border-yellow-400",children:[(0,sa.jsx)("div",{className:"text-xs text-yellow-100 text-center mb-1",children:"TABLE VALUE"}),(0,sa.jsxs)("div",{className:"text-3xl font-bold text-white text-center",children:["\u20b9",P.toLocaleString()]})]})}),(0,sa.jsxs)("div",{className:"relative w-full aspect-[4/3] bg-gradient-to-br from-green-800 to-green-900 rounded-[50%] border-8 border-yellow-600 shadow-2xl flex items-center justify-center",children:[(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"bg-white rounded-full p-2 shadow-lg flex items-center justify-center w-24 h-24",children:S?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("img",{src:S,alt:"Club Logo",className:"w-20 h-20 object-contain",onError:e=>{console.error("Failed to load club logo:",S),e.target.style.display="none";const t=e.target.parentElement.querySelector(".logo-fallback");t&&(t.style.display="flex")}}),(0,sa.jsx)("div",{className:"logo-fallback text-3xl font-bold text-gray-800 hidden items-center justify-center w-full h-full",children:"\u2660\ufe0f\u2665\ufe0f"})]}):(0,sa.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:"\u2660\ufe0f\u2665\ufe0f"})})}),(0,sa.jsxs)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center",children:[y&&(0,sa.jsxs)("div",{className:"mb-2 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-2",children:[(0,sa.jsxs)("span",{children:["\ud83d\udc64 ",y.name]}),(0,sa.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm('Are you sure you want to unassign dealer "'.concat(y.name,'" from this table?'))&&v.mutate()},disabled:v.isLoading,className:"hover:bg-purple-700 rounded-full p-0.5 transition-colors disabled:opacity-50",title:"Unassign Dealer",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsx)("div",{className:"bg-yellow-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:"D"})]}),j.map(e=>{const t=(360/u.maxSeats*(e-1)-90)*(Math.PI/180),s=50+40*Math.cos(t),a=50+35*Math.sin(t),r=w.includes(e);return(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(s,"%"),top:"".concat(a,"%")},children:[(0,sa.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center font-bold text-lg transition-all cursor-pointer ".concat(r?"bg-blue-600 text-white border-2 border-blue-400":"bg-slate-700 text-gray-400 border-2 border-slate-600 hover:border-blue-500"),children:r?"P"+e:e}),(0,sa.jsxs)("div",{className:"text-center text-xs text-white mt-1",children:["Seat ",e]})]},e)})]}),(0,sa.jsxs)("div",{className:"mt-6 grid grid-cols-4 gap-4 bg-slate-800 p-4 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Players"}),(0,sa.jsxs)("div",{className:"text-white font-bold text-xl",children:[u.currentSeats||0,"/",u.maxSeats]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Table Value"}),(0,sa.jsxs)("div",{className:"text-yellow-400 font-bold text-xl",children:["\u20b9",P.toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Buy-In Range"}),(0,sa.jsxs)("div",{className:"text-white font-bold text-lg",children:["\u20b9",(u.minBuyIn||0).toLocaleString()," - \u20b9",(u.maxBuyIn||0).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("div",{className:"font-bold text-xl ".concat("OCCUPIED"===u.status?"text-green-400":"AVAILABLE"===u.status?"text-yellow-400":"text-gray-400"),children:"OCCUPIED"===u.status?"Active":"AVAILABLE"===u.status?"Waiting":u.status})]})]}),("OCCUPIED"===u.status||"AVAILABLE"===u.status&&(null===(c=u.notes)||void 0===c?void 0:c.includes("Paused Elapsed")))&&(0,sa.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-blue-100 text-sm mb-1",children:"SESSION RUNNING TIME"}),(0,sa.jsx)("div",{className:"text-white font-bold text-3xl font-mono",children:g})]}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg font-bold text-white transition-colors",children:"Close"})})]})})}function kl(e){let{selectedClubId:t,tables:s,tablesLoading:a}=e;const[l,n]=(0,r.useState)("all"),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),m=s.filter(e=>"RUMMY"!==e.tableType),[x,h]=(0,r.useState)({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),[p,b]=(0,r.useState)(null),g=ra(),[f,y]=(0,r.useState)("30"),{data:v,isLoading:j}=ml({queryKey:["staff",t],queryFn:()=>wr.staffAPI.getStaff(t),enabled:!!t}),w=(null===v||void 0===v?void 0:v.filter(e=>"Dealer"===e.role&&"Active"===e.status))||[],N=(new Date).toISOString().split("T")[0],{data:S}=ml({queryKey:["dealersOnLeave",t,N],queryFn:()=>wr.iw.getDealers(t,N),enabled:!!t}),{data:C}=ml({queryKey:["availableDealersForToday",t,N],queryFn:()=>wr.iw.getAvailableDealersForDate(t,N),enabled:!!t}),k=(null===S||void 0===S?void 0:S.dealers)||[],A=new Set(w.filter(e=>!k.find(t=>t.id===e.id)).map(e=>e.id)),P=new Set(s.filter(e=>("OCCUPIED"===e.status||"RESERVED"===e.status)&&e.notes).map(e=>{var t;const s=null===(t=e.notes)||void 0===t?void 0:t.match(/Dealer:\s*([a-f0-9-]{36})/i);return s?s[1]:null}).filter(Boolean)),T=((null===C||void 0===C?void 0:C.dealers)||[]).filter(e=>!P.has(e.id)),I=w.filter(e=>!P.has(e.id)&&!A.has(e.id)),_=bl({mutationFn:async e=>{let{tableId:s,dealerId:a}=e;const r=m.find(e=>e.id===s),l=w.find(e=>e.id===a);if(!r||!l)throw new Error("Table or dealer not found");const n=(r.notes||"").replace(/\s*\|\s*Dealer:.*$/i,""),i="".concat(n," | Dealer: ").concat(l.id," (").concat(l.name,")").trim();return wr.rj.updateTable(t,s,{notes:i})},onSuccess:()=>{jr.success("Dealer assigned successfully"),d(""),u(""),g.invalidateQueries(["tables",t]),g.invalidateQueries(["staff",t]),g.invalidateQueries(["all-tables",t]),g.invalidateQueries(["rummy-tables",t])},onError:e=>{jr.error(e.message||"Failed to assign dealer")}}),D=bl({mutationFn:e=>wr.rj.createTable(t,e),onSuccess:()=>{jr.success("Table created successfully"),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),n("all"),g.invalidateQueries(["tables",t])},onError:e=>{jr.error(e.message||"Failed to create table")}}),E=bl({mutationFn:e=>{let{tableId:s,data:a}=e;return wr.rj.updateTable(t,s,a)},onSuccess:()=>{jr.success("Table updated successfully"),b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),n("all"),g.invalidateQueries(["tables",t])},onError:e=>{jr.error(e.message||"Failed to update table")}}),R=bl({mutationFn:e=>wr.rj.deleteTable(t,e),onSuccess:()=>{jr.success("Table deleted successfully"),g.invalidateQueries(["tables",t])},onError:e=>{jr.error(e.message||"Failed to delete table")}}),L=bl({mutationFn:e=>wr.rj.resumeSession(t,e),onSuccess:()=>{jr.success("Session started successfully"),g.invalidateQueries(["tables",t])},onError:e=>{jr.error(e.message||"Failed to start session")}});return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Table Management"}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 pb-4 mb-6",children:[(0,sa.jsx)("button",{onClick:()=>n("all"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("all"===l?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"All Tables"}),(0,sa.jsx)("button",{onClick:()=>{n("add"),b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30")},className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("add"===l?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Add New Table"})]}),"all"===l&&(0,sa.jsx)("div",{className:"space-y-4",children:a?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tables..."})]}):0===m.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No regular tables created yet"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:'Click "Add New Table" to create your first table (Rummy tables are managed separately)'})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("AVAILABLE"===e.status?"bg-green-600/20 text-green-400":"OCCUPIED"===e.status?"bg-blue-600/20 text-blue-400":"RESERVED"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-gray-600/20 text-gray-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Max Seats:"}),(0,sa.jsx)("span",{className:"text-white font-medium",children:e.maxSeats})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Current Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:["AVAILABLE"===e.status||"CLOSED"===e.status?(0,sa.jsxs)("button",{onClick:()=>L.mutate(e.id),disabled:L.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[(0,sa.jsx)("span",{children:"\u25b6"}),(0,sa.jsx)("span",{children:"Start Session"})]}):null,(0,sa.jsx)("button",{onClick:()=>(e=>{var t,s,a,r,l,i,o,d,c,u,m,x;b(e);const p=e.notes?e.notes.split("|").map(e=>e.trim()):[],g=p[0]||"Table ".concat(e.tableNumber),f=p[1]||"Texas Hold'em",v=(null===(t=p[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"",j=(null===(s=p[3])||void 0===s||null===(a=s.match(/\d+/))||void 0===a?void 0:a[0])||"30",w=(null===(r=p[4])||void 0===r||null===(l=r.match(/\d+/))||void 0===l?void 0:l[0])||"5",N=(null===(i=p[5])||void 0===i||null===(o=i.match(/\d+/))||void 0===o?void 0:o[0])||"10",S=(null===(d=p[6])||void 0===d||null===(c=d.match(/\d+/))||void 0===c?void 0:c[0])||"120";h({tableName:g,tableNumber:(null===(u=e.tableNumber)||void 0===u?void 0:u.toString())||"",gameType:f,customGameType:"",maxSeats:e.maxSeats||8,stakes:v,minPlayTime:j,callTime:parseInt(w),cashOutWindow:parseInt(N),sessionTimeout:parseInt(S),tableType:e.tableType||"CASH",minBuyIn:(null===(m=e.minBuyIn)||void 0===m?void 0:m.toString())||"",maxBuyIn:(null===(x=e.maxBuyIn)||void 0===x?void 0:x.toString())||"",notes:e.notes||""});const C=new Set(["30","45","60","90","120","150","180"]);y(C.has(j)?j:"custom"),n("add")})(e),className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete Table ".concat(e.tableNumber,"?"))&&R.mutate(e.id)})(e),disabled:R.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]},e.id))})}),"add"===l&&(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold mb-6",children:p?"Edit Table":"Create New Table"}),(0,sa.jsxs)("form",{onSubmit:p?e=>{if(e.preventDefault(),!p)return;const t="custom"===f?Math.max(30,parseInt(x.minPlayTime)||30):Math.max(30,parseInt(f)||30);E.mutate({tableId:p.id,data:{tableType:x.tableType,maxSeats:parseInt(x.maxSeats),minBuyIn:x.minBuyIn?parseFloat(x.minBuyIn):null,maxBuyIn:x.maxBuyIn?parseFloat(x.maxBuyIn):null,notes:x.notes||"".concat(x.tableName||"Table "+x.tableNumber," | ").concat("Custom"===x.gameType?x.customGameType:x.gameType," | Stakes: ").concat(x.stakes," | Min Play: ").concat(t,"m | Call: ").concat(x.callTime,"m | Cash-out: ").concat(x.cashOutWindow,"m | Timeout: ").concat(x.sessionTimeout,"m")}})}:e=>{if(e.preventDefault(),!t)return void jr.error("Please select a club first");if(!x.tableNumber)return void jr.error("Table number is required");const s="custom"===f?Math.max(30,parseInt(x.minPlayTime)||30):Math.max(30,parseInt(f)||30);D.mutate({tableNumber:parseInt(x.tableNumber),tableType:x.tableType,maxSeats:parseInt(x.maxSeats),minBuyIn:x.minBuyIn?parseFloat(x.minBuyIn):null,maxBuyIn:x.maxBuyIn?parseFloat(x.maxBuyIn):null,notes:x.notes||"".concat(x.tableName||"Table "+x.tableNumber," | ").concat("Custom"===x.gameType?x.customGameType:x.gameType," | Stakes: ").concat(x.stakes," | Min Play: ").concat(s,"m | Call: ").concat(x.callTime,"m | Cash-out: ").concat(x.cashOutWindow,"m | Timeout: ").concat(x.sessionTimeout,"m")})},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Name"}),(0,sa.jsx)("input",{type:"text",value:x.tableName,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{tableName:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"Table 1",disabled:!t})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Game Type"}),(0,sa.jsxs)("select",{value:x.gameType,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{gameType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,sa.jsx)("option",{value:"Texas Hold'em",children:"Texas Hold'em"}),(0,sa.jsx)("option",{value:"Omaha",children:"Omaha"}),(0,sa.jsx)("option",{value:"Seven Card Stud",children:"Seven Card Stud"}),(0,sa.jsx)("option",{value:"Razz",children:"Razz"}),(0,sa.jsx)("option",{value:"Custom",children:"Custom"})]})]}),"Custom"===x.gameType&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Custom Game Type"}),(0,sa.jsx)("input",{type:"text",value:x.customGameType,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{customGameType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"Enter custom game type",disabled:!t})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Number *"}),(0,sa.jsx)("input",{type:"number",value:x.tableNumber,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{tableNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",required:!0,disabled:!t,min:"1",placeholder:"1"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Players"}),(0,sa.jsx)("input",{type:"number",value:x.maxSeats,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{maxSeats:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"2",max:"10",placeholder:"8"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Blind Levels / Stakes"}),(0,sa.jsx)("input",{type:"text",value:x.stakes,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{stakes:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"\u20b925/\u20b950",disabled:!t})]}),(0,sa.jsxs)("div",{className:"border-t border-slate-600 pt-4 mt-4",children:[(0,sa.jsx)("h4",{className:"text-white text-sm font-semibold mb-3",children:"Session Parameters"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-xs mb-1",children:"Min Play Time (minutes)"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("select",{value:f,onChange:e=>{const t=e.target.value;y(t),"custom"!==t?h((0,i.A)((0,i.A)({},x),{},{minPlayTime:t})):(!x.minPlayTime||parseInt(x.minPlayTime)<30)&&h((0,i.A)((0,i.A)({},x),{},{minPlayTime:"30"}))},className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,sa.jsx)("option",{value:"30",children:"30 minutes"}),(0,sa.jsx)("option",{value:"45",children:"45 minutes"}),(0,sa.jsx)("option",{value:"60",children:"60 minutes"}),(0,sa.jsx)("option",{value:"90",children:"90 minutes"}),(0,sa.jsx)("option",{value:"120",children:"120 minutes"}),(0,sa.jsx)("option",{value:"150",children:"150 minutes"}),(0,sa.jsx)("option",{value:"180",children:"180 minutes"}),(0,sa.jsx)("option",{value:"custom",children:"Custom..."})]}),"custom"===f&&(0,sa.jsx)("input",{type:"number",min:30,value:x.minPlayTime,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{minPlayTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"Enter minutes (min 30)",disabled:!t})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-xs mb-1",children:"Call Time (minutes)"}),(0,sa.jsx)("input",{type:"number",value:x.callTime,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{callTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"5",disabled:!t})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-xs mb-1",children:"Cash-out Window (minutes)"}),(0,sa.jsx)("input",{type:"number",value:x.cashOutWindow,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{cashOutWindow:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"10",disabled:!t})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-xs mb-1",children:"Session Timeout (minutes)"}),(0,sa.jsx)("input",{type:"number",value:x.sessionTimeout,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{sessionTimeout:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"120",disabled:!t})]})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 border-t border-slate-600 pt-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Min Buy-In (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:x.minBuyIn,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{minBuyIn:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"0",step:"0.01",placeholder:"1000.00"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Buy-In (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:x.maxBuyIn,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{maxBuyIn:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"0",step:"0.01",placeholder:"10000.00"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Type (Backend)"}),(0,sa.jsxs)("select",{value:x.tableType,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{tableType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,sa.jsx)("option",{value:"CASH",children:"Cash Game"}),(0,sa.jsx)("option",{value:"TOURNAMENT",children:"Tournament"}),(0,sa.jsx)("option",{value:"HIGH_STAKES",children:"High Stakes"}),(0,sa.jsx)("option",{value:"PRIVATE",children:"Private"})]})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,sa.jsx)("button",{type:"submit",disabled:D.isLoading||E.isLoading||!t,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:D.isLoading||E.isLoading?(0,sa.jsxs)("span",{className:"flex items-center justify-center",children:[(0,sa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p?"Updating...":"Creating..."]}):p?"Update Table":"Create Table"}),p&&(0,sa.jsx)("button",{type:"button",onClick:()=>{b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),n("all")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg font-semibold transition-all",children:"Cancel"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Dealer Assignment"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,sa.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t,children:[(0,sa.jsx)("option",{value:"",children:"-- Select Table --"}),m.map(e=>(0,sa.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber," - ",e.tableType," (",e.status,")"]},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Assign Dealer"}),(0,sa.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t||j,children:[(0,sa.jsx)("option",{value:"",children:"-- Select Dealer --"}),j?(0,sa.jsx)("option",{disabled:!0,children:"Loading dealers..."}):0===T.length?(0,sa.jsx)("option",{disabled:!0,children:w.length>0?"No dealers available (all assigned, on leave, or no shift today)":"No active dealers found"}):T.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.employeeId||"No ID",")"]},e.id))]})]})]}),(0,sa.jsx)("button",{onClick:()=>{o&&c?_.mutate({tableId:o,dealerId:c}):jr.error("Please select both table and dealer")},disabled:!o||!c||_.isLoading||!t,className:"mt-4 bg-purple-600 hover:bg-purple-500 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:_.isLoading?"Assigning...":"Assign Dealer"}),0===w.length&&!j&&t&&(0,sa.jsx)("p",{className:"mt-2 text-sm text-yellow-400",children:"\u26a0\ufe0f No active dealers found. Please create dealer staff members first."}),0===I.length&&w.length>0&&!j&&(0,sa.jsx)("p",{className:"mt-2 text-sm text-amber-400",children:"\u2139\ufe0f All dealers are currently assigned to active tables. Free up a dealer by ending a table session."})]})]})}function Al(e){let{selectedClubId:t,tables:s,waitlist:a,waitlistLoading:r}=e;return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Waitlist Management"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Current Waitlist"}),r?(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,sa.jsx)("p",{className:"text-sm",children:"Loading..."})]}):0===a.length?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players in waitlist"}):(0,sa.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-600 p-4 rounded-lg",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:e.playerName}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Position: ",e.priority||"N/A"]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Table Type: ",e.tableType||"Any"]})]}),(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status})]}),(0,sa.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,sa.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"\ud83c\udfaf View Table"}),(0,sa.jsx)("button",{className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"Remove"})]})]},e.id))})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seat Allocation"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Player"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Player --"}),a.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.playerName},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,sa.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Seat Number"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Seat --"}),[1,2,3,4,5,6,7,8,9].map(e=>(0,sa.jsxs)("option",{value:e,children:["Seat ",e]},e))]})]}),(0,sa.jsx)("button",{className:"w-full bg-purple-600 hover:bg-purple-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Assign Seat"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Player Call & Reorder"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Call Players"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("button",{className:"w-full bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call Next Player"}),(0,sa.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call All Players"}),(0,sa.jsx)("button",{className:"w-full bg-yellow-600 hover:bg-yellow-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Send SMS Notification"})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reorder Waitlist"}),(0,sa.jsx)("div",{className:"space-y-2",children:0===a.length?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No players to reorder"}):a.map((e,t)=>(0,sa.jsxs)("div",{className:"bg-slate-600 p-3 rounded flex justify-between items-center",children:[(0,sa.jsxs)("span",{className:"text-white",children:[t+1,". ",e.playerName]}),(0,sa.jsxs)("div",{className:"flex gap-1",children:[(0,sa.jsx)("button",{disabled:0===t,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2191"}),(0,sa.jsx)("button",{disabled:t===a.length-1,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2193"})]})]},e.id))})]})]})]})]})}function Pl(e){let{selectedClubId:t,tables:s}=e;const[a,l]=(0,r.useState)("process-buyout");return(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-orange-600/30 via-red-500/20 to-rose-700/30 rounded-xl p-6 border border-orange-800/40",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Table Buy-Out"}),(0,sa.jsx)("p",{className:"text-gray-300 text-sm mb-6",children:"Manage player buy-out requests and process manual buy-outs."}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-orange-800/40 pb-4 mb-6",children:[(0,sa.jsx)("button",{onClick:()=>l("process-buyout"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("process-buyout"===a?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Process Buy-Out"}),(0,sa.jsx)("button",{onClick:()=>l("player-requests"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("player-requests"===a?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Player Requests"})]}),"process-buyout"===a&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Process Buy-Out"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Seated Player"}),(0,sa.jsx)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:(0,sa.jsx)("option",{value:"",children:"-- Select Player --"})})]}),(0,sa.jsx)("div",{className:"p-4 bg-blue-500/20 rounded-lg border border-blue-400/30",children:(0,sa.jsxs)("div",{className:"text-sm text-white space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Player:"}),(0,sa.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Table:"}),(0,sa.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Current Table Balance:"}),(0,sa.jsx)("span",{className:"font-semibold text-emerald-300",children:"0 chips"})]})]})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason (Optional)"}),(0,sa.jsx)("textarea",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Enter reason for buy-out (optional)..."})]}),(0,sa.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Approve Buy-Out"})]})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buy-Out Information"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold mb-2",children:"How Buy-Out Works:"}),(0,sa.jsxs)("ul",{className:"text-sm text-gray-300 space-y-2 list-disc list-inside",children:[(0,sa.jsx)("li",{children:"Select a player who is currently seated at a table"}),(0,sa.jsx)("li",{children:"Their table chip balance will be moved to their available balance"}),(0,sa.jsx)("li",{children:"Player will be removed from the table (seat becomes available)"}),(0,sa.jsx)("li",{children:"Player can then convert chips to real money at the cashier counter"})]})]}),(0,sa.jsxs)("div",{className:"p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[(0,sa.jsx)("h4",{className:"text-yellow-300 font-semibold mb-2",children:"\u26a0\ufe0f Important Notes:"}),(0,sa.jsxs)("ul",{className:"text-sm text-yellow-200 space-y-1 list-disc list-inside",children:[(0,sa.jsx)("li",{children:"Buy-out approval is permanent and cannot be undone"}),(0,sa.jsx)("li",{children:"Table balance will be immediately transferred to player's available balance"}),(0,sa.jsx)("li",{children:"Player must go to cashier to convert chips to real money"})]})]}),(0,sa.jsx)("div",{className:"p-4 bg-green-500/20 rounded-lg border border-green-400/30",children:(0,sa.jsxs)("div",{className:"text-sm text-green-300",children:[(0,sa.jsx)("div",{className:"font-semibold mb-1",children:"Currently Seated Players:"}),(0,sa.jsx)("div",{className:"text-green-200",children:"0 player(s) at tables"})]})})]})]})]}),"player-requests"===a&&(0,sa.jsx)(jl,{clubId:t})]})})}const Tl="all_players",Il="new_signups",_l="vip_players",Dl="tables_players",El="waitlist_players",Rl="custom_group",Ll="all_staff",Ol="staff_admin",Ml="staff_manager",Fl="staff_cashier",Bl="staff_dealer",ql="staff_hr",Ul="staff_fnb",zl="staff_gre",Wl="staff_custom",Hl=e=>{if(!e)return e;const t=e.lastIndexOf("."),s=-1!==t?e.substring(0,t):e,a=-1!==t?e.substring(t):"";return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").toLowerCase()+a};function Vl(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)("player"),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)({title:"",details:"",targetType:Tl,imageFile:null,imageUrl:"",videoFile:null,videoUrl:"",customPlayerIds:[],customStaffIds:[],scheduledAt:"",isActive:!0}),{data:b=[],isLoading:g}=ml({queryKey:["pushNotifications",t,a],queryFn:()=>wr.Dv.getPushNotifications(t,a),enabled:!!t}),{data:f=[]}=ml({queryKey:["allPlayersForGroup",t],queryFn:async()=>{if(!t)return[];const e=[];let s=1;let a=!0;for(;a;)try{const r=(await wr.Dv.getPlayers(t,{limit:50,page:s})).players||[];if(!r||0===r.length){a=!1;break}const l=r.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...l),r.length<50?a=!1:(s++,s>20&&(a=!1))}catch(r){console.error("Error fetching players page ".concat(s,":"),r),a=!1}return e},enabled:!!t&&h.targetType===Rl}),{data:y=[]}=ml({queryKey:["allStaffForGroup",t],queryFn:async()=>{if(!t)return[];return(await wr.Dv.getStaff(t)||[]).filter(e=>"Active"===e.status&&"AFFILIATE"!==e.role)},enabled:!!t&&h.targetType===Wl}),v=bl({mutationFn:async e=>{let s=e.imageUrl,r=e.videoUrl;if(e.imageFile)try{const a=Hl(e.imageFile.name),{signedUrl:r,publicUrl:l}=await wr.Dv.createPushNotificationUploadUrl(t,a,!1);await wr.Dv.uploadToSignedUrl(r,e.imageFile),s=l}catch(l){return console.error("Failed to upload image:",l),void jr.error("Failed to upload image: "+(l.message||"Unknown error"))}if(e.videoFile)try{const s=Hl(e.videoFile.name),{signedUrl:a,publicUrl:l}=await wr.Dv.createPushNotificationUploadUrl(t,s,!0);await wr.Dv.uploadToSignedUrl(a,e.videoFile),r=l}catch(l){return console.error("Failed to upload video:",l),void jr.error("Failed to upload video: "+(l.message||"Unknown error"))}return await wr.Dv.createPushNotification(t,{title:e.title,details:e.details,imageUrl:s||void 0,videoUrl:r||void 0,targetType:e.targetType,customPlayerIds:e.targetType===Rl?e.customPlayerIds:void 0,customStaffIds:e.targetType===Wl?e.customStaffIds:void 0,notificationType:a,scheduledAt:e.scheduledAt||void 0,isActive:e.isActive})},onSuccess:()=>{jr.success("Push notification created successfully!"),s.invalidateQueries(["pushNotifications",t]),i(!1),N()},onError:e=>{jr.error(e.message||"Failed to create notification")}}),j=bl({mutationFn:async e=>await wr.Dv.sendPushNotification(t,e),onSuccess:e=>{jr.success("Notification sent to ".concat(e.recipientCount," recipient(s)!")),s.invalidateQueries(["pushNotifications",t])},onError:e=>{jr.error(e.message||"Failed to send notification")}}),w=bl({mutationFn:async e=>await wr.Dv.deletePushNotification(t,e),onSuccess:()=>{jr.success("Notification deleted successfully!"),s.invalidateQueries(["pushNotifications",t])},onError:e=>{jr.error(e.message||"Failed to delete notification")}}),N=()=>{p({title:"",details:"",targetType:"player"===a?Tl:Ll,imageFile:null,imageUrl:"",videoFile:null,videoUrl:"",customPlayerIds:[],customStaffIds:[],scheduledAt:"",isActive:!0})};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Push Notifications & Offers"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Create and manage push notifications for players and staff"})]}),(0,sa.jsx)("button",{onClick:()=>{N(),i(!0)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"+ Create Notification"})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-gray-700",children:[(0,sa.jsx)("button",{onClick:()=>{l("player"),N()},className:"px-6 py-3 font-semibold transition-colors ".concat("player"===a?"text-white border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-white"),children:"Player Notifications"}),(0,sa.jsx)("button",{onClick:()=>{l("staff"),N()},className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===a?"text-white border-b-2 border-purple-500 bg-purple-500/10":"text-gray-400 hover:text-white"),children:"Staff Notifications"})]}),g?(0,sa.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading notifications..."}):0===b.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsxs)("p",{className:"text-gray-400 text-lg mb-4",children:["No ",a," notifications yet"]}),(0,sa.jsx)("button",{onClick:()=>{N(),i(!0)},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Create Your First Notification"})]}):(0,sa.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-blue-500 transition-all",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),e.details&&(0,sa.jsx)("p",{className:"text-gray-300 mb-3",children:e.details}),(0,sa.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,sa.jsxs)("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm font-semibold rounded",children:[e.targetType===Tl&&"All Players",e.targetType===Il&&"New Signups",e.targetType===_l&&"VIP Players",e.targetType===Dl&&"Tables Players",e.targetType===El&&"Waitlist Players",e.targetType===Rl&&"Custom Group",e.targetType===Ll&&"All Staff",e.targetType===Ol&&"Admin Staff",e.targetType===Ml&&"Manager Staff",e.targetType===Fl&&"Cashier Staff",e.targetType===Bl&&"Dealer Staff",e.targetType===ql&&"HR Staff",e.targetType===Ul&&"F&B Staff",e.targetType===zl&&"GRE Staff",e.targetType===Wl&&"Custom Staff Group"]}),(0,sa.jsx)("span",{className:"px-3 py-1 text-sm font-semibold rounded ".concat(e.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"),children:e.isActive?"Active":"Inactive"}),e.sentAt&&(0,sa.jsxs)("span",{className:"px-3 py-1 bg-purple-600 text-white text-sm font-semibold rounded",children:["Sent ",new Date(e.sentAt).toLocaleDateString()]})]}),(e.imageUrl||e.videoUrl)&&(0,sa.jsxs)("div",{className:"mt-3",children:[e.imageUrl&&(0,sa.jsx)("img",{src:e.imageUrl,alt:e.title,className:"max-w-xs rounded-lg"}),e.videoUrl&&(0,sa.jsx)("video",{src:e.videoUrl,controls:!0,className:"max-w-xs rounded-lg mt-2"})]})]}),(0,sa.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[!e.sentAt&&(0,sa.jsxs)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to send "'.concat(s,'" to all recipients?'))&&j.mutate(t));var t,s},disabled:j.isPending,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udce4"})," Send"]}),(0,sa.jsx)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&w.mutate(t));var t,s},disabled:w.isPending,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Delete"})]})]})},e.id))}),n&&(0,sa.jsx)(Jl,{title:"Create Push Notification",form:h,setForm:p,onSubmit:e=>{e.preventDefault(),h.title.trim()?h.targetType!==Rl||0!==h.customPlayerIds.length?h.targetType!==Wl||0!==h.customStaffIds.length?v.mutate(h):jr.error("Please select at least one staff member for custom group"):jr.error("Please select at least one player for custom group"):jr.error("Title is required")},onClose:()=>{i(!1),N()},isLoading:v.isPending,activeTab:a,allPlayers:f,allStaff:y,showCustomGroupModal:m,setShowCustomGroupModal:x})]})}function Jl(e){let{title:t,form:s,setForm:a,onSubmit:r,onClose:l,isLoading:n,activeTab:o,allPlayers:d,allStaff:c,showCustomGroupModal:u,setShowCustomGroupModal:m}=e;return(0,sa.jsxs)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full my-8 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t}),(0,sa.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Title ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"text",value:s.title,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{title:e.target.value})),placeholder:"e.g., Special Weekend Offer!",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Details"}),(0,sa.jsx)("textarea",{value:s.details,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{details:e.target.value})),placeholder:"Enter notification details...",rows:4,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Target Audience ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("select",{value:s.targetType,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{targetType:e.target.value,customPlayerIds:[],customStaffIds:[]})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:"player"===o?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("option",{value:Tl,children:"All Players"}),(0,sa.jsx)("option",{value:Il,children:"New Sign-up Players"}),(0,sa.jsx)("option",{value:_l,children:"VIP Players"}),(0,sa.jsx)("option",{value:Dl,children:"Tables Players"}),(0,sa.jsx)("option",{value:El,children:"Waitlist Players"}),(0,sa.jsx)("option",{value:Rl,children:"Custom Group"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("option",{value:Ll,children:"All Staff"}),(0,sa.jsx)("option",{value:Ol,children:"Admin Staff"}),(0,sa.jsx)("option",{value:Ml,children:"Manager Staff"}),(0,sa.jsx)("option",{value:Fl,children:"Cashier Staff"}),(0,sa.jsx)("option",{value:Bl,children:"Dealer Staff"}),(0,sa.jsx)("option",{value:ql,children:"HR Staff"}),(0,sa.jsx)("option",{value:Ul,children:"F&B Staff"}),(0,sa.jsx)("option",{value:zl,children:"GRE Staff"}),(0,sa.jsx)("option",{value:Wl,children:"Custom Staff Group"})]})}),s.targetType===Rl&&(0,sa.jsx)("button",{type:"button",onClick:()=>m(!0),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:s.customPlayerIds.length>0?"Selected ".concat(s.customPlayerIds.length," players"):"Select Players"}),s.targetType===Wl&&(0,sa.jsx)("button",{type:"button",onClick:()=>m(!0),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:s.customStaffIds.length>0?"Selected ".concat(s.customStaffIds.length," staff members"):"Select Staff Members"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Image (Optional)"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,sa.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(r.size>10485760)return void jr.error("Image must be less than 10MB");a((0,i.A)((0,i.A)({},s),{},{imageFile:r,imageUrl:""}))}}}),s.imageFile?"\u2713 File Selected":"Choose Image"]}),(0,sa.jsx)("input",{type:"url",value:s.imageUrl,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{imageUrl:e.target.value,imageFile:null})),placeholder:"Or paste image URL",disabled:!!s.imageFile,className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),s.imageFile&&(0,sa.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.imageFile.name," (",(s.imageFile.size/1024).toFixed(1)," KB)"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Video (Optional)"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,sa.jsx)("input",{type:"file",accept:"video/*",className:"hidden",onChange:e=>{var t;const r=null===(t=e.target.files)||void 0===t?void 0:t[0];if(r){if(r.size>104857600)return void jr.error("Video must be less than 100MB");a((0,i.A)((0,i.A)({},s),{},{videoFile:r,videoUrl:""}))}}}),s.videoFile?"\u2713 File Selected":"Choose Video"]}),(0,sa.jsx)("input",{type:"url",value:s.videoUrl,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{videoUrl:e.target.value,videoFile:null})),placeholder:"Or paste video URL",disabled:!!s.videoFile,className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),s.videoFile&&(0,sa.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.videoFile.name," (",(s.videoFile.size/1048576).toFixed(1)," MB)"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Schedule (Optional)"}),(0,sa.jsx)("input",{type:"datetime-local",value:s.scheduledAt,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{scheduledAt:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Leave empty to send immediately"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("input",{type:"checkbox",id:"isActive",checked:s.isActive,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{isActive:e.target.checked})),className:"w-5 h-5 text-blue-600 bg-slate-700 border-gray-600 rounded focus:ring-blue-500"}),(0,sa.jsx)("label",{htmlFor:"isActive",className:"text-gray-300 font-semibold",children:"Notification is Active"})]}),(0,sa.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:n,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:n?"Creating...":"Create Notification"}),(0,sa.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]}),u&&s.targetType===Rl&&(0,sa.jsx)(Kl,{allPlayers:d,selectedPlayerIds:s.customPlayerIds,onSelect:e=>{a((0,i.A)((0,i.A)({},s),{},{customPlayerIds:e})),m(!1)},onClose:()=>m(!1)}),u&&s.targetType===Wl&&(0,sa.jsx)(Ql,{allStaff:c,selectedStaffIds:s.customStaffIds,onSelect:e=>{a((0,i.A)((0,i.A)({},s),{},{customStaffIds:e})),m(!1)},onClose:()=>m(!1)})]})}function Kl(e){let{allPlayers:t,selectedPlayerIds:s,onSelect:a,onClose:l}=e;const[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(new Set(s)),c=t.filter(e=>{if(!n)return!0;const t=n.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phoneNumber&&e.phoneNumber.includes(n)||e.playerId&&e.playerId.toLowerCase().includes(t)}),u=e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),d(t)};return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Select Players for Custom Group"}),(0,sa.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by name, email, or ID...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,sa.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:c.map(e=>(0,sa.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer",onClick:()=>u(e.id),children:[(0,sa.jsx)("input",{type:"checkbox",checked:o.has(e.id),onChange:()=>u(e.id),className:"w-5 h-5 text-purple-600"}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:e.email})]})]},e.id))}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsxs)("button",{onClick:()=>a(Array.from(o)),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-colors",children:["Select ",o.size," Players"]}),(0,sa.jsx)("button",{onClick:l,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})})}function Ql(e){let{allStaff:t,selectedStaffIds:s,onSelect:a,onClose:l}=e;const[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(new Set(s)),c=t.filter(e=>{if(!n)return!0;const t=n.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.employeeId&&e.employeeId.toLowerCase().includes(t)||e.role&&e.role.toLowerCase().includes(t)}),u=e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),d(t)};return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Select Staff Members for Custom Group"}),(0,sa.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by name, email, employee ID, or role...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,sa.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:c.map(e=>(0,sa.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer",onClick:()=>u(e.id),children:[(0,sa.jsx)("input",{type:"checkbox",checked:o.has(e.id),onChange:()=>u(e.id),className:"w-5 h-5 text-purple-600"}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:[e.email," \u2022 ",e.role]})]})]},e.id))}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsxs)("button",{onClick:()=>a(Array.from(o)),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-colors",children:["Select ",o.size," Staff Members"]}),(0,sa.jsx)("button",{onClick:l,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})})}function Gl(e){var t,s;let{selectedClubId:a}=e;const l=ra(),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[y,v]=(0,r.useState)("details"),[j,w]=(0,r.useState)(null),N=["No Limit Hold'em","Pot Limit Omaha","Pot Limit Omaha Hi-Lo","Limit Hold'em","Seven Card Stud","Seven Card Stud Hi-Lo","Custom"],S=["Standard","Turbo","Super Turbo","Deep Stack","Hyper Turbo","Custom"],C=["Every 4 levels","Every 6 levels","Every 8 levels","No breaks","Custom"],k=["Top 10%","Top 15%","Top 20%","Top 25%","Winner takes all","Custom"],A=["Random","Table Balance","Manual","Custom"],P=["Standard (pause on breaks)","No Pause","Pause on All-in","Custom"],[T,I]=(0,r.useState)({name:"",tournament_type:"No Limit Hold'em",buy_in:"",entry_fee:"",starting_chips:"",blind_structure:"Standard",number_of_levels:15,minutes_per_level:15,break_structure:"Every 4 levels",break_duration:10,late_registration:60,payout_structure:"Top 15%",seat_draw_method:"Random",clock_pause_rules:"Standard (pause on breaks)",allow_rebuys:!1,allow_addon:!1,allow_reentry:!1,bounty_amount:"",max_players:100,start_time:"",custom_tournament_type:"",custom_blind_structure:"",custom_break_structure:"",custom_payout_structure:"",custom_seat_draw_method:"",custom_clock_pause_rules:""}),[_,D]=(0,r.useState)([]);(0,r.useEffect)(()=>{(async()=>{if(a)try{const e=await wr.Od.getClub(a);w((null===e||void 0===e?void 0:e.logoUrl)||null)}catch(e){console.error("Error fetching club logo:",e)}})()},[a]);const{data:E,isLoading:R}=ml({queryKey:["tournaments",a],queryFn:()=>wr.Re.getTournaments(a),enabled:!!a}),{data:L,isLoading:O}=ml({queryKey:["tournament-details",a,null===p||void 0===p?void 0:p.id],queryFn:()=>wr.Re.getTournamentById(a,p.id),enabled:!!a&&!!p&&u}),{data:M,isLoading:F}=ml({queryKey:["tournament-players",a,null===p||void 0===p?void 0:p.id],queryFn:()=>wr.Re.getTournamentPlayers(a,p.id),enabled:!!a&&!!p&&u}),{data:B}=ml({queryKey:["tournament-winners",a,null===p||void 0===p?void 0:p.id],queryFn:()=>wr.Re.getTournamentWinners(a,p.id),enabled:!!a&&!!p&&"completed"===p.status}),q=bl({mutationFn:e=>wr.Re.createTournament(a,e),onSuccess:()=>{jr.success("Tournament created successfully!"),l.invalidateQueries(["tournaments",a]),o(!1),V()},onError:e=>{jr.error(e.message||"Failed to create tournament")}}),U=bl({mutationFn:e=>wr.Re.startTournament(a,e),onSuccess:()=>{jr.success("Tournament started successfully!"),l.invalidateQueries(["tournaments",a])},onError:e=>{jr.error(e.message||"Failed to start tournament")}}),z=bl({mutationFn:e=>{let{tournamentId:t,winners:s}=e;return wr.Re.endTournament(a,t,{winners:s})},onSuccess:()=>{jr.success("Tournament ended and winners updated successfully!"),l.invalidateQueries(["tournaments",a]),h(!1),m(!1),D([])},onError:e=>{jr.error(e.message||"Failed to end tournament")}}),W=bl({mutationFn:e=>{let{tournamentId:t,data:s}=e;return wr.Re.updateTournament(a,t,s)},onSuccess:()=>{jr.success("Tournament updated successfully!"),l.invalidateQueries(["tournaments",a]),c(!1),f(null),V()},onError:e=>{jr.error(e.message||"Failed to update tournament")}}),H=bl({mutationFn:e=>wr.Re.deleteTournament(a,e),onSuccess:()=>{jr.success("Tournament deleted successfully!"),l.invalidateQueries(["tournaments",a])},onError:e=>{jr.error(e.message||"Failed to delete tournament")}}),V=()=>{I({name:"",tournament_type:"No Limit Hold'em",buy_in:"",entry_fee:"",starting_chips:"",blind_structure:"Standard",number_of_levels:15,minutes_per_level:15,break_structure:"Every 4 levels",break_duration:10,late_registration:60,payout_structure:"Top 15%",seat_draw_method:"Random",clock_pause_rules:"Standard (pause on breaks)",allow_rebuys:!1,allow_addon:!1,allow_reentry:!1,bounty_amount:"",max_players:100,start_time:"",custom_tournament_type:"",custom_blind_structure:"",custom_break_structure:"",custom_payout_structure:"",custom_seat_draw_method:"",custom_clock_pause_rules:""})},J=e=>{window.confirm("Are you sure you want to start this tournament?")&&U.mutate(e)},K=e=>{var t,s,a,r,l,n,i;f(e);let o={};if(e.structure&&"string"===typeof e.structure)try{o=JSON.parse(e.structure)}catch(ia){o={}}else e.structure&&(o=e.structure);I({name:e.name||"",tournament_type:o.tournament_type||e.tournament_type||"No Limit Hold'em",buy_in:(null===(t=e.buy_in)||void 0===t?void 0:t.toString())||"",entry_fee:(null===(s=e.entry_fee)||void 0===s?void 0:s.toString())||(null===(a=o.entry_fee)||void 0===a?void 0:a.toString())||"",starting_chips:(null===(r=e.starting_chips)||void 0===r?void 0:r.toString())||(null===(l=o.starting_chips)||void 0===l?void 0:l.toString())||"",blind_structure:o.blind_structure||e.blind_structure||"Standard",number_of_levels:o.number_of_levels||e.number_of_levels||15,minutes_per_level:o.minutes_per_level||e.minutes_per_level||15,break_structure:o.break_structure||e.break_structure||"Every 4 levels",break_duration:o.break_duration||e.break_duration||10,late_registration:o.late_registration||e.late_registration||60,payout_structure:o.payout_structure||e.payout_structure||"Top 15%",seat_draw_method:o.seat_draw_method||e.seat_draw_method||"Random",clock_pause_rules:o.clock_pause_rules||e.clock_pause_rules||"Standard (pause on breaks)",allow_rebuys:o.allow_rebuys||e.allow_rebuys||!1,allow_addon:o.allow_addon||e.allow_addon||!1,allow_reentry:o.allow_reentry||e.allow_reentry||!1,bounty_amount:(null===(n=e.bounty_amount)||void 0===n?void 0:n.toString())||(null===(i=o.bounty_amount)||void 0===i?void 0:i.toString())||"",max_players:e.max_players||100,start_time:e.start_time?new Date(e.start_time).toISOString().slice(0,16):"",custom_tournament_type:e.custom_tournament_type||"",custom_blind_structure:e.custom_blind_structure||"",custom_break_structure:e.custom_break_structure||"",custom_payout_structure:e.custom_payout_structure||"",custom_seat_draw_method:e.custom_seat_draw_method||"",custom_clock_pause_rules:e.custom_clock_pause_rules||""}),c(!0)},Q=(e,t,s)=>{const a=[..._];a[e][t]=s,D(a)},G=E||[],Y=(null===M||void 0===M?void 0:M.players)||[],$=(null===B||void 0===B?void 0:B.winners)||[],Z=e=>{switch(e){case"scheduled":return"bg-blue-500/20 text-blue-300 border-blue-500";case"active":return"bg-green-500/20 text-green-300 border-green-500";case"completed":return"bg-gray-500/20 text-gray-300 border-gray-500";default:return"bg-slate-500/20 text-slate-300 border-slate-500"}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Tournament Management"}),(0,sa.jsx)("button",{onClick:()=>o(!0),className:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-400 hover:to-orange-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all",children:"\u2795 Create Tournament"})]}),R?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tournaments..."})]}):0===G.length?(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Tournaments Yet"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Create your first tournament to get started"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:G.map(e=>{var t;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-emerald-600 transition-all",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(Z(e.status)),children:null===(t=e.status)||void 0===t?void 0:t.toUpperCase()})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,sa.jsx)("p",{className:"text-white font-mono",children:e.tournament_id})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Type"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:e.tournament_type})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Buy-in"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",e.buy_in]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Starting Chips"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:e.starting_chips})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Players"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:[e.registered_players||0," / ",e.max_players]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>{b(e),m(!0),v("details")},className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View Details"}),"scheduled"===e.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:()=>K(e),className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>J(e.id),className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Start"})]}),"active"===e.status&&(0,sa.jsx)("button",{onClick:()=>{b(e),h(!0)},className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"End Tournament"}),"completed"===e.status&&(0,sa.jsx)("button",{onClick:()=>{b(e),m(!0),v("details")},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View Winners"}),"scheduled"===e.status&&(0,sa.jsx)("button",{onClick:()=>{return t=e.id,s=e.name,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&H.mutate(t));var t,s},className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Delete"})]})]},e.id)})}),n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New Tournament"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Basic Information"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Monday Night Hold'em",value:T.name,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{name:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Type *"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.tournament_type,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{tournament_type:e.target.value})),children:N.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.tournament_type&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Tournament Type"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom type",value:T.custom_tournament_type,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_tournament_type:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Buy-in (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"1000",value:T.buy_in,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{buy_in:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Entry Fee (\u20b9)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"100",value:T.entry_fee,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{entry_fee:e.target.value}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Starting Chips *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"10000",value:T.starting_chips,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{starting_chips:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time"}),(0,sa.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.start_time,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{start_time:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Max Players"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"100",value:T.max_players,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{max_players:e.target.value}))})]})]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Tournament Rules"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Blind Structure *"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.blind_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{blind_structure:e.target.value})),children:S.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.blind_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Blind Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:T.custom_blind_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_blind_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Number of Levels"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"15",value:T.number_of_levels,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{number_of_levels:parseInt(e.target.value)||15}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Minutes per Level"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"15",value:T.minutes_per_level,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{minutes_per_level:parseInt(e.target.value)||15}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Structure"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.break_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{break_structure:e.target.value})),children:C.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.break_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Break Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:T.custom_break_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_break_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"10",value:T.break_duration,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{break_duration:parseInt(e.target.value)||10}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Late Registration (minutes)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"60",value:T.late_registration,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{late_registration:parseInt(e.target.value)||60}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Payout Structure"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.payout_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{payout_structure:e.target.value})),children:k.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.payout_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Payout Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:T.custom_payout_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_payout_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Seat Draw Method"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.seat_draw_method,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{seat_draw_method:e.target.value})),children:A.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.seat_draw_method&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Seat Draw Method"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom method",value:T.custom_seat_draw_method,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_seat_draw_method:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Clock Pause Rules"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:T.clock_pause_rules,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{clock_pause_rules:e.target.value})),children:P.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.clock_pause_rules&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Clock Pause Rules"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom rules",value:T.custom_clock_pause_rules,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_clock_pause_rules:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Rebuy, Add-on & Re-entry Options"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:T.allow_rebuys,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_rebuys:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Rebuys"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:T.allow_addon,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_addon:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Add-on"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:T.allow_reentry,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_reentry:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Re-entry"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bounty Amount (\u20b9) - Leave blank for regular tournament"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"0",value:T.bounty_amount,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{bounty_amount:e.target.value}))}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"If set, this becomes a knockout/bounty tournament"})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{if(!T.name||!T.buy_in||!T.starting_chips)return void jr.error("Please fill in all required fields");const e={name:T.name,tournament_type:T.tournament_type,buy_in:parseFloat(T.buy_in)||0,entry_fee:T.entry_fee?parseFloat(T.entry_fee):void 0,starting_chips:parseInt(T.starting_chips)||0,blind_structure:T.blind_structure,number_of_levels:parseInt(T.number_of_levels)||15,minutes_per_level:parseInt(T.minutes_per_level)||15,break_structure:T.break_structure,break_duration:parseInt(T.break_duration)||10,late_registration:parseInt(T.late_registration)||60,payout_structure:T.payout_structure,seat_draw_method:T.seat_draw_method,clock_pause_rules:T.clock_pause_rules,allow_rebuys:Boolean(T.allow_rebuys),allow_addon:Boolean(T.allow_addon),allow_reentry:Boolean(T.allow_reentry),bounty_amount:T.bounty_amount?parseFloat(T.bounty_amount):void 0,max_players:parseInt(T.max_players)||100,start_time:T.start_time||void 0,custom_tournament_type:T.custom_tournament_type||void 0,custom_blind_structure:T.custom_blind_structure||void 0,custom_break_structure:T.custom_break_structure||void 0,custom_payout_structure:T.custom_payout_structure||void 0,custom_seat_draw_method:T.custom_seat_draw_method||void 0,custom_clock_pause_rules:T.custom_clock_pause_rules||void 0};q.mutate(e)},disabled:q.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:q.isLoading?"Creating...":"Create Tournament"}),(0,sa.jsx)("button",{onClick:()=>{o(!1),V()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),d&&g&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["Edit Tournament: ",g.name]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Basic Information"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Monday Night Hold'em",value:T.name,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{name:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Type *"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.tournament_type,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{tournament_type:e.target.value})),children:N.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.tournament_type&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Tournament Type"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom type",value:T.custom_tournament_type,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_tournament_type:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Buy-in (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"1000",value:T.buy_in,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{buy_in:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Entry Fee (\u20b9)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"100",value:T.entry_fee,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{entry_fee:e.target.value}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Starting Chips *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"10000",value:T.starting_chips,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{starting_chips:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time"}),(0,sa.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.start_time,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{start_time:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Max Players"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"100",value:T.max_players,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{max_players:e.target.value}))})]})]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Tournament Rules"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Blind Structure *"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.blind_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{blind_structure:e.target.value})),children:S.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.blind_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Blind Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:T.custom_blind_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_blind_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Number of Levels"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"15",value:T.number_of_levels,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{number_of_levels:parseInt(e.target.value)||15}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Minutes per Level"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"15",value:T.minutes_per_level,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{minutes_per_level:parseInt(e.target.value)||15}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Structure"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.break_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{break_structure:e.target.value})),children:C.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.break_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Break Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:T.custom_break_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_break_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"10",value:T.break_duration,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{break_duration:parseInt(e.target.value)||10}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Late Registration (minutes)"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"60",value:T.late_registration,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{late_registration:parseInt(e.target.value)||60}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Payout Structure"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.payout_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{payout_structure:e.target.value})),children:k.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.payout_structure&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Payout Structure"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:T.custom_payout_structure,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_payout_structure:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Seat Draw Method"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.seat_draw_method,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{seat_draw_method:e.target.value})),children:A.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.seat_draw_method&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Seat Draw Method"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom method",value:T.custom_seat_draw_method,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_seat_draw_method:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Clock Pause Rules"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:T.clock_pause_rules,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{clock_pause_rules:e.target.value})),children:P.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.clock_pause_rules&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Clock Pause Rules"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom rules",value:T.custom_clock_pause_rules,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_clock_pause_rules:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Rebuy, Add-on & Re-entry Options"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:T.allow_rebuys,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_rebuys:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Rebuys"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:T.allow_addon,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_addon:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Add-on"})]}),(0,sa.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:T.allow_reentry,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{allow_reentry:e.target.checked}))}),(0,sa.jsx)("span",{children:"Allow Re-entry"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bounty Amount (\u20b9) - Leave blank for regular tournament"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"0",value:T.bounty_amount,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{bounty_amount:e.target.value}))}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"If set, this becomes a knockout/bounty tournament"})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{if(!T.name||!T.buy_in||!T.starting_chips)return void jr.error("Please fill in all required fields");const e={name:T.name,tournament_type:T.tournament_type,buy_in:parseFloat(T.buy_in)||0,entry_fee:T.entry_fee?parseFloat(T.entry_fee):void 0,starting_chips:parseInt(T.starting_chips)||0,blind_structure:T.blind_structure,number_of_levels:parseInt(T.number_of_levels)||15,minutes_per_level:parseInt(T.minutes_per_level)||15,break_structure:T.break_structure,break_duration:parseInt(T.break_duration)||10,late_registration:parseInt(T.late_registration)||60,payout_structure:T.payout_structure,seat_draw_method:T.seat_draw_method,clock_pause_rules:T.clock_pause_rules,allow_rebuys:Boolean(T.allow_rebuys),allow_addon:Boolean(T.allow_addon),allow_reentry:Boolean(T.allow_reentry),bounty_amount:T.bounty_amount?parseFloat(T.bounty_amount):void 0,max_players:parseInt(T.max_players)||100,start_time:T.start_time||void 0,custom_tournament_type:T.custom_tournament_type||void 0,custom_blind_structure:T.custom_blind_structure||void 0,custom_break_structure:T.custom_break_structure||void 0,custom_payout_structure:T.custom_payout_structure||void 0,custom_seat_draw_method:T.custom_seat_draw_method||void 0,custom_clock_pause_rules:T.custom_clock_pause_rules||void 0};W.mutate({tournamentId:g.id,data:e})},disabled:W.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:W.isLoading?"Updating...":"Update Tournament"}),(0,sa.jsx)("button",{onClick:()=>{c(!1),f(null),V()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),u&&p&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-6xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:p.name}),(0,sa.jsx)("button",{onClick:()=>{m(!1),b(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>v("details"),className:"px-4 py-2 font-semibold transition-colors ".concat("details"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Details"}),(0,sa.jsxs)("button",{onClick:()=>v("players"),className:"px-4 py-2 font-semibold transition-colors ".concat("players"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Players (",Y.length,")"]}),"completed"===p.status&&(0,sa.jsxs)("button",{onClick:()=>v("winners"),className:"px-4 py-2 font-semibold transition-colors ".concat("winners"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Winners (",$.length,")"]})]}),"details"===y&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"relative w-full bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,sa.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-emerald-600 via-green-500 to-emerald-500 border-2 border-emerald-400/80 px-6 py-3 rounded-lg text-center shadow-xl",children:[(0,sa.jsx)("div",{className:"text-emerald-200 text-xs font-semibold uppercase tracking-wider",children:"Prize Pool"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",(p.prize_pool||p.buy_in*(Y.length||p.registered_players||0)).toLocaleString()]})]})}),(0,sa.jsx)("div",{className:"relative aspect-[1/1] max-w-md mx-auto mt-16 mb-8",children:(0,sa.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-emerald-600 via-green-500 to-emerald-600 p-3 shadow-2xl",children:(0,sa.jsxs)("div",{className:"absolute inset-3 rounded-full bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:p.max_players||9},(e,t)=>{const s=t+1,a=360/(p.max_players||9)*t-90,r=50+38*Math.cos(a*Math.PI/180),l=50+38*Math.sin(a*Math.PI/180);return(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:{left:"".concat(r,"%"),top:"".concat(l,"%")},children:[(0,sa.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-slate-500 bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg",children:(0,sa.jsx)("span",{className:"text-slate-400 text-xs font-bold",children:s})}),(0,sa.jsx)("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:(0,sa.jsxs)("div",{className:"text-xs text-slate-300 font-medium",children:["Seat ",s]})})]},s)}),(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"text-center",children:(0,sa.jsxs)("div",{className:"w-32 h-32 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:[j?(0,sa.jsx)("img",{src:j,alt:"Club Logo",className:"w-full h-full object-contain rounded-full p-2",onError:e=>{e.target.style.display="none";const t=e.target.nextElementSibling;t&&(t.style.display="flex")}}):null,(0,sa.jsx)("div",{className:"text-4xl font-bold text-white/30 hidden items-center justify-center w-full h-full",children:"\ud83c\udfc6"})]})})})]})})}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Type"}),(0,sa.jsx)("div",{className:"text-white font-semibold text-sm",children:p.tournament_type||"Tournament"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Buy-In"}),(0,sa.jsxs)("div",{className:"text-white font-semibold text-sm",children:["\u20b9",p.buy_in]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Players"}),(0,sa.jsxs)("div",{className:"text-white font-semibold text-sm",children:[Y.length||p.registered_players||0,"/",p.max_players]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Status"}),(0,sa.jsx)("div",{className:"text-white font-semibold text-sm",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("active"===p.status?"bg-green-500/20 text-green-300":"completed"===p.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:p.status})})]})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,sa.jsx)("p",{className:"text-white font-mono",children:(null===(t=p.id)||void 0===t?void 0:t.substring(0,8))||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Starting Chips"}),(0,sa.jsx)("p",{className:"text-white",children:null===(s=p.starting_chips)||void 0===s?void 0:s.toLocaleString()})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Entry Fee"}),(0,sa.jsxs)("p",{className:"text-white",children:["\u20b9",p.entry_fee||0]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Blind Structure"}),(0,sa.jsx)("p",{className:"text-white",children:p.blind_structure})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Levels"}),(0,sa.jsx)("p",{className:"text-white",children:p.number_of_levels})]})]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Minutes per Level"}),(0,sa.jsxs)("p",{className:"text-white",children:[p.minutes_per_level," minutes"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Break Structure"}),(0,sa.jsx)("p",{className:"text-white",children:p.break_structure})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Break Duration"}),(0,sa.jsxs)("p",{className:"text-white",children:[p.break_duration||"N/A"," minutes"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Payout Structure"}),(0,sa.jsx)("p",{className:"text-white",children:p.payout_structure})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Late Registration"}),(0,sa.jsxs)("p",{className:"text-white",children:[p.late_registration," minutes"]})]})]})]}),(0,sa.jsxs)("div",{className:"mt-6 flex gap-4 pt-4 border-t border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>{m(!1),b(null)},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Close"}),"scheduled"===p.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:()=>{m(!1),K(p)},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg",children:"Edit Tournament"}),(0,sa.jsx)("button",{onClick:()=>J(p.id),disabled:U.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:"Start Tournament"})]}),"active"===p.status&&(0,sa.jsx)("button",{onClick:()=>h(!0),className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg",children:"End Tournament"})]})]}),"players"===y&&(0,sa.jsx)("div",{className:"space-y-4",children:F?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading players..."})]}):0===Y.length?(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No players registered yet"})}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Mobile"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Registered At"}),"completed"===p.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize"})]})]})}),(0,sa.jsx)("tbody",{children:Y.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.email}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.mobile}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.registered_at?new Date(e.registered_at).toLocaleString():"-"}),"completed"===p.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.finishing_position||"-"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.prize_amount?"\u20b9".concat(e.prize_amount):"-"})]})]},e.id))})]})})}),"winners"===y&&"completed"===p.status&&(0,sa.jsx)("div",{className:"space-y-4",children:0===$.length?(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,sa.jsx)("tbody",{children:$.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 px-4",children:(0,sa.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.email}),(0,sa.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount]})]},e.id))})]})})})]})}),x&&p&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["End Tournament: ",p.name]}),(0,sa.jsx)("p",{className:"text-gray-300 mb-4",children:"Enter the winners and their prize amounts. Player balances will be automatically updated."}),(0,sa.jsx)("div",{className:"space-y-4 mb-6",children:_.map((e,t)=>(0,sa.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-center",children:[(0,sa.jsx)("div",{className:"col-span-1",children:(0,sa.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,sa.jsx)("div",{className:"col-span-5",children:(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:e.player_id,onChange:e=>Q(t,"player_id",e.target.value),children:[(0,sa.jsx)("option",{value:"",children:"Select Player"}),Y.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.player_id,")"]},e.id))]})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Position",value:e.finishing_position,onChange:e=>Q(t,"finishing_position",parseInt(e.target.value))})}),(0,sa.jsx)("div",{className:"col-span-3",children:(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Prize Amount",value:e.prize_amount,onChange:e=>Q(t,"prize_amount",parseFloat(e.target.value))})}),(0,sa.jsx)("div",{className:"col-span-1",children:(0,sa.jsx)("button",{onClick:()=>(e=>{D(_.filter((t,s)=>s!==e))})(t),className:"w-full bg-red-600 hover:bg-red-500 text-white px-3 py-2 rounded-lg transition-colors",children:"\xd7"})})]},t))}),(0,sa.jsx)("button",{onClick:()=>{D([..._,{player_id:"",finishing_position:_.length+1,prize_amount:""}])},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors mb-6",children:"+ Add Winner"}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{if(0===_.length)return void jr.error("Please add at least one winner");const e=_.every(e=>e.player_id&&e.finishing_position&&e.prize_amount);e?z.mutate({tournamentId:p.id,winners:_}):jr.error("Please fill in all winner details")},disabled:z.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:z.isLoading?"Ending Tournament...":"End Tournament & Update Balances"}),(0,sa.jsx)("button",{onClick:()=>{h(!1),D([])},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}var Yl={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},$l=r.createContext&&r.createContext(Yl),Zl=["attr","size","title"];function Xl(e,t){if(null==e)return{};var s,a,r=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(a=0;a<l.length;a++)s=l[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(r[s]=e[s])}return r}function en(){return en=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},en.apply(this,arguments)}function tn(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function sn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?tn(Object(s),!0).forEach(function(t){an(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):tn(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function an(e,t,s){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function rn(e){return e&&e.map((e,t)=>r.createElement(e.tag,sn({key:t},e.attr),rn(e.child)))}function ln(e){return t=>r.createElement(nn,en({attr:sn({},e.attr)},t),rn(e.child))}function nn(e){var t=t=>{var s,{attr:a,size:l,title:n}=e,i=Xl(e,Zl),o=l||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),r.createElement("svg",en({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,a,i,{className:s,style:sn(sn({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),n&&r.createElement("title",null,n),e.children)};return void 0!==$l?r.createElement($l.Consumer,null,e=>t(e)):t(Yl)}function on(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function dn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function cn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function un(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(e)}function mn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(e)}function xn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function hn(e){return ln({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(e)}function pn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function bn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function gn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function fn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function yn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(e)}function vn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function jn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(e)}function wn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function Nn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(e)}function Sn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Cn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function kn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function An(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function Pn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function Tn(e){return ln({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function In(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(e)}function _n(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function Dn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function En(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}const Rn=Object.create(null);Rn.open="0",Rn.close="1",Rn.ping="2",Rn.pong="3",Rn.message="4",Rn.upgrade="5",Rn.noop="6";const Ln=Object.create(null);Object.keys(Rn).forEach(e=>{Ln[Rn[e]]=e});const On={type:"error",data:"parser error"},Mn="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),Fn="function"===typeof ArrayBuffer,Bn=e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,qn=(e,t,s)=>{let{type:a,data:r}=e;return Mn&&r instanceof Blob?t?s(r):Un(r,s):Fn&&(r instanceof ArrayBuffer||Bn(r))?t?s(r):Un(new Blob([r]),s):s(Rn[a]+(r||""))},Un=(e,t)=>{const s=new FileReader;return s.onload=function(){const e=s.result.split(",")[1];t("b"+(e||""))},s.readAsDataURL(e)};function zn(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Wn;const Hn="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Vn="undefined"===typeof Uint8Array?[]:new Uint8Array(256);for(let nu=0;nu<64;nu++)Vn[Hn.charCodeAt(nu)]=nu;const Jn="function"===typeof ArrayBuffer,Kn=(e,t)=>{if("string"!==typeof e)return{type:"message",data:Gn(e,t)};const s=e.charAt(0);if("b"===s)return{type:"message",data:Qn(e.substring(1),t)};return Ln[s]?e.length>1?{type:Ln[s],data:e.substring(1)}:{type:Ln[s]}:On},Qn=(e,t)=>{if(Jn){const s=(e=>{let t,s,a,r,l,n=.75*e.length,i=e.length,o=0;"="===e[e.length-1]&&(n--,"="===e[e.length-2]&&n--);const d=new ArrayBuffer(n),c=new Uint8Array(d);for(t=0;t<i;t+=4)s=Vn[e.charCodeAt(t)],a=Vn[e.charCodeAt(t+1)],r=Vn[e.charCodeAt(t+2)],l=Vn[e.charCodeAt(t+3)],c[o++]=s<<2|a>>4,c[o++]=(15&a)<<4|r>>2,c[o++]=(3&r)<<6|63&l;return d})(e);return Gn(s,t)}return{base64:!0,data:e}},Gn=(e,t)=>"blob"===t?e instanceof Blob?e:new Blob([e]):e instanceof ArrayBuffer?e:e.buffer,Yn=String.fromCharCode(30);function $n(){return new TransformStream({transform(e,t){!function(e,t){Mn&&e.data instanceof Blob?e.data.arrayBuffer().then(zn).then(t):Fn&&(e.data instanceof ArrayBuffer||Bn(e.data))?t(zn(e.data)):qn(e,!1,e=>{Wn||(Wn=new TextEncoder),t(Wn.encode(e))})}(e,s=>{const a=s.length;let r;if(a<126)r=new Uint8Array(1),new DataView(r.buffer).setUint8(0,a);else if(a<65536){r=new Uint8Array(3);const e=new DataView(r.buffer);e.setUint8(0,126),e.setUint16(1,a)}else{r=new Uint8Array(9);const e=new DataView(r.buffer);e.setUint8(0,127),e.setBigUint64(1,BigInt(a))}e.data&&"string"!==typeof e.data&&(r[0]|=128),t.enqueue(r),t.enqueue(s)})}})}let Zn;function Xn(e){return e.reduce((e,t)=>e+t.length,0)}function ei(e,t){if(e[0].length===t)return e.shift();const s=new Uint8Array(t);let a=0;for(let r=0;r<t;r++)s[r]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),s}function ti(e){if(e)return function(e){for(var t in ti.prototype)e[t]=ti.prototype[t];return e}(e)}ti.prototype.on=ti.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this},ti.prototype.once=function(e,t){function s(){this.off(e,s),t.apply(this,arguments)}return s.fn=t,this.on(e,s),this},ti.prototype.off=ti.prototype.removeListener=ti.prototype.removeAllListeners=ti.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,a=this._callbacks["$"+e];if(!a)return this;if(1==arguments.length)return delete this._callbacks["$"+e],this;for(var r=0;r<a.length;r++)if((s=a[r])===t||s.fn===t){a.splice(r,1);break}return 0===a.length&&delete this._callbacks["$"+e],this},ti.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),s=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(s){a=0;for(var r=(s=s.slice(0)).length;a<r;++a)s[a].apply(this,t)}return this},ti.prototype.emitReserved=ti.prototype.emit,ti.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]},ti.prototype.hasListeners=function(e){return!!this.listeners(e).length};const si="function"===typeof Promise&&"function"===typeof Promise.resolve?e=>Promise.resolve().then(e):(e,t)=>t(e,0),ai="undefined"!==typeof self?self:"undefined"!==typeof window?window:Function("return this")();function ri(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return s.reduce((t,s)=>(e.hasOwnProperty(s)&&(t[s]=e[s]),t),{})}const li=ai.setTimeout,ni=ai.clearTimeout;function ii(e,t){t.useNativeTimers?(e.setTimeoutFn=li.bind(ai),e.clearTimeoutFn=ni.bind(ai)):(e.setTimeoutFn=ai.setTimeout.bind(ai),e.clearTimeoutFn=ai.clearTimeout.bind(ai))}function oi(e){return"string"===typeof e?function(e){let t=0,s=0;for(let a=0,r=e.length;a<r;a++)t=e.charCodeAt(a),t<128?s+=1:t<2048?s+=2:t<55296||t>=57344?s+=3:(a++,s+=4);return s}(e):Math.ceil(1.33*(e.byteLength||e.size))}function di(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}class ci extends Error{constructor(e,t,s){super(e),this.description=t,this.context=s,this.type="TransportError"}}class ui extends ti{constructor(e){super(),this.writable=!1,ii(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,s){return super.emitReserved("error",new ci(e,t,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(e){"open"===this.readyState&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=Kn(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return-1===e.indexOf(":")?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&443!==Number(this.opts.port)||!this.opts.secure&&80!==Number(this.opts.port))?":"+this.opts.port:""}_query(e){const t=function(e){let t="";for(let s in e)e.hasOwnProperty(s)&&(t.length&&(t+="&"),t+=encodeURIComponent(s)+"="+encodeURIComponent(e[s]));return t}(e);return t.length?"?"+t:""}}class mi extends ui{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let e=0;this._polling&&(e++,this.once("pollComplete",function(){--e||t()})),this.writable||(e++,this.once("drain",function(){--e||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){((e,t)=>{const s=e.split(Yn),a=[];for(let r=0;r<s.length;r++){const e=Kn(s[r],t);if(a.push(e),"error"===e.type)break}return a})(e,this.socket.binaryType).forEach(e=>{if("opening"===this.readyState&&"open"===e.type&&this.onOpen(),"close"===e.type)return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(e)}),"closed"!==this.readyState&&(this._polling=!1,this.emitReserved("pollComplete"),"open"===this.readyState&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};"open"===this.readyState?e():this.once("open",e)}write(e){this.writable=!1,((e,t)=>{const s=e.length,a=new Array(s);let r=0;e.forEach((e,l)=>{qn(e,!1,e=>{a[l]=e,++r===s&&t(a.join(Yn))})})})(e,e=>{this.doWrite(e,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=di()),this.supportsBinary||t.sid||(t.b64=1),this.createUri(e,t)}}let xi=!1;try{xi="undefined"!==typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(lu){}const hi=xi;function pi(){}class bi extends mi{constructor(e){if(super(e),"undefined"!==typeof location){const t="https:"===location.protocol;let s=location.port;s||(s=t?"443":"80"),this.xd="undefined"!==typeof location&&e.hostname!==location.hostname||s!==e.port}}doWrite(e,t){const s=this.request({method:"POST",data:e});s.on("success",t),s.on("error",(e,t)=>{this.onError("xhr post error",e,t)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(e,t)=>{this.onError("xhr poll error",e,t)}),this.pollXhr=e}}class gi extends ti{constructor(e,t,s){super(),this.createRequest=e,ii(this,s),this._opts=s,this._method=s.method||"GET",this._uri=t,this._data=void 0!==s.data?s.data:null,this._create()}_create(){var e;const t=ri(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(t);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let e in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(e)&&s.setRequestHeader(e,this._opts.extraHeaders[e])}}catch(ia){}if("POST"===this._method)try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(ia){}try{s.setRequestHeader("Accept","*/*")}catch(ia){}null===(e=this._opts.cookieJar)||void 0===e||e.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var e;3===s.readyState&&(null===(e=this._opts.cookieJar)||void 0===e||e.parseCookies(s.getResponseHeader("set-cookie"))),4===s.readyState&&(200===s.status||1223===s.status?this._onLoad():this.setTimeoutFn(()=>{this._onError("number"===typeof s.status?s.status:0)},0))},s.send(this._data)}catch(ia){return void this.setTimeoutFn(()=>{this._onError(ia)},0)}"undefined"!==typeof document&&(this._index=gi.requestsCount++,gi.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if("undefined"!==typeof this._xhr&&null!==this._xhr){if(this._xhr.onreadystatechange=pi,e)try{this._xhr.abort()}catch(ia){}"undefined"!==typeof document&&delete gi.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;null!==e&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}if(gi.requestsCount=0,gi.requests={},"undefined"!==typeof document)if("function"===typeof attachEvent)attachEvent("onunload",fi);else if("function"===typeof addEventListener){addEventListener("onpagehide"in ai?"pagehide":"unload",fi,!1)}function fi(){for(let e in gi.requests)gi.requests.hasOwnProperty(e)&&gi.requests[e].abort()}const yi=function(){const e=vi({xdomain:!1});return e&&null!==e.responseType}();function vi(e){const t=e.xdomain;try{if("undefined"!==typeof XMLHttpRequest&&(!t||hi))return new XMLHttpRequest}catch(ia){}if(!t)try{return new(ai[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(ia){}}const ji="undefined"!==typeof navigator&&"string"===typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class wi extends ui{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,s=ji?{}:ri(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,s)}catch(lu){return this.emitReserved("error",lu)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;qn(s,this.supportsBinary,e=>{try{this.doWrite(s,e)}catch(ia){}a&&si(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){"undefined"!==typeof this.ws&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=di()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ni=ai.WebSocket||ai.MozWebSocket;const Si={websocket:class extends wi{createSocket(e,t,s){return ji?new Ni(e,t,s):t?new Ni(e,t):new Ni(e)}doWrite(e,t){this.ws.send(t)}},webtransport:class extends ui{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(lu){return this.emitReserved("error",lu)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=function(e,t){Zn||(Zn=new TextDecoder);const s=[];let a=0,r=-1,l=!1;return new TransformStream({transform(n,i){for(s.push(n);;){if(0===a){if(Xn(s)<1)break;const e=ei(s,1);l=128===(128&e[0]),r=127&e[0],a=r<126?3:126===r?1:2}else if(1===a){if(Xn(s)<2)break;const e=ei(s,2);r=new DataView(e.buffer,e.byteOffset,e.length).getUint16(0),a=3}else if(2===a){if(Xn(s)<8)break;const e=ei(s,8),t=new DataView(e.buffer,e.byteOffset,e.length),l=t.getUint32(0);if(l>Math.pow(2,21)-1){i.enqueue(On);break}r=l*Math.pow(2,32)+t.getUint32(4),a=3}else{if(Xn(s)<r)break;const e=ei(s,r);i.enqueue(Kn(l?e:Zn.decode(e),t)),a=0}if(0===r||r>e){i.enqueue(On);break}}}})}(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=e.readable.pipeThrough(t).getReader(),a=$n();a.readable.pipeTo(e.writable),this._writer=a.writable.getWriter();const r=()=>{s.read().then(e=>{let{done:t,value:s}=e;t||(this.onPacket(s),r())}).catch(e=>{})};r();const l={type:"open"};this.query.sid&&(l.data='{"sid":"'.concat(this.query.sid,'"}')),this._writer.write(l).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const s=e[t],a=t===e.length-1;this._writer.write(s).then(()=>{a&&si(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;null===(e=this._transport)||void 0===e||e.close()}},polling:class extends bi{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=yi&&!t}request(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object.assign(e,{xd:this.xd},this.opts),new gi(vi,this.uri(),e)}}},Ci=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ki=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ai(e){if(e.length>8e3)throw"URI too long";const t=e,s=e.indexOf("["),a=e.indexOf("]");-1!=s&&-1!=a&&(e=e.substring(0,s)+e.substring(s,a).replace(/:/g,";")+e.substring(a,e.length));let r=Ci.exec(e||""),l={},n=14;for(;n--;)l[ki[n]]=r[n]||"";return-1!=s&&-1!=a&&(l.source=t,l.host=l.host.substring(1,l.host.length-1).replace(/;/g,":"),l.authority=l.authority.replace("[","").replace("]","").replace(/;/g,":"),l.ipv6uri=!0),l.pathNames=function(e,t){const s=/\/{2,9}/g,a=t.replace(s,"/").split("/");"/"!=t.slice(0,1)&&0!==t.length||a.splice(0,1);"/"==t.slice(-1)&&a.splice(a.length-1,1);return a}(0,l.path),l.queryKey=function(e,t){const s={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(e,t,a){t&&(s[t]=a)}),s}(0,l.query),l}const Pi="function"===typeof addEventListener&&"function"===typeof removeEventListener,Ti=[];Pi&&addEventListener("offline",()=>{Ti.forEach(e=>e())},!1);class Ii extends ti{constructor(e,t){if(super(),this.binaryType="arraybuffer",this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&"object"===typeof e&&(t=e,e=null),e){const s=Ai(e);t.hostname=s.host,t.secure="https"===s.protocol||"wss"===s.protocol,t.port=s.port,s.query&&(t.query=s.query)}else t.host&&(t.hostname=Ai(t.host).host);ii(this,t),this.secure=null!=t.secure?t.secure:"undefined"!==typeof location&&"https:"===location.protocol,t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||("undefined"!==typeof location?location.hostname:"localhost"),this.port=t.port||("undefined"!==typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(e=>{const t=e.prototype.name;this.transports.push(t),this._transportsByName[t]=e}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),"string"===typeof this.opts.query&&(this.opts.query=function(e){let t={},s=e.split("&");for(let a=0,r=s.length;a<r;a++){let e=s[a].split("=");t[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}return t}(this.opts.query)),Pi&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),"localhost"!==this.hostname&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},Ti.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=4,t.transport=e,this.id&&(t.sid=this.id);const s=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](s)}_open(){if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);const e=this.opts.rememberUpgrade&&Ii.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket")?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",e=>this._onClose("transport close",e))}onOpen(){this.readyState="open",Ii.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush()}_onPacket(e){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data)}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),"closed"!==this.readyState&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let e=1;for(let t=0;t<this.writeBuffer.length;t++){const s=this.writeBuffer[t].data;if(s&&(e+=oi(s)),t>0&&e>this._maxPayload)return this.writeBuffer.slice(0,t);e+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,si(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,s){return this._sendPacket("message",e,t,s),this}send(e,t,s){return this._sendPacket("message",e,t,s),this}_sendPacket(e,t,s,a){if("function"===typeof t&&(a=t,t=void 0),"function"===typeof s&&(a=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const r={type:e,data:t,options:s};this.emitReserved("packetCreate",r),this.writeBuffer.push(r),a&&this.once("flush",a),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},s=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():e()}):this.upgrading?s():e()),this}_onError(e){if(Ii.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&"opening"===this.readyState)return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Pi&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const e=Ti.indexOf(this._offlineEventListener);-1!==e&&Ti.splice(e,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}Ii.protocol=4;class _i extends Ii{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),"open"===this.readyState&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),s=!1;Ii.priorWebsocketSuccess=!1;const a=()=>{s||(t.send([{type:"ping",data:"probe"}]),t.once("packet",e=>{if(!s)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;Ii.priorWebsocketSuccess="websocket"===t.name,this.transport.pause(()=>{s||"closed"!==this.readyState&&(d(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const e=new Error("probe error");e.transport=t.name,this.emitReserved("upgradeError",e)}}))};function r(){s||(s=!0,d(),t.close(),t=null)}const l=e=>{const s=new Error("probe error: "+e);s.transport=t.name,r(),this.emitReserved("upgradeError",s)};function n(){l("transport closed")}function i(){l("socket closed")}function o(e){t&&e.name!==t.name&&r()}const d=()=>{t.removeListener("open",a),t.removeListener("error",l),t.removeListener("close",n),this.off("close",i),this.off("upgrading",o)};t.once("open",a),t.once("error",l),t.once("close",n),this.once("close",i),this.once("upgrading",o),-1!==this._upgrades.indexOf("webtransport")&&"webtransport"!==e?this.setTimeoutFn(()=>{s||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let s=0;s<e.length;s++)~this.transports.indexOf(e[s])&&t.push(e[s]);return t}}class Di extends _i{constructor(e){const t="object"===typeof e?e:arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};(!t.transports||t.transports&&"string"===typeof t.transports[0])&&(t.transports=(t.transports||["polling","websocket","webtransport"]).map(e=>Si[e]).filter(e=>!!e)),super(e,t)}}const Ei="function"===typeof ArrayBuffer,Ri=Object.prototype.toString,Li="function"===typeof Blob||"undefined"!==typeof Blob&&"[object BlobConstructor]"===Ri.call(Blob),Oi="function"===typeof File||"undefined"!==typeof File&&"[object FileConstructor]"===Ri.call(File);function Mi(e){return Ei&&(e instanceof ArrayBuffer||(e=>"function"===typeof ArrayBuffer.isView?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer)(e))||Li&&e instanceof Blob||Oi&&e instanceof File}function Fi(e,t){if(!e||"object"!==typeof e)return!1;if(Array.isArray(e)){for(let t=0,s=e.length;t<s;t++)if(Fi(e[t]))return!0;return!1}if(Mi(e))return!0;if(e.toJSON&&"function"===typeof e.toJSON&&1===arguments.length)return Fi(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&Fi(e[s]))return!0;return!1}function Bi(e){const t=[],s=e.data,a=e;return a.data=qi(s,t),a.attachments=t.length,{packet:a,buffers:t}}function qi(e,t){if(!e)return e;if(Mi(e)){const s={_placeholder:!0,num:t.length};return t.push(e),s}if(Array.isArray(e)){const s=new Array(e.length);for(let a=0;a<e.length;a++)s[a]=qi(e[a],t);return s}if("object"===typeof e&&!(e instanceof Date)){const s={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(s[a]=qi(e[a],t));return s}return e}function Ui(e,t){return e.data=zi(e.data,t),delete e.attachments,e}function zi(e,t){if(!e)return e;if(e&&!0===e._placeholder){if("number"===typeof e.num&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}if(Array.isArray(e))for(let s=0;s<e.length;s++)e[s]=zi(e[s],t);else if("object"===typeof e)for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(e[s]=zi(e[s],t));return e}const Wi=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Hi=5;var Vi;!function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"}(Vi||(Vi={}));class Ji{constructor(e){this.replacer=e}encode(e){return e.type!==Vi.EVENT&&e.type!==Vi.ACK||!Fi(e)?[this.encodeAsString(e)]:this.encodeAsBinary({type:e.type===Vi.EVENT?Vi.BINARY_EVENT:Vi.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id})}encodeAsString(e){let t=""+e.type;return e.type!==Vi.BINARY_EVENT&&e.type!==Vi.BINARY_ACK||(t+=e.attachments+"-"),e.nsp&&"/"!==e.nsp&&(t+=e.nsp+","),null!=e.id&&(t+=e.id),null!=e.data&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=Bi(e),s=this.encodeAsString(t.packet),a=t.buffers;return a.unshift(s),a}}class Ki extends ti{constructor(e){super(),this.reviver=e}add(e){let t;if("string"===typeof e){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const s=t.type===Vi.BINARY_EVENT;s||t.type===Vi.BINARY_ACK?(t.type=s?Vi.EVENT:Vi.ACK,this.reconstructor=new Qi(t),0===t.attachments&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else{if(!Mi(e)&&!e.base64)throw new Error("Unknown type: "+e);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t))}}decodeString(e){let t=0;const s={type:Number(e.charAt(0))};if(void 0===Vi[s.type])throw new Error("unknown packet type "+s.type);if(s.type===Vi.BINARY_EVENT||s.type===Vi.BINARY_ACK){const a=t+1;for(;"-"!==e.charAt(++t)&&t!=e.length;);const r=e.substring(a,t);if(r!=Number(r)||"-"!==e.charAt(t))throw new Error("Illegal attachments");s.attachments=Number(r)}if("/"===e.charAt(t+1)){const a=t+1;for(;++t;){if(","===e.charAt(t))break;if(t===e.length)break}s.nsp=e.substring(a,t)}else s.nsp="/";const a=e.charAt(t+1);if(""!==a&&Number(a)==a){const a=t+1;for(;++t;){const s=e.charAt(t);if(null==s||Number(s)!=s){--t;break}if(t===e.length)break}s.id=Number(e.substring(a,t+1))}if(e.charAt(++t)){const a=this.tryParse(e.substr(t));if(!Ki.isPayloadValid(s.type,a))throw new Error("invalid payload");s.data=a}return s}tryParse(e){try{return JSON.parse(e,this.reviver)}catch(ia){return!1}}static isPayloadValid(e,t){switch(e){case Vi.CONNECT:return Yi(t);case Vi.DISCONNECT:return void 0===t;case Vi.CONNECT_ERROR:return"string"===typeof t||Yi(t);case Vi.EVENT:case Vi.BINARY_EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Wi.indexOf(t[0]));case Vi.ACK:case Vi.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Qi{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const e=Ui(this.reconPack,this.buffers);return this.finishedReconstruction(),e}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Gi=Number.isInteger||function(e){return"number"===typeof e&&isFinite(e)&&Math.floor(e)===e};function Yi(e){return"[object Object]"===Object.prototype.toString.call(e)}function $i(e){return"string"===typeof e.nsp&&(void 0===(t=e.id)||Gi(t))&&function(e,t){switch(e){case Vi.CONNECT:return void 0===t||Yi(t);case Vi.DISCONNECT:return void 0===t;case Vi.EVENT:return Array.isArray(t)&&("number"===typeof t[0]||"string"===typeof t[0]&&-1===Wi.indexOf(t[0]));case Vi.ACK:return Array.isArray(t);case Vi.CONNECT_ERROR:return"string"===typeof t||Yi(t);default:return!1}}(e.type,e.data);var t}function Zi(e,t,s){return e.on(t,s),function(){e.off(t,s)}}const Xi=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class eo extends ti{constructor(e,t,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[Zi(e,"open",this.onopen.bind(this)),Zi(e,"packet",this.onpacket.bind(this)),Zi(e,"error",this.onerror.bind(this)),Zi(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.unshift("message"),this.emit.apply(this,t),this}emit(e){var t,s,a;if(Xi.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');for(var r=arguments.length,l=new Array(r>1?r-1:0),n=1;n<r;n++)l[n-1]=arguments[n];if(l.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(l),this;const i={type:Vi.EVENT,data:l,options:{}};if(i.options.compress=!1!==this.flags.compress,"function"===typeof l[l.length-1]){const e=this.ids++,t=l.pop();this._registerAckCallback(e,t),i.id=e}const o=null===(s=null===(t=this.io.engine)||void 0===t?void 0:t.transport)||void 0===s?void 0:s.writable,d=this.connected&&!(null===(a=this.io.engine)||void 0===a?void 0:a._hasPingExpired());return this.flags.volatile&&!o||(d?(this.notifyOutgoingListeners(i),this.packet(i)):this.sendBuffer.push(i)),this.flags={},this}_registerAckCallback(e,t){var s,a=this;const r=null!==(s=this.flags.timeout)&&void 0!==s?s:this._opts.ackTimeout;if(void 0===r)return void(this.acks[e]=t);const l=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let t=0;t<this.sendBuffer.length;t++)this.sendBuffer[t].id===e&&this.sendBuffer.splice(t,1);t.call(this,new Error("operation has timed out"))},r),n=function(){a.io.clearTimeoutFn(l);for(var e=arguments.length,s=new Array(e),r=0;r<e;r++)s[r]=arguments[r];t.apply(a,s)};n.withError=!0,this.acks[e]=n}emitWithAck(e){for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return new Promise((t,a)=>{const r=(e,s)=>e?a(e):t(s);r.withError=!0,s.push(r),this.emit(e,...s)})}_addToQueue(e){var t=this;let s;"function"===typeof e[e.length-1]&&(s=e.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push(function(e){t._queue[0];if(null!==e)a.tryCount>t._opts.retries&&(t._queue.shift(),s&&s(e));else if(t._queue.shift(),s){for(var r=arguments.length,l=new Array(r>1?r-1:0),n=1;n<r;n++)l[n-1]=arguments[n];s(null,...l)}return a.pending=!1,t._drainQueue()}),this._queue.push(a),this._drainQueue()}_drainQueue(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.connected||0===this._queue.length)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){"function"==typeof this.auth?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:Vi.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(t=>String(t.id)===e)){const t=this.acks[e];delete this.acks[e],t.withError&&t.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case Vi.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Vi.EVENT:case Vi.BINARY_EVENT:this.onevent(e);break;case Vi.ACK:case Vi.BINARY_ACK:this.onack(e);break;case Vi.DISCONNECT:this.ondisconnect();break;case Vi.CONNECT_ERROR:this.destroy();const t=new Error(e.data.message);t.data=e.data.data,this.emitReserved("connect_error",t)}}onevent(e){const t=e.data||[];null!=e.id&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const s of t)s.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&"string"===typeof e[e.length-1]&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let s=!1;return function(){if(!s){s=!0;for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];t.packet({type:Vi.ACK,id:e,data:r})}}}onack(e){const t=this.acks[e.id];"function"===typeof t&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Vi.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let s=0;s<t.length;s++)if(e===t[s])return t.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const s of t)s.apply(this,e.data)}}}function to(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}to.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),s=Math.floor(t*this.jitter*e);e=0==(1&Math.floor(10*t))?e-s:e+s}return 0|Math.min(e,this.max)},to.prototype.reset=function(){this.attempts=0},to.prototype.setMin=function(e){this.ms=e},to.prototype.setMax=function(e){this.max=e},to.prototype.setJitter=function(e){this.jitter=e};class so extends ti{constructor(e,t){var s;super(),this.nsps={},this.subs=[],e&&"object"===typeof e&&(t=e,e=void 0),(t=t||{}).path=t.path||"/socket.io",this.opts=t,ii(this,t),this.reconnection(!1!==t.reconnection),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=t.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new to({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==t.timeout?2e4:t.timeout),this._readyState="closed",this.uri=e;const r=t.parser||a;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==t.autoConnect,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return void 0===e?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return void 0===e?this._reconnectionDelay:(this._reconnectionDelay=e,null===(t=this.backoff)||void 0===t||t.setMin(e),this)}randomizationFactor(e){var t;return void 0===e?this._randomizationFactor:(this._randomizationFactor=e,null===(t=this.backoff)||void 0===t||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return void 0===e?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,null===(t=this.backoff)||void 0===t||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new Di(this.uri,this.opts);const t=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=Zi(t,"open",function(){s.onopen(),e&&e()}),r=t=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",t),e?e(t):this.maybeReconnectOnOpen()},l=Zi(t,"error",r);if(!1!==this._timeout){const e=this._timeout,s=this.setTimeoutFn(()=>{a(),r(new Error("timeout")),t.close()},e);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}return this.subs.push(a),this.subs.push(l),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(Zi(e,"ping",this.onping.bind(this)),Zi(e,"data",this.ondata.bind(this)),Zi(e,"error",this.onerror.bind(this)),Zi(e,"close",this.onclose.bind(this)),Zi(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(ia){this.onclose("parse error",ia)}}ondecoded(e){si(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let s=this.nsps[e];return s?this._autoConnect&&!s.active&&s.connect():(s=new eo(this,e,t),this.nsps[e]=s),s}_destroy(e){const t=Object.keys(this.nsps);for(const s of t){if(this.nsps[s].active)return}this._close()}_packet(e){const t=this.encoder.encode(e);for(let s=0;s<t.length;s++)this.engine.write(t[s],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var s;this.cleanup(),null===(s=this.engine)||void 0===s||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),e.skipReconnect||e.open(t=>{t?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",t)):e.onreconnect()}))},t);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const ao={};function ro(e,t){"object"===typeof e&&(t=e,e=void 0);const s=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",s=arguments.length>2?arguments[2]:void 0,a=e;s=s||"undefined"!==typeof location&&location,null==e&&(e=s.protocol+"//"+s.host),"string"===typeof e&&("/"===e.charAt(0)&&(e="/"===e.charAt(1)?s.protocol+e:s.host+e),/^(https?|wss?):\/\//.test(e)||(e="undefined"!==typeof s?s.protocol+"//"+e:"https://"+e),a=Ai(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const r=-1!==a.host.indexOf(":")?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+r+":"+a.port+t,a.href=a.protocol+"://"+r+(s&&s.port===a.port?"":":"+a.port),a}(e,(t=t||{}).path||"/socket.io"),a=s.source,r=s.id,l=s.path,n=ao[r]&&l in ao[r].nsps;let i;return t.forceNew||t["force new connection"]||!1===t.multiplex||n?i=new so(a,t):(ao[r]||(ao[r]=new so(a,t)),i=ao[r]),s.query&&!t.query&&(t.query=s.queryKey),i.socket(s.path,t)}function lo(e){let{clubId:t,hidePlayerChat:s=!1}=e;const[a,l]=(0,r.useState)("staff"),[n,i]=(0,r.useState)(null);return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,sa.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-lg mb-6",children:[(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,sa.jsx)(mn,{className:"text-4xl"}),s?"Staff Chat":"Player & Staff Support Chat"]}),(0,sa.jsx)("p",{className:"text-white/80 mt-2",children:s?"Communicate with staff members in real-time":"Communicate with staff members and respond to player queries in real-time"})]}),!s&&(0,sa.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,sa.jsxs)("button",{onClick:()=>l("staff"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ".concat("staff"===a?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white shadow-lg scale-105":"bg-slate-700 text-white/70 hover:bg-slate-600"),children:[(0,sa.jsx)(Dn,{}),"Staff Chat"]}),(0,sa.jsxs)("button",{onClick:()=>l("player"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ".concat("player"===a?"bg-gradient-to-r from-orange-600 to-pink-600 text-white shadow-lg scale-105":"bg-slate-700 text-white/70 hover:bg-slate-600"),children:[(0,sa.jsx)(mn,{}),"Player Chat"]})]}),"staff"===a&&(0,sa.jsx)(no,{clubId:t,showNotification:(e,t)=>{i({message:e,senderName:t}),setTimeout(()=>i(null),5e3)}}),!s&&"player"===a&&(0,sa.jsx)(io,{clubId:t}),n&&(0,sa.jsx)("div",{className:"fixed top-20 right-6 bg-gradient-to-r from-green-600 to-emerald-600 text-white px-6 py-4 rounded-lg shadow-2xl z-50 animate-slide-in-right max-w-md",children:(0,sa.jsxs)("div",{className:"flex items-start gap-3",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center flex-shrink-0",children:(0,sa.jsx)(mn,{className:"text-xl"})}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"font-semibold mb-1",children:n.senderName}),(0,sa.jsx)("div",{className:"text-sm text-white/90 line-clamp-2",children:n.message})]}),(0,sa.jsx)("button",{onClick:()=>i(null),className:"text-white/60 hover:text-white",children:(0,sa.jsx)(Tn,{})})]})})]})})}function no(e){let{clubId:t,showNotification:s}=e;const[a,l]=(0,r.useState)([]),[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)(1),[p,b]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),[y,v]=(0,r.useState)(!1),j=(0,r.useRef)(null);(0,r.useEffect)(()=>{w();const e=localStorage.getItem("userId");if(t&&e){var a;const r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://poker-crm-backend.onrender.com/api"}.REACT_APP_WEBSOCKET_URL||(null===(a="https://poker-crm-backend.onrender.com/api")?void 0:a.replace("/api",""))||"http://localhost:3333",o=ro("".concat(r,"/realtime"),{auth:{clubId:t,userId:e},transports:["websocket","polling"]});return o.on("connect",()=>{o.emit("subscribe:club",{clubId:t,userId:e}),o.emit("subscribe:staff",{staffId:e,clubId:t})}),o.on("chat:new-message",e=>{l(t=>t.map(t=>t.id===e.sessionId?(0,i.A)((0,i.A)({},t),{},{lastMessageAt:e.message.createdAt,unreadCount:(t.unreadCount||0)+((null===n||void 0===n?void 0:n.id)!==t.id?1:0)}):t))}),o.on("chat:new-message-direct",e=>{n&&n.id===e.sessionId||s&&s(e.message.message,e.message.senderName),w()}),o.on("chat:session-updated",e=>{w()}),j.current=o,()=>{o&&(o.emit("unsubscribe:club",{clubId:t}),o.disconnect())}}},[t,u,p,g,n]);const w=async()=>{try{c(!0);const e=await wr.h2.getStaffChatSessions(t,{page:u,limit:10,search:p,role:g});l(e.sessions),h(e.totalPages)}catch(e){console.error("Error loading staff chat sessions:",e)}finally{c(!1)}};return(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,sa.jsxs)("div",{className:"lg:col-span-1 bg-slate-800 rounded-lg p-4 overflow-hidden flex flex-col",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Conversations"}),(0,sa.jsxs)("button",{onClick:()=>v(!0),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm",children:[(0,sa.jsx)(Sn,{})," New Chat"]})]}),(0,sa.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(kn,{className:"absolute left-3 top-3 text-gray-400"}),(0,sa.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:p,onChange:e=>{b(e.target.value),m(1)},className:"w-full pl-10 pr-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("select",{value:g,onChange:e=>{f(e.target.value),m(1)},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"All Roles"}),(0,sa.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"}),(0,sa.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,sa.jsx)("option",{value:"MANAGER",children:"Manager"}),(0,sa.jsx)("option",{value:"HR",children:"HR"}),(0,sa.jsx)("option",{value:"GRE",children:"GRE"}),(0,sa.jsx)("option",{value:"CASHIER",children:"Cashier"}),(0,sa.jsx)("option",{value:"AFFILIATE",children:"Affiliate"}),(0,sa.jsx)("option",{value:"FNB",children:"FNB"})]})]}),(0,sa.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-0",style:{maxHeight:"calc(100vh - 450px)",scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:d&&0===a.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading chats..."}):0===a.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"No conversations yet"}):a.map(e=>{var t,s,a,r;return(0,sa.jsxs)("div",{onClick:()=>o(e),className:"p-3 rounded-lg cursor-pointer transition-all ".concat((null===n||void 0===n?void 0:n.id)===e.id?"bg-blue-600":"bg-slate-700 hover:bg-slate-600"),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:(null===(t=e.otherStaff)||void 0===t||null===(s=t.name)||void 0===s?void 0:s[0])||"?"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:null===(a=e.otherStaff)||void 0===a?void 0:a.name}),(0,sa.jsx)("div",{className:"text-white/60 text-sm",children:null===(r=e.otherStaff)||void 0===r?void 0:r.role})]})]}),e.unreadCount>0&&(0,sa.jsx)("div",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),e.subject&&(0,sa.jsx)("div",{className:"text-white/70 text-sm mt-1 truncate",children:e.subject})]},e.id)})}),x>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-white text-sm",children:["Page ",u," of ",x]}),(0,sa.jsx)("button",{onClick:()=>m(e=>Math.min(x,e+1)),disabled:u===x,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Next"})]})]}),(0,sa.jsx)("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:n?(0,sa.jsx)(oo,{clubId:t,session:n,onClose:()=>o(null),onDelete:()=>{o(null),w()},onSessionUpdate:e=>{l(t=>t.map(t=>t.id===e.id?e:t)),o(e)}}):(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-8 h-full flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-center text-white/60",children:[(0,sa.jsx)(mn,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,sa.jsx)("p",{className:"text-xl",children:"Select a staff chat to start messaging"})]})})}),y&&(0,sa.jsx)(co,{clubId:t,existingSessions:a,onClose:()=>v(!1),onSuccess:async e=>{v(!1),await w(),setTimeout(()=>{l(t=>{const s=t.find(t=>t.id===(null===e||void 0===e?void 0:e.id));if(s)o(s);else{var a;const t=wr.R2.getCurrentUser(),s=null===t||void 0===t||null===(a=t.email)||void 0===a?void 0:a.toLowerCase();let l=null;if(e.staffInitiator&&e.staffRecipient){var r;l=s===(null===(r=e.staffInitiator.email)||void 0===r?void 0:r.toLowerCase())?e.staffRecipient:e.staffInitiator}o((0,i.A)((0,i.A)({},e),{},{otherStaff:l||e.staffRecipient||e.staffInitiator}))}return t})},200)}})]})}function io(e){let{clubId:t}=e;const[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(1),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)("");(0,r.useEffect)(()=>{g();const e=setInterval(g,5e3);return()=>clearInterval(e)},[t,d,x,p]);const g=async()=>{try{o(!0);const e=await wr.h2.getPlayerChatSessions(t,{page:d,limit:10,search:x,status:p});a(e.sessions),m(e.totalPages)}catch(e){console.error("Error loading player chat sessions:",e)}finally{o(!1)}};return(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,sa.jsxs)("div",{className:"lg:col-span-1 bg-slate-800 rounded-lg p-4 overflow-hidden flex flex-col",children:[(0,sa.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Player Support Tickets"}),(0,sa.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(kn,{className:"absolute left-3 top-3 text-gray-400"}),(0,sa.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:e=>{h(e.target.value),c(1)},className:"w-full pl-10 pr-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("select",{value:p,onChange:e=>{b(e.target.value),c(1)},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"open",children:"Open"}),(0,sa.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,sa.jsx)("option",{value:"resolved",children:"Resolved"}),(0,sa.jsx)("option",{value:"closed",children:"Closed"})]})]}),(0,sa.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-0",style:{maxHeight:"calc(100vh - 450px)",scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:i&&0===s.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading tickets..."}):0===s.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"No support tickets yet"}):s.map(e=>{var t,s,a;return(0,sa.jsxs)("div",{onClick:()=>n(e),className:"p-3 rounded-lg cursor-pointer transition-all ".concat((null===l||void 0===l?void 0:l.id)===e.id?"bg-orange-600":"bg-slate-700 hover:bg-slate-600"),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold",children:(null===(t=e.player)||void 0===t||null===(s=t.name)||void 0===s?void 0:s[0])||"?"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:null===(a=e.player)||void 0===a?void 0:a.name}),(0,sa.jsx)("div",{className:"text-white/60 text-sm flex items-center gap-2",children:(0,sa.jsx)(uo,{status:e.status})})]})]}),e.unreadCount>0&&(0,sa.jsx)("div",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),(0,sa.jsx)("div",{className:"text-white/80 text-sm mt-1 font-medium",children:e.subject}),e.lastMessage&&(0,sa.jsx)("div",{className:"text-white/60 text-xs mt-1 truncate",children:e.lastMessage})]},e.id)})}),u>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-white text-sm",children:["Page ",d," of ",u]}),(0,sa.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:d===u,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Next"})]})]}),(0,sa.jsx)("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:l?(0,sa.jsx)(oo,{clubId:t,session:l,onClose:()=>n(null),isPlayerChat:!0,onStatusChange:e=>(async(e,s)=>{try{await wr.h2.updateChatSession(t,e,{status:s}),g()}catch(a){alert("Failed to update status")}})(l.id,e)}):(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-8 h-full flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-center text-white/60",children:[(0,sa.jsx)(mn,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,sa.jsx)("p",{className:"text-xl",children:"Select a player chat to start messaging"})]})})})]})}function oo(e){let{clubId:t,session:s,onClose:a,isPlayerChat:l,onStatusChange:n,onDelete:i,onSessionUpdate:o}=e;const[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)(!1),y=(0,r.useRef)(null),v=(0,r.useRef)(null),j=async()=>{if(!l&&null!==s&&void 0!==s&&s.id)try{var e;const a=null===(e=(await wr.h2.getStaffChatSessions(t,{page:1,limit:100})).sessions)||void 0===e?void 0:e.find(e=>e.id===s.id);a&&a.otherStaff&&o&&o(a)}catch(a){console.error("Error refreshing session:",a)}};(0,r.useEffect)(()=>{w(),l||!s||s.otherStaff&&s.otherStaff.name||j();const e=setInterval(w,1e4),a=localStorage.getItem("userId");if(t&&a){var r;const l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://poker-crm-backend.onrender.com/api"}.REACT_APP_WEBSOCKET_URL||(null===(r="https://poker-crm-backend.onrender.com/api")?void 0:r.replace("/api",""))||"http://localhost:3333",n=ro("".concat(l,"/realtime"),{auth:{clubId:t,userId:a},transports:["websocket","polling"]});return n.on("connect",()=>{n.emit("subscribe:club",{clubId:t,userId:a}),n.emit("subscribe:staff",{staffId:a,clubId:t})}),n.on("chat:new-message",e=>{e.sessionId===s.id&&c(t=>{const s=t.some(t=>t.id===e.message.id);return s?t:[...t,e.message]})}),n.on("chat:new-message-direct",e=>{e.sessionId===s.id&&c(t=>{const s=t.some(t=>t.id===e.message.id);return s?t:(console.log("New direct message received:",e.message),[...t,e.message])})}),n.on("chat:session-updated",e=>{var t;(null===(t=e.session)||void 0===t?void 0:t.id)===s.id&&j()}),v.current=n,()=>{clearInterval(e),n&&(n.emit("unsubscribe:club",{clubId:t}),n.disconnect())}}return()=>clearInterval(e)},[s.id,t]),(0,r.useEffect)(()=>{S()},[d]);const w=async()=>{try{h(!0);const e=await wr.h2.getSessionMessages(t,s.id);c(e.messages)}catch(e){console.error("Error loading messages:",e)}finally{h(!1)}},N=e=>{const t=new Date(e);return new Date(t.getTime()+198e5).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},S=()=>{var e;null===(e=y.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},C=()=>{var e;if(l)return(null===(e=s.player)||void 0===e?void 0:e.name)||"Player";{var t,a,r,n,i,o;if(null!==(t=s.otherStaff)&&void 0!==t&&t.name)return s.otherStaff.name;const e=wr.R2.getCurrentUser(),l=null===e||void 0===e?void 0:e.id,g=null===e||void 0===e||null===(a=e.email)||void 0===a?void 0:a.toLowerCase();if(s.staffInitiator&&s.staffRecipient){var d,c,u,m;const e=s.staffInitiator.id,t=s.staffRecipient.id;var x,h;if(l===e)return s.staffRecipient.name||(null===(x=s.staffRecipient.email)||void 0===x?void 0:x.split("@")[0])||"Staff Member";if(l===t)return s.staffInitiator.name||(null===(h=s.staffInitiator.email)||void 0===h?void 0:h.split("@")[0])||"Staff Member";const a=null===(d=s.staffInitiator.email)||void 0===d?void 0:d.toLowerCase(),r=null===(c=s.staffRecipient.email)||void 0===c?void 0:c.toLowerCase();var p,b;return g&&a===g?s.staffRecipient.name||(null===(p=s.staffRecipient.email)||void 0===p?void 0:p.split("@")[0])||"Staff Member":g&&r===g?s.staffInitiator.name||(null===(b=s.staffInitiator.email)||void 0===b?void 0:b.split("@")[0])||"Staff Member":s.staffRecipient.name||(null===(u=s.staffRecipient.email)||void 0===u?void 0:u.split("@")[0])||s.staffInitiator.name||(null===(m=s.staffInitiator.email)||void 0===m?void 0:m.split("@")[0])||"Staff Member"}return null!==(r=s.staffRecipient)&&void 0!==r&&r.name?s.staffRecipient.name:null!==(n=s.staffInitiator)&&void 0!==n&&n.name?s.staffInitiator.name:null!==(i=s.staffRecipient)&&void 0!==i&&i.email?s.staffRecipient.email.split("@")[0]:null!==(o=s.staffInitiator)&&void 0!==o&&o.email?s.staffInitiator.email.split("@")[0]:"Staff Member"}};return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg flex flex-col h-full min-h-0 max-h-full overflow-hidden",children:[(0,sa.jsxs)("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between flex-shrink-0",children:[(0,sa.jsx)("div",{children:(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r ".concat(l?"from-orange-500 to-pink-500":"from-blue-500 to-purple-500"," rounded-full flex items-center justify-center text-white font-bold"),children:C()[0]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:C()}),l&&s.subject&&(0,sa.jsx)("div",{className:"text-white/60 text-sm",children:s.subject})]})]})}),(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[l&&(0,sa.jsxs)("select",{value:s.status,onChange:e=>n(e.target.value),className:"px-3 py-1 bg-slate-700 text-white rounded-lg text-sm",children:[(0,sa.jsx)("option",{value:"open",children:"Open"}),(0,sa.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,sa.jsx)("option",{value:"resolved",children:"Resolved"}),(0,sa.jsx)("option",{value:"closed",children:"Closed"})]}),!l&&(0,sa.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this chat? It will only be removed from your side."))try{f(!0),await wr.h2.archiveChatSession(t,s.id),i&&i(),a()}catch(e){alert("Failed to delete chat: "+(e.message||"Unknown error"))}finally{f(!1)}},disabled:g,className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm disabled:opacity-50",title:"Delete chat (only from your side)",children:g?"Deleting...":"Delete"}),(0,sa.jsx)("button",{onClick:a,className:"text-white/60 hover:text-white",children:(0,sa.jsx)(Tn,{className:"text-xl"})})]})]}),(0,sa.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 flex-shrink",style:{scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:[x&&0===d.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading messages..."}):0===d.length?(0,sa.jsx)("div",{className:"text-white/60 text-center py-8",children:"No messages yet. Start the conversation!"}):d.map(e=>{var t;let a=!1;if(l)a="staff"===e.senderType;else{var r,n,i,o,d,c,u;const t=null===(r=wr.R2.getCurrentUser().email)||void 0===r?void 0:r.toLowerCase(),l=null===(n=e.senderStaff)||void 0===n||null===(i=n.email)||void 0===i?void 0:i.toLowerCase();a=t&&(l===t||s.staffInitiator&&(null===(o=e.senderStaff)||void 0===o?void 0:o.id)===s.staffInitiator.id&&(null===(d=s.staffInitiator.email)||void 0===d?void 0:d.toLowerCase())===t||s.staffRecipient&&(null===(c=e.senderStaff)||void 0===c?void 0:c.id)===s.staffRecipient.id&&(null===(u=s.staffRecipient.email)||void 0===u?void 0:u.toLowerCase())===t)}return(0,sa.jsx)("div",{className:"flex ".concat(a?"justify-end":"justify-start"),children:(0,sa.jsxs)("div",{className:"max-w-[70%] ".concat(a?"bg-blue-600":"bg-green-600"," rounded-lg p-3"),children:[(0,sa.jsxs)("div",{className:"text-white/80 text-xs mb-1",children:[e.senderName,l&&"staff"===e.senderType&&(null===(t=e.senderStaff)||void 0===t?void 0:t.role)&&(0,sa.jsxs)("span",{className:"text-white/60 ml-1",children:["(",e.senderStaff.role,")"]})]}),(0,sa.jsx)("div",{className:"text-white",children:e.message}),(0,sa.jsx)("div",{className:"text-white/50 text-xs mt-1",children:N(e.createdAt)})]})},e.id)}),(0,sa.jsx)("div",{ref:y})]}),(0,sa.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),u.trim()&&!p)try{b(!0),await wr.h2.sendMessage(t,s.id,u.trim()),m(""),w()}catch(a){alert("Failed to send message")}finally{b(!1)}},className:"p-4 border-t border-slate-700 flex-shrink-0",children:(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 bg-slate-700 text-white rounded-lg",disabled:p}),(0,sa.jsxs)("button",{type:"submit",disabled:!u.trim()||p,className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 flex items-center gap-2",children:[(0,sa.jsx)(Nn,{}),p?"Sending...":"Send"]})]})})]})}function co(e){let{clubId:t,existingSessions:s=[],onClose:a,onSuccess:l}=e;const[n,o]=(0,r.useState)([]),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1);(0,r.useEffect)(()=>{t&&g()},[t]);const g=async()=>{try{h(!0);const e=await wr.h2.getChatableUsers(t,!0),s=(null===e||void 0===e?void 0:e.users)||e||[],a=Array.isArray(s)?s.filter(e=>"Active"===e.status||!e.status||"active"===e.status):[],r=[],l=new Set;a.forEach(e=>{var t;const s=null===(t=e.email)||void 0===t?void 0:t.toLowerCase();if(s&&!l.has(s)){l.add(s);let t=e.role||e.customRoleName||"Staff";"SUPER_ADMIN"===t?t="Super Admin":"ADMIN"===t?t="Admin":"MANAGER"===t?t="Manager":"HR"===t?t="HR":"GRE"===t?t="GRE":"CASHIER"===t?t="Cashier":"FNB"===t?t="FNB":"STAFF"===t?t="Staff":"DEALER"===t?t="Dealer":"AFFILIATE"===t&&(t="Affiliate"),r.push((0,i.A)((0,i.A)({},e),{},{chatId:e.chatId||e.id,name:e.name||e.displayName||e.email,role:t}))}}),o(r)}catch(e){console.error("Error loading staff members:",e),alert("Failed to load staff members: "+(e.message||"Unknown error")),o([])}finally{h(!1)}};return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Start New Chat"}),(0,sa.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d)try{b(!0);const e=await wr.h2.createStaffChatSession(t,d,u||void 0);l(e.session)}catch(s){alert("Failed to create chat session")}finally{b(!1)}else alert("Please select a staff member")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Select Staff Member *"}),x?(0,sa.jsx)("div",{className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg text-center",children:"Loading staff members..."}):(0,sa.jsxs)("select",{value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",disabled:x||0===n.length,children:[(0,sa.jsx)("option",{value:"",children:0===n.length?"No staff members available":"Choose staff member..."}),n.map(e=>(0,sa.jsxs)("option",{value:e.chatId||e.id,children:[e.name||e.displayName," - ",e.role]},e.chatId||e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Subject (Optional)"}),(0,sa.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"What is this chat about?",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"submit",disabled:p||!d,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:p?"Creating...":"Start Chat"}),(0,sa.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function uo(e){let{status:t}=e;return(0,sa.jsx)("span",{className:"".concat({open:"bg-yellow-600",in_progress:"bg-blue-600",resolved:"bg-green-600",closed:"bg-gray-600"}[t]||"bg-gray-600"," text-white text-xs px-2 py-1 rounded-full"),children:{open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed"}[t]||t})}function mo(e){var t,s;let{clubId:a}=e;const l=ra(),[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""}),[x,h]=(0,r.useState)({startDate:"",endDate:"",tableId:"",page:1,limit:10}),{data:p=[],isLoading:b}=ml({queryKey:["activeTablesForRake",a],queryFn:()=>wr.Od.getActiveTablesForRakeCollection(a),enabled:!!a}),{data:g,isLoading:f}=ml({queryKey:["rakeCollections",a,x],queryFn:()=>wr.Od.getRakeCollections(a,x),enabled:!!a}),{data:y,isLoading:v}=ml({queryKey:["rakeCollectionStats",a,x.startDate,x.endDate],queryFn:()=>wr.Od.getRakeCollectionStats(a,x.startDate||void 0,x.endDate||void 0),enabled:!!a}),j=bl({mutationFn:e=>wr.Od.createRakeCollection(a,e),onSuccess:()=>{jr.success("Rake collection saved successfully!"),c(!1),m({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""}),o(null),l.invalidateQueries(["rakeCollections",a]),l.invalidateQueries(["rakeCollectionStats",a])},onError:e=>{jr.error(e.message||"Failed to save rake collection")}}),w=()=>{m({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""})},N=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})},S=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6 text-white",children:"Collect Rake from Table"}),b?(0,sa.jsx)("div",{className:"text-gray-400",children:"Loading tables..."}):0===p.length?(0,sa.jsx)("div",{className:"text-gray-400",children:"No active tables available"}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:p.map(e=>(0,sa.jsxs)("div",{onClick:()=>(e=>{o(e),m((0,i.A)((0,i.A)({},u),{},{chipDenomination:"\u20b925, \u20b950, \u20b9100, \u20b9500"})),c(!0)})(e),className:"bg-slate-700 hover:bg-slate-600 rounded-lg p-4 cursor-pointer transition-colors border border-slate-600",children:[(0,sa.jsxs)("div",{className:"text-lg font-semibold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:e.tableType}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400 mt-1",children:[e.currentSeats,"/",e.maxSeats," seats"]})]},e.id))}),d&&n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("h3",{className:"text-xl font-bold mb-4 text-white",children:["Collect Rake - Table ",n.tableNumber]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&j.mutate({tableId:n.id,sessionDate:u.sessionDate,chipDenomination:u.chipDenomination,totalRakeAmount:parseFloat(u.totalRakeAmount),notes:u.notes})},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Table ID ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"text",value:"Table ".concat(n.tableNumber),disabled:!0,className:"w-full bg-slate-700 text-gray-300 rounded-lg px-4 py-2 border border-slate-600"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Session Date ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"date",value:u.sessionDate,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{sessionDate:e.target.value})),required:!0,className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Chip Denomination"}),(0,sa.jsx)("input",{type:"text",value:u.chipDenomination,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{chipDenomination:e.target.value})),placeholder:"\u20b925, \u20b950, \u20b9100, \u20b9500",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Total Rake Amount (\u20b9) ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",step:"0.01",min:"0",value:u.totalRakeAmount,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{totalRakeAmount:e.target.value})),required:!0,placeholder:"\u20b90.00",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,sa.jsx)("textarea",{value:u.notes,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{notes:e.target.value})),placeholder:"Additional notes about the rake collection...",rows:"4",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,sa.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:j.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:j.isPending?"Saving...":"Collect Rake"}),(0,sa.jsx)("button",{type:"button",onClick:w,className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-slate-500",children:"Clear Form"}),(0,sa.jsx)("button",{type:"button",onClick:()=>{c(!1),o(null),w()},className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-slate-500",children:"Cancel"})]})]})]})})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Rake Collection History"}),(0,sa.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,sa.jsx)("input",{type:"date",value:x.startDate,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{startDate:e.target.value,page:1})),placeholder:"Start Date",className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm"}),(0,sa.jsx)("input",{type:"date",value:x.endDate,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{endDate:e.target.value,page:1})),placeholder:"End Date",className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm"}),(0,sa.jsxs)("select",{value:x.tableId,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{tableId:e.target.value,page:1})),className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm",children:[(0,sa.jsx)("option",{value:"",children:"All Tables"}),p.map(e=>(0,sa.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]}),(0,sa.jsxs)("button",{onClick:()=>{var e;const t=null===g||void 0===g||null===(e=g.collections)||void 0===e?void 0:e.map(e=>({"Table ID":e.tableNumber,"Session Date":N(e.sessionDate),"Rake Amount":e.totalRakeAmount,"Chip Denomination":e.chipDenomination||"",Notes:e.notes||"","Collected By":e.collectedByName||"","Collected At":S(e.collectedAt)})),s=[Object.keys(t[0]||{}).join(","),...t.map(e=>Object.values(e).map(e=>'"'.concat(e,'"')).join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),r=window.URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download="rake-collections-".concat((new Date).toISOString().split("T")[0],".csv"),l.click()},className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),v?(0,sa.jsx)("div",{className:"text-gray-400 mb-6",children:"Loading stats..."}):y&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:"Total Entries"}),(0,sa.jsx)("div",{className:"text-2xl font-bold text-white mt-1",children:y.totalEntries})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:"Total Collected"}),(0,sa.jsxs)("div",{className:"text-2xl font-bold text-green-400 mt-1",children:["\u20b9",y.totalCollected.toLocaleString("en-IN")]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:"Avg Collection Per Table"}),(0,sa.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:["\u20b9",y.avgPerTable.toLocaleString("en-IN")]})]})]}),f?(0,sa.jsx)("div",{className:"text-gray-400",children:"Loading history..."}):0===(null===g||void 0===g||null===(t=g.collections)||void 0===t?void 0:t.length)?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No rake collections found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400 mb-4",children:["Showing ",(x.page-1)*x.limit+1," to ",Math.min(x.page*x.limit,(null===g||void 0===g?void 0:g.total)||0)," of ",(null===g||void 0===g?void 0:g.total)||0," entries"]}),(0,sa.jsx)("div",{className:"space-y-4",children:null===g||void 0===g||null===(s=g.collections)||void 0===s?void 0:s.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,sa.jsxs)("div",{className:"text-lg font-semibold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Session Date: ",N(e.sessionDate)]})]}),(0,sa.jsxs)("div",{className:"text-xl font-bold text-green-400 mb-2",children:["\u20b9",Number(e.totalRakeAmount).toLocaleString("en-IN")]}),e.notes&&(0,sa.jsxs)("div",{className:"text-sm text-gray-300 mb-2",children:["Notes: ",e.notes]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Chip Denomination: ",e.chipDenomination||"N/A"]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400 mt-1",children:["Collected by: ",e.collectedByName||"N/A"," \u2022 ",S(e.collectedAt)]})]}),(0,sa.jsxs)("div",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm font-semibold flex items-center gap-1",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Collected"]})]})},e.id))}),g&&g.totalPages>1&&(0,sa.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>h((0,i.A)((0,i.A)({},x),{},{page:x.page-1})),disabled:1===x.page,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsxs)("div",{className:"bg-slate-700 text-white px-4 py-2 rounded-lg",children:["Page ",x.page," of ",g.totalPages]}),(0,sa.jsx)("button",{onClick:()=>h((0,i.A)((0,i.A)({},x),{},{page:x.page+1})),disabled:x.page>=g.totalPages,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function xo(e){var t;let{selectedClubId:s}=e;const a=ra(),[l,n]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,g]=(0,r.useState)(null),[f,y]=(0,r.useState)("details"),v=["Points Rummy","Pool Rummy (101 Points)","Pool Rummy (201 Points)","Deals Rummy","Custom"],[j,w]=(0,r.useState)({name:"",rummy_variant:"Points Rummy",custom_variant:"",entry_fee:"",prize_pool:"",number_of_deals:1,points_per_deal:0,drop_points:20,max_points:80,min_players:2,max_players:6,start_time:"",deal_duration:5,break_duration:5,payout_structure:"Winner takes all",allow_reentry:!1,late_registration:60}),[N,S]=(0,r.useState)([]),[C,k]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(s)try{const e=await wr.Od.getClub(s);k((null===e||void 0===e?void 0:e.logoUrl)||null)}catch(e){console.error("Error fetching club logo:",e)}})()},[s]);const{data:A,isLoading:P}=ml({queryKey:["rummy-tournaments",s],queryFn:()=>wr.Re.getTournaments(s),enabled:!!s,select:e=>(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.tournaments)||[]).filter(e=>e&&e.rummy_variant&&null!==e.rummy_variant&&""!==e.rummy_variant)}),{data:T,isLoading:I}=ml({queryKey:["rummy-tournament-details",s,null===h||void 0===h?void 0:h.id],queryFn:()=>wr.Re.getTournamentById(s,h.id),enabled:!!s&&!!h&&c}),{data:_,isLoading:D}=ml({queryKey:["rummy-tournament-players",s,null===h||void 0===h?void 0:h.id],queryFn:async()=>{const e=await wr.Re.getTournamentPlayers(s,h.id);return(null===e||void 0===e?void 0:e.players)||e||[]},enabled:!!s&&!!h&&(c||m)}),{data:E}=ml({queryKey:["rummy-tournament-winners",s,null===h||void 0===h?void 0:h.id],queryFn:async()=>{const e=await wr.Re.getTournamentWinners(s,h.id);return(null===e||void 0===e?void 0:e.winners)||e||[]},enabled:!!s&&!!h&&"completed"===h.status&&c});(0,r.useEffect)(()=>{E&&E.length>0&&"completed"===(null===h||void 0===h?void 0:h.status)&&S(E.map(e=>({player_id:e.player_id||e.id,finishing_position:e.finishing_position,prize_amount:e.prize_amount||0,name:e.name,email:e.email})))},[E,null===h||void 0===h?void 0:h.status]);const R=bl({mutationFn:e=>wr.Re.createTournament(s,{name:e.name,tournament_type:"Rummy - ".concat("Custom"===e.rummy_variant?e.custom_variant:e.rummy_variant),buy_in:parseFloat(e.entry_fee)||0,entry_fee:parseFloat(e.entry_fee)||0,starting_chips:0,blind_structure:"N/A",max_players:parseInt(e.max_players)||6,start_time:e.start_time||null,payout_structure:e.payout_structure||"Winner takes all",allow_reentry:e.allow_reentry||!1,late_registration:parseInt(e.late_registration)||60,break_duration:parseInt(e.break_duration)||5,rummy_variant:"Custom"===e.rummy_variant?e.custom_variant:e.rummy_variant,number_of_deals:parseInt(e.number_of_deals)||null,points_per_deal:parseInt(e.points_per_deal)||null,drop_points:parseInt(e.drop_points)||null,max_points:parseInt(e.max_points)||null,deal_duration:parseInt(e.deal_duration)||null,prize_pool:parseFloat(e.prize_pool)||null,min_players:parseInt(e.min_players)||2}),onSuccess:()=>{jr.success("Rummy tournament created successfully!"),a.invalidateQueries(["rummy-tournaments",s]),n(!1),B()},onError:e=>{jr.error(e.message||"Failed to create rummy tournament")}}),L=bl({mutationFn:e=>{let{tournamentId:t,data:a}=e;return wr.Re.updateTournament(s,t,{name:a.name,tournament_type:"Rummy - ".concat("Custom"===a.rummy_variant?a.custom_variant:a.rummy_variant),buy_in:parseFloat(a.entry_fee)||0,entry_fee:parseFloat(a.entry_fee)||0,max_players:parseInt(a.max_players)||6,start_time:a.start_time||null,payout_structure:a.payout_structure||"Winner takes all",allow_reentry:a.allow_reentry||!1,late_registration:parseInt(a.late_registration)||60,break_duration:parseInt(a.break_duration)||5,rummy_variant:"Custom"===a.rummy_variant?a.custom_variant:a.rummy_variant,number_of_deals:parseInt(a.number_of_deals)||null,points_per_deal:parseInt(a.points_per_deal)||null,drop_points:parseInt(a.drop_points)||null,max_points:parseInt(a.max_points)||null,deal_duration:parseInt(a.deal_duration)||null,prize_pool:parseFloat(a.prize_pool)||null,min_players:parseInt(a.min_players)||2})},onSuccess:()=>{jr.success("Rummy tournament updated successfully!"),a.invalidateQueries(["rummy-tournaments",s]),u(!1),p(null)},onError:e=>{jr.error(e.message||"Failed to update rummy tournament")}}),O=bl({mutationFn:e=>wr.Re.startTournament(s,e),onSuccess:()=>{jr.success("Rummy tournament started!"),a.invalidateQueries(["rummy-tournaments",s])},onError:e=>{jr.error(e.message||"Failed to start tournament")}}),M=bl({mutationFn:e=>wr.Re.endTournament(s,h.id,e),onSuccess:()=>{jr.success("Rummy tournament ended successfully!"),a.invalidateQueries(["rummy-tournaments",s]),a.invalidateQueries(["rummy-tournament-winners",s,h.id]),x(!1),a.invalidateQueries(["rummy-tournament-details",s,h.id]),setTimeout(()=>{a.invalidateQueries(["rummy-tournaments",s])},500)},onError:e=>{jr.error(e.message||"Failed to end tournament")}}),F=bl({mutationFn:e=>wr.Re.deleteTournament(s,e),onSuccess:()=>{jr.success("Rummy tournament deleted successfully!"),a.invalidateQueries(["rummy-tournaments",s])},onError:e=>{jr.error(e.message||"Failed to delete tournament")}}),B=()=>{w({name:"",rummy_variant:"Points Rummy",custom_variant:"",entry_fee:"",prize_pool:"",number_of_deals:1,points_per_deal:0,drop_points:20,max_points:80,min_players:2,max_players:6,start_time:"",deal_duration:5,break_duration:5,payout_structure:"Winner takes all",allow_reentry:!1,late_registration:60})},q=e=>{window.confirm("Are you sure you want to start this rummy tournament?")&&O.mutate(e)},U=e=>{var t,s,a,r,l,n;g(e),w({name:e.name||"",rummy_variant:e.rummy_variant||"Points Rummy",custom_variant:e.custom_variant||"",entry_fee:(null===(t=e.entry_fee)||void 0===t?void 0:t.toString())||(null===(s=e.buy_in)||void 0===s?void 0:s.toString())||"",prize_pool:(null===(a=e.prize_pool)||void 0===a?void 0:a.toString())||"",number_of_deals:e.number_of_deals||1,points_per_deal:(null===(r=e.points_per_deal)||void 0===r?void 0:r.toString())||"0",drop_points:(null===(l=e.drop_points)||void 0===l?void 0:l.toString())||"20",max_points:(null===(n=e.max_points)||void 0===n?void 0:n.toString())||"80",min_players:e.min_players||2,max_players:e.max_players||6,start_time:e.start_time?new Date(e.start_time).toISOString().slice(0,16):"",deal_duration:e.deal_duration||5,break_duration:e.break_duration||5,payout_structure:e.payout_structure||"Winner takes all",allow_reentry:e.allow_reentry||!1,late_registration:e.late_registration||60}),d(!0)},z=(e,t,s)=>{const a=[...N];a[e][t]=s,S(a)},W=Array.isArray(A)?A:(null===A||void 0===A?void 0:A.tournaments)||[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Rummy Tournaments"}),(0,sa.jsx)("button",{onClick:()=>n(!0),className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-medium",children:"+ Create Rummy Tournament"})]}),P?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===W.length?(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 border border-slate-700 text-center",children:[(0,sa.jsx)("p",{className:"text-gray-400 mb-4",children:"No rummy tournaments found"}),(0,sa.jsx)("button",{onClick:()=>n(!0),className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg",children:"Create First Rummy Tournament"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-emerald-500 transition-colors",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"completed"===e.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2 text-sm text-gray-400",children:[(0,sa.jsxs)("p",{children:["Variant: ",e.tournament_type||e.rummy_variant||"N/A"]}),(0,sa.jsxs)("p",{children:["Entry Fee: \u20b9",e.entry_fee||e.buy_in||"0"]}),(0,sa.jsxs)("p",{children:["Max Players: ",e.max_players||"N/A"]}),e.start_time&&(0,sa.jsxs)("p",{children:["Start: ",new Date(e.start_time).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e),u(!0),y("details")},className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm",children:"View Details"}),"scheduled"===e.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),U(e)},className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded text-sm",children:"Edit"}),(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),q(e.id)},className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded text-sm",children:"Start"}),(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("Delete this tournament?")&&F.mutate(e.id)},className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded text-sm",children:"Delete"})]})]})]},e.id))}),l&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>n(!1),children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create Rummy Tournament"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tournament Name *"}),(0,sa.jsx)("input",{type:"text",value:j.name,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"e.g., Weekend Rummy Championship"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,sa.jsx)("select",{value:j.rummy_variant,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:v.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===j.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant Name"}),(0,sa.jsx)("input",{type:"text",value:j.custom_variant,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Enter custom variant name"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",value:j.entry_fee,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"0",min:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prize Pool (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:j.prize_pool,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{prize_pool:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"0",min:"0"})]})]}),(j.rummy_variant.includes("Points")||"Custom"===j.rummy_variant)&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,sa.jsx)("input",{type:"number",value:j.drop_points,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,sa.jsx)("input",{type:"number",value:j.max_points,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Per Deal"}),(0,sa.jsx)("input",{type:"number",value:j.points_per_deal,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{points_per_deal:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),"Deals Rummy"===j.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,sa.jsx)("input",{type:"number",value:j.number_of_deals,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,sa.jsx)("input",{type:"number",value:j.min_players,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players"}),(0,sa.jsx)("input",{type:"number",value:j.max_players,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.deal_duration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.break_duration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{break_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),(0,sa.jsx)("input",{type:"datetime-local",value:j.start_time,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{start_time:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Structure"}),(0,sa.jsxs)("select",{value:j.payout_structure,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{payout_structure:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"Winner takes all",children:"Winner takes all"}),(0,sa.jsx)("option",{value:"Top 2",children:"Top 2"}),(0,sa.jsx)("option",{value:"Top 3",children:"Top 3"}),(0,sa.jsx)("option",{value:"Top 50%",children:"Top 50%"})]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("input",{type:"checkbox",id:"allow_reentry",checked:j.allow_reentry,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{allow_reentry:e.target.checked})),className:"w-4 h-4"}),(0,sa.jsx)("label",{htmlFor:"allow_reentry",className:"text-sm text-gray-300",children:"Allow Re-entry"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Late Registration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.late_registration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{late_registration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{n(!1),B()},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Cancel"}),(0,sa.jsx)("button",{onClick:()=>{j.name&&j.entry_fee?R.mutate(j):jr.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:R.isLoading?"Creating...":"Create Tournament"})]})]})}),o&&b&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>{d(!1),g(null),B()},children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-purple-700",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Edit Rummy Tournament: ",b.name]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tournament Name *"}),(0,sa.jsx)("input",{type:"text",value:j.name,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,sa.jsx)("select",{value:j.rummy_variant,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:v.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===j.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant"}),(0,sa.jsx)("input",{type:"text",value:j.custom_variant,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",value:j.entry_fee,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prize Pool (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:j.prize_pool,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{prize_pool:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,sa.jsx)("input",{type:"number",value:j.min_players,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players"}),(0,sa.jsx)("input",{type:"number",value:j.max_players,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2"})]})]}),"Points Rummy"===j.rummy_variant&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Per Deal"}),(0,sa.jsx)("input",{type:"number",value:j.points_per_deal,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{points_per_deal:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,sa.jsx)("input",{type:"number",value:j.drop_points,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,sa.jsx)("input",{type:"number",value:j.max_points,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]})]}),"Deals Rummy"===j.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,sa.jsx)("input",{type:"number",value:j.number_of_deals,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.deal_duration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.break_duration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{break_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),(0,sa.jsx)("input",{type:"datetime-local",value:j.start_time,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{start_time:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Structure"}),(0,sa.jsxs)("select",{value:j.payout_structure,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{payout_structure:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"Winner takes all",children:"Winner takes all"}),(0,sa.jsx)("option",{value:"Top 2",children:"Top 2"}),(0,sa.jsx)("option",{value:"Top 3",children:"Top 3"}),(0,sa.jsx)("option",{value:"Top 50%",children:"Top 50%"})]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("input",{type:"checkbox",id:"edit_allow_reentry",checked:j.allow_reentry,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{allow_reentry:e.target.checked})),className:"w-4 h-4"}),(0,sa.jsx)("label",{htmlFor:"edit_allow_reentry",className:"text-sm text-gray-300",children:"Allow Re-entry"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Late Registration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:j.late_registration,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{late_registration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{d(!1),g(null),B()},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Cancel"}),(0,sa.jsx)("button",{onClick:()=>{if(!j.name||!j.entry_fee)return void jr.error("Please fill in all required fields");const e={name:j.name,tournament_type:"Rummy - ".concat("Custom"===j.rummy_variant?j.custom_variant:j.rummy_variant),buy_in:parseFloat(j.entry_fee)||0,entry_fee:parseFloat(j.entry_fee)||0,max_players:parseInt(j.max_players)||6,min_players:parseInt(j.min_players)||2,start_time:j.start_time||void 0,prize_pool:j.prize_pool?parseFloat(j.prize_pool):void 0,payout_structure:j.payout_structure||"Winner takes all",allow_reentry:Boolean(j.allow_reentry),late_registration:parseInt(j.late_registration)||60,rummy_variant:j.rummy_variant,custom_variant:"Custom"===j.rummy_variant?j.custom_variant:void 0,number_of_deals:parseInt(j.number_of_deals)||1,points_per_deal:parseFloat(j.points_per_deal)||0,drop_points:parseFloat(j.drop_points)||20,max_points:parseFloat(j.max_points)||80,deal_duration:parseInt(j.deal_duration)||5,break_duration:parseInt(j.break_duration)||5};L.mutate({tournamentId:b.id,data:e})},disabled:L.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:L.isLoading?"Updating...":"Update Tournament"})]})]})}),c&&h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-6xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:h.name}),(0,sa.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>y("details"),className:"px-4 py-2 font-semibold transition-colors ".concat("details"===f?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Details"}),"completed"!==h.status&&(0,sa.jsxs)("button",{onClick:()=>y("players"),className:"px-4 py-2 font-semibold transition-colors ".concat("players"===f?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Players (",(null===_||void 0===_?void 0:_.length)||0,")"]})]}),"details"===f&&"completed"===h.status?(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Tournament Winners"}),0===N.length?(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,sa.jsx)("tbody",{children:N.map((e,t)=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 px-4",children:(0,sa.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.name||"N/A"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,sa.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount?parseFloat(e.prize_amount).toLocaleString():"0"]})]},t))})]})})]}):"details"===f&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"relative w-full bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,sa.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-yellow-600 via-amber-500 to-orange-500 border-2 border-yellow-400/80 px-6 py-3 rounded-lg text-center shadow-xl",children:[(0,sa.jsx)("div",{className:"text-yellow-200 text-xs font-semibold uppercase tracking-wider",children:"Prize Pool"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",h.prize_pool?parseFloat(h.prize_pool).toLocaleString():"0"]})]})}),(0,sa.jsx)("div",{className:"relative aspect-[1/1] max-w-md mx-auto mt-16 mb-8",children:(0,sa.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-amber-600 via-yellow-500 to-amber-600 p-3 shadow-2xl",children:(0,sa.jsxs)("div",{className:"absolute inset-3 rounded-full bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:h.max_players||6},(e,t)=>{const s=t+1,a=360/(h.max_players||6)*t-90,r=50+38*Math.cos(a*Math.PI/180),l=50+38*Math.sin(a*Math.PI/180);return(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:{left:"".concat(r,"%"),top:"".concat(l,"%")},children:[(0,sa.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-slate-500 bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg",children:(0,sa.jsx)("span",{className:"text-slate-400 text-xs font-bold",children:s})}),(0,sa.jsx)("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:(0,sa.jsxs)("div",{className:"text-xs text-slate-300 font-medium",children:["Seat ",s]})})]},s)}),(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"text-center",children:(0,sa.jsxs)("div",{className:"w-32 h-32 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:[C?(0,sa.jsx)("img",{src:C,alt:"Club Logo",className:"w-full h-full object-contain rounded-full p-2",onError:e=>{e.target.style.display="none";const t=e.target.nextElementSibling;t&&(t.style.display="flex")}}):null,(0,sa.jsx)("div",{className:"text-4xl font-bold text-white/30 hidden items-center justify-center w-full h-full",children:"\ud83c\udfb4"})]})})})]})})}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Variant"}),(0,sa.jsx)("div",{className:"text-white font-semibold text-sm",children:h.rummy_variant||"N/A"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Entry Fee"}),(0,sa.jsxs)("div",{className:"text-white font-semibold text-sm",children:["\u20b9",h.entry_fee||h.buy_in||"0"]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Players"}),(0,sa.jsxs)("div",{className:"text-white font-semibold text-sm",children:[(null===_||void 0===_?void 0:_.length)||0,"/",h.max_players||"N/A"]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Status"}),(0,sa.jsx)("div",{className:"text-white font-semibold text-sm",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("active"===h.status?"bg-green-500/20 text-green-300":"completed"===h.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:h.status})})]})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,sa.jsx)("p",{className:"text-white font-mono",children:(null===(t=h.id)||void 0===t?void 0:t.substring(0,8))||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Start Time"}),(0,sa.jsx)("p",{className:"text-white",children:h.start_time?new Date(h.start_time).toLocaleString():"Not set"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Min Players"}),(0,sa.jsx)("p",{className:"text-white",children:h.min_players||"2"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Drop Points"}),(0,sa.jsx)("p",{className:"text-white",children:h.drop_points||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Max Points"}),(0,sa.jsx)("p",{className:"text-white",children:h.max_points||"N/A"})]})]}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Deals"}),(0,sa.jsx)("p",{className:"text-white",children:h.number_of_deals||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Points Per Deal"}),(0,sa.jsx)("p",{className:"text-white",children:h.points_per_deal||"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Deal Duration"}),(0,sa.jsx)("p",{className:"text-white",children:h.deal_duration?"".concat(h.deal_duration," minutes"):"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Payout Structure"}),(0,sa.jsx)("p",{className:"text-white",children:h.payout_structure||"Winner takes all"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Allow Re-entry"}),(0,sa.jsx)("p",{className:"text-white",children:h.allow_reentry?"Yes":"No"})]})]})]})]}),"players"===f&&(0,sa.jsx)("div",{className:"space-y-4",children:D?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading players..."})]}):_&&0!==_.length?(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Mobile"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Registered At"}),"completed"===h.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize"})]})]})}),(0,sa.jsx)("tbody",{children:_.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id||e.id}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.name||"N/A"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.mobile||"N/A"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.registered_at?new Date(e.registered_at).toLocaleString():"-"}),"completed"===h.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.finishing_position||"-"}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.prize_amount?"\u20b9".concat(e.prize_amount):"-"})]})]},e.id||e.player_id))})]})}):(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No players registered yet"})})}),"winners"===f&&"completed"===h.status&&(0,sa.jsx)("div",{className:"space-y-4",children:0===N.length?(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,sa.jsx)("tbody",{children:N.map((e,t)=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 px-4",children:(0,sa.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,sa.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,sa.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount]})]},t))})]})})}),(0,sa.jsxs)("div",{className:"mt-6 flex gap-4 pt-4 border-t border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Close"}),"scheduled"===h.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!1),U(h)},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg",children:"Edit Tournament"}),(0,sa.jsx)("button",{onClick:e=>{e.stopPropagation(),q(h.id)},className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg",children:"Start Tournament"})]}),"active"===h.status&&(0,sa.jsx)("button",{onClick:()=>{0===N.length&&S([{player_id:"",finishing_position:1,prize_amount:""}]),x(!0)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg",children:"End Tournament"})]})]})}),m&&h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["End Tournament: ",h.name]}),(0,sa.jsx)("p",{className:"text-gray-300 mb-4",children:"Select players and assign prize amounts. Player balances will be automatically updated."}),(0,sa.jsx)("div",{className:"space-y-4 mb-6",children:N.map((e,t)=>(0,sa.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-center bg-slate-700/50 p-4 rounded-lg",children:[(0,sa.jsx)("div",{className:"col-span-1",children:(0,sa.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,sa.jsx)("div",{className:"col-span-5",children:(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:e.player_id,onChange:e=>z(t,"player_id",e.target.value),children:[(0,sa.jsx)("option",{value:"",children:"Select Player"}),null===_||void 0===_?void 0:_.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.player_id,")"]},e.id))]})}),(0,sa.jsx)("div",{className:"col-span-2",children:(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Position",value:e.finishing_position,onChange:e=>z(t,"finishing_position",parseInt(e.target.value)||1),min:"1"})}),(0,sa.jsx)("div",{className:"col-span-3",children:(0,sa.jsx)("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Prize Amount (\u20b9)",value:e.prize_amount,onChange:e=>z(t,"prize_amount",parseFloat(e.target.value)||0),min:"0"})}),(0,sa.jsx)("div",{className:"col-span-1",children:(0,sa.jsx)("button",{onClick:()=>(e=>{S(N.filter((t,s)=>s!==e))})(t),className:"w-full bg-red-600 hover:bg-red-500 text-white px-3 py-2 rounded-lg transition-colors",children:"\xd7"})})]},t))}),(0,sa.jsx)("button",{onClick:()=>{S([...N,{player_id:"",finishing_position:N.length+1,prize_amount:""}])},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors mb-6",children:"+ Add Winner"}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{if(0===N.length)return void jr.error("Please add at least one winner");const e=N.every(e=>e.player_id&&e.prize_amount&&e.prize_amount>0);e?M.mutate({winners:N}):jr.error("Please fill in all winner details (player and prize amount)")},disabled:M.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:M.isLoading?"Ending Tournament...":"End Tournament & Update Balances"}),(0,sa.jsx)("button",{onClick:()=>{x(!1),S([])},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function ho(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("live-tables"),{data:l,isLoading:n}=(ra(),ml({queryKey:["rummy-tables",t],queryFn:()=>wr.rj.getTables(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]})),{data:i,isLoading:o}=ml({queryKey:["waitlist",t],queryFn:()=>wr.IX.getWaitlist(t),enabled:!!t}),d=l||[],c=i||[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tables & Waitlist"}),!t&&(0,sa.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100 flex items-center gap-3",children:[(0,sa.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.3 2.647-1.3 3.412 0l7 12a1.5 1.5 0 01-1.302 2.25H2.847a1.5 1.5 0 01-1.302-2.25l7-12zM9 13a1 1 0 112 0v2a1 1 0 11-2 0v-2zm0-6a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z",clipRule:"evenodd"})}),(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club from the sidebar dropdown to manage rummy tables."})]}),(0,sa.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"live-tables",label:"Live Rummy Tables"},{id:"table-management",label:"Table Management"},{id:"table-buy-in",label:"Table Buy-In"},{id:"table-buy-out",label:"Table Buy-Out"}].map(e=>(0,sa.jsx)("button",{onClick:()=>a(e.id),className:"px-6 py-3 font-semibold transition-all ".concat(s===e.id?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,sa.jsxs)("div",{className:"mt-6",children:["live-tables"===s&&(0,sa.jsx)(po,{selectedClubId:t,tables:d,tablesLoading:n}),"table-management"===s&&(0,sa.jsx)(fo,{selectedClubId:t,tables:d,tablesLoading:n}),"table-buy-in"===s&&(0,sa.jsx)(yo,{selectedClubId:t,tables:d,waitlist:c,waitlistLoading:o}),"table-buy-out"===s&&(0,sa.jsx)(vo,{selectedClubId:t,tables:d})]})]})}function po(e){let{selectedClubId:t,tables:s,tablesLoading:a}=e;const[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)({minPlayTime:30,callTime:5,cashOutWindow:10,sessionTimeout:120}),[x,h]=(0,r.useState)("Active"),p=s.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status),b=e=>{if(!e.notes)return null;const t=e.notes.match(/Dealer:.*?\(([^)]+)\)/i);return t?t[1]:null},g=e=>{var t,s,a,r,l,n,i,d;c(e),o(!0);const u=e.notes?e.notes.split("|").map(e=>e.trim()):[],x=(null===(t=u[3])||void 0===t||null===(s=t.match(/\d+/))||void 0===s?void 0:s[0])||"30",p=(null===(a=u[4])||void 0===a||null===(r=a.match(/\d+/))||void 0===r?void 0:r[0])||"5",b=(null===(l=u[5])||void 0===l||null===(n=l.match(/\d+/))||void 0===n?void 0:n[0])||"10",g=(null===(i=u[6])||void 0===i||null===(d=i.match(/\d+/))||void 0===d?void 0:d[0])||"120";m({minPlayTime:parseInt(x),callTime:parseInt(p),cashOutWindow:parseInt(b),sessionTimeout:parseInt(g)}),h("OCCUPIED"===e.status?"Active":"Paused")};return(0,sa.jsxs)("div",{className:"space-y-6",children:[i&&d&&(0,sa.jsx)(bo,{table:d,tables:p,sessionParams:u,setSessionParams:m,sessionStatus:x,setSessionStatus:h,clubId:t,onClose:()=>{o(!1),c(null)},onSelectTable:e=>{c(e),g(e)}}),!i&&(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Live Rummy Tables - Hologram View"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Manage live rummy tables, seat players, and handle buy-ins using table hologram."})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",p.length]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",p.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),a?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading rummy tables..."})]}):0===p.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No active rummy tables"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Create and activate tables in Table Management"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-emerald-500 transition-all cursor-pointer",onClick:()=>n(e),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.rummyVariant||"RUMMY"})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-emerald-600/20 text-emerald-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,sa.jsx)("span",{className:"text-emerald-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]}),b(e)&&(0,sa.jsxs)("div",{className:"flex justify-between text-sm pt-1 border-t border-slate-600",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"\ud83d\udc64 Dealer:"}),(0,sa.jsx)("span",{className:"text-purple-400 font-semibold",children:b(e)})]})]}),(0,sa.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"w-full mt-4 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83c\udfaf"}),(0,sa.jsx)("span",{children:"View Table Hologram"})]}),(0,sa.jsxs)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"w-full mt-2 bg-gradient-to-r from-purple-600 to-pink-700 hover:from-purple-500 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\u2699\ufe0f"}),(0,sa.jsx)("span",{children:"Edit Session Control"})]})]},e.id))})]}),l&&(0,sa.jsx)(go,{table:l,onClose:()=>n(null),clubId:t})]})}function bo(e){let{table:t,tables:s,sessionParams:a,setSessionParams:l,sessionStatus:n,setSessionStatus:o,clubId:d,onClose:c,onSelectTable:u}=e;const m=ra(),[x,h]=(0,r.useState)(d);(0,r.useEffect)(()=>{d&&h(d)},[d]);const p=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.pauseSession(x,t.id)},onSuccess:()=>{o("Paused"),jr.success("Session paused successfully"),m.invalidateQueries(["rummy-tables",x])},onError:e=>{jr.error(e.message||"Failed to pause session")}}),b=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.resumeSession(x,t.id)},onSuccess:()=>{o("Active"),jr.success("Session resumed successfully"),m.invalidateQueries(["rummy-tables",x])},onError:e=>{jr.error(e.message||"Failed to resume session")}}),g=bl({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await wr.rj.endSession(x,t.id)},onSuccess:()=>{jr.success("Session ended successfully"),m.invalidateQueries(["rummy-tables",x]),c()},onError:e=>{jr.error(e.message||"Failed to end session")}}),f=bl({mutationFn:async e=>{if(!x)throw new Error("Club ID not found");return await wr.rj.updateSessionParams(x,t.id,e)},onSuccess:e=>{jr.success("Session parameters updated successfully"),m.invalidateQueries(["rummy-tables",x]),e.sessionParams&&l(e.sessionParams)},onError:e=>{jr.error(e.message||"Failed to update session parameters")}}),y=(e,t)=>{const s={[e]:parseInt(t)};f.mutate(s)},v=e=>{var t,s;return e.rummyVariant||(null===(t=e.notes)||void 0===t||null===(s=t.split("|")[1])||void 0===s?void 0:s.trim())||"RUMMY"};return(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-emerald-900/50 via-teal-900/50 to-green-900/50 rounded-2xl p-8 border-2 border-emerald-500/30 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Rummy Table Session Control"}),(0,sa.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Table Sessions"}),(0,sa.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,sa.jsx)("div",{onClick:()=>u(e),className:"p-4 rounded-lg cursor-pointer transition-all ".concat(e.id===t.id?"bg-emerald-600/30 border-2 border-emerald-500":"bg-slate-700/50 border border-slate-600 hover:bg-slate-700"),children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"font-semibold text-white",children:["Table ",e.tableNumber," - ",v(e)]}),(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:e.rummyVariant||"Rummy"})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"OCCUPIED"===e.status?"Active":"Paused"})]})},e.id))}),(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-emerald-600/20 border border-emerald-500/30 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-emerald-300 mb-2",children:["Selected: Table ",t.tableNumber," - ",v(t)]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Variant:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:t.rummyVariant||"Rummy"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:(e=>{var t;const s=e.notes?e.notes.split("|").map(e=>e.trim()):[];return(null===(t=s[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"\u20b9".concat(e.minBuyIn||0,"/\u20b9").concat(e.maxBuyIn||0)})(t)})]})]}),(0,sa.jsxs)("div",{className:"text-sm mt-2",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Players:"}),(0,sa.jsxs)("span",{className:"text-white ml-2",children:[t.currentSeats||0,"/",t.maxSeats]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Session Actions"}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:"Current Status"}),(0,sa.jsx)("div",{className:"text-4xl font-bold ".concat("Active"===n?"text-green-400":"text-yellow-400"),children:n})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("button",{onClick:()=>{"Active"===n?p.mutate():b.mutate()},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"Active"===n?"\u23f8":"\u25b6"}),(0,sa.jsx)("span",{children:"Active"===n?"Pause Session":"Resume Session"})]}),(0,sa.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to end this session? This action cannot be undone.")&&g.mutate()},className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\u2b1b"}),(0,sa.jsx)("span",{children:"End Session"})]})]}),(0,sa.jsx)("div",{className:"mt-6 p-4 bg-slate-700/50 rounded-lg",children:(0,sa.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"Session parameters can be modified on the right panel."})})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Timing & Parameters"}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"MIN PLAY TIME"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.minPlayTime,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{minPlayTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,sa.jsx)("button",{onClick:()=>y("minPlayTime",a.minPlayTime),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.minPlayTime," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CALL TIME"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.callTime,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{callTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,sa.jsx)("button",{onClick:()=>y("callTime",a.callTime),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.callTime," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CASH-OUT WINDOW"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.cashOutWindow,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{cashOutWindow:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,sa.jsx)("button",{onClick:()=>y("cashOutWindow",a.cashOutWindow),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.cashOutWindow," mins"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"SESSION TIMEOUT"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"number",value:a.sessionTimeout,onChange:e=>l((0,i.A)((0,i.A)({},a),{},{sessionTimeout:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,sa.jsx)("button",{onClick:()=>y("sessionTimeout",a.sessionTimeout),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",a.sessionTimeout," mins"]})]})]})]})]})]})}function go(e){var t,s,a,l;let{table:n,onClose:i,clubId:o}=e;const d=ra(),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)("00:00:00"),h=(()=>{if(!n.notes)return null;const e=n.notes.match(/Dealer:\s*([a-f0-9-]{36})\s*\(([^)]+)\)/i);return e?{id:e[1],name:e[2]}:null})(),p=bl({mutationFn:async()=>{if(!n||!h)return;const e=(n.notes||"").replace(/\s*\|\s*Dealer:.*$/i,"").trim();return wr.rj.updateTable(o,n.id,{notes:e})},onSuccess:()=>{jr.success("Dealer unassigned successfully"),d.invalidateQueries(["rummy-tables",o]),d.invalidateQueries(["all-tables",o]),i()},onError:e=>{jr.error(e.message||"Failed to unassign dealer")}});(0,r.useEffect)(()=>{o&&(async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("userId"),s=localStorage.getItem("tenantId"),a=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://poker-crm-backend.onrender.com/api"}.REACT_APP_API_URL||"http://localhost:3333/api","/clubs/").concat(o),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"x-user-id":t||"","x-tenant-id":s||"","x-club-id":o}});if(a.ok){const e=await a.json();u(e)}}catch(e){console.error("Error fetching club data:",e)}})()},[o]),(0,r.useEffect)(()=>{var e,t;if(!n)return void x("00:00:00");if("AVAILABLE"===n.status||"PAUSED"===n.status){var s;const e=null===(s=n.notes)||void 0===s?void 0:s.match(/Paused Elapsed: (\d+)/);if(e){const t=parseInt(e[1],10);if(!isNaN(t)&&t>=0){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;x("".concat(String(e).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0")))}else x("00:00:00")}else x("00:00:00");return}if("OCCUPIED"!==n.status)return void x("00:00:00");const a=null===(e=n.notes)||void 0===e?void 0:e.match(/Session Started: ([^|]+)/),r=null===(t=n.notes)||void 0===t?void 0:t.match(/Paused Elapsed: (\d+)/);if(!a||!a[1])return void x("00:00:00");const l=a[1].trim(),i=new Date(l);if(isNaN(i.getTime()))return void x("00:00:00");const o=r?parseInt(r[1],10):0,d=()=>{const e=(new Date).getTime()-i.getTime();if(isNaN(e))return void x("00:00:00");const t=Math.floor(e/1e3)+o;if(isNaN(t)||t<0)return void x("00:00:00");const s=Math.floor(t/3600),a=Math.floor(t%3600/60),r=t%60;x("".concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(r).padStart(2,"0")))};d();const c=setInterval(d,1e3);return()=>clearInterval(c)},[n]);const b=Array.from({length:n.maxSeats},(e,t)=>t+1),g=[],f=(null===c||void 0===c?void 0:c.logoUrl)||null,y=n.rummyVariant||(null===(t=n.notes)||void 0===t||null===(s=t.split("|")[1])||void 0===s?void 0:s.trim())||"RUMMY",v="\u20b9".concat(n.minBuyIn||0,"/\u20b9").concat(n.maxBuyIn||0),j=null===(a=n.notes)||void 0===a?void 0:a.match(/Table Value: \u20b9?([\d,]+)/),w=j?parseInt(j[1].replace(/,/g,"")):(n.currentSeats||0)*((n.minBuyIn+n.maxBuyIn)/2||25e3);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h2",{className:"text-3xl font-bold text-white",children:["Table ",n.tableNumber," - ",y]}),(0,sa.jsxs)("p",{className:"text-gray-400",children:["Stakes: ",v]})]}),(0,sa.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsx)("div",{className:"mb-6 flex justify-center",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-3 rounded-2xl shadow-xl border-2 border-emerald-400",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-100 text-center mb-1",children:"TABLE VALUE"}),(0,sa.jsxs)("div",{className:"text-3xl font-bold text-white text-center",children:["\u20b9",w.toLocaleString()]})]})}),(0,sa.jsxs)("div",{className:"relative w-full aspect-[4/3] bg-gradient-to-br from-green-800 to-green-900 rounded-[50%] border-8 border-emerald-600 shadow-2xl flex items-center justify-center",children:[(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"bg-white rounded-full p-2 shadow-lg flex items-center justify-center w-24 h-24",children:f?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("img",{src:f,alt:"Club Logo",className:"w-20 h-20 object-contain",onError:e=>{console.error("Failed to load club logo:",f),e.target.style.display="none";const t=e.target.parentElement.querySelector(".logo-fallback");t&&(t.style.display="flex")}}),(0,sa.jsx)("div",{className:"logo-fallback text-3xl font-bold text-gray-800 hidden items-center justify-center w-full h-full",children:"\ud83c\udccf"})]}):(0,sa.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:"\ud83c\udccf"})})}),(0,sa.jsxs)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center",children:[h&&(0,sa.jsxs)("div",{className:"mb-2 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-2",children:[(0,sa.jsxs)("span",{children:["\ud83d\udc64 ",h.name]}),(0,sa.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm('Are you sure you want to unassign dealer "'.concat(h.name,'" from this table?'))&&p.mutate()},disabled:p.isLoading,className:"hover:bg-purple-700 rounded-full p-0.5 transition-colors disabled:opacity-50",title:"Unassign Dealer",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsx)("div",{className:"bg-emerald-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:"D"})]}),b.map(e=>{const t=(360/n.maxSeats*(e-1)-90)*(Math.PI/180),s=50+40*Math.cos(t),a=50+35*Math.sin(t),r=g.includes(e);return(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(s,"%"),top:"".concat(a,"%")},children:[(0,sa.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center font-bold text-lg transition-all cursor-pointer ".concat(r?"bg-emerald-600 text-white border-2 border-emerald-400":"bg-slate-700 text-gray-400 border-2 border-slate-600 hover:border-emerald-500"),children:r?"P"+e:e}),(0,sa.jsxs)("div",{className:"text-center text-xs text-white mt-1",children:["Seat ",e]})]},e)})]}),(0,sa.jsxs)("div",{className:"mt-6 grid grid-cols-4 gap-4 bg-slate-800 p-4 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Players"}),(0,sa.jsxs)("div",{className:"text-white font-bold text-xl",children:[n.currentSeats||0,"/",n.maxSeats]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Table Value"}),(0,sa.jsxs)("div",{className:"text-emerald-400 font-bold text-xl",children:["\u20b9",w.toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Buy-In Range"}),(0,sa.jsxs)("div",{className:"text-white font-bold text-lg",children:["\u20b9",(n.minBuyIn||0).toLocaleString()," - \u20b9",(n.maxBuyIn||0).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("div",{className:"font-bold text-xl ".concat("OCCUPIED"===n.status?"text-green-400":"AVAILABLE"===n.status?"text-yellow-400":"text-gray-400"),children:"OCCUPIED"===n.status?"Active":"AVAILABLE"===n.status?"Waiting":n.status})]})]}),("OCCUPIED"===n.status||"AVAILABLE"===n.status&&(null===(l=n.notes)||void 0===l?void 0:l.includes("Paused Elapsed")))&&(0,sa.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-emerald-100 text-sm mb-1",children:"SESSION RUNNING TIME"}),(0,sa.jsx)("div",{className:"text-white font-bold text-3xl font-mono",children:m})]}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:i,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white transition-colors",children:"Close"})})]})})}function fo(e){let{selectedClubId:t,tables:s,tablesLoading:a}=e;const[l,n]=(0,r.useState)("all"),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),b=ra(),{data:g,isLoading:f}=ml({queryKey:["staff",t],queryFn:()=>wr.staffAPI.getStaff(t),enabled:!!t}),y=(null===g||void 0===g?void 0:g.filter(e=>"Dealer"===e.role&&"Active"===e.status))||[],v=(new Date).toISOString().split("T")[0],{data:j}=ml({queryKey:["dealersOnLeave",t,v],queryFn:()=>wr.iw.getDealers(t,v),enabled:!!t}),{data:w}=ml({queryKey:["availableDealersForToday",t,v],queryFn:()=>wr.iw.getAvailableDealersForDate(t,v),enabled:!!t}),N=(null===j||void 0===j?void 0:j.dealers)||[],S=new Set(y.filter(e=>!N.find(t=>t.id===e.id)).map(e=>e.id)),{data:C}=ml({queryKey:["all-tables",t],queryFn:()=>wr.rj.getTables(t),enabled:!!t}),k=new Set((C||[]).filter(e=>("OCCUPIED"===e.status||"RESERVED"===e.status)&&e.notes).map(e=>{var t;const s=null===(t=e.notes)||void 0===t?void 0:t.match(/Dealer:\s*([a-f0-9-]{36})/i);return s?s[1]:null}).filter(Boolean)),A=((null===w||void 0===w?void 0:w.dealers)||[]).filter(e=>!k.has(e.id)),P=(y.filter(e=>!k.has(e.id)&&!S.has(e.id)),bl({mutationFn:async e=>{let{tableId:a,dealerId:r}=e;const l=s.find(e=>e.id===a),n=y.find(e=>e.id===r);if(!l||!n)throw new Error("Table or dealer not found");const i=(l.notes||"").replace(/\s*\|\s*Dealer:.*$/i,""),o="".concat(i," | Dealer: ").concat(n.id," (").concat(n.name,")").trim();return wr.rj.updateTable(t,a,{notes:o})},onSuccess:()=>{jr.success("Dealer assigned successfully"),x(""),p(""),b.invalidateQueries(["rummy-tables",t]),b.invalidateQueries(["all-tables",t]),b.invalidateQueries(["staff",t])},onError:e=>{jr.error(e.message||"Failed to assign dealer")}})),[T,I]=(0,r.useState)({tableNumber:"",tableName:"",rummy_variant:"Points Rummy",custom_variant:"",points_value:1,number_of_deals:1,drop_points:20,max_points:80,min_players:2,max_players:6,entry_fee:"",min_buy_in:"",max_buy_in:"",deal_duration:5,notes:""}),_=bl({mutationFn:e=>wr.rj.createTable(t,(0,i.A)((0,i.A)({},e),{},{tableType:"RUMMY"})),onSuccess:()=>{jr.success("Rummy table created successfully"),b.invalidateQueries(["rummy-tables",t]),d(!1),n("all"),L()},onError:e=>{jr.error(e.message||"Failed to create rummy table")}}),D=bl({mutationFn:e=>{let{tableId:s,data:a}=e;return wr.rj.updateTable(t,s,(0,i.A)((0,i.A)({},a),{},{tableType:"RUMMY"}))},onSuccess:()=>{jr.success("Rummy table updated successfully"),b.invalidateQueries(["rummy-tables",t]),d(!1),u(null),n("all"),L()},onError:e=>{jr.error(e.message||"Failed to update rummy table")}}),E=bl({mutationFn:e=>wr.rj.deleteTable(t,e),onSuccess:()=>{jr.success("Rummy table deleted successfully"),b.invalidateQueries(["rummy-tables",t])},onError:e=>{jr.error(e.message||"Failed to delete rummy table")}}),R=bl({mutationFn:e=>wr.rj.resumeSession(t,e),onSuccess:()=>{jr.success("Session started successfully"),b.invalidateQueries(["rummy-tables",t])},onError:e=>{jr.error(e.message||"Failed to start session")}}),L=()=>{I({tableNumber:"",tableName:"",rummy_variant:"Points Rummy",custom_variant:"",points_value:1,number_of_deals:1,drop_points:20,max_points:80,min_players:2,max_players:6,entry_fee:"",min_buy_in:"",max_buy_in:"",deal_duration:5,notes:""}),u(null)};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Rummy Table Management"}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 pb-4 mb-6",children:[(0,sa.jsx)("button",{onClick:()=>n("all"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("all"===l?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"All Tables"}),(0,sa.jsx)("button",{onClick:()=>{n("add"),u(null),L()},className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("add"===l?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Add New Table"})]}),"all"===l&&(0,sa.jsx)("div",{className:"space-y-4",children:a?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading rummy tables..."})]}):0===s.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tables created yet"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:'Click "Add New Table" to create your first rummy table'})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.rummyVariant||"RUMMY"})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("AVAILABLE"===e.status?"bg-green-600/20 text-green-400":"OCCUPIED"===e.status?"bg-emerald-600/20 text-emerald-400":"RESERVED"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-gray-600/20 text-gray-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Max Seats:"}),(0,sa.jsx)("span",{className:"text-white font-medium",children:e.maxSeats})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Current Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:["AVAILABLE"===e.status||"CLOSED"===e.status?(0,sa.jsxs)("button",{onClick:()=>R.mutate(e.id),disabled:R.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[(0,sa.jsx)("span",{children:"\u25b6"}),(0,sa.jsx)("span",{children:"Start Session"})]}):null,(0,sa.jsx)("button",{onClick:()=>(e=>{var t,s,a,r,l,i;u(e),I({tableNumber:(null===(t=e.tableNumber)||void 0===t?void 0:t.toString())||"",tableName:(null===(s=e.notes)||void 0===s||null===(a=s.split("|")[0])||void 0===a?void 0:a.trim())||"",rummy_variant:e.rummyVariant||"Points Rummy",custom_variant:"",points_value:e.pointsValue||1,number_of_deals:e.numberOfDeals||1,drop_points:e.dropPoints||20,max_points:e.maxPoints||80,min_players:e.minPlayers||2,max_players:e.maxSeats||6,entry_fee:(null===(r=e.entryFee)||void 0===r?void 0:r.toString())||"",min_buy_in:(null===(l=e.minBuyIn)||void 0===l?void 0:l.toString())||"",max_buy_in:(null===(i=e.maxBuyIn)||void 0===i?void 0:i.toString())||"",deal_duration:e.dealDuration||5,notes:e.notes||""}),n("add")})(e),className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete Table ".concat(e.tableNumber,"?"))&&E.mutate(e.id)})(e),disabled:E.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]},e.id))})}),"add"===l&&(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold mb-6",children:c?"Edit Rummy Table":"Create New Rummy Table"}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t?T.tableNumber?c?D.mutate({tableId:c.id,data:{tableType:"RUMMY",maxSeats:parseInt(T.max_players),minBuyIn:T.min_buy_in?parseFloat(T.min_buy_in):null,maxBuyIn:T.max_buy_in?parseFloat(T.max_buy_in):null,notes:T.notes||"".concat(T.tableName||"Rummy Table "+T.tableNumber," | ").concat("Custom"===T.rummy_variant?T.custom_variant:T.rummy_variant," | Points: ").concat(T.points_value," | Deals: ").concat(T.number_of_deals," | Drop: ").concat(T.drop_points," | Max: ").concat(T.max_points),rummyVariant:"Custom"===T.rummy_variant?T.custom_variant:T.rummy_variant,pointsValue:parseFloat(T.points_value)||1,numberOfDeals:parseInt(T.number_of_deals)||null,dropPoints:parseInt(T.drop_points)||null,maxPoints:parseInt(T.max_points)||null,dealDuration:parseInt(T.deal_duration)||null,entryFee:T.entry_fee?parseFloat(T.entry_fee):null,minPlayers:parseInt(T.min_players)||2}}):_.mutate({tableNumber:parseInt(T.tableNumber),tableType:"RUMMY",maxSeats:parseInt(T.max_players),minBuyIn:T.min_buy_in?parseFloat(T.min_buy_in):null,maxBuyIn:T.max_buy_in?parseFloat(T.max_buy_in):null,notes:T.notes||"".concat(T.tableName||"Rummy Table "+T.tableNumber," | ").concat("Custom"===T.rummy_variant?T.custom_variant:T.rummy_variant," | Points: ").concat(T.points_value," | Deals: ").concat(T.number_of_deals," | Drop: ").concat(T.drop_points," | Max: ").concat(T.max_points),rummyVariant:"Custom"===T.rummy_variant?T.custom_variant:T.rummy_variant,pointsValue:parseFloat(T.points_value)||1,numberOfDeals:parseInt(T.number_of_deals)||null,dropPoints:parseInt(T.drop_points)||null,maxPoints:parseInt(T.max_points)||null,dealDuration:parseInt(T.deal_duration)||null,entryFee:T.entry_fee?parseFloat(T.entry_fee):null,minPlayers:parseInt(T.min_players)||2}):jr.error("Table number is required"):jr.error("Please select a club first")},className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Table Number *"}),(0,sa.jsx)("input",{type:"number",value:T.tableNumber,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{tableNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"1",required:!0,disabled:!!c})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Table Name"}),(0,sa.jsx)("input",{type:"text",value:T.tableName,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{tableName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"e.g., Premium Rummy Table"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,sa.jsx)("select",{value:T.rummy_variant,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0,children:["Points Rummy","Pool Rummy (101 Points)","Pool Rummy (201 Points)","Deals Rummy","Custom"].map(e=>(0,sa.jsx)("option",{value:e,children:e},e))})]}),"Custom"===T.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant Name"}),(0,sa.jsx)("input",{type:"text",value:T.custom_variant,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Enter custom variant name"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Value (per \u20b9)"}),(0,sa.jsx)("input",{type:"number",value:T.points_value,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{points_value:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0.1",step:"0.1"})]}),(T.rummy_variant.includes("Points")||"Custom"===T.rummy_variant)&&(0,sa.jsx)(sa.Fragment,{children:(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,sa.jsx)("input",{type:"number",value:T.drop_points,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,sa.jsx)("input",{type:"number",value:T.max_points,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]})}),"Deals Rummy"===T.rummy_variant&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,sa.jsx)("input",{type:"number",value:T.number_of_deals,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,sa.jsx)("input",{type:"number",value:T.min_players,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players *"}),(0,sa.jsx)("input",{type:"number",value:T.max_players,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6",required:!0})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:T.entry_fee,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Buy-in (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:T.min_buy_in,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{min_buy_in:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Buy-in (\u20b9)"}),(0,sa.jsx)("input",{type:"number",value:T.max_buy_in,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{max_buy_in:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,sa.jsx)("input",{type:"number",value:T.deal_duration,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,sa.jsx)("textarea",{value:T.notes,onChange:e=>I((0,i.A)((0,i.A)({},T),{},{notes:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Additional notes about this table..."})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,sa.jsx)("button",{type:"submit",disabled:_.isLoading||D.isLoading||!t,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:_.isLoading||D.isLoading?(0,sa.jsxs)("span",{className:"flex items-center justify-center",children:[(0,sa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?"Updating...":"Creating..."]}):c?"Update Table":"Create Table"}),c&&(0,sa.jsx)("button",{type:"button",onClick:()=>{u(null),L(),n("all")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg font-semibold transition-all",children:"Cancel"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Dealer Assignment"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,sa.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t,children:[(0,sa.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,sa.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber," - ",e.rummyVariant||"Rummy"," (",e.status,")"]},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Assign Dealer"}),(0,sa.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t||f,children:[(0,sa.jsx)("option",{value:"",children:"-- Select Dealer --"}),f?(0,sa.jsx)("option",{disabled:!0,children:"Loading dealers..."}):0===A.length?(0,sa.jsx)("option",{disabled:!0,children:y.length>0?"No dealers available (all assigned, on leave, or no shift today)":"No active dealers found"}):A.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.employeeId||"No ID",")"]},e.id))]})]})]}),(0,sa.jsx)("button",{onClick:()=>{m&&h?P.mutate({tableId:m,dealerId:h}):jr.error("Please select both table and dealer")},disabled:!m||!h||P.isLoading||!t,className:"mt-4 bg-purple-600 hover:bg-purple-500 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P.isLoading?"Assigning...":"Assign Dealer"}),0===y.length&&!f&&t&&(0,sa.jsx)("p",{className:"mt-2 text-sm text-yellow-400",children:"\u26a0\ufe0f No active dealers found. Please create dealer staff members first."}),0===A.length&&y.length>0&&!f&&(0,sa.jsx)("p",{className:"mt-2 text-sm text-amber-400",children:"\u2139\ufe0f No dealers available. They may be assigned, on leave, or don't have a shift today."})]})]})}function yo(e){let{selectedClubId:t,tables:s,waitlist:a,waitlistLoading:r}=e;return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Waitlist Management"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Current Waitlist"}),r?(0,sa.jsxs)("div",{className:"text-center py-8",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto mb-2"}),(0,sa.jsx)("p",{className:"text-sm",children:"Loading..."})]}):0===a.length?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players in waitlist"}):(0,sa.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-600 p-4 rounded-lg",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:e.playerName}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Position: ",e.priority||"N/A"]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Table Type: ",e.tableType||"Any"]})]}),(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status})]}),(0,sa.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,sa.jsx)("button",{className:"flex-1 bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"\ud83c\udfaf View Table"}),(0,sa.jsx)("button",{className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"Remove"})]})]},e.id))})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seat Allocation"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Player"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Player --"}),a.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.playerName},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,sa.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Seat Number"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Seat --"}),[1,2,3,4,5,6].map(e=>(0,sa.jsxs)("option",{value:e,children:["Seat ",e]},e))]})]}),(0,sa.jsx)("button",{className:"w-full bg-purple-600 hover:bg-purple-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Assign Seat"})]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Player Call & Reorder"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Call Players"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("button",{className:"w-full bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call Next Player"}),(0,sa.jsx)("button",{className:"w-full bg-emerald-600 hover:bg-emerald-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call All Players"}),(0,sa.jsx)("button",{className:"w-full bg-yellow-600 hover:bg-yellow-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Send SMS Notification"})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reorder Waitlist"}),(0,sa.jsx)("div",{className:"space-y-2",children:0===a.length?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No players to reorder"}):a.map((e,t)=>(0,sa.jsxs)("div",{className:"bg-slate-600 p-3 rounded flex justify-between items-center",children:[(0,sa.jsxs)("span",{className:"text-white",children:[t+1,". ",e.playerName]}),(0,sa.jsxs)("div",{className:"flex gap-1",children:[(0,sa.jsx)("button",{disabled:0===t,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2191"}),(0,sa.jsx)("button",{disabled:t===a.length-1,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2193"})]})]},e.id))})]})]})]})]})}function vo(e){let{selectedClubId:t,tables:s}=e;const[a,l]=(0,r.useState)("process-buyout");return(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-orange-600/30 via-red-500/20 to-rose-700/30 rounded-xl p-6 border border-orange-800/40",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Rummy Table Buy-Out"}),(0,sa.jsx)("p",{className:"text-gray-300 text-sm mb-6",children:"Manage player buy-out requests and process manual buy-outs for rummy tables."}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-orange-800/40 pb-4 mb-6",children:[(0,sa.jsx)("button",{onClick:()=>l("process-buyout"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("process-buyout"===a?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Process Buy-Out"}),(0,sa.jsx)("button",{onClick:()=>l("player-requests"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("player-requests"===a?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Player Requests"})]}),"process-buyout"===a&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Process Buy-Out"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Seated Player"}),(0,sa.jsx)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:(0,sa.jsx)("option",{value:"",children:"-- Select Player --"})})]}),(0,sa.jsx)("div",{className:"p-4 bg-emerald-500/20 rounded-lg border border-emerald-400/30",children:(0,sa.jsxs)("div",{className:"text-sm text-white space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Player:"}),(0,sa.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Table:"}),(0,sa.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Current Table Balance:"}),(0,sa.jsx)("span",{className:"font-semibold text-emerald-300",children:"0 chips"})]})]})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason (Optional)"}),(0,sa.jsx)("textarea",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Enter reason for buy-out (optional)..."})]}),(0,sa.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Approve Buy-Out"})]})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buy-Out Information"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold mb-2",children:"How Buy-Out Works:"}),(0,sa.jsxs)("ul",{className:"text-sm text-gray-300 space-y-2 list-disc list-inside",children:[(0,sa.jsx)("li",{children:"Select a player who is currently seated at a rummy table"}),(0,sa.jsx)("li",{children:"Their table chip balance will be moved to their available balance"}),(0,sa.jsx)("li",{children:"Player will be removed from the table (seat becomes available)"}),(0,sa.jsx)("li",{children:"Player can then convert chips to real money at the cashier counter"})]})]}),(0,sa.jsxs)("div",{className:"p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[(0,sa.jsx)("h4",{className:"text-yellow-300 font-semibold mb-2",children:"\u26a0\ufe0f Important Notes:"}),(0,sa.jsxs)("ul",{className:"text-sm text-yellow-200 space-y-1 list-disc list-inside",children:[(0,sa.jsx)("li",{children:"Buy-out approval is permanent and cannot be undone"}),(0,sa.jsx)("li",{children:"Table balance will be immediately transferred to player's available balance"}),(0,sa.jsx)("li",{children:"Player must go to cashier to convert chips to real money"})]})]}),(0,sa.jsx)("div",{className:"p-4 bg-green-500/20 rounded-lg border border-green-400/30",children:(0,sa.jsxs)("div",{className:"text-sm text-green-300",children:[(0,sa.jsx)("div",{className:"font-semibold mb-1",children:"Currently Seated Players:"}),(0,sa.jsx)("div",{className:"text-green-200",children:"0 player(s) at rummy tables"})]})})]})]})]}),"player-requests"===a&&(0,sa.jsx)(jl,{clubId:t})]})})}function jo(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("tournaments");return t?(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Management"})}),(0,sa.jsxs)("div",{className:"flex gap-4 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("tournaments"),className:"px-6 py-3 font-medium transition-colors ".concat("tournaments"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Rummy Tournaments"}),(0,sa.jsx)("button",{onClick:()=>a("tables"),className:"px-6 py-3 font-medium transition-colors ".concat("tables"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Rummy Tables"})]}),(0,sa.jsxs)("div",{className:"mt-6",children:["tournaments"===s&&(0,sa.jsx)(xo,{selectedClubId:t}),"tables"===s&&(0,sa.jsx)(ho,{selectedClubId:t})]})]}):(0,sa.jsxs)("div",{className:"text-white",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Rummy Management"}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,sa.jsx)("p",{className:"text-gray-400",children:"Please select a club to manage Rummy tournaments and tables."})})]})}Object.assign(ro,{Manager:so,Socket:eo,io:ro,connect:ro});const wo=198e5,No=e=>{if(!e)return null;const t="string"===typeof e?new Date(e):e;return new Date(t.getTime()+wo)},So=e=>{if(!e)return"";const t=No(e),s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),r=t.getFullYear();return"".concat(s,"/").concat(a,"/").concat(r)},Co=e=>{if(!e)return"";const t=No(e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getFullYear())},ko=()=>No(new Date);function Ao(e){let{selectedClubId:t,recipientType:s="staff"}=e;const a=ra(),[l,n]=(0,r.useState)(null),[i,o]=(0,r.useState)(1),{data:d,isLoading:c}=ml({queryKey:["notificationInbox",t,s],queryFn:()=>wr.Dv.getNotificationInbox(t,s),enabled:!!t,refetchInterval:3e4}),u=(null===d||void 0===d?void 0:d.notifications)||[],m=(null===d||void 0===d||d.total,[...u].sort((e,t)=>e.isRead!==t.isRead?e.isRead?1:-1:new Date(t.sentAt||t.createdAt)-new Date(e.sentAt||e.createdAt))),x=Math.ceil(m.length/10),h=10*(i-1),p=m.slice(h,h+10),b=bl({mutationFn:e=>wr.Dv.markNotificationAsRead(t,e,s),onSuccess:()=>{a.invalidateQueries(["notificationInbox",t,s]),a.invalidateQueries(["unreadNotificationCount",t,s])}}),g=bl({mutationFn:()=>wr.Dv.markAllNotificationsAsRead(t,s),onSuccess:()=>{jr.success("All notifications marked as read"),a.invalidateQueries(["notificationInbox",t,s]),a.invalidateQueries(["unreadNotificationCount",t,s])},onError:e=>{jr.error(e.message||"Failed to mark all as read")}}),f=bl({mutationFn:e=>wr.Dv.deletePushNotification(t,e),onSuccess:()=>{jr.success("Notification deleted"),n(null),a.invalidateQueries(["notificationInbox",t,s]),a.invalidateQueries(["unreadNotificationCount",t,s]),a.invalidateQueries(["pushNotifications",t])},onError:e=>{jr.error(e.message||"Failed to delete notification")}}),y=e=>{n(e),e.isRead||b.mutate(e.id)},v=u.filter(e=>!e.isRead).length,j=e=>{e.isRead&&window.confirm('Delete "'.concat(e.title,'"?'))?f.mutate(e.id):e.isRead||jr.error("Please read the notification before deleting")};return(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\ud83d\udcec Notifications"}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:[v>0?"".concat(v," unread \u2022 "):"",m.length," total"]})]}),v>0&&(0,sa.jsx)("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Mark All as Read"})]}),c?(0,sa.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading notifications..."}):0===m.length?(0,sa.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-lg border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udced"}),(0,sa.jsx)("p",{className:"text-gray-400 text-lg",children:"No notifications yet"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,sa.jsx)("div",{onClick:()=>y(e),className:"p-4 rounded-lg border cursor-pointer transition-all ".concat(e.isRead?"bg-slate-800 border-slate-700 hover:border-slate-600":"bg-blue-900/20 border-blue-600 hover:border-blue-500"),children:(0,sa.jsxs)("div",{className:"flex items-start gap-3",children:[!e.isRead&&(0,sa.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),e.details&&(0,sa.jsx)("p",{className:"text-gray-300 text-sm mb-2 line-clamp-2",children:e.details}),(0,sa.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[(0,sa.jsx)("span",{children:new Date(e.sentAt||e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.isRead&&e.readAt&&(0,sa.jsxs)("span",{className:"text-green-400",children:["\u2713 Read on"," ",Co(e.readAt)]})]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),y(e)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"View"}),e.isRead&&(0,sa.jsx)("button",{onClick:t=>{t.stopPropagation(),j(e)},disabled:f.isPending,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:"Delete"})]})]})},e.id))}),x>1&&(0,sa.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===i,className:"px-4 py-2 bg-slate-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:x},(e,t)=>t+1).map(e=>(0,sa.jsx)("button",{onClick:()=>o(e),className:"w-10 h-10 rounded-lg font-semibold transition-colors ".concat(e===i?"bg-blue-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:e},e))}),(0,sa.jsx)("button",{onClick:()=>o(e=>Math.min(x,e+1)),disabled:i===x,className:"px-4 py-2 bg-slate-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]}),l&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>n(null),children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:l.title}),(0,sa.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),l.details&&(0,sa.jsx)("p",{className:"text-gray-300 mb-4 whitespace-pre-wrap",children:l.details}),l.imageUrl&&(0,sa.jsx)("img",{src:l.imageUrl,alt:l.title,className:"w-full rounded-lg mb-4"}),l.videoUrl&&(0,sa.jsx)("video",{src:l.videoUrl,controls:!0,className:"w-full rounded-lg mb-4"}),(0,sa.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400 pt-4 border-t border-slate-700",children:[(0,sa.jsxs)("span",{children:["Sent on"," ",new Date(l.sentAt||l.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),l.isRead&&l.readAt&&(0,sa.jsxs)("span",{className:"text-green-400",children:["\u2713 Read on"," ",So(l.readAt)]})]}),l.isRead&&(0,sa.jsx)("button",{onClick:()=>j(l),disabled:f.isPending,className:"w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:f.isPending?"Deleting...":"Delete Notification"})]})})]})}const Po=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function To(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),[l,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(t){d();const e=setInterval(d,3e5);return()=>clearInterval(e)}},[t]);const d=async()=>{try{const e=new Date,s=new Date(e);s.setDate(s.getDate()+7);const r=e.toISOString().split("T")[0],l=s.toISOString().split("T")[0],i=await(0,wr.AT)("/clubs/".concat(t,"/shifts?startDate=").concat(r,"&endDate=").concat(l));if(i.success){const t=i.shifts||[],s=e.toISOString().split("T")[0],r=t.find(e=>e.shiftDate.split("T")[0]===s);a(r||null);const l=t.filter(e=>{const t=new Date(e.shiftDate);t.setHours(0,0,0,0);const s=new Date;return s.setHours(0,0,0,0),t>s}).slice(0,3);n(l)}}catch(e){console.error("Error loading shifts:",e)}finally{o(!1)}},c=e=>{try{return new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}catch(t){return e}},u=e=>{try{const t=new Date(e),s=new Date,a=new Date(s);a.setDate(a.getDate()+1);const r=t.toDateString()===s.toDateString(),l=t.toDateString()===a.toDateString();return r?"Today":l?"Tomorrow":"".concat(Po[t.getDay()],", ").concat(t.getDate())}catch(t){return e}};return i?(0,sa.jsx)("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"animate-pulse space-y-3",children:[(0,sa.jsx)("div",{className:"h-4 bg-gray-700 rounded w-1/2"}),(0,sa.jsx)("div",{className:"h-20 bg-gray-700 rounded"})]})}):(0,sa.jsxs)("div",{className:"bg-gray-800 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\u23f0"}),"My Shifts"]}),(0,sa.jsx)("button",{onClick:d,className:"text-gray-400 hover:text-white transition-colors",title:"Refresh",children:(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})})]}),s?(0,sa.jsxs)("div",{className:"rounded-lg p-3 mb-3 ".concat(s.isOffDay?"bg-gray-700 border border-gray-600":"bg-gradient-to-r from-orange-600 to-orange-500"),children:[(0,sa.jsx)("div",{className:"flex items-center justify-between mb-1",children:(0,sa.jsxs)("span",{className:"font-semibold text-white flex items-center gap-2",children:["Today",!s.isOffDay&&(0,sa.jsx)("span",{className:"px-1.5 py-0.5 bg-white/20 text-white text-xs rounded",children:"ACTIVE"})]})}),s.isOffDay?(0,sa.jsx)("div",{className:"text-gray-300 text-sm",children:"\ud83c\udf34 Off Day"}):(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"text-white font-bold text-lg",children:c(s.shiftStartTime)}),(0,sa.jsx)("span",{className:"text-white/60",children:"\u2192"}),(0,sa.jsx)("span",{className:"text-white font-bold text-lg",children:c(s.shiftEndTime)})]})]}):(0,sa.jsx)("div",{className:"bg-gray-700/50 rounded-lg p-3 mb-3 text-center",children:(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"No shift scheduled today"})}),l.length>0&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h4",{className:"text-sm font-medium text-gray-400 mb-2",children:"Upcoming"}),(0,sa.jsx)("div",{className:"space-y-2",children:l.map(e=>(0,sa.jsxs)("div",{className:"bg-gray-700/50 rounded p-2 text-sm",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-1",children:[(0,sa.jsx)("span",{className:"text-white font-medium",children:u(e.shiftDate)}),e.isOffDay&&(0,sa.jsx)("span",{className:"px-1.5 py-0.5 bg-gray-600 text-gray-300 text-xs rounded",children:"OFF"})]}),!e.isOffDay&&(0,sa.jsxs)("div",{className:"text-gray-300 text-xs",children:[c(e.shiftStartTime)," - ",c(e.shiftEndTime)]})]},e.id))})]}),!s&&0===l.length&&(0,sa.jsxs)("div",{className:"text-center py-4",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"No shifts scheduled"}),(0,sa.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Contact your manager"})]})]})}function Io(){var e,t,s,a,l,n,o,d,c;const u=me(),m=ra(),[x,h]=(0,r.useState)("Dashboard"),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=localStorage.getItem("clubId");e?b(e):u("/login")},[u]);const{data:N,isLoading:S}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p});(0,r.useEffect)(()=>{N&&f(N)},[N]),(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=wr.R2.getCurrentUser();if(!e.id)return void u("/login");const s="MANAGER"===e.role||"MANAGER"===(null===t||void 0===t?void 0:t.role),a="SUPER_ADMIN"===e.role||"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role),r="ADMIN"===e.role||"ADMIN"===(null===t||void 0===t?void 0:t.role),l=e.isMasterAdmin||(null===t||void 0===t?void 0:t.isMasterAdmin);if(!s&&!a&&!r&&!l){const s=(null===t||void 0===t?void 0:t.role)||e.role,a={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",ADMIN:"/admin",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},r=s&&a[s]?a[s]:"/login";return void u(r,{replace:!0})}e.mustResetPassword&&v(!0)},[u]);const{data:C,isLoading:k}=ml({queryKey:["clubRevenue",p],queryFn:()=>wr.Od.getClubRevenue(p),enabled:!!p,refetchInterval:3e4}),{data:A,isLoading:P}=ml({queryKey:["clubPlayers",p],queryFn:()=>wr.bS.getPlayers(p,{limit:100}),enabled:!!p}),{data:T=[],isLoading:I}=ml({queryKey:["pendingPlayers",p],queryFn:()=>wr.bS.getPendingApprovalPlayers(p),enabled:!!p}),{data:_=[],isLoading:D}=ml({queryKey:["suspendedPlayers",p],queryFn:()=>wr.bS.getSuspendedPlayers(p),enabled:!!p}),E=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),R=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),v(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),L=y&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}").email;t?j.currentPassword&&j.newPassword&&j.confirmPassword?j.newPassword===j.confirmPassword?j.newPassword.length<8?jr.error("Password must be at least 8 characters"):R.mutate({email:t,currentPassword:j.currentPassword,newPassword:j.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:j.currentPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:j.newPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:j.confirmPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:R.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:R.isLoading?"Resetting...":"Reset Password"})]})]})});return S||!p?(0,sa.jsxs)(sa.Fragment,{children:[L,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-white text-center",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]}):(0,sa.jsxs)(sa.Fragment,{children:[L,(0,sa.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,sa.jsx)(yl,{activeItem:x,setActiveItem:h,onSignOut:()=>{localStorage.clear(),u("/login")},clubInfo:g||N}),(0,sa.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===x&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===g||void 0===g?void 0:g.name)||(null===N||void 0===N?void 0:N.name)||"Loading..."]})}),p&&(0,sa.jsx)(To,{selectedClubId:p}),k?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading revenue data..."})]}):(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(e=C.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(t=C.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:E((null===C||void 0===C||null===(s=C.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(a=C.currentDay)||void 0===a?void 0:a.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(l=C.currentDay)||void 0===l?void 0:l.rake)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(n=C.previousDay)||void 0===n?void 0:n.rake)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(o=C.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(d=C.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,sa.jsx)("span",{className:"text-white font-semibold",children:P?"...":(null===A||void 0===A||null===(c=A.players)||void 0===c?void 0:c.length)||0})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,sa.jsx)("span",{className:"text-yellow-400 font-semibold",children:I?"...":T.length})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,sa.jsx)("span",{className:"text-red-400 font-semibold",children:D?"...":_.length})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,sa.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",I?"...":T.length,")"]}),(0,sa.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",D?"...":_.length,")"]})]})]})]})]}),"Player Management"===x&&(0,sa.jsx)(vl,{selectedClubId:p,playersData:A,playersLoading:P,pendingPlayers:T,pendingLoading:I,suspendedPlayers:_,suspendedLoading:D,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,sa.jsx)(wl,{selectedClubId:p}),"Rake Collection"===x&&(0,sa.jsx)(mo,{clubId:p}),"Push Notifications"===x&&(0,sa.jsx)(Vl,{selectedClubId:p}),"Tournaments"===x&&(0,sa.jsx)(Gl,{selectedClubId:p}),"Chat"===x&&p&&(0,sa.jsx)(lo,{clubId:p}),"Rummy"===x&&p&&(0,sa.jsx)(jo,{selectedClubId:p}),"Notifications"===x&&p&&(0,sa.jsx)(Ao,{selectedClubId:p,recipientType:"staff"}),!["Dashboard","Player Management","Tables & Waitlist","Rake Collection","Push Notifications","Tournaments","Chat","Rummy","Notifications"].includes(x)&&(0,sa.jsx)("div",{className:"text-white",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]})}function _o(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null}=e;const[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ml({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4}),{data:g}=ml({queryKey:["unreadChatCounts",p],queryFn:()=>wr.h2.getUnreadCounts(p),enabled:!!p,refetchInterval:1e4}),f=((null===g||void 0===g?void 0:g.staffChats)||0)+((null===g||void 0===g?void 0:g.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(n&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[n,d]);const{data:y}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=v.email||"gre@pokerroom.com",w=v.displayName||"GRE",N=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[d&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!n),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-blue-500/20 via-indigo-600/30 to-purple-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?n?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-300 to-purple-400 drop-shadow-lg mb-6",children:"GRE Portal"}),(0,sa.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"G"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:w}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:j})]})]}),u&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?jr.error("Password must be at least 8 characters"):N.mutate({email:j,currentPassword:x.currentPassword,newPassword:x.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:N.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),y&&y.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:y.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:a.map((e,a)=>(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-blue-400 to-indigo-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-blue-400/20 hover:to-indigo-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount}),"Chat"===e&&f>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f>9?"9+":f})]})},a))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function Do(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).map(e=>"string"===typeof e?e:"object"===typeof e&&null!==e?Object.entries(e).filter(e=>{let[t,s]=e;return Boolean(s)}).map(e=>{let[t]=e;return t}).join(" "):"").join(" ").replace(/\s+/g," ").trim()}const Eo=["className","variant","size","asChild","children"],Ro=r.forwardRef((e,t)=>{let{className:s,variant:a="default",size:l="default",asChild:o=!1,children:d}=e,c=n(e,Eo);const u=((e,t,s)=>{const a={default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 text-gray-900",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100 text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},r={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return Do("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a[e]||a.default,r[t]||r.default,s)})(a,l,s);return o&&r.isValidElement(d)?r.cloneElement(d,(0,i.A)({className:Do(u,d.props.className),ref:t},c)):(0,sa.jsx)("button",(0,i.A)((0,i.A)({className:u,ref:t},c),{},{children:d}))});Ro.displayName="Button";const Lo=["className"],Oo=["className"],Mo=["className"],Fo=["className"],Bo=["className"],qo=["className"],Uo=r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Lo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm",s)},a))});Uo.displayName="Card";r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Oo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("flex flex-col space-y-1.5 p-6",s)},a))}).displayName="CardHeader";r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Mo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("text-2xl font-semibold leading-none tracking-tight",s)},a))}).displayName="CardTitle";r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Fo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("text-sm text-gray-500 dark:text-gray-400",s)},a))}).displayName="CardDescription";const zo=r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Bo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("p-6 pt-0",s)},a))});zo.displayName="CardContent";r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,qo);return(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("flex items-center p-6 pt-0",s)},a))}).displayName="CardFooter";const Wo=["asChild","children"],Ho=["className"],Vo=["className","children"],Jo=["className"],Ko=["className"],Qo=["className"],Go=e=>{let{className:t}=e;return(0,sa.jsxs)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,sa.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,sa.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},Yo=r.createContext({open:!1,onOpenChange:()=>{}}),$o=e=>{let{open:t,onOpenChange:s,children:a}=e;const[l,n]=r.useState(t||!1);r.useEffect(()=>{n(t||!1)},[t]);return(0,sa.jsx)(Yo.Provider,{value:{open:l,onOpenChange:e=>{n(e),s&&s(e)}},children:a})},Zo=e=>{let{children:t}=e;return(0,sa.jsx)(sa.Fragment,{children:t})},Xo=e=>{let{asChild:t,children:s}=e,a=n(e,Wo);const{onOpenChange:l}=r.useContext(Yo);return t&&r.isValidElement(s)?r.cloneElement(s,(0,i.A)({onClick:e=>{l(!1),s.props.onClick&&s.props.onClick(e)}},a)):(0,sa.jsx)("button",(0,i.A)((0,i.A)({onClick:()=>l(!1)},a),{},{children:s}))},ed=r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Ho);const{open:l,onOpenChange:o}=r.useContext(Yo);return l?(0,sa.jsx)("div",(0,i.A)({ref:t,className:Do("fixed inset-0 z-50 bg-black/80 animate-in fade-in-0",s),onClick:()=>o(!1)},a)):null});ed.displayName="DialogOverlay";const td=r.forwardRef((e,t)=>{let{className:s,children:a}=e,l=n(e,Vo);const{open:o,onOpenChange:d}=r.useContext(Yo);return r.useEffect(()=>{const e=e=>{"Escape"===e.key&&o&&d(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,d]),o?(0,sa.jsxs)(Zo,{children:[(0,sa.jsx)(ed,{}),(0,sa.jsxs)("div",(0,i.A)((0,i.A)({ref:t,className:Do("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-6 sm:p-8 shadow-lg duration-200 rounded-lg overflow-y-auto animate-in fade-in-0 zoom-in-95",s),onClick:e=>e.stopPropagation()},l),{},{children:[a,(0,sa.jsxs)(Xo,{className:"absolute right-4 top-4 sm:right-6 sm:top-6 rounded-full bg-white/10 hover:bg-white/20 p-2 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-transparent disabled:pointer-events-none z-10 backdrop-blur-sm border border-white/20",children:[(0,sa.jsx)(Go,{className:"h-5 w-5 text-white drop-shadow-lg"}),(0,sa.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]}):null});td.displayName="DialogContent";const sd=e=>{let{className:t}=e,s=n(e,Jo);return(0,sa.jsx)("div",(0,i.A)({className:Do("flex flex-col space-y-2 text-center sm:text-left pr-16 sm:pr-20 pb-4",t)},s))};sd.displayName="DialogHeader";const ad=r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Ko);return(0,sa.jsx)("h2",(0,i.A)({ref:t,className:Do("text-lg font-semibold leading-none tracking-tight",s)},a))});ad.displayName="DialogTitle";const rd=r.forwardRef((e,t)=>{let{className:s}=e,a=n(e,Qo);return(0,sa.jsx)("p",(0,i.A)({ref:t,className:Do("text-sm text-gray-500 dark:text-gray-400",s)},a))});rd.displayName="DialogDescription";const ld=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"\u2190"})},nd=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"\ud83d\udc65"})},id=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"\ud83d\udd50"})},od=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"\u20b9"})},dd=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"+"})},cd=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"+"})},ud=e=>{let{className:t}=e;return(0,sa.jsx)("span",{className:t,children:"\xd7"})},md=()=>null;function xd(e){var t;let{tableId:s,onNavigate:a,onClose:l,isManagerMode:n=!1,isViewOnly:i=!1,selectedPlayerForSeating:o=null,occupiedSeats:d={},onSeatAssign:c=null,tables:u=null}=e;const m=s?String(s):"1",x=a||(e=>{console.log("Navigate to:",e)}),[h,p]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),{toast:f}={toast:e=>{let{title:t,description:s,variant:a}=e;console.log("Toast [".concat(a||"info","]: ").concat(t," - ").concat(s)),alert("".concat(t,": ").concat(s))}},y=u||[{id:"1",name:"Main Table",gameType:"Texas Hold'em",stakes:"\u20b91000.00/10000.00",maxPlayers:6,status:"active"},{id:"2",name:"VIP Table",gameType:"Texas Hold'em",stakes:"\u20b95000.00/50000.00",maxPlayers:9,status:"active"},{id:"3",name:"High Stakes",gameType:"Texas Hold'em",stakes:"\u20b910000.00/100000.00",maxPlayers:6,status:"active"}],v=Array.isArray(y)?y:[],{user:j}={user:{id:null}},w={isInActiveGame:!1,activeGameInfo:null,seatedSessionFallback:null},N=v.find(e=>String(e.id)===String(m)),S=n&&d[m]||[],C=[],k=Array.isArray(C)?C:[],A=n?S.map((e,t)=>({seatNumber:e,player:{firstName:"Player",lastName:String(e)},session_buy_in_amount:0})):[],P=Array.isArray(A)?A:[],T={pot:"50000"},I=k.some(e=>e.tableId===m),_=k.find(e=>e.tableId===m),D=!n&&w.isInActiveGame&&(null===(t=w.activeGameInfo)||void 0===t?void 0:t.tableId)===m,E=w.activeGameInfo||w.seatedSessionFallback,R=e=>{i||(n&&c&&o?(c({playerId:o.id||o.playerId,playerName:o.playerName||o.name,tableId:parseInt(m),seatNumber:e}),f({title:"Seat Assigned!",description:"".concat(o.playerName||o.name," assigned to Seat ").concat(e)}),p(null),g(!1),l&&l()):(f({title:"Joined Waitlist!",description:"You've been added to the waitlist successfully (dummy mode)"}),p(null),g(!1)))};return N?(0,sa.jsxs)("div",{className:"min-h-screen h-fit bg-gradient-to-b from-slate-900 to-slate-800 text-white",children:[(0,sa.jsxs)("div",{className:"p-4 flex justify-between",children:[(0,sa.jsxs)(Ro,{variant:"ghost",onClick:()=>l?l():x("/"),className:"text-white hover:bg-white/20",children:[(0,sa.jsx)(ld,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,sa.jsxs)("div",{className:"flex gap-4 w-fit flex-col",children:[(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-white",children:N.name}),(0,sa.jsxs)("p",{className:"text-slate-300",children:[N.gameType," \u2022 ",N.stakes]})]}),(0,sa.jsx)("div",{className:"",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-yellow-600 via-amber-500 to-orange-500 border-2 border-yellow-400/80 px-4 py-2 rounded-lg text-center shadow-xl",children:[(0,sa.jsx)("div",{className:"text-yellow-200 text-xs font-semibold",children:"Table Value"}),(0,sa.jsxs)("div",{className:"text-white text-lg font-bold",children:["\u20b9",null!==T&&void 0!==T&&T.pot?parseFloat(T.pot).toLocaleString():"0"]})]})})]}),(0,sa.jsx)("div",{className:"w-16"})," "]}),I&&_&&!D&&(0,sa.jsx)("div",{className:"mx-4 mb-4 p-4 bg-gradient-to-r from-amber-600/20 to-amber-500/20 border border-amber-500/50 rounded-lg",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-amber-200 font-semibold",children:"You're on the waitlist!"}),(0,sa.jsxs)("p",{className:"text-amber-100 text-sm",children:["Waiting for seat"," ",_.seatNumber||_.preferredSeat," \u2022 Position in queue: ",_.position||"TBD"]})]}),(0,sa.jsx)("div",{className:"text-amber-300",children:(0,sa.jsx)(id,{className:"w-5 h-5"})})]})}),!n&&D&&(null===j||void 0===j?void 0:j.id)&&(0,sa.jsx)("div",{className:"mx-4 mb-4",children:(0,sa.jsx)(md,{playerId:j.id.toString(),gameStatus:w})}),(0,sa.jsxs)("div",{className:"flex-1 flex flex-col items-center px-4 py-8",children:[(0,sa.jsx)("div",{className:"relative w-full max-w-4xl",children:(0,sa.jsx)("div",{className:"relative aspect-[5/3] max-w-2xl mx-auto mb-12 mt-8",children:(0,sa.jsx)("div",{className:"absolute inset-0 rounded-[50%] bg-gradient-to-br from-amber-600 via-yellow-500 to-amber-600 p-2 shadow-2xl",children:(0,sa.jsxs)("div",{className:"absolute inset-2 rounded-[50%] bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:N.maxPlayers||6},(e,t)=>{const s=t+1,a=(N.maxPlayers||6)+1,r=(t+1)*(2*Math.PI/a)-Math.PI/2,l=50+42*Math.cos(r),d=50+32*Math.sin(r),c=h===s,u=P.find(e=>e.seatNumber===s),x=n?S.includes(s):!!u,b=(null===u||void 0===u?void 0:u.session_buy_in_amount)||(null===u||void 0===u?void 0:u.sessionBuyInAmount)||0,y=!(!n||!o)&&(o.preferredSeat===s&&String(o.preferredTable)===String(m));return(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-50",style:{left:"".concat(l,"%"),top:"".concat(d,"%")},children:[(0,sa.jsx)("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center shadow-lg transition-all duration-300 select-none ".concat(x?"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-500 cursor-not-allowed":i?"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 cursor-default":c||y?"border-emerald-400 shadow-emerald-500/50 scale-110 bg-gradient-to-br from-emerald-600 to-emerald-700 animate-pulse cursor-pointer":n?"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 hover:border-yellow-400 hover:shadow-yellow-400/50 hover:scale-105 cursor-pointer active:scale-95":"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 hover:border-emerald-400 hover:shadow-emerald-400/50 hover:scale-105 cursor-pointer active:scale-95"),onClick:e=>{e.preventDefault(),e.stopPropagation(),i||x||(n?(e=>{if(i||!n||!o)return;S.includes(e)?f({title:"Seat Occupied",description:"Seat ".concat(e," is already occupied"),variant:"destructive"}):(p(e),g(!0))})(s):(p(s),g(!0)))},style:{pointerEvents:i?"none":"auto",touchAction:"manipulation"},title:i?"Seat ".concat(s," (View Only)"):n&&y?"Preferred seat for ".concat(o.playerName||o.name):"Seat ".concat(s),children:x&&null!==u&&void 0!==u&&u.player?(0,sa.jsxs)("span",{className:"text-white text-xs font-bold",children:[u.player.firstName.charAt(0),u.player.lastName.charAt(0)]}):i?(0,sa.jsx)("span",{className:"text-slate-400 text-xs",children:"\u25cb"}):(0,sa.jsx)(cd,{className:"w-3 h-3 text-emerald-400 font-bold transition-transform duration-300 ".concat(c?"rotate-45 scale-110":"hover:rotate-90 hover:scale-110")})}),(0,sa.jsxs)("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-center transition-colors ".concat(x?"text-blue-400":c||y?"text-emerald-400":"text-slate-300"),children:[(0,sa.jsx)("div",{className:"text-xs font-medium",children:x&&null!==u&&void 0!==u&&u.player?u.player.firstName:"Seat ".concat(s)}),y&&(0,sa.jsx)("div",{className:"text-[9px] text-yellow-400 bg-yellow-900/50 px-1 rounded mt-1 font-semibold",children:"\u2b50 Preferred"}),x&&b>0&&(0,sa.jsxs)("div",{className:"text-[10px] text-slate-400 bg-slate-800/80 px-1 rounded mt-1",children:["\u20b9",b.toLocaleString()]})]})]},s)}),(0,sa.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-40",style:{left:"50%",top:"8%"},children:[(0,sa.jsx)("div",{className:"w-7 h-7 bg-gradient-to-br from-yellow-600 to-yellow-700 rounded-full border-2 border-yellow-500 flex items-center justify-center shadow-xl",children:(0,sa.jsx)("span",{className:"text-xs font-bold text-white",children:"D"})}),(0,sa.jsx)("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 text-xs text-yellow-400 font-medium whitespace-nowrap",children:"Dealer"})]}),(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,sa.jsx)("div",{className:"text-center",children:(0,sa.jsx)("div",{className:"w-24 h-24 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:(0,sa.jsx)("img",{src:"https://img.freepik.com/free-vector/flat-design-culture-logo-template_23-2149845368.jpg?semt=ais_hybrid&w=740&q=80",alt:"Table Logo",className:"w-full h-full object-contain rounded-full"})})})})]})})})}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 w-full max-w-4xl",children:[(0,sa.jsx)(Uo,{className:"bg-slate-800 border-slate-700",children:(0,sa.jsxs)(zo,{className:"p-4 text-center",children:[(0,sa.jsx)(nd,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),(0,sa.jsx)("div",{className:"text-slate-400 text-sm",children:"Players"}),(0,sa.jsxs)("div",{className:"text-white text-xl font-bold",children:[P.length||0,"/",(null===N||void 0===N?void 0:N.maxPlayers)||6]})]})}),(0,sa.jsx)(Uo,{className:"bg-slate-800 border-slate-700",children:(0,sa.jsxs)(zo,{className:"p-4 text-center",children:[(0,sa.jsx)(od,{className:"w-8 h-8 text-emerald-400 mx-auto mb-2"}),(0,sa.jsx)("div",{className:"text-slate-400 text-sm",children:"Buy-in Range"}),(0,sa.jsx)("div",{className:"text-white text-lg font-bold",children:(null===N||void 0===N?void 0:N.stakes)||"N/A"})]})}),(0,sa.jsx)(Uo,{className:"bg-slate-800 border-slate-700",children:(0,sa.jsxs)(zo,{className:"p-4 text-center",children:[(0,sa.jsx)(id,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,sa.jsx)("div",{className:"text-slate-400 text-sm",children:"Blinds"}),(0,sa.jsx)("div",{className:"text-white text-lg font-bold",children:"\u20b910/\u20b920"})]})}),(0,sa.jsx)(Uo,{className:"bg-slate-800 border-slate-700",children:(0,sa.jsxs)(zo,{className:"p-4 text-center",children:[(0,sa.jsx)(id,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),(0,sa.jsx)("div",{className:"text-slate-400 text-sm",children:"Status"}),(0,sa.jsx)("div",{className:"text-white text-lg font-bold",children:"Waiting"})]})})]}),!n&&D&&E&&(0,sa.jsx)("div",{className:"mt-8 w-full max-w-4xl",children:(0,sa.jsx)(Uo,{className:"bg-gradient-to-r from-blue-800 to-blue-900 border-blue-600",children:(0,sa.jsxs)(zo,{className:"p-6",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,sa.jsxs)("h3",{className:"text-xl font-bold text-blue-200",children:["You are seated at Seat ",E.seatNumber]})]}),(0,sa.jsx)("div",{className:"text-blue-300 text-sm",children:"Seated at Table"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(od,{className:"w-5 h-5 text-emerald-400"}),(0,sa.jsx)("span",{className:"text-blue-200 font-semibold",children:"Session Buy-in"})]}),(0,sa.jsxs)("div",{className:"text-2xl font-bold text-white",children:["\u20b9",(E.buyInAmount||5e3).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(id,{className:"w-5 h-5 text-yellow-400"}),(0,sa.jsx)("span",{className:"text-blue-200 font-semibold",children:"Call Time"})]}),(0,sa.jsx)("div",{className:"text-lg font-bold text-white",children:(0,sa.jsx)("div",{className:"text-green-400",children:"Available"})})]}),(0,sa.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)(ld,{className:"w-5 h-5 text-purple-400"}),(0,sa.jsx)("span",{className:"text-blue-200 font-semibold",children:"Cash Out"})]}),(0,sa.jsx)("div",{className:"text-lg font-bold text-white",children:(0,sa.jsx)("div",{className:"text-slate-400",children:"Pending"})})]})]})]})})}),!D&&(0,sa.jsx)("div",{className:"mt-8 text-center",children:h?(0,sa.jsx)("div",{className:"space-y-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 border rounded-lg p-4 max-w-md mx-auto ".concat(n?"border-yellow-500/50":"border-emerald-500/50"),children:[(0,sa.jsx)("h3",{className:"font-semibold mb-2 ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assign Seat ".concat(h):"Seat ".concat(h," Selected")}),n&&o?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("p",{className:"text-slate-300 text-sm mb-2",children:["Assign"," ",(0,sa.jsx)("span",{className:"font-semibold text-white",children:o.playerName||o.name})," ","to Seat ",h]}),(0,sa.jsxs)("p",{className:"text-slate-400 text-xs mb-4",children:["Table: ",null===N||void 0===N?void 0:N.name]})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("p",{className:"text-slate-300 text-sm mb-2",children:["Reserve this seat position for ",null===N||void 0===N?void 0:N.name]}),(0,sa.jsx)("p",{className:"text-slate-400 text-xs mb-4",children:"Note: Multiple players can reserve the same seat. Staff will assign final seating."})]}),(0,sa.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,sa.jsxs)(Ro,{onClick:()=>{R(h)},className:"shadow-lg transition-all duration-300 ".concat(n?"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white hover:shadow-yellow-500/25":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white hover:shadow-emerald-500/25"),children:[(0,sa.jsx)(dd,{className:"w-4 h-4 mr-2"}),n?"Assign Seat ".concat(h):"Reserve Seat ".concat(h)]}),(0,sa.jsx)(Ro,{onClick:()=>p(null),variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"})]})]})}):(0,sa.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 max-w-md mx-auto",children:[(0,sa.jsx)("p",{className:"text-slate-300 text-sm",children:n&&o?"Click on any available seat to assign ".concat(o.playerName||o.name):"Click on any seat to reserve your preferred position"}),(0,sa.jsx)("p",{className:"text-slate-400 text-xs mt-2",children:n?"Seats highlighted in yellow are preferred seats for this player":"Staff will manage final table assignments"})]})}),(0,sa.jsxs)("div",{className:"mt-8 text-center text-slate-400",children:[(0,sa.jsx)("p",{className:"text-sm",children:"This is a local offline poker game managed by casino staff."}),(0,sa.jsx)("p",{className:"text-xs mt-2",children:"Players are seated by super admin, admin, or manager only."})]})]}),(0,sa.jsx)($o,{open:b,onOpenChange:g,children:(0,sa.jsxs)(td,{className:"bg-slate-800 border-slate-700 text-white",children:[(0,sa.jsxs)(sd,{children:[(0,sa.jsx)(ad,{className:"text-xl ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assign Seat":"Join Table Waitlist"}),(0,sa.jsx)(rd,{className:"text-slate-300",children:n?"Confirm seat assignment for ".concat((null===o||void 0===o?void 0:o.playerName)||(null===o||void 0===o?void 0:o.name)||"player"):"Confirm your seat reservation for ".concat(null===N||void 0===N?void 0:N.name)})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[(0,sa.jsx)("h4",{className:"font-semibold mb-2 ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assignment Information":"Table Information"}),(0,sa.jsxs)("div",{className:"text-sm space-y-1 text-slate-300",children:[n&&o&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{children:["\u2022 Player:"," ",(0,sa.jsx)("span",{className:"text-white font-semibold",children:o.playerName||o.name})]}),(0,sa.jsxs)("div",{children:["\u2022 Player ID:"," ",o.playerId||o.id]}),o.preferredSeat&&(0,sa.jsxs)("div",{children:["\u2022 Preferred Seat:"," ",o.preferredSeat===h?(0,sa.jsxs)("span",{className:"text-yellow-400 font-semibold",children:["\u2713 Seat ",h," (Matches preference)"]}):(0,sa.jsxs)("span",{className:"text-gray-400",children:["Seat ",o.preferredSeat]})]})]}),(0,sa.jsxs)("div",{children:["\u2022 Table: ",null===N||void 0===N?void 0:N.name]}),(0,sa.jsxs)("div",{children:["\u2022 Game: ",null===N||void 0===N?void 0:N.gameType]}),(0,sa.jsxs)("div",{children:["\u2022 Stakes: ",null===N||void 0===N?void 0:N.stakes]}),(0,sa.jsxs)("div",{children:["\u2022 Selected Seat:"," ",(0,sa.jsx)("span",{className:"text-white font-semibold",children:h})]})]})]}),!n&&(0,sa.jsx)("div",{className:"bg-amber-900/20 border border-amber-600/50 rounded-lg p-3",children:(0,sa.jsxs)("p",{className:"text-amber-200 text-sm",children:[(0,sa.jsx)("strong",{children:"Note:"})," You will be added to the waitlist for this table. Staff will assign seating when a spot becomes available."]})}),(0,sa.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,sa.jsxs)(Ro,{variant:"outline",onClick:()=>{g(!1),p(null)},className:"border-slate-600 bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white hover:border-slate-500",children:[(0,sa.jsx)(ud,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,sa.jsxs)(Ro,{onClick:()=>{h&&R(h)},className:n?"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white",children:[(0,sa.jsx)(dd,{className:"w-4 h-4 mr-2"}),n?"Assign Seat ".concat(h):"Confirm Seat ".concat(h)]})]})]})]})})]}):(0,sa.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-4 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Table not found"}),(0,sa.jsx)(Ro,{onClick:()=>l?l():x("/"),children:"Back to Dashboard"})]})})}const hd=[{value:"Super Admin",label:"Super Admin"},{value:"Admin",label:"Admin"},{value:"Manager",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE"},{value:"Cashier",label:"Cashier"},{value:"Dealer",label:"Dealer"},{value:"FNB",label:"FNB"},{value:"Staff",label:"Staff"}],pd={Pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",Approved:"bg-green-500/20 text-green-400 border-green-500/50",Rejected:"bg-red-500/20 text-red-400 border-red-500/50",Cancelled:"bg-gray-500/20 text-gray-400 border-gray-500/50"};function bd(e){let{clubId:t}=e;const s=ra(),a=JSON.parse(localStorage.getItem("user")||"{}").role||localStorage.getItem("userRole")||"",l="SUPER_ADMIN"===a||"Super Admin"===a,n="ADMIN"===a||"Admin"===a,o="HR"===a,d=l||n||o,c=l||n||o,u=!l,[m,x]=(0,r.useState)(c?"policies":u?"my-leaves":"policies");(0,r.useEffect)(()=>{l&&"my-leaves"===m&&x("policies")},[l,m]);const[h,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(!1),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),[S,C]=(0,r.useState)(""),[k,A]=(0,r.useState)({role:"",leavesPerYear:0}),[P,T]=(0,r.useState)({startDate:"",endDate:"",reason:""}),{data:I=[],isLoading:_,refetch:D}=ml({queryKey:["leavePolicies",t],queryFn:()=>wr.ie.getLeavePolicies(t),enabled:!!t&&c}),[E,R]=(0,r.useState)({status:"",startDate:"",endDate:"",page:1,limit:10}),{data:L,isLoading:O,refetch:M}=ml({queryKey:["myLeaveApplications",t,E],queryFn:()=>wr.ie.getMyLeaveApplications(t,E),enabled:!!t&&u}),F=(null===L||void 0===L?void 0:L.applications)||[],B=(null===L||void 0===L?void 0:L.totalPages)||0,q=(null===L||void 0===L?void 0:L.page)||1,U=(null===L||void 0===L?void 0:L.total)||0,{data:z,isLoading:W,refetch:H}=ml({queryKey:["leaveBalance",t],queryFn:()=>wr.ie.getLeaveBalance(t),enabled:!!t&&u}),[V,J]=(0,r.useState)({status:"",role:"",startDate:"",endDate:"",search:"",page:1,limit:10}),{data:K,isLoading:Q,refetch:G}=ml({queryKey:["leaveApplicationsForApproval",t,V],queryFn:()=>wr.ie.getLeaveApplicationsForApproval(t,V),enabled:!!t&&d}),Y=(null===K||void 0===K?void 0:K.applications)||[],$=(null===K||void 0===K?void 0:K.totalPages)||0,Z=(null===K||void 0===K?void 0:K.page)||1,X=(null===K||void 0===K?void 0:K.total)||0,{data:ee=[],isLoading:te}=ml({queryKey:["pendingLeaveApplications",t],queryFn:()=>wr.ie.getPendingLeaveApplications(t),enabled:!!t&&d}),se=bl({mutationFn:e=>wr.ie.createLeavePolicy(t,e),onSuccess:()=>{jr.success("Leave policy created successfully"),p(!1),A({role:"",leavesPerYear:0}),s.invalidateQueries(["leavePolicies",t])},onError:e=>{jr.error(e.message||"Failed to create leave policy")}}),ae=bl({mutationFn:e=>{let{role:s,data:a}=e;return wr.ie.updateLeavePolicy(t,s,a)},onSuccess:()=>{jr.success("Leave policy updated successfully"),p(!1),j(null),A({role:"",leavesPerYear:0}),s.invalidateQueries(["leavePolicies",t])},onError:e=>{jr.error(e.message||"Failed to update leave policy")}}),re=bl({mutationFn:e=>wr.ie.deleteLeavePolicy(t,e),onSuccess:()=>{jr.success("Leave policy deleted successfully"),s.invalidateQueries(["leavePolicies",t])},onError:e=>{jr.error(e.message||"Failed to delete leave policy")}}),le=bl({mutationFn:e=>wr.ie.createLeaveApplication(t,e),onSuccess:()=>{jr.success("Leave application submitted successfully"),g(!1),T({startDate:"",endDate:"",reason:""}),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t]),s.invalidateQueries(["pendingLeaveApplications",t])},onError:e=>{jr.error(e.message||"Failed to submit leave application")}}),ne=bl({mutationFn:e=>wr.ie.approveLeaveApplication(t,e),onSuccess:()=>{jr.success("Leave application approved"),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t]),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t])},onError:e=>{jr.error(e.message||"Failed to approve leave")}}),ie=bl({mutationFn:e=>{let{applicationId:s,reason:a}=e;return wr.ie.rejectLeaveApplication(t,s,a)},onSuccess:()=>{jr.success("Leave application rejected"),y(!1),C(""),N(null),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t]),s.invalidateQueries(["myLeaveApplications",t])},onError:e=>{jr.error(e.message||"Failed to reject leave")}}),oe=bl({mutationFn:e=>wr.ie.cancelLeaveApplication(t,e),onSuccess:()=>{jr.success("Leave application cancelled successfully"),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t]),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t])},onError:e=>{jr.error(e.message||"Failed to cancel leave")}}),de=e=>e?So(e):"";return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:(0,sa.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,sa.jsx)("h1",{className:"text-4xl font-bold text-white mb-8",children:"Leave Management"}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[c&&(0,sa.jsx)("button",{onClick:()=>x("policies"),className:"px-6 py-3 font-semibold transition-colors ".concat("policies"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Leave Policies"}),d&&(0,sa.jsxs)("button",{onClick:()=>x("approve"),className:"px-6 py-3 font-semibold transition-colors relative ".concat("approve"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Approve Leaves",ee.length>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full px-2 py-1",children:ee.length})]}),u&&(0,sa.jsx)("button",{onClick:()=>x("my-leaves"),className:"px-6 py-3 font-semibold transition-colors ".concat("my-leaves"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"My Leaves"})]}),"policies"===m&&c&&(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Leave Policies"}),(0,sa.jsxs)("button",{onClick:()=>{j(null),A({role:"",leavesPerYear:0}),p(!0)},className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,sa.jsx)(Sn,{})," Create Policy"]})]}),_?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Loading policies..."})]}):0===I.length?(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,sa.jsx)("p",{children:"No leave policies configured yet."}),(0,sa.jsx)("p",{className:"text-sm mt-2",children:'Click "Create Policy" to get started.'})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:I.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.role}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{j(e),A({role:e.role,leavesPerYear:e.leavesPerYear}),p(!0)})(e),className:"text-blue-400 hover:text-blue-300",children:(0,sa.jsx)(bn,{})}),(0,sa.jsx)("button",{onClick:()=>{window.confirm("Delete leave policy for ".concat(e.role,"?"))&&re.mutate(e.role)},className:"text-red-400 hover:text-red-300",children:(0,sa.jsx)(_n,{})})]})]}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:e.leavesPerYear}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"leaves per year"})]},e.id))})]}),"approve"===m&&d&&(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Leave Applications"}),(0,sa.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6 space-y-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,sa.jsxs)("select",{value:V.status,onChange:e=>J((0,i.A)((0,i.A)({},V),{},{status:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"Pending",children:"Pending"}),(0,sa.jsx)("option",{value:"Approved",children:"Approved"}),(0,sa.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,sa.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,sa.jsxs)("select",{value:V.role,onChange:e=>J((0,i.A)((0,i.A)({},V),{},{role:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"All Roles"}),hd.filter(e=>"Affiliate"!==e.value).map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search (Name/Email)"}),(0,sa.jsx)("input",{type:"text",value:V.search,onChange:e=>J((0,i.A)((0,i.A)({},V),{},{search:e.target.value,page:1})),placeholder:"Search by name or email...",className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:V.startDate,onChange:e=>J((0,i.A)((0,i.A)({},V),{},{startDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:V.endDate,onChange:e=>J((0,i.A)((0,i.A)({},V),{},{endDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:()=>J({status:"",role:"",startDate:"",endDate:"",search:"",page:1,limit:10}),className:"w-full bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Clear Filters"})})]})}),(0,sa.jsxs)("div",{className:"mb-4 text-sm text-gray-400",children:["Showing ",Y.length," of ",X," leave application(s)"]}),Q?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Loading applications..."})]}):0===Y.length?(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,sa.jsx)(cn,{className:"text-5xl mx-auto mb-4 opacity-50"}),(0,sa.jsx)("p",{children:"No leave applications found"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"space-y-4 mb-6",children:Y.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white",children:e.staff.name}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.staff.role})]}),(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat(pd[e.status]),children:e.status})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Start Date"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:de(e.startDate)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"End Date"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:de(e.endDate)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Days"}),(0,sa.jsxs)("p",{className:"text-white font-medium",children:[e.numberOfDays," days"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Applied On"}),(0,sa.jsx)("p",{className:"text-white font-medium",children:de(e.createdAt)})]})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),(0,sa.jsx)("p",{className:"text-white bg-slate-800/50 rounded p-3",children:e.reason})]}),"Pending"===e.status&&(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsxs)("button",{onClick:()=>ne.mutate(e.id),disabled:ne.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,sa.jsx)(cn,{})," Approve"]}),(0,sa.jsxs)("button",{onClick:()=>(e=>{N(e),C(""),y(!0)})(e),className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2",children:[(0,sa.jsx)(Pn,{})," Reject"]})]}),"Approved"===e.status&&e.approvedAt&&(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Approved on ",de(e.approvedAt)]}),"Rejected"===e.status&&e.rejectedAt&&(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Rejected on ",de(e.rejectedAt),e.rejectionReason&&(0,sa.jsxs)("div",{className:"mt-2 text-red-400 bg-red-900/20 rounded p-2",children:["Reason: ",e.rejectionReason]})]}),"Cancelled"===e.status&&(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:"Cancelled by employee"})]},e.id))}),$>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-700",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",Z," of ",$]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>J((0,i.A)((0,i.A)({},V),{},{page:Z-1})),disabled:1===Z,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>J((0,i.A)((0,i.A)({},V),{},{page:Z+1})),disabled:Z>=$,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),"my-leaves"===m&&u&&(0,sa.jsxs)("div",{className:"space-y-6",children:[z&&(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600/20 to-teal-600/20 rounded-xl p-6 border border-emerald-500/50",children:[(0,sa.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Leave Balance"}),(0,sa.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Total Leaves"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:z.totalLeaves})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Used Leaves"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:z.usedLeaves})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Remaining Leaves"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:z.remainingLeaves})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"My Leave Applications"}),(0,sa.jsxs)("button",{onClick:()=>{T({startDate:"",endDate:"",reason:""}),g(!0)},className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,sa.jsx)(Sn,{})," Apply for Leave"]})]}),(0,sa.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6 space-y-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,sa.jsxs)("select",{value:E.status,onChange:e=>R((0,i.A)((0,i.A)({},E),{},{status:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"Pending",children:"Pending"}),(0,sa.jsx)("option",{value:"Approved",children:"Approved"}),(0,sa.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,sa.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:E.startDate,onChange:e=>R((0,i.A)((0,i.A)({},E),{},{startDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:E.endDate,onChange:e=>R((0,i.A)((0,i.A)({},E),{},{endDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:()=>R({status:"",startDate:"",endDate:"",page:1,limit:10}),className:"w-full bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Clear Filters"})})]})}),(0,sa.jsxs)("div",{className:"mb-4 text-sm text-gray-400",children:["Showing ",F.length," of ",U," leave application(s)"]}),O?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Loading your leaves..."})]}):0===F.length?(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,sa.jsx)(on,{className:"text-5xl mx-auto mb-4 opacity-50"}),(0,sa.jsx)("p",{children:"No leave applications yet"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"space-y-4 mb-6",children:F.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat(pd[e.status]),children:e.status}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.numberOfDays," days"]})]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:[de(e.startDate)," - ",de(e.endDate)]})]}),"Approved"===e.status&&e.approvedAt&&(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Approved on"}),(0,sa.jsx)("p",{className:"text-sm text-white",children:de(e.approvedAt)})]}),"Rejected"===e.status&&e.rejectedAt&&(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Rejected on"}),(0,sa.jsx)("p",{className:"text-sm text-white",children:de(e.rejectedAt)})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),(0,sa.jsx)("p",{className:"text-white bg-slate-800/50 rounded p-3",children:e.reason})]}),e.rejectionReason&&(0,sa.jsxs)("div",{className:"mt-3",children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Rejection Reason"}),(0,sa.jsx)("p",{className:"text-red-400 bg-red-900/20 rounded p-3",children:e.rejectionReason})]}),"Cancelled"!==e.status&&(0,sa.jsx)("div",{className:"mt-4 flex justify-end",children:(0,sa.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this leave application?")&&oe.mutate(e.id)},disabled:oe.isLoading,className:"bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 disabled:opacity-50",children:[(0,sa.jsx)(Pn,{})," Cancel Leave"]})})]},e.id))}),B>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-700",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",q," of ",B]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>R((0,i.A)((0,i.A)({},E),{},{page:q-1})),disabled:1===q,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>R((0,i.A)((0,i.A)({},E),{},{page:q+1})),disabled:q>=B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:v?"Edit Leave Policy":"Create Leave Policy"}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v?ae.mutate({role:v.role,data:{leavesPerYear:k.leavesPerYear}}):se.mutate(k)},children:[(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,sa.jsxs)("select",{value:k.role,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{role:e.target.value})),disabled:!!v||se.isLoading||ae.isLoading,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50",required:!0,children:[(0,sa.jsx)("option",{value:"",children:"Select Role"}),hd.filter(e=>"Affiliate"!==e.value).map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Leaves Per Year"}),(0,sa.jsx)("input",{type:"number",min:"0",value:k.leavesPerYear,onChange:e=>A((0,i.A)((0,i.A)({},k),{},{leavesPerYear:parseInt(e.target.value)||0})),disabled:se.isLoading||ae.isLoading,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[!(se.isLoading||ae.isLoading)&&(0,sa.jsx)("button",{type:"button",onClick:()=>{p(!1),j(null),A({role:"",leavesPerYear:0})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:se.isLoading||ae.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center justify-center gap-2 ".concat(se.isLoading||ae.isLoading?"w-full":""),children:se.isLoading||ae.isLoading?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),v?"Updating...":"Creating..."]}):v?"Update":"Create"})]})]})]})}),b&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Apply for Leave"}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),le.mutate(P)},children:[(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:P.startDate,onChange:e=>T((0,i.A)((0,i.A)({},P),{},{startDate:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:P.endDate,onChange:e=>T((0,i.A)((0,i.A)({},P),{},{endDate:e.target.value})),min:P.startDate||(new Date).toISOString().split("T")[0],className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason"}),(0,sa.jsx)("textarea",{value:P.reason,onChange:e=>T((0,i.A)((0,i.A)({},P),{},{reason:e.target.value})),rows:"4",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Please provide a reason for your leave...",required:!0,minLength:10})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{g(!1),T({startDate:"",endDate:"",reason:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:le.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Submit Application"})]})]})]})}),f&&w&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Reject Leave Application"}),(0,sa.jsxs)("p",{className:"text-gray-400 mb-4",children:["Rejecting leave application for ",(0,sa.jsx)("strong",{className:"text-white",children:w.staff.name})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w&&ie.mutate({applicationId:w.id,reason:S})},children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rejection Reason (Optional)"}),(0,sa.jsx)("textarea",{value:S,onChange:e=>C(e.target.value),rows:"3",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Provide a reason for rejection..."})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{y(!1),N(null),C("")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:ie.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Reject Leave"})]})]})]})})]})})}function gd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(!1),{data:i,isLoading:o}=ml({queryKey:["tables",t],queryFn:()=>wr.rj.getTables(t),enabled:!!t}),d=i||[],c=d.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status);return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view live tables"}),!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view tables."})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - View Only"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"View live tables and their status."})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",c.length]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",c.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),o?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tables..."})]}):0===c.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber||e.number]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType||"Cash Game"})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats||8]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,sa.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]})]}),(0,sa.jsxs)("button",{onClick:()=>{a(e),n(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83c\udfaf"}),(0,sa.jsx)("span",{children:"View Table Hologram"})]})]},e.id))})]}),l&&s&&(0,sa.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 overflow-y-auto",children:(0,sa.jsx)(xd,{tableId:s.id,onClose:()=>{n(!1),a(null)},isManagerMode:!0,isViewOnly:!0,tables:d})})]})}function fd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),{data:l,isLoading:n}=ml({queryKey:["tournaments",t],queryFn:()=>wr.Re.getTournaments(t),enabled:!!t}),i=Array.isArray(l)?l:(null===l||void 0===l?void 0:l.tournaments)||(null===l||void 0===l?void 0:l.data)||[],o=Array.isArray(i)?i:[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Tournaments"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view tournament information"}),!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view tournaments."})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Tournament List - View Only"}),n?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tournaments..."})]}):0===o.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No tournaments found"})]}):(0,sa.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Tournament"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),e.buyIn&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,sa.jsxs)("button",{onClick:()=>a(e),className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,sa.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Tournament"}),(0,sa.jsx)("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),s.buyIn&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,sa.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function yd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),{data:l,isLoading:n}=ml({queryKey:["rummy-tournaments",t],queryFn:()=>wr.Re.getTournaments(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]}),i=l||[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tournaments"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view rummy tournament details"})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"All Rummy Tournaments"}),n?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===i.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tournaments found"})]}):(0,sa.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Rummy Tournament"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),(0,sa.jsxs)("p",{className:"text-sm text-emerald-400",children:["Variant: ",e.rummyVariant||"Points Rummy"]}),e.buyIn&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,sa.jsxs)("button",{onClick:()=>a(e),className:"bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,sa.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Rummy Tournament"}),(0,sa.jsx)("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Rummy Variant"}),(0,sa.jsx)("p",{className:"text-emerald-400 font-semibold",children:s.rummyVariant||"Points Rummy"})]}),s.buyIn&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,sa.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function vd(){const e=me(),t=ra(),[s,a]=(0,r.useState)("Player Management"),[l,n]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const t=localStorage.getItem("clubId");t?n(t):e("/login")},[e]),(0,r.useEffect)(()=>{const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("greuser")||"{}");t.id||s.userId?(t.mustResetPassword||s.mustResetPassword)&&d(!0):e("/login")},[e]);const{data:m,isLoading:x}=ml({queryKey:["clubPlayers",l],queryFn:()=>wr.bS.getPlayers(l),enabled:!!l}),{data:h=[],isLoading:p}=ml({queryKey:["pendingPlayers",l],queryFn:()=>wr.bS.getPendingApprovalPlayers(l),enabled:!!l}),{data:b=[],isLoading:g}=ml({queryKey:["suspendedPlayers",l],queryFn:()=>wr.bS.getSuspendedPlayers(l),enabled:!!l}),{data:f}=ml({queryKey:["club",l],queryFn:()=>wr.Od.getClub(l),enabled:!!l}),y=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("greuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("greuser",JSON.stringify(t)),d(!1),u({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),v=o&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("greuser")||"{}"),a=t.email||s.email;a?c.currentPassword&&c.newPassword&&c.confirmPassword?c.newPassword===c.confirmPassword?c.newPassword.length<8?jr.error("Password must be at least 8 characters"):y.mutate({email:a,currentPassword:c.currentPassword,newPassword:c.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:c.currentPassword,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:c.newPassword,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:c.confirmPassword,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:y.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:y.isLoading?"Resetting...":"Reset Password"})]})]})}),j=["Player Management","Notifications","Tables & Waitlist","Tournaments","Chat","Push Notifications","Leave Management"],w=null!==f&&void 0!==f&&f.rummyEnabled?[...j,"Rummy"]:j;return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[v,(0,sa.jsx)(_o,{activeItem:s,setActiveItem:a,menuItems:w,onSignOut:()=>{localStorage.clear(),e("/login")}}),(0,sa.jsx)("main",{className:"lg:pl-80 min-h-screen",children:(0,sa.jsxs)("div",{className:"p-6 space-y-6",children:[l&&(0,sa.jsx)(To,{selectedClubId:l}),"Player Management"===s&&(0,sa.jsx)(vl,{selectedClubId:l,playersData:m,playersLoading:x,pendingPlayers:h,pendingLoading:p,suspendedPlayers:b,suspendedLoading:g,onRefresh:()=>{t.invalidateQueries(["pendingPlayers",l]),t.invalidateQueries(["clubPlayers",l]),t.invalidateQueries(["suspendedPlayers",l])}}),"Tables & Waitlist"===s&&(0,sa.jsx)(gd,{selectedClubId:l}),"Tournaments"===s&&(0,sa.jsx)(fd,{selectedClubId:l}),"Chat"===s&&l&&(0,sa.jsx)(lo,{clubId:l}),"Notifications"===s&&l&&(0,sa.jsx)(Ao,{selectedClubId:l,recipientType:"staff"}),"Push Notifications"===s&&(0,sa.jsx)(Vl,{selectedClubId:l}),"Leave Management"===s&&l&&(0,sa.jsx)(bd,{clubId:l,userRole:"GRE"}),"Rummy"===s&&(0,sa.jsx)(yd,{selectedClubId:l}),!["Player Management","Tables & Waitlist","Tournaments","Chat","Notifications","Push Notifications","Rummy"].includes(s)&&(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Welcome to GRE Portal"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Select an option from the sidebar to get started."})]})]})})]})}function jd(e){let{role:t,roleDisplayName:s,redirectPath:a,gradientFrom:l,gradientTo:n,description:o}=e;const[d,c]=(0,r.useState)({email:"",password:""}),[u,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(!1),p=me();(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),s="".concat(t.toLowerCase(),"user"),r=JSON.parse(localStorage.getItem(s)||"{}");if(e.id||r.userId){((e.role||r.role)===t||"MASTER_ADMIN"===t&&e.isMasterAdmin)&&p(a,{replace:!0})}},[p,t,a]);const b=e=>{c((0,i.A)((0,i.A)({},d),{},{[e.target.name]:e.target.value}))};return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"max-w-md w-full mx-4",children:[(0,sa.jsxs)("div",{className:"text-center mb-8",children:[(0,sa.jsxs)("div",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r ".concat(l," ").concat(n," drop-shadow-lg mb-4"),children:[s," Portal"]}),(0,sa.jsx)("p",{className:"text-gray-300",children:o})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-8 shadow-2xl border border-gray-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Sign In"}),u&&(0,sa.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg mb-4",children:u}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(""),h(!0);try{const e=await wr.R2.login(d.email,d.password),i=e.clubRoles&&e.clubRoles.length>0;if(i&&("SUPER_ADMIN"===t||"MASTER_ADMIN"===t))throw new Error("Club staff (".concat(e.clubRoles.map(e=>e.role).join(", "),") should use /login portal, not ").concat(s," portal."));let o=!1;var r;if("SUPER_ADMIN"===t)o=(null===(r=e.tenantRoles)||void 0===r?void 0:r.some(e=>"SUPER_ADMIN"===e.role))&&!i;else if("MASTER_ADMIN"===t)o=e.user.isMasterAdmin&&!i;else{var l,n;o=(null===(l=e.clubRoles)||void 0===l?void 0:l.some(e=>e.role===t))||(null===(n=e.tenantRoles)||void 0===n?void 0:n.some(e=>e.role===t))}if(!o)throw new Error("You don't have ".concat(s," access. Please use the correct portal."));const c={id:e.user.id,email:d.email,displayName:e.user.displayName,role:t,mustResetPassword:e.user.mustResetPassword||!1};localStorage.setItem("".concat(t.toLowerCase(),"user"),JSON.stringify({email:d.email,role:t,userId:e.user.id,displayName:e.user.displayName,mustResetPassword:e.user.mustResetPassword||!1})),"SUPER_ADMIN"!==t&&"ADMIN"!==t||localStorage.setItem("user",JSON.stringify(c)),p(a)}catch(lu){console.error("Login error:",lu),m(lu.message||"Invalid email or password. Please try again.")}finally{h(!1)}},className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Email Address"}),(0,sa.jsx)("input",{type:"email",name:"email",value:d.email,onChange:b,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Password"}),(0,sa.jsx)("input",{type:"password",name:"password",value:d.password,onChange:b,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r ".concat(l," ").concat(n," hover:opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"),children:x?"Signing In...":"Sign In to ".concat(s," Portal")})]}),(0,sa.jsx)("div",{className:"mt-6 p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:(0,sa.jsxs)("p",{className:"text-blue-300 text-sm text-center",children:[(0,sa.jsx)("strong",{children:"Note:"})," Please use your registered credentials",(0,sa.jsx)("br",{}),"Contact admin if you need access"]})}),(0,sa.jsx)("div",{className:"mt-6 text-center",children:(0,sa.jsx)("button",{onClick:()=>p("/"),className:"text-emerald-400 hover:text-emerald-300 text-sm underline",children:"\u2190 Back to Home"})})]})]})})}const wd=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"documents";try{var a;const r=Date.now(),l=Math.random().toString(36).substring(2,15),n=e.name.split(".").pop(),i="".concat(s,"/").concat(t,"/").concat(r,"-").concat(l,".").concat(n),o=(null===(a=e.type)||void 0===a?void 0:a.startsWith("video/"))||!1,{signedUrl:d,publicUrl:c}=await wr.Dv.createPushNotificationUploadUrl(t,i,o);return await wr.Dv.uploadToSignedUrl(d,e),c}catch(r){throw console.error("Storage upload error:",r),new Error("Failed to upload document: ".concat(r.message||"Unknown error"))}},Nd=[{value:0,label:"Sunday",short:"Sun"},{value:1,label:"Monday",short:"Mon"},{value:2,label:"Tuesday",short:"Tue"},{value:3,label:"Wednesday",short:"Wed"},{value:4,label:"Thursday",short:"Thu"},{value:5,label:"Friday",short:"Fri"},{value:6,label:"Saturday",short:"Sat"}];function Sd(e){var t,s;let{selectedClubId:a}=e;const[l,n]=(0,r.useState)("templates"),[o,d]=(0,r.useState)([]),[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)({startDate:(new Date).toISOString().split("T")[0],periodType:"weekly",overwriteExisting:!1}),[v,j]=(0,r.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:new Date(Date.now()+6048e5).toISOString().split("T")[0]}),[w,N]=(0,r.useState)(null),[S,C]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&(k(),A())},[a]);const k=async()=>{try{const e=await(0,wr.AT)("/clubs/".concat(a,"/roster/templates"));e.success&&d(e.templates||[])}catch(e){console.error("Error loading templates:",e),alert("Failed to load roster templates")}},A=async()=>{try{const e=await wr.staffAPI.getAllStaffMembers(a);e.success&&u(e.staff||[])}catch(e){console.error("Error loading staff:",e)}},P=c.filter(e=>!o.some(t=>t.staffId===e.id)&&"Active"===e.status),T=(null===w||void 0===w||null===(t=w.staff)||void 0===t?void 0:t.filter(e=>""===S||e.staffName.toLowerCase().includes(S.toLowerCase())))||[];return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex gap-2 border-b border-gray-700",children:[{id:"templates",label:"Templates",icon:"\ud83d\udc65"},{id:"generate",label:"Generate Roster",icon:"\ud83d\udcc5"},{id:"overview",label:"Roster Overview",icon:"\ud83d\udcca"}].map(e=>(0,sa.jsxs)("button",{onClick:()=>n(e.id),className:"px-4 py-2 font-medium transition-colors ".concat(l===e.id?"text-orange-500 border-b-2 border-orange-500":"text-gray-400 hover:text-gray-300"),children:[(0,sa.jsx)("span",{className:"mr-2",children:e.icon}),e.label]},e.id))}),"templates"===l&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-white mb-4",children:["Roster Templates (",o.length,")"]}),0===o.length?(0,sa.jsx)("p",{className:"text-gray-400 text-center py-8",children:"No roster templates created yet. Create templates for staff members below."}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:o.map(e=>(0,sa.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-white font-semibold",children:e.staffName}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.staffRole})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat(e.isActive?"bg-green-500/20 text-green-400":"bg-gray-600 text-gray-400"),children:e.isActive?"Active":"Inactive"})]}),(0,sa.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Shift Time:"}),(0,sa.jsxs)("span",{className:"text-white ml-2",children:[e.defaultShiftStartTime.substring(0,5)," - ",e.defaultShiftEndTime.substring(0,5),e.shiftCrossesMidnight&&" (next day)"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Off Days:"}),(0,sa.jsx)("div",{className:"flex flex-wrap gap-1 mt-1",children:0===e.offDays.length?(0,sa.jsx)("span",{className:"text-gray-500 text-xs",children:"No off days"}):e.offDays.map(e=>{var t;return(0,sa.jsx)("span",{className:"px-2 py-1 bg-orange-500/20 text-orange-400 rounded text-xs",children:null===(t=Nd.find(t=>t.value===e))||void 0===t?void 0:t.short},e)})})]})]}),(0,sa.jsxs)("div",{className:"flex gap-2 mt-4",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{p((0,i.A)((0,i.A)({},e),{},{defaultShiftStartTime:e.defaultShiftStartTime.substring(0,5),defaultShiftEndTime:e.defaultShiftEndTime.substring(0,5)})),g(!0)})(e),className:"flex-1 px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors text-sm",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this roster template?"))try{await(0,wr.AT)("/clubs/".concat(a,"/roster/templates/").concat(e),{method:"DELETE"}),alert("Template deleted successfully"),k()}catch(t){console.error("Error deleting template:",t),alert("Failed to delete template")}})(e.id),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded transition-colors text-sm",children:"Delete"})]})]},e.id))})]}),P.length>0&&(0,sa.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,sa.jsxs)("h2",{className:"text-xl font-bold text-white mb-4",children:["Staff Without Templates (",P.length,")"]}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:P.map(e=>(0,sa.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"mb-3",children:[(0,sa.jsx)("h3",{className:"text-white font-semibold",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.role}),e.email&&(0,sa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.email})]}),(0,sa.jsx)("button",{onClick:()=>(e=>{p({staffId:e.id,staffName:e.name,staffRole:e.role,offDays:[],defaultShiftStartTime:"18:00",defaultShiftEndTime:"02:00",shiftCrossesMidnight:!0,isActive:!0,notes:""}),g(!0)})(e),className:"w-full px-3 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded transition-colors text-sm",children:"Create Template"})]},e.id))})]})]}),"generate"===l&&(0,sa.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Generate Roster"}),0===o.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("p",{className:"text-gray-400 mb-4",children:"You need to create roster templates first before generating a roster."}),(0,sa.jsx)("button",{onClick:()=>n("templates"),className:"px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded transition-colors",children:"Go to Templates"})]}):(0,sa.jsxs)("div",{className:"max-w-2xl space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:f.startDate,onChange:e=>y(t=>(0,i.A)((0,i.A)({},t),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Period Type"}),(0,sa.jsxs)("div",{className:"flex gap-4",children:[(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"radio",value:"weekly",checked:"weekly"===f.periodType,onChange:e=>y(t=>(0,i.A)((0,i.A)({},t),{},{periodType:e.target.value})),className:"text-orange-600"}),(0,sa.jsx)("span",{className:"text-white",children:"Weekly (7 days)"})]}),(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"radio",value:"monthly",checked:"monthly"===f.periodType,onChange:e=>y(t=>(0,i.A)((0,i.A)({},t),{},{periodType:e.target.value})),className:"text-orange-600"}),(0,sa.jsx)("span",{className:"text-white",children:"Monthly (rest of the month)"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",checked:f.overwriteExisting,onChange:e=>y(t=>(0,i.A)((0,i.A)({},t),{},{overwriteExisting:e.target.checked})),className:"rounded text-orange-600"}),(0,sa.jsx)("span",{className:"text-white",children:"Overwrite existing shifts in this period"})]}),f.overwriteExisting&&(0,sa.jsx)("p",{className:"text-sm text-yellow-500 mt-1",children:"\u26a0\ufe0f Warning: This will delete and recreate all shifts in the selected period"})]}),(0,sa.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-white font-medium mb-2",children:"Summary"}),(0,sa.jsxs)("ul",{className:"text-sm text-gray-300 space-y-1",children:[(0,sa.jsxs)("li",{children:["\u2022 ",o.length," staff members with templates"]}),(0,sa.jsxs)("li",{children:["\u2022 Period: ",f.periodType]}),(0,sa.jsxs)("li",{children:["\u2022 Start: ",f.startDate]}),"monthly"===f.periodType&&(0,sa.jsx)("li",{children:"\u2022 Will create roster till end of month (28/29/30/31 days based on month)"}),"weekly"===f.periodType&&(0,sa.jsx)("li",{children:"\u2022 Will create 7 days roster"})]})]}),(0,sa.jsx)("button",{onClick:async()=>{let e="";if("monthly"===f.periodType){const t=new Date(f.startDate),s=new Date(t.getFullYear(),t.getMonth()+1,0).getDate(),a=new Date(t.getFullYear(),t.getMonth(),s).toISOString().split("T")[0];e="End: ".concat(a," (").concat(s," days in month)")}else{const t=new Date(f.startDate),s=new Date(t);s.setDate(t.getDate()+6),e="End: ".concat(s.toISOString().split("T")[0]," (7 days)")}if(window.confirm("Generate ".concat(f.periodType," roster from ").concat(f.startDate,"?\n").concat(e).concat(f.overwriteExisting?"\n\n\u26a0\ufe0f This will overwrite existing shifts!":"")))try{x(!0);const e=await(0,wr.AT)("/clubs/".concat(a,"/roster/generate"),{method:"POST",body:JSON.stringify(f)});e.success&&alert("Roster generated successfully!\n\n"+"Period: ".concat(f.periodType,"\n")+"Start: ".concat(e.startDate,"\n")+"End: ".concat(e.endDate,"\n")+"Shifts Created: ".concat(e.totalShiftsCreated,"\n")+"Staff Processed: ".concat(e.staffProcessed))}catch(t){console.error("Error generating roster:",t),alert(t.message||"Failed to generate roster")}finally{x(!1)}},disabled:m,className:"w-full px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded transition-colors disabled:opacity-50",children:m?"Generating...":"Generate Roster"})]})]}),"overview"===l&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-gray-800 rounded-lg p-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white",children:"Roster Calendar View"}),(0,sa.jsxs)("div",{className:"flex gap-4 text-xs",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("div",{className:"w-4 h-4 bg-green-500/20 border border-green-500/50 rounded"}),(0,sa.jsx)("span",{className:"text-gray-400",children:"Working"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("div",{className:"w-4 h-4 bg-yellow-500/20 border border-yellow-500/50 rounded"}),(0,sa.jsx)("span",{className:"text-gray-400",children:"On Leave"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("div",{className:"w-4 h-4 bg-red-500/20 border border-red-500/50 rounded"}),(0,sa.jsx)("span",{className:"text-gray-400",children:"Off Day"})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:v.startDate,onChange:e=>j(t=>(0,i.A)((0,i.A)({},t),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:v.endDate,onChange:e=>j(t=>(0,i.A)((0,i.A)({},t),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:async()=>{try{x(!0);const e=await(0,wr.AT)("/clubs/".concat(a,"/roster/overview?startDate=").concat(v.startDate,"&endDate=").concat(v.endDate));e.success&&N(e)}catch(e){console.error("Error loading overview:",e),alert("Failed to load roster overview")}finally{x(!1)}},disabled:m,className:"px-6 py-2 bg-orange-600 hover:bg-orange-700 text-white rounded transition-colors disabled:opacity-50",children:m?"Loading...":"Load"})})]}),w&&w.staff&&w.staff.length>0&&(0,sa.jsx)("div",{className:"mb-4",children:(0,sa.jsx)("input",{type:"text",placeholder:"Search staff by name...",value:S,onChange:e=>C(e.target.value),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})}),T.length>0&&(0,sa.jsx)("div",{className:"space-y-6",children:T.map(e=>(0,sa.jsxs)("div",{className:"bg-gray-700 rounded-lg p-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.staffName}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.staffRole})]}),(0,sa.jsx)("div",{className:"text-right",children:(0,sa.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,sa.jsx)("span",{className:"text-green-400 font-semibold",children:e.workingDaysCount})," working",e.leaveDaysCount>0&&(0,sa.jsxs)(sa.Fragment,{children:[" \xb7 ",(0,sa.jsx)("span",{className:"text-yellow-400 font-semibold",children:e.leaveDaysCount})," on leave"]}),e.offDaysCount>0&&(0,sa.jsxs)(sa.Fragment,{children:[" \xb7 ",(0,sa.jsx)("span",{className:"text-red-400",children:e.offDaysCount})," off"]})]})})]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("div",{className:"grid grid-cols-7 gap-2 min-w-[700px]",children:[Nd.map(e=>(0,sa.jsx)("div",{className:"text-center py-2 text-xs font-semibold text-gray-400 border-b border-gray-600",children:e.short},e.value)),e.shifts.map(e=>{const t=e.isOffDay,s=e.onLeave;let a="bg-green-500/20 border-green-500/50",r="text-green-400";return s?(a="bg-yellow-500/20 border-yellow-500/50",r="text-yellow-400"):t&&(a="bg-red-500/20 border-red-500/50",r="text-red-400"),(0,sa.jsxs)("div",{className:"p-2 rounded text-center text-xs ".concat(a," border"),children:[(0,sa.jsx)("div",{className:"font-semibold mb-1 ".concat(r),children:new Date(e.date).getDate()}),s?(0,sa.jsx)("div",{className:"text-yellow-400 font-semibold text-[10px]",children:"ON LEAVE"}):t?(0,sa.jsx)("div",{className:"text-red-400 font-semibold",children:"OFF"}):(0,sa.jsxs)("div",{className:"text-gray-300",children:[(0,sa.jsx)("div",{children:e.startTime}),(0,sa.jsx)("div",{className:"text-gray-500 text-[8px]",children:"to"}),(0,sa.jsx)("div",{children:e.endTime})]})]},e.id)})]})}),e.defaultShiftTimes&&(0,sa.jsxs)("div",{className:"mt-3 text-xs text-gray-400",children:["Default: ",e.defaultShiftTimes.start," - ",e.defaultShiftTimes.end,e.defaultShiftTimes.crossesMidnight&&" (next day)"]})]},e.staffId))}),w&&(!w.staff||0===w.staff.length)&&(0,sa.jsx)("div",{className:"text-center py-12 text-gray-400",children:"No roster data found for the selected period."}),0===T.length&&(null===w||void 0===w||null===(s=w.staff)||void 0===s?void 0:s.length)>0&&(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:['No staff found matching "',S,'"']})]})}),b&&h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:(0,sa.jsx)("div",{className:"bg-gray-800 rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:(0,sa.jsxs)("div",{className:"p-6",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:[h.id?"Edit":"Create"," Roster Template"]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Staff Member"}),(0,sa.jsx)("input",{type:"text",value:"".concat(h.staffName," (").concat(h.staffRole,")"),disabled:!0,className:"w-full px-4 py-2 bg-gray-700 text-gray-400 rounded"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Shift Start Time"}),(0,sa.jsx)("input",{type:"time",value:h.defaultShiftStartTime,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{defaultShiftStartTime:e.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Shift End Time"}),(0,sa.jsx)("input",{type:"time",value:h.defaultShiftEndTime,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{defaultShiftEndTime:e.target.value})),className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500"})]})]}),(0,sa.jsx)("div",{children:(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",checked:h.shiftCrossesMidnight,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{shiftCrossesMidnight:e.target.checked})),className:"rounded text-orange-600"}),(0,sa.jsx)("span",{className:"text-white",children:"Shift crosses midnight (ends next day)"})]})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Weekly Off Days"}),(0,sa.jsx)("div",{className:"grid grid-cols-4 sm:grid-cols-7 gap-2",children:Nd.map(e=>(0,sa.jsx)("button",{onClick:()=>{return t=e.value,void p(e=>{const s=e.offDays.includes(t)?e.offDays.filter(e=>e!==t):[...e.offDays,t].sort();return(0,i.A)((0,i.A)({},e),{},{offDays:s})});var t},className:"px-3 py-2 rounded transition-colors text-sm ".concat(h.offDays.includes(e.value)?"bg-orange-600 text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"),children:e.short},e.value))}),(0,sa.jsx)("p",{className:"text-sm text-gray-400 mt-2",children:"These days will be marked as off days in the roster"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Notes (Optional)"}),(0,sa.jsx)("textarea",{value:h.notes||"",onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{notes:e.target.value})),rows:"3",className:"w-full px-4 py-2 bg-gray-700 text-white rounded focus:outline-none focus:ring-2 focus:ring-orange-500",placeholder:"Any additional notes about this roster template..."})]}),(0,sa.jsx)("div",{children:(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"checkbox",checked:h.isActive,onChange:e=>p(t=>(0,i.A)((0,i.A)({},t),{},{isActive:e.target.checked})),className:"rounded text-orange-600"}),(0,sa.jsx)("span",{className:"text-white",children:"Active (will be used when generating roster)"})]})})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:async()=>{try{x(!0);const e={staffName:h.staffName,staffRole:h.staffRole,offDays:h.offDays,defaultShiftStartTime:h.defaultShiftStartTime+":00",defaultShiftEndTime:h.defaultShiftEndTime+":00",shiftCrossesMidnight:h.shiftCrossesMidnight,isActive:h.isActive,notes:h.notes||""};h.id?await(0,wr.AT)("/clubs/".concat(a,"/roster/templates/").concat(h.id),{method:"PATCH",body:JSON.stringify(e)}):(e.staffId=h.staffId,await(0,wr.AT)("/clubs/".concat(a,"/roster/templates"),{method:"POST",body:JSON.stringify(e)})),alert("Roster template saved successfully!"),g(!1),p(null),k()}catch(e){console.error("Error saving template:",e),alert(e.message||"Failed to save template")}finally{x(!1)}},disabled:m,className:"flex-1 px-6 py-3 bg-orange-600 hover:bg-orange-700 text-white font-semibold rounded transition-colors disabled:opacity-50",children:m?"Saving...":"Save Template"}),(0,sa.jsx)("button",{onClick:()=>{g(!1),p(null)},className:"px-6 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors",children:"Cancel"})]})]})})})]})}const Cd=[{value:"Super Admin",label:"Super Admin"},{value:"Admin",label:"Admin"},{value:"Manager",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE (Guest Relations Executive)"},{value:"Cashier",label:"Cashier"},{value:"Affiliate",label:"Affiliate"},{value:"Dealer",label:"Dealer"},{value:"FNB",label:"FNB"},{value:"Staff",label:"Staff (Custom Role)"}];function kd(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)("staff"),n="HR"===JSON.parse(localStorage.getItem("user")||"{}").role,[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)(null),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)({role:"",status:"",search:"",sortBy:"createdAt",sortOrder:"DESC"}),[S,C]=(0,r.useState)({name:"",role:"Super Admin",email:"",phone:"",employeeId:"",customRoleName:"",aadharDocumentUrl:"",panDocumentUrl:""}),[k,A]=(0,r.useState)({reason:""}),[P,T]=(0,r.useState)(!1),[I,_]=(0,r.useState)(!1),{data:D,isLoading:E}=ml({queryKey:["staff-management",t,w],queryFn:()=>wr.staffAPI.getAllStaffMembers(t,w),enabled:!!t}),R=bl({mutationFn:e=>wr.staffAPI.createStaffMember(t,e),onSuccess:e=>{jr.success("Staff member created successfully!"),e.staff.tempPasswordPlainText&&(j({password:e.staff.tempPasswordPlainText,name:e.staff.name,email:e.staff.email,role:e.staff.role,affiliateCode:e.staff.affiliateCode,isReset:!1}),p(!0)),s.invalidateQueries(["staff-management",t]),d(!1),U()},onError:e=>{jr.error(e.message||"Failed to create staff member")}}),L=bl({mutationFn:e=>{let{staffId:s,data:a}=e;return wr.staffAPI.updateStaffMember(t,s,a)},onSuccess:()=>{jr.success("Staff member updated successfully!"),s.invalidateQueries(["staff-management",t]),u(!1),y(null),U()},onError:e=>{jr.error(e.message||"Failed to update staff member")}}),O=bl({mutationFn:e=>{let{staffId:s,reason:a}=e;return wr.staffAPI.suspendStaffMember(t,s,a)},onSuccess:()=>{jr.success("Staff member suspended successfully!"),s.invalidateQueries(["staff-management",t]),x(!1),y(null),A({reason:""})},onError:e=>{jr.error(e.message||"Failed to suspend staff member")}}),M=bl({mutationFn:e=>wr.staffAPI.reactivateStaffMember(t,e),onSuccess:()=>{jr.success("Staff member reactivated successfully!"),s.invalidateQueries(["staff-management",t])},onError:e=>{jr.error(e.message||"Failed to reactivate staff member")}}),F=bl({mutationFn:e=>wr.staffAPI.deleteStaffMember(t,e),onSuccess:()=>{jr.success("Staff member deleted successfully!"),s.invalidateQueries(["staff-management",t])},onError:e=>{jr.error(e.message||"Failed to delete staff member")}}),B=bl({mutationFn:async e=>{const s=await wr.staffAPI.resetStaffPassword(t,e),a=null===D||void 0===D?void 0:D.staff.find(t=>t.id===e);return(0,i.A)((0,i.A)({},s),{},{staff:a})},onSuccess:e=>{var t,s,a,r;jr.success("Password reset successfully!"),j({password:e.tempPassword,name:null===(t=e.staff)||void 0===t?void 0:t.name,email:null===(s=e.staff)||void 0===s?void 0:s.email,role:null===(a=e.staff)||void 0===a?void 0:a.role,affiliateCode:null===(r=e.staff)||void 0===r?void 0:r.affiliateCode,isReset:!0}),p(!0)},onError:e=>{jr.error(e.message||"Failed to reset password")}}),q=async(e,s)=>{"aadhar"===s?T(!0):_(!0);try{const a=await wd(e,t,"staff-kyc");C("aadhar"===s?(0,i.A)((0,i.A)({},S),{},{aadharDocumentUrl:a}):(0,i.A)((0,i.A)({},S),{},{panDocumentUrl:a})),jr.success("".concat("aadhar"===s?"Aadhar":"PAN"," card uploaded successfully"))}catch(a){jr.error("Failed to upload ".concat("aadhar"===s?"Aadhar":"PAN"," card"))}finally{"aadhar"===s?T(!1):_(!1)}},U=()=>{C({name:"",role:"Super Admin",email:"",phone:"",employeeId:"",customRoleName:"",aadharDocumentUrl:"",panDocumentUrl:""})},z=(null===D||void 0===D?void 0:D.staff)||[],W=e=>{switch(e){case"Active":return"bg-green-500/20 text-green-300 border-green-500";case"Suspended":return"bg-red-500/20 text-red-300 border-red-500";case"On Break":return"bg-yellow-500/20 text-yellow-300 border-yellow-500";default:return"bg-gray-500/20 text-gray-300 border-gray-500"}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Staff Management"}),"staff"===a&&(0,sa.jsx)("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all",children:"\u2795 Create Staff"})]}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>l("staff"),className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===a?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Staff Members"}),(0,sa.jsx)("button",{onClick:()=>l("roster"),className:"px-6 py-3 font-semibold transition-colors ".concat("roster"===a?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Roster Management"}),(0,sa.jsx)("button",{onClick:()=>l("leave"),className:"px-6 py-3 font-semibold transition-colors ".concat("leave"===a?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Leave Management"})]}),"roster"===a&&(0,sa.jsx)(Sd,{selectedClubId:t}),"leave"===a&&t&&(0,sa.jsx)(bd,{clubId:t}),"staff"===a&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Role"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.role,onChange:e=>N((0,i.A)((0,i.A)({},w),{},{role:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Roles"}),Cd.map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Status"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.status,onChange:e=>N((0,i.A)((0,i.A)({},w),{},{status:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"Active",children:"Active"}),(0,sa.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,sa.jsx)("option",{value:"On Break",children:"On Break"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Sort By"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.sortBy,onChange:e=>N((0,i.A)((0,i.A)({},w),{},{sortBy:e.target.value})),children:[(0,sa.jsx)("option",{value:"createdAt",children:"Date Created"}),(0,sa.jsx)("option",{value:"name",children:"Name"}),(0,sa.jsx)("option",{value:"role",children:"Role"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Name, email, phone...",value:w.search,onChange:e=>N((0,i.A)((0,i.A)({},w),{},{search:e.target.value}))})]})]})}),E?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading staff..."})]}):0===z.length?(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Staff Members Yet"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Create your first staff member to get started"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 gap-4",children:z.map(e=>(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-purple-600 transition-all",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(W(e.status)),children:e.status}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold bg-purple-500/20 text-purple-300 border border-purple-500",children:"Staff"===e.role&&e.customRoleName?e.customRoleName:e.role}),e.affiliateCode&&(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-mono font-semibold bg-yellow-500/20 text-yellow-300 border border-yellow-500",children:e.affiliateCode})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Email"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:e.email})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Phone"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:e.phone})]}),e.employeeId&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Employee ID"}),(0,sa.jsx)("p",{className:"text-white font-mono font-semibold",children:e.employeeId})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"Created"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:new Date(e.createdAt).toLocaleDateString()})]})]}),"Suspended"===e.status&&e.suspendedReason&&(0,sa.jsx)("div",{className:"mt-3 bg-red-900/30 border border-red-500/50 rounded-lg p-3",children:(0,sa.jsxs)("p",{className:"text-sm text-red-300",children:[(0,sa.jsx)("strong",{children:"Suspension Reason:"})," ",e.suspendedReason]})})]}),(0,sa.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{y(e),g(!0)})(e),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View"}),!n&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:()=>(e=>{y(e),C({name:e.name,role:e.role,email:e.email,phone:e.phone,employeeId:e.employeeId||"",customRoleName:e.customRoleName||"",aadharDocumentUrl:e.aadharDocumentUrl||"",panDocumentUrl:e.panDocumentUrl||""}),u(!0)})(e),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),"Active"===e.status&&(0,sa.jsx)("button",{onClick:()=>(e=>{y(e),x(!0)})(e),className:"bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Suspend"}),"Suspended"===e.status&&(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Reactivate ".concat(e.name,"?"))&&M.mutate(e.id)})(e),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Reactivate"}),(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Reset password for ".concat(e.name,"?"))&&B.mutate(e.id)})(e),className:"bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Reset Password"}),(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete ".concat(e.name,"? This action cannot be undone."))&&F.mutate(e.id)})(e),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Delete"})]})]})]})},e.id))}),o&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New Staff Member"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Full Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"John Doe",value:S.name,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{name:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Role *"}),(0,sa.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:S.role,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{role:e.target.value})),children:Cd.map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),"Staff"===S.role&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Role Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"e.g., Security, Maintenance, etc.",value:S.customRoleName,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{customRoleName:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Email *"}),(0,sa.jsx)("input",{type:"email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"john@example.com",value:S.email,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{email:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Phone *"}),(0,sa.jsx)("input",{type:"tel",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"+91 1234567890",value:S.phone,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{phone:e.target.value}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee ID (Optional)"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"EMP001",value:S.employeeId,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{employeeId:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Aadhar Card"}),(0,sa.jsx)("input",{type:"file",accept:"image/*,application/pdf",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",onChange:e=>e.target.files[0]&&q(e.target.files[0],"aadhar"),disabled:P}),P&&(0,sa.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Uploading..."}),S.aadharDocumentUrl&&(0,sa.jsx)("p",{className:"text-sm text-green-400 mt-1",children:"\u2713 Uploaded"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"PAN Card"}),(0,sa.jsx)("input",{type:"file",accept:"image/*,application/pdf",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",onChange:e=>e.target.files[0]&&q(e.target.files[0],"pan"),disabled:I}),I&&(0,sa.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Uploading..."}),S.panDocumentUrl&&(0,sa.jsx)("p",{className:"text-sm text-green-400 mt-1",children:"\u2713 Uploaded"})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{S.name&&S.email&&S.phone?"Staff"!==S.role||S.customRoleName?S.aadharDocumentUrl?S.panDocumentUrl?R.mutate(S):jr.error("PAN document is required to create a staff member"):jr.error("Aadhar document is required to create a staff member"):jr.error("Please enter a custom role name"):jr.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:R.isLoading?"Creating...":"Create Staff Member"}),(0,sa.jsx)("button",{onClick:()=>{d(!1),U()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),c&&f&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-blue-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Staff Member"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Full Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.name,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{name:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Email *"}),(0,sa.jsx)("input",{type:"email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.email,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{email:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Phone *"}),(0,sa.jsx)("input",{type:"tel",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.phone,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{phone:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee ID"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.employeeId,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{employeeId:e.target.value}))})]})]}),"Staff"===S.role&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Role Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.customRoleName,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{customRoleName:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{S.name&&S.email&&S.phone?S.aadharDocumentUrl?S.panDocumentUrl?L.mutate({staffId:f.id,data:S}):jr.error("PAN document is required. Cannot remove PAN document."):jr.error("Aadhar document is required. Cannot remove Aadhar document."):jr.error("Please fill in all required fields")},disabled:L.isLoading,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:L.isLoading?"Updating...":"Update Staff Member"}),(0,sa.jsx)("button",{onClick:()=>{u(!1),y(null),U()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),m&&f&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-orange-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Suspend Staff Member"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["You are about to suspend ",(0,sa.jsx)("strong",{children:f.name}),". Please provide a reason:"]}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 h-32",placeholder:"Enter suspension reason (minimum 5 characters)",value:k.reason,onChange:e=>A({reason:e.target.value})}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{!k.reason||k.reason.length<5?jr.error("Please provide a reason (minimum 5 characters)"):O.mutate({staffId:f.id,reason:k.reason})},disabled:O.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:O.isLoading?"Suspending...":"Suspend"}),(0,sa.jsx)("button",{onClick:()=>{x(!1),y(null),A({reason:""})},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),h&&v&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:v.isReset?"Password Reset Successfully!":"Staff Member Created Successfully!"}),(0,sa.jsxs)("div",{className:"bg-green-900/30 border border-green-500/50 rounded-lg p-4 mb-4",children:[(0,sa.jsxs)("p",{className:"text-white mb-2",children:[(0,sa.jsx)("strong",{children:"Name:"})," ",v.name]}),(0,sa.jsxs)("p",{className:"text-white mb-2",children:[(0,sa.jsx)("strong",{children:"Role:"})," ",v.role]}),(0,sa.jsxs)("p",{className:"text-white mb-2",children:[(0,sa.jsx)("strong",{children:"Email:"})," ",v.email]}),v.affiliateCode&&(0,sa.jsxs)("p",{className:"text-yellow-300 mb-2 font-mono",children:[(0,sa.jsx)("strong",{children:"Affiliate Code:"})," ",v.affiliateCode]}),(0,sa.jsx)("p",{className:"text-white mb-2",children:(0,sa.jsx)("strong",{children:"Temporary Password:"})}),(0,sa.jsx)("div",{className:"bg-slate-700 rounded p-3 font-mono text-lg text-center text-green-300 select-all",children:v.password})]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["\u26a0\ufe0f Please save this password and share it with the staff member."," ",v.isReset?"They will be required to reset it on next login.":"They will be required to reset it on first login. This password will not be shown again."]}),(0,sa.jsx)("button",{onClick:()=>{p(!1),j(null)},className:"w-full bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"I've Saved the Password"})]})}),b&&f&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Staff Member Details"}),(0,sa.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"Basic Information"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Full Name"}),(0,sa.jsx)("p",{className:"text-white font-semibold text-lg",children:f.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Role"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:"Staff"===f.role&&f.customRoleName?f.customRoleName:f.role})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Email"}),(0,sa.jsx)("p",{className:"text-white",children:f.email})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Phone"}),(0,sa.jsx)("p",{className:"text-white",children:f.phone})]}),f.employeeId&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Employee ID"}),(0,sa.jsx)("p",{className:"text-white font-mono",children:f.employeeId})]}),f.affiliateCode&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Affiliate Code"}),(0,sa.jsx)("p",{className:"text-yellow-300 font-mono font-bold text-lg",children:f.affiliateCode})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Status"}),(0,sa.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(W(f.status)),children:f.status})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Created At"}),(0,sa.jsx)("p",{className:"text-white",children:new Date(f.createdAt).toLocaleString()})]})]}),"Suspended"===f.status&&f.suspendedReason&&(0,sa.jsxs)("div",{className:"mt-4 bg-red-900/30 border border-red-500/50 rounded-lg p-4",children:[(0,sa.jsxs)("p",{className:"text-sm text-red-300",children:[(0,sa.jsx)("strong",{children:"Suspension Reason:"})," ",f.suspendedReason]}),f.suspendedAt&&(0,sa.jsxs)("p",{className:"text-sm text-red-300 mt-2",children:[(0,sa.jsx)("strong",{children:"Suspended At:"})," ",new Date(f.suspendedAt).toLocaleString()]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"KYC Documents"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Aadhar Card"}),f.aadharDocumentUrl?(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"text-2xl",children:"\ud83c\udd94"}),(0,sa.jsx)("span",{className:"text-white",children:"Aadhar Card"})]}),(0,sa.jsx)("span",{className:"text-green-400 text-sm",children:"\u2713 Uploaded"})]})}),(0,sa.jsx)("a",{href:f.aadharDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"View Document"}),(0,sa.jsx)("a",{href:f.aadharDocumentUrl,download:!0,className:"block w-full bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"Download Document"})]}):(0,sa.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500 border-dashed",children:(0,sa.jsx)("p",{className:"text-gray-400 text-center",children:"No Aadhar card uploaded"})})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"PAN Card"}),f.panDocumentUrl?(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500",children:(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc4"}),(0,sa.jsx)("span",{className:"text-white",children:"PAN Card"})]}),(0,sa.jsx)("span",{className:"text-green-400 text-sm",children:"\u2713 Uploaded"})]})}),(0,sa.jsx)("a",{href:f.panDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"View Document"}),(0,sa.jsx)("a",{href:f.panDocumentUrl,download:!0,className:"block w-full bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"Download Document"})]}):(0,sa.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500 border-dashed",children:(0,sa.jsx)("p",{className:"text-gray-400 text-center",children:"No PAN card uploaded"})})]})]})]}),(f.aadharDocumentUrl||f.panDocumentUrl)&&(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"Document Preview"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.aadharDocumentUrl&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Aadhar Card Preview"}),(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-600",children:[f.aadharDocumentUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,sa.jsx)("img",{src:f.aadharDocumentUrl,alt:"Aadhar Card",className:"w-full h-auto rounded-lg max-h-64 object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}):null,(0,sa.jsxs)("div",{style:{display:"none"},className:"text-center text-gray-400 py-8",children:[(0,sa.jsx)("p",{className:"text-lg mb-2",children:"\ud83d\udcc4"}),(0,sa.jsx)("p",{children:'PDF Document - Click "View Document" to open'})]})]})]}),f.panDocumentUrl&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"PAN Card Preview"}),(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-600",children:[f.panDocumentUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,sa.jsx)("img",{src:f.panDocumentUrl,alt:"PAN Card",className:"w-full h-auto rounded-lg max-h-64 object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}):null,(0,sa.jsxs)("div",{style:{display:"none"},className:"text-center text-gray-400 py-8",children:[(0,sa.jsx)("p",{className:"text-lg mb-2",children:"\ud83d\udcc4"}),(0,sa.jsx)("p",{children:'PDF Document - Click "View Document" to open'})]})]})]})]})]})]}),(0,sa.jsx)("div",{className:"mt-6 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Close"})})]})})]})]})}function Ad(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(1),[l,n]=(0,r.useState)({search:"",startDate:"",endDate:"",staffId:""}),{data:o,isLoading:d}=ml({queryKey:["salary-payments",t,s,l],queryFn:async()=>await wr.Od.getSalaryPayments(t,(0,i.A)({page:s,limit:10},l)),enabled:!!t}),c=(null===o||void 0===o?void 0:o.payments)||[],u=(null===o||void 0===o?void 0:o.totalPages)||1,m=(null===o||void 0===o?void 0:o.total)||0,x=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Salary History"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only: Salary payment history for all employees"}),!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view salary history."})}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 space-y-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsx)("input",{type:"text",placeholder:"Search by staff name...",value:l.search,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{search:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("input",{type:"date",placeholder:"Start Date",value:l.startDate,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("input",{type:"date",placeholder:"End Date",value:l.endDate,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("button",{onClick:()=>n({search:"",startDate:"",endDate:"",staffId:""}),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg text-white transition-colors",children:"Clear Filters"})]})}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:d?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading salary history..."})]}):0===c.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcb0"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No salary payments found"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,sa.jsxs)("span",{children:["Showing ",10*(s-1)+1,"-",Math.min(10*s,m)," of ",m," payments"]})}),(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Staff Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Pay Period"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Base Salary"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Overtime"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Deductions"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Gross Amount"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Net Amount"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Payment Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:c.map(e=>{var t,s;return(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium",children:(null===(t=e.staff)||void 0===t?void 0:t.name)||"N/A"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.payPeriod||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-white",children:x(e.baseSalary)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-white",children:x(e.overtimeAmount)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-red-400",children:x(e.deductions)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:x(e.grossAmount)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-green-400 font-bold",children:x(e.netAmount)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:(s=e.paymentDate,s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Processed"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:e.status||"Processed"})})]},e.id)})})]}),u>1&&(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",s," of ",u]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>a(e=>Math.max(1,e-1)),disabled:1===s,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>a(e=>Math.min(u,e+1)),disabled:s>=u,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})})]})}function Pd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(!1),l=(()=>{const e=ko(),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)})(),[n,o]=(0,r.useState)({staffId:"",loginDate:l,loginTime:"",logoutDate:l,logoutTime:"",notes:""}),d=ra(),[c,u]=(0,r.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],searchTerm:""}),{data:m}=ml({queryKey:["staff-list",t],queryFn:()=>wr.staffAPI.getAllStaffMembers(t,{status:"Active"}),enabled:!!t}),x=(null===m||void 0===m?void 0:m.staff)||[],{data:h=[],isLoading:p}=ml({queryKey:["attendance",t,c.startDate,c.endDate],queryFn:()=>wr.Od.getAttendanceRecords(t,c.startDate,c.endDate),enabled:!!t}),b=(0,r.useMemo)(()=>{if(!c.searchTerm.trim())return h;const e=c.searchTerm.toLowerCase().trim();return h.filter(t=>{const s=(t.staffName||"").toLowerCase(),a=(t.staffEmail||t.email||"").toLowerCase();return s.includes(e)||a.includes(e)})},[h,c.searchTerm]),{data:g}=ml({queryKey:["attendanceStats",t,c.startDate,c.endDate],queryFn:()=>wr.Od.getAttendanceStats(t,c.startDate,c.endDate),enabled:!!t}),f=bl({mutationFn:async e=>{const s=e.loginDate&&e.loginTime?"".concat(e.loginDate,"T").concat(e.loginTime,":00"):null,a=e.logoutDate&&e.logoutTime?"".concat(e.logoutDate,"T").concat(e.logoutTime,":00"):null,r={staffId:e.staffId,date:e.loginDate,loginTime:s,logoutTime:a};return e.notes&&e.notes.trim()&&(r.notes=e.notes.trim()),await wr.Od.createAttendanceRecord(t,r)},onSuccess:()=>{jr.success("Attendance record created successfully!"),d.invalidateQueries(["attendance",t]),d.invalidateQueries(["attendanceStats",t]),a(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},onError:e=>{jr.error(e.message||"Failed to create attendance record")}}),y=e=>e?new Date(e).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-",v=(e,t)=>{if(!e||!t)return"-";const s=new Date(e);return((new Date(t)-s)/36e5).toFixed(2)};return console.log({attendanceRecords:b}),(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Attendance Management"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Track login and logout times for all employees"})]}),(0,sa.jsx)("button",{onClick:()=>a(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl",children:"+ Create Attendance"})]}),!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view attendance records."})}),g&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Total Records"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:g.totalRecords||0})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Active Sessions"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:g.activeSessions||0})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Completed Sessions"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-green-400",children:g.completedSessions||0})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Avg Hours/Day"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:g.avgHours||"0.00"})]})]}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsx)("input",{type:"date",placeholder:"Start Date",value:c.startDate,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("input",{type:"date",placeholder:"End Date",value:c.endDate,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("input",{type:"text",placeholder:"Search by staff name or email...",value:c.searchTerm,onChange:e=>u((0,i.A)((0,i.A)({},c),{},{searchTerm:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("button",{onClick:()=>{const e=(new Date).toISOString().split("T")[0];u({startDate:e,endDate:e,searchTerm:""})},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg text-white transition-colors",children:"Reset to Today"})]})}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:p?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading attendance records..."})]}):0===b.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\u23f0"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No attendance records found"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"p-4 text-sm text-gray-400",children:["Showing ",b.length," attendance record(s)"]}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Staff Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Role"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Login Time"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Logout Time"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Hours"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,sa.jsx)("tbody",{className:"divide-y divide-slate-700",children:b.map(e=>(0,sa.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,sa.jsx)("td",{className:"px-6 py-4 font-medium",children:e.staffName}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.staffRole||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-gray-400",children:j(e.date)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-green-400 font-medium",children:y(e.loginTime)}),(0,sa.jsx)("td",{className:"px-6 py-4 text-red-400 font-medium",children:e.logoutTime?y(e.logoutTime):"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:e.totalHours?"".concat(e.totalHours," hrs"):"-"!==v(e.loginTime,e.logoutTime)?"".concat(v(e.loginTime,e.logoutTime)," hrs"):"-"}),(0,sa.jsx)("td",{className:"px-6 py-4",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("active"===e.status?"bg-blue-600/20 text-blue-400":"completed"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"active"===e.status?"Active":"completed"===e.status?"Completed":"Incomplete"})})]},e.id))})]})})]})}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-2xl w-full border border-blue-600 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Create Attendance Record"}),(0,sa.jsx)("button",{onClick:()=>{a(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!n.staffId||!n.loginDate||!n.loginTime||!n.logoutDate||!n.logoutTime)return void jr.error("Please fill in all required fields");const t=new Date("".concat(n.loginDate,"T").concat(n.loginTime));new Date("".concat(n.logoutDate,"T").concat(n.logoutTime))<=t?jr.error("Logout date & time must be after login date & time"):f.mutate(n)},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Staff Member *"}),(0,sa.jsxs)("select",{value:n.staffId,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{staffId:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,sa.jsx)("option",{value:"",children:"Select Staff Member"}),x.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," - ",e.role||"Staff"," ",e.employeeId?"(".concat(e.employeeId,")"):""]},e.id))]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Login Date & Time *"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Login Date"}),(0,sa.jsx)("input",{type:"date",value:n.loginDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{loginDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Login Time"}),(0,sa.jsx)("input",{type:"time",value:n.loginTime,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{loginTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Logout Date & Time *"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Logout Date"}),(0,sa.jsx)("input",{type:"date",value:n.logoutDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{logoutDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",min:n.loginDate,required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Logout Time"}),(0,sa.jsx)("input",{type:"time",value:n.logoutTime,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{logoutTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"\ud83d\udca1 Logout can be on a different day (e.g., login 7pm Dec 25, logout 2am Dec 26)"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes (Optional)"}),(0,sa.jsx)("textarea",{value:n.notes,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{notes:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Additional notes..."})]}),(0,sa.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{a(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:f.isLoading,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium py-3 rounded-lg transition-all disabled:opacity-50",children:f.isLoading?"Creating...":"Create Attendance"})]})]})]})})]});function j(e){return e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}}function Td(e){var t,s,a;let{clubId:l}=e;const[n,i]=(0,r.useState)([]),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[b,g]=(0,r.useState)(!0),f=(0,r.useRef)(null);(0,r.useEffect)(()=>{l&&y()},[l]),(0,r.useEffect)(()=>{if(o){v();const e=setInterval(v,3e3);return()=>clearInterval(e)}},[o]),(0,r.useEffect)(()=>{w()},[c]);const y=async()=>{try{g(!0);const e=await wr.h2.getStaffChatSessions(l,{page:1,limit:100});i(e.sessions||[])}catch(e){console.error("Error loading sessions:",e)}finally{g(!1)}},v=async()=>{if(o)try{const e=await wr.h2.getSessionMessages(l,o.id,{page:1,limit:100});u(e.messages||[])}catch(e){console.error("Error loading messages:",e)}},j=async()=>{if(m.trim()&&o)try{await wr.h2.sendMessage(l,o.id,m),x(""),v()}catch(e){console.error("Error sending message:",e)}},w=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},N=n.filter(e=>{var t,s,a,r,l,n,i;const o=h.toLowerCase(),d=(null===(t=e.otherStaff)||void 0===t?void 0:t.name)||(null===(s=e.staffRecipient)||void 0===s?void 0:s.name)||(null===(a=e.staffInitiator)||void 0===a?void 0:a.name)||"",c=(null===(r=e.otherStaff)||void 0===r?void 0:r.email)||(null===(l=e.staffRecipient)||void 0===l?void 0:l.email)||(null===(n=e.staffInitiator)||void 0===n?void 0:n.email)||"";return(null===(i=e.subject)||void 0===i?void 0:i.toLowerCase().includes(o))||d.toLowerCase().includes(o)||c.toLowerCase().includes(o)});return(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 flex flex-col",children:[(0,sa.jsx)("div",{className:"p-4 border-b border-slate-700",children:(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(kn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,sa.jsx)("input",{type:"text",placeholder:"Search sessions...",value:h,onChange:e=>p(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"})]})}),(0,sa.jsx)("div",{className:"flex-1 overflow-y-auto",children:b?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading sessions..."}):0===N.length?(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No chat sessions found"}):N.map(e=>{var t,s,a,r;return(0,sa.jsxs)("div",{onClick:()=>d(e),className:"p-4 border-b border-slate-700 cursor-pointer hover:bg-slate-700 transition-colors ".concat((null===o||void 0===o?void 0:o.id)===e.id?"bg-slate-700":""),children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsx)("h3",{className:"font-semibold text-white",children:e.subject||(null===(t=e.otherStaff)||void 0===t?void 0:t.name)||"No Subject"}),e.unreadCount>0&&(0,sa.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:(null===(s=e.otherStaff)||void 0===s?void 0:s.name)||(null===(a=e.staffRecipient)||void 0===a?void 0:a.name)||(null===(r=e.staffInitiator)||void 0===r?void 0:r.name)||"Unknown Staff"}),(0,sa.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.lastMessageAt?new Date(e.lastMessageAt).toLocaleString():""})]},e.id)})})]}),(0,sa.jsx)("div",{className:"lg:col-span-2 bg-slate-800 rounded-xl border border-slate-700 flex flex-col",children:o?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white",children:(null===(t=o.otherStaff)||void 0===t?void 0:t.name)||(null===(s=o.staffRecipient)||void 0===s?void 0:s.name)||(null===(a=o.staffInitiator)||void 0===a?void 0:a.name)||"Staff Member"}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:o.subject?"Subject: ".concat(o.subject):"Chat Conversation"})]}),(0,sa.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[c.map(e=>(0,sa.jsx)("div",{className:"flex ".concat("HR"===e.senderRole?"justify-end":"justify-start"),children:(0,sa.jsxs)("div",{className:"max-w-[70%] rounded-lg p-3 ".concat("HR"===e.senderRole?"bg-blue-600 text-white":"bg-slate-700 text-white"),children:[(0,sa.jsx)("p",{className:"text-sm",children:e.message}),(0,sa.jsx)("p",{className:"text-xs opacity-70 mt-1",children:new Date(e.createdAt).toLocaleTimeString()})]})},e.id)),(0,sa.jsx)("div",{ref:f})]}),(0,sa.jsxs)("div",{className:"p-4 border-t border-slate-700 flex gap-2",children:[(0,sa.jsx)("input",{type:"text",value:m,onChange:e=>x(e.target.value),onKeyPress:e=>"Enter"===e.key&&j(),placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,sa.jsx)("button",{onClick:j,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:(0,sa.jsx)(Nn,{})})]})]}):(0,sa.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)(Dn,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,sa.jsx)("p",{children:"Select a chat session to view messages"})]})})})]})}function Id(e){let{clubId:t}=e;return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,sa.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-lg mb-6",children:[(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,sa.jsx)(Dn,{className:"text-4xl"}),"Staff Chat"]}),(0,sa.jsx)("p",{className:"text-white/80 mt-2",children:"Communicate with staff members in real-time"})]}),(0,sa.jsx)(Td,{clubId:t})]})})}function _d(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null}=e;const[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ml({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4}),{data:g}=ml({queryKey:["unreadChatCounts",p],queryFn:()=>wr.h2.getUnreadCounts(p),enabled:!!p,refetchInterval:1e4}),f=((null===g||void 0===g?void 0:g.staffChats)||0)+((null===g||void 0===g?void 0:g.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(n&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[n,d]);const{data:y}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=v.email||"hr@pokerroom.com",w=v.displayName||"HR Manager",N=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[d&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-purple-500 to-pink-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!n),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-purple-500/20 via-pink-600/30 to-rose-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?n?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-300 to-rose-400 drop-shadow-lg mb-6",children:"HR Portal"}),(0,sa.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"HR"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:w}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:j})]})]}),u&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?jr.error("Password must be at least 8 characters"):N.mutate({email:j,currentPassword:x.currentPassword,newPassword:x.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:N.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),y&&y.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:y.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:a.map((e,a)=>(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-purple-400 to-pink-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-purple-400/20 hover:to-pink-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount}),"Chat"===e&&f>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f>9?"9+":f})]})},a))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function Dd(){const[e,t]=(0,r.useState)("Staff Management"),s=me(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("hruser")||"{}");(e.mustResetPassword||t.mustResetPassword)&&l(!0)},[]);const d=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("hruser")||"{}");t.mustResetPassword=!1,localStorage.setItem("hruser",JSON.stringify(t)),l(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),c=a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("hruser")||"{}"),a=t.email||s.email;a?n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword===n.confirmPassword?n.newPassword.length<8?jr.error("Password must be at least 8 characters"):d.mutate({email:a,currentPassword:n.currentPassword,newPassword:n.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:d.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:d.isLoading?"Resetting...":"Reset Password"})]})]})}),[u,m]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("clubId");e&&m(e)},[]);const x=[{id:"S001",name:"Sarah Johnson",position:"Dealer",department:"Operations",email:"sarah.j@email.com",phone:"+91 98765 43210",startDate:"2024-01-15",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-10"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-01-10"},{type:"ID Card",status:"Verified",uploadedDate:"2024-01-15"},{type:"Medical Certificate",status:"Verified",uploadedDate:"2024-01-12"}]},{id:"S002",name:"Mike Chen",position:"Floor Manager",department:"Operations",email:"mike.c@email.com",phone:"+91 98765 43211",startDate:"2023-11-20",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2023-11-15"},{type:"Passport",status:"Verified",uploadedDate:"2023-11-15"},{type:"Experience Certificate",status:"Pending Review",uploadedDate:"2024-01-20"},{type:"ID Card",status:"Verified",uploadedDate:"2023-11-20"}]},{id:"S003",name:"Emma Davis",position:"Cashier",department:"Operations",email:"emma.d@email.com",phone:"+91 98765 43212",startDate:"2024-02-01",status:"On Leave",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-28"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-01-28"},{type:"Medical Certificate",status:"Verified",uploadedDate:"2024-02-01"},{type:"ID Card",status:"Verified",uploadedDate:"2024-02-01"}]},{id:"S004",name:"John Smith",position:"Security",department:"Security",email:"john.s@email.com",phone:"+91 98765 43213",startDate:"2023-12-10",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2023-12-05"},{type:"Driving License",status:"Verified",uploadedDate:"2023-12-05"},{type:"ID Card",status:"Verified",uploadedDate:"2023-12-10"}]},{id:"S005",name:"David Wilson",position:"Dealer",department:"Operations",email:"david.w@email.com",phone:"+91 98765 43214",startDate:"2024-01-20",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-18"},{type:"ID Card",status:"Verified",uploadedDate:"2024-01-20"}]},{id:"S006",name:"Lisa Brown",position:"Kitchen Staff",department:"Kitchen",email:"lisa.b@email.com",phone:"+91 98765 43215",startDate:"2024-02-05",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-02-03"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-02-03"},{type:"ID Card",status:"Verified",uploadedDate:"2024-02-05"}]}],[h]=(0,r.useState)((new Date).toISOString().split("T")[0]),[p,b]=(0,r.useState)(()=>x.map(e=>({staffId:e.id,staffName:e.name,position:e.position,department:e.department,date:h,loginTime:"",logoutTime:"",status:"pending"}))),[g,f]=(0,r.useState)([{id:"SR001",staffId:"S001",staffName:"Sarah Johnson",requestType:"leave",subject:"Leave Application",message:"I need to take leave on 2024-01-25 for personal reasons.",leaveStartDate:"2024-01-25",leaveEndDate:"2024-01-26",leaveType:"Personal Leave",status:"pending",submittedDate:new Date(Date.now()-1728e5).toISOString(),hrResponse:null},{id:"SR002",staffId:"S002",staffName:"Mike Chen",requestType:"chat",subject:"Need to discuss schedule",message:"Can we discuss my upcoming schedule change?",status:"in_progress",submittedDate:new Date(Date.now()-864e5).toISOString(),hrResponse:"Sure, let's schedule a meeting."},{id:"SR003",staffId:"S003",staffName:"Emma Davis",requestType:"leave",subject:"Medical Leave Request",message:"I need medical leave for upcoming surgery.",leaveStartDate:"2024-02-05",leaveEndDate:"2024-02-10",leaveType:"Medical Leave",status:"approved",submittedDate:new Date(Date.now()-432e6).toISOString(),hrResponse:"Approved. Please submit medical certificate."}]),[y,v]=(0,r.useState)("all"),[j,w]=(0,r.useState)(null),[N,S]=(0,r.useState)(""),[C,k]=(0,r.useState)("pending"),[A,P]=(0,r.useState)(null),[T,I]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),[E,R]=(0,r.useState)(null),[L,O]=(0,r.useState)(""),[M,F]=(0,r.useState)([{id:1,name:"Rahul Sharma",documentType:"PAN Card",docUrl:"#",status:"Pending",submittedDate:"2024-02-20",playerId:"P001",documentNumber:"ABCDE1234F",email:"rahul@example.com",phone:"+91 9876543210"},{id:2,name:"Priya Patel",documentType:"Aadhaar",docUrl:"#",status:"Pending",submittedDate:"2024-02-21",playerId:"P002",documentNumber:"1234 5678 9012",email:"priya@example.com",phone:"+91 9876543211"}]),[B,q]=(0,r.useState)([{id:1,name:"Amit Kumar",playerId:"P003",fields:[{field:"Phone Number",oldValue:"+91 9876543210",newValue:"+91 9123456780"},{field:"Address",oldValue:"Old Address",newValue:"New Address"}],status:"Pending",requestedDate:"2024-02-22"},{id:2,name:"Sneha Gupta",playerId:"P004",fields:[{field:"Email",oldValue:"sneha.old@test.com",newValue:"sneha.new@test.com"}],status:"Pending",requestedDate:"2024-02-23"}]),[U,z]=(0,r.useState)([{id:"P001",name:"John Doe",email:"john.doe@example.com",phone:"+91 9876543210",status:"Active",kycStatus:"Verified",registrationDate:"2024-01-15",referredBy:"Agent X",balance:5e3},{id:"P002",name:"Jane Smith",email:"jane.smith@example.com",phone:"+91 9876543211",status:"Active",kycStatus:"Pending",registrationDate:"2024-01-10",referredBy:"Agent Y",balance:2500},{id:"P003",name:"Rajesh Kumar",email:"rajesh@example.com",phone:"+91 9876543212",status:"Suspended",kycStatus:"Verified",registrationDate:"2024-01-08",referredBy:"Agent Z",balance:0},{id:"P004",name:"Priya Sharma",email:"priya@example.com",phone:"+91 9876543213",status:"Pending Approval",kycStatus:"Pending",registrationDate:"2024-01-20",referredBy:"Agent A",balance:0}]),[W,H]=(0,r.useState)([{id:1,name:"Rajesh Kumar",email:"rajesh@example.com",phone:"+91 9876543212",registrationDate:"2024-02-18",status:"Pending",referredBy:"Agent X"},{id:2,name:"Meera Singh",email:"meera@example.com",phone:"+91 9876543213",registrationDate:"2024-02-19",status:"Pending",referredBy:"Agent Y"}]),[V,J]=(0,r.useState)([{id:1,name:"Vikram Patel",email:"vikram@example.com",reason:"Suspicious Activity",suspensionDate:"2024-02-15",status:"Suspended",duration:"temporary",suspensionDays:7}]),[K,Q]=(0,r.useState)([{id:"PC001",playerId:"P001",playerName:"Alex Johnson",status:"open",lastMessage:"Need assistance with account",lastMessageTime:new Date(Date.now()-18e4).toISOString(),messages:[{id:"M1",sender:"player",senderName:"Alex Johnson",text:"Need assistance with account",timestamp:new Date(Date.now()-18e4).toISOString()}],createdAt:new Date(Date.now()-6e5).toISOString()}]),[G,Y]=(0,r.useState)([{id:"SC001",staffId:"ST001",staffName:"Sarah Johnson",staffRole:"Dealer",status:"open",lastMessage:"Need assistance with schedule",lastMessageTime:new Date(Date.now()-3e5).toISOString(),messages:[{id:"M3",sender:"staff",senderName:"Sarah Johnson",text:"Need assistance with schedule",timestamp:new Date(Date.now()-3e5).toISOString()}],createdAt:new Date(Date.now()-3e5).toISOString()}]);(0,r.useEffect)(()=>{const e=(new Date).toISOString().split("T")[0];h!==e&&b(x.map(t=>({staffId:t.id,staffName:t.name,position:t.position,department:t.department,date:e,loginTime:"",logoutTime:"",status:"pending"})))},[h]);const $="all"===y?g:g.filter(e=>e.status===y),Z=(e,t)=>{P(s=>{const a=[...s.documents];return a[e]=(0,i.A)((0,i.A)({},a[e]),{},{status:t}),(0,i.A)((0,i.A)({},s),{},{documents:a})});x.map(s=>{if(s.id===A.id){const a=[...s.documents];return a[e]=(0,i.A)((0,i.A)({},a[e]),{},{status:t}),(0,i.A)((0,i.A)({},s),{},{documents:a})}return s});alert('Document status updated to "'.concat(t,'"'))};(0,r.useEffect)(()=>{A||(I(!1),D(""),R(null),O(""))},[A]);const X=()=>{localStorage.clear(),sessionStorage.clear(),s("/hr/signin")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(_d,{activeItem:e,setActiveItem:t,menuItems:["Staff Management","Notifications","Salary History","Attendance Management","Chat"],onSignOut:X}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-pink-500 to-rose-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["HR Portal - ",e]}),(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:"Staff management, attendance, and performance"})]}),(0,sa.jsx)("button",{onClick:X,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),u&&(0,sa.jsx)(To,{selectedClubId:u}),"Staff Management"===e&&(0,sa.jsx)(kd,{selectedClubId:u}),"Salary History"===e&&(0,sa.jsx)(Ad,{selectedClubId:u}),"Attendance Management"===e&&(0,sa.jsx)(Pd,{selectedClubId:u}),"Chat"===e&&(0,sa.jsx)(Id,{clubId:u}),"Notifications"===e&&u&&(0,sa.jsx)(Ao,{selectedClubId:u,recipientType:"staff"}),!1,"Staff Directory"===e&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-cyan-600/30 via-blue-500/20 to-indigo-700/30 rounded-xl shadow-md border border-cyan-800/40",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Staff Directory"}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg border border-blue-400/30",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("Active"===e.status?"bg-green-500/30 text-green-300":"bg-yellow-500/30 text-yellow-300"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-1",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Position: ",e.position]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Department: ",e.department]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Email: ",e.email]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Phone: ",e.phone]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Start Date: ",e.startDate]})]}),(0,sa.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,sa.jsx)("button",{className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>P(e),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded text-sm",children:"View Details"})]})]},e.id))})]}),A&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-xl shadow-2xl border border-purple-500/30 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Staff Details"}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Complete information for ",A.name]})]}),(0,sa.jsx)("button",{onClick:()=>P(null),className:"text-white/70 hover:text-white text-2xl font-bold",children:"\xd7"})]})}),(0,sa.jsxs)("div",{className:"p-6 space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-white/10 pb-2",children:"Basic Information"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Staff ID"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.id})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Full Name"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Position"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.position})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Department"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.department})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Email"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.email})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Phone"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.phone})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Start Date"}),(0,sa.jsx)("div",{className:"text-white font-medium",children:A.startDate})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("div",{children:(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs border font-medium ".concat("Active"===A.status?"bg-green-500/30 text-green-300 border-green-400/50":"bg-yellow-500/30 text-yellow-300 border-yellow-400/50"),children:A.status})})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b border-white/10 pb-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Document Management"}),(0,sa.jsx)("button",{onClick:()=>I(!T),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:T?"Cancel Upload":"\u2795 Upload Document"})]}),T&&(0,sa.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg border border-indigo-400/30 mb-4",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Upload New Document"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Document Type"}),(0,sa.jsxs)(CustomSelect,{className:"w-full",value:_,onChange:e=>D(e.target.value),children:[(0,sa.jsx)("option",{value:"",children:"Select Document Type"}),(0,sa.jsx)("option",{value:"ID Card",children:"ID Card"}),(0,sa.jsx)("option",{value:"PAN Card",children:"PAN Card"}),(0,sa.jsx)("option",{value:"Aadhaar Card",children:"Aadhaar Card"}),(0,sa.jsx)("option",{value:"Passport",children:"Passport"}),(0,sa.jsx)("option",{value:"Driving License",children:"Driving License"}),(0,sa.jsx)("option",{value:"Educational Certificate",children:"Educational Certificate"}),(0,sa.jsx)("option",{value:"Experience Certificate",children:"Experience Certificate"}),(0,sa.jsx)("option",{value:"Medical Certificate",children:"Medical Certificate"}),(0,sa.jsx)("option",{value:"Contract Document",children:"Contract Document"}),(0,sa.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Upload Document"}),(0,sa.jsxs)("div",{className:"mt-1 border-2 border-dashed border-white/30 rounded-lg p-6 text-center hover:border-indigo-400/50 transition-colors",children:[(0,sa.jsx)("input",{type:"file",id:"document-upload",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{const t=e.target.files[0];t&&(R(t),O(t.name),t.size>10485760&&(alert("File size should be less than 10MB"),R(null),O(""),e.target.value=""))}}),(0,sa.jsxs)("label",{htmlFor:"document-upload",className:"cursor-pointer",children:[(0,sa.jsx)("div",{className:"text-white mb-2",children:L?"\ud83d\udcc4 ".concat(L):"Click to upload or drag and drop"}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:"PNG, JPG, PDF up to 10MB"})]})]})]}),(0,sa.jsx)("button",{onClick:()=>{if(!_||!E)return void alert("Please select document type and upload a file");const e={type:_,status:"Pending Review",uploadedDate:(new Date).toISOString().split("T")[0]};P(t=>(0,i.A)((0,i.A)({},t),{},{documents:[...t.documents||[],e]}));x.map(t=>t.id===A.id?(0,i.A)((0,i.A)({},t),{},{documents:[...t.documents||[],e]}):t);alert('Document "'.concat(_,'" uploaded successfully for ').concat(A.name)),D(""),R(null),O(""),I(!1)},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Upload Document"})]})]}),A.documents&&A.documents.length>0?(0,sa.jsx)("div",{className:"space-y-3",children:A.documents.map((e,t)=>(0,sa.jsx)("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:(0,sa.jsxs)("div",{className:"flex items-start justify-between",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,sa.jsx)("div",{className:"text-white font-medium",children:e.type}),(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs border font-medium ".concat("Verified"===e.status?"bg-green-500/30 text-green-300 border-green-400/50":"Pending Review"===e.status?"bg-yellow-500/30 text-yellow-300 border-yellow-400/50":"bg-red-500/30 text-red-300 border-red-400/50"),children:e.status})]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Uploaded: ",e.uploadedDate]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,sa.jsx)("button",{onClick:()=>alert("Viewing document: ".concat(e.type)),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"\ud83d\udc41\ufe0f View"}),(0,sa.jsx)("button",{onClick:()=>alert("Downloading document: ".concat(e.type)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded text-sm",children:"\u2b07\ufe0f Download"}),"Verified"!==e.status&&(0,sa.jsx)("button",{onClick:()=>Z(t,"Verified"),className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-sm",children:"\u2713 Verify"}),"Pending Review"===e.status&&(0,sa.jsx)("button",{onClick:()=>Z(t,"Rejected"),className:"bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-sm",children:"\u2717 Reject"}),"Verified"===e.status&&(0,sa.jsx)("button",{onClick:()=>Z(t,"Pending Review"),className:"bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-1 rounded text-sm",children:"\u21bb Reset"})]})]})},t))}):(0,sa.jsxs)("div",{className:"text-center py-8 text-gray-400 border border-white/10 rounded-lg bg-white/5",children:[(0,sa.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc4"}),(0,sa.jsx)("div",{children:"No documents uploaded yet"}),(0,sa.jsx)("div",{className:"text-sm mt-2",children:'Click "Upload Document" to add a new document'})]})]}),(0,sa.jsx)("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:()=>P(null),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-3 rounded-lg font-semibold",children:"Close"})})]})]})})]}),"Staff Requests"===e&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-blue-600/30 via-indigo-500/20 to-purple-700/30 rounded-xl shadow-md border border-blue-800/40",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Staff Requests & Applications"}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Filter by Status"}),(0,sa.jsxs)(CustomSelect,{className:"w-full md:w-64",value:y,onChange:e=>v(e.target.value),children:[(0,sa.jsx)("option",{value:"all",children:"All Requests"}),(0,sa.jsx)("option",{value:"pending",children:"Pending"}),(0,sa.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,sa.jsx)("option",{value:"approved",children:"Approved"}),(0,sa.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Staff Requests (",$.length,")"]}),(0,sa.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:$.length>0?$.map(e=>(0,sa.jsxs)("div",{onClick:()=>{w(e),S(e.hrResponse||""),k(e.status)},className:"p-4 rounded-lg border cursor-pointer transition-all ".concat((null===j||void 0===j?void 0:j.id)===e.id?"bg-gradient-to-r from-blue-500/30 to-purple-500/30 border-blue-400/50":"bg-white/5 border-white/10 hover:bg-white/10"),children:[(0,sa.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:e.staffName}),(0,sa.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["ID: ",e.staffId]})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("approved"===e.status?"bg-green-500/30 text-green-300":"rejected"===e.status?"bg-red-500/30 text-red-300":"in_progress"===e.status?"bg-blue-500/30 text-blue-300":"bg-yellow-500/30 text-yellow-300"),children:"approved"===e.status?"Approved":"rejected"===e.status?"Rejected":"in_progress"===e.status?"In Progress":"Pending"})]}),(0,sa.jsx)("div",{className:"text-sm text-white font-medium mb-1",children:"leave"===e.requestType?"\ud83d\udcc5 Leave Application":"\ud83d\udcac Chat Request"}),(0,sa.jsxs)("div",{className:"text-xs text-gray-300 mb-1",children:["Subject: ",e.subject]}),"leave"===e.requestType&&(0,sa.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Leave: ",e.leaveStartDate," to ",e.leaveEndDate," (",e.leaveType,")"]}),(0,sa.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Submitted: ",new Date(e.submittedDate).toLocaleDateString("en-IN")]})]},e.id)):(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:["No ","all"!==y?y:""," requests found"]})})]}),(0,sa.jsx)("div",{className:"bg-white/10 p-4 rounded-lg",children:j?(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Request Details"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Staff Member"}),(0,sa.jsxs)("div",{className:"text-white font-medium",children:[j.staffName," (ID: ",j.staffId,")"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Request Type"}),(0,sa.jsx)("div",{className:"text-white",children:"leave"===j.requestType?"\ud83d\udcc5 Leave Application":"\ud83d\udcac Chat Request"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Subject"}),(0,sa.jsx)("div",{className:"text-white",children:j.subject})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Message"}),(0,sa.jsx)("div",{className:"text-white bg-white/5 p-3 rounded border border-white/10",children:j.message})]}),"leave"===j.requestType&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Leave Type"}),(0,sa.jsx)("div",{className:"text-white",children:j.leaveType})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Start Date"}),(0,sa.jsx)("div",{className:"text-white",children:j.leaveStartDate})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"End Date"}),(0,sa.jsx)("div",{className:"text-white",children:j.leaveEndDate})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Submitted"}),(0,sa.jsx)("div",{className:"text-white",children:new Date(j.submittedDate).toLocaleString("en-IN")})]})]})]}),j.hrResponse&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-gray-400 text-xs",children:"Previous HR Response"}),(0,sa.jsx)("div",{className:"text-white bg-blue-500/20 p-3 rounded border border-blue-400/30",children:j.hrResponse})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"HR Response"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-gray-400",rows:"4",placeholder:"Enter your response...",value:N,onChange:e=>S(e.target.value)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Status"}),(0,sa.jsxs)(CustomSelect,{className:"w-full",value:C,onChange:e=>k(e.target.value),children:[(0,sa.jsx)("option",{value:"pending",children:"Pending"}),(0,sa.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,sa.jsx)("option",{value:"approved",children:"Approved"}),(0,sa.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,sa.jsx)("button",{onClick:()=>{j&&N.trim()?(f(e=>e.map(e=>e.id===j.id?(0,i.A)((0,i.A)({},e),{},{hrResponse:N.trim(),status:C}):e)),alert("Request ".concat("approved"===C?"approved":"rejected"===C?"rejected":"updated"," successfully")),w(null),S(""),k("pending")):alert("Please enter a response")},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Submit Response"})]}):(0,sa.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px] text-gray-400",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udccb"}),(0,sa.jsx)("div",{className:"text-lg",children:"Select a request to view details and respond"})]})})})]})]}),(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-purple-600/30 via-pink-500/20 to-rose-700/30 rounded-xl shadow-md border border-purple-800/40",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Request Summary"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-yellow-300",children:g.filter(e=>"pending"===e.status).length}),(0,sa.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Pending"})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-blue-300",children:g.filter(e=>"in_progress"===e.status).length}),(0,sa.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"In Progress"})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-green-300",children:g.filter(e=>"approved"===e.status).length}),(0,sa.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Approved"})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-red-300",children:g.filter(e=>"rejected"===e.status).length}),(0,sa.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Rejected"})]})]})]})]}),"Performance Reviews"===e&&(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-orange-600/30 via-red-500/20 to-pink-700/30 rounded-xl shadow-md border border-orange-800/40",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Performance Reviews"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Schedule Review"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm",children:"Staff Member"}),(0,sa.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,sa.jsx)("option",{children:"Sarah Johnson - Dealer"}),(0,sa.jsx)("option",{children:"Mike Chen - Floor Manager"}),(0,sa.jsx)("option",{children:"Emma Davis - Cashier"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm",children:"Review Type"}),(0,sa.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,sa.jsx)("option",{children:"Monthly Review"}),(0,sa.jsx)("option",{children:"Quarterly Review"}),(0,sa.jsx)("option",{children:"Annual Review"}),(0,sa.jsx)("option",{children:"Probation Review"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm",children:"Review Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm",children:"Reviewer"}),(0,sa.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,sa.jsx)("option",{children:"HR Manager"}),(0,sa.jsx)("option",{children:"Operations Manager"}),(0,sa.jsx)("option",{children:"General Manager"})]})]}),(0,sa.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Schedule Review"})]})]}),(0,sa.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Upcoming Reviews"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:"Sarah Johnson"}),(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Monthly Review - Due: 2024-01-25"}),(0,sa.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Scheduled"})]}),(0,sa.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:"Mike Chen"}),(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Quarterly Review - Due: 2024-02-01"}),(0,sa.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Pending"})]}),(0,sa.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,sa.jsx)("div",{className:"font-semibold text-white",children:"Emma Davis"}),(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Probation Review - Due: 2024-02-15"}),(0,sa.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Scheduled"})]})]})]})]})]})})]})})]}),c]})}const Ed=["Dashboard","Notifications","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides"];function Rd(e){let{activeItem:t,setActiveItem:s,menuItems:a=Ed,onSignOut:l=null}=e;const[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ml({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4}),{data:g}=ml({queryKey:["unreadChatCounts",p],queryFn:()=>wr.h2.getUnreadCounts(p),enabled:!!p,refetchInterval:1e4}),f=((null===g||void 0===g?void 0:g.staffChats)||0)+((null===g||void 0===g?void 0:g.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(n&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[n,d]);const{data:y}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=v.email||"cashier@pokerroom.com",w=v.displayName||v.name||j.split("@")[0],N=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[d&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!n),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-green-500/20 via-emerald-600/30 to-teal-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?n?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-300 to-teal-400 drop-shadow-lg mb-6",children:"Cashier Portal"}),(0,sa.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"C"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:w}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:j})]})]}),u&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?jr.error("Password must be at least 8 characters"):N.mutate({email:j,currentPassword:x.currentPassword,newPassword:x.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:N.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),y&&y.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:y.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:a.map((e,a)=>(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-green-400 to-emerald-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-green-400/20 hover:to-emerald-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount}),"Chat"===e&&f>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f>9?"9+":f})]})},a))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function Ld(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)(null),[d,c]=(0,r.useState)(1),[u,m]=(0,r.useState)({search:"",startDate:"",endDate:"",staffId:""}),[x,h]=(0,r.useState)({staffId:"",payPeriod:"Weekly",baseSalary:"",overtimeHours:"",overtimeAmount:"",deductions:"",periodStartDate:"",periodEndDate:"",notes:""}),{data:p}=ml({queryKey:["payroll-staff",t],queryFn:()=>wr.oA.getAllStaffForPayroll(t),enabled:!!t}),{data:b,isLoading:g}=ml({queryKey:["salary-payments",t,d,u],queryFn:()=>wr.oA.getSalaryPayments(t,(0,i.A)({page:d,limit:10},u)),enabled:!!t}),f=bl({mutationFn:e=>wr.oA.processSalary(t,e),onSuccess:()=>{jr.success("Salary processed successfully!"),s.invalidateQueries(["salary-payments",t]),l(!1),y()},onError:e=>{jr.error(e.message||"Failed to process salary")}}),y=()=>{h({staffId:"",payPeriod:"Weekly",baseSalary:"",overtimeHours:"",overtimeAmount:"",deductions:"",periodStartDate:"",periodEndDate:"",notes:""}),o(null)},v=(null===p||void 0===p?void 0:p.staff)||[],j=(null===b||void 0===b?void 0:b.payments)||[],w=(null===b||void 0===b?void 0:b.totalPages)||1,N=(null===b||void 0===b?void 0:b.total)||0;return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Employee Salary Processing"}),(0,sa.jsxs)("div",{className:"text-white",children:["Total Records: ",N]})]}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Name or email...",value:u.search,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.startDate,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.endDate,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.staffId,onChange:e=>m((0,i.A)((0,i.A)({},u),{},{staffId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Employees"}),v.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Select Employee to Process Salary"}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:v.map(e=>(0,sa.jsxs)("button",{onClick:()=>(e=>{o(e),h((0,i.A)((0,i.A)({},x),{},{staffId:e.id})),l(!0)})(e),className:"bg-slate-700 hover:bg-slate-600 p-4 rounded-lg text-left transition-colors",children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:e.role}),(0,sa.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.email})]},e.id))})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Salary Payment History"}),g?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===j.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No salary payments found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Employee"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Period"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Pay Period"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Base Salary"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Overtime"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Deductions"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Net Amount"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,sa.jsx)("tbody",{children:j.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:null===(t=e.staff)||void 0===t?void 0:t.name}),(0,sa.jsxs)("td",{className:"text-white p-3 text-sm",children:[new Date(e.periodStartDate).toLocaleDateString()," -"," ",new Date(e.periodEndDate).toLocaleDateString()]}),(0,sa.jsx)("td",{className:"text-white p-3",children:e.payPeriod}),(0,sa.jsxs)("td",{className:"text-right text-white p-3",children:["\u20b9",Number(e.baseSalary).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-green-400 p-3",children:["+\u20b9",Number(e.overtimeAmount).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-red-400 p-3",children:["-\u20b9",Number(e.deductions).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-white font-semibold p-3",children:["\u20b9",Number(e.netAmount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.paymentDate).toLocaleDateString()})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(d-1)+1," to ",Math.min(10*d,N)," of ",N," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(w)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>c(t+1),className:"px-4 py-2 rounded-lg ".concat(d===t+1?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>c(e=>Math.min(w,e+1)),disabled:d===w,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-purple-900/90 to-pink-900/90 rounded-xl p-6 max-w-2xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Process Staff Salary"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Select Staff Member *"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.staffId,onChange:e=>{const t=null===p||void 0===p?void 0:p.staff.find(t=>t.id===e.target.value);h((0,i.A)((0,i.A)({},x),{},{staffId:e.target.value})),o(t)},children:[(0,sa.jsx)("option",{value:"",children:"Select an option"}),v.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," - ",e.role]},e.id))]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Pay Period *"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.payPeriod,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{payPeriod:e.target.value})),children:[(0,sa.jsx)("option",{value:"Weekly",children:"Weekly"}),(0,sa.jsx)("option",{value:"Bi-weekly",children:"Bi-weekly"}),(0,sa.jsx)("option",{value:"Monthly",children:"Monthly"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Period Start Date *"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.periodStartDate,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{periodStartDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Period End Date *"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.periodEndDate,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{periodEndDate:e.target.value}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Base Salary *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.baseSalary,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{baseSalary:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Overtime Hours"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"0",value:x.overtimeHours,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{overtimeHours:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Overtime Amount"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.overtimeAmount,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{overtimeAmount:e.target.value}))})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Deductions"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.deductions,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{deductions:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 h-20",placeholder:"Additional notes...",value:x.notes,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{notes:e.target.value}))})]}),x.baseSalary&&(0,sa.jsxs)("div",{className:"bg-purple-800/30 border border-purple-500 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Calculation Summary"}),(0,sa.jsxs)("div",{className:"space-y-1 text-white",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{children:"Base Salary:"}),(0,sa.jsxs)("span",{children:["\u20b9",Number(x.baseSalary||0).toFixed(2)]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,sa.jsx)("span",{children:"Overtime:"}),(0,sa.jsxs)("span",{children:["+\u20b9",Number(x.overtimeAmount||0).toFixed(2)]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-red-400",children:[(0,sa.jsx)("span",{children:"Deductions:"}),(0,sa.jsxs)("span",{children:["-\u20b9",Number(x.deductions||0).toFixed(2)]})]}),(0,sa.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t border-purple-500 pt-2 mt-2",children:[(0,sa.jsx)("span",{children:"Net Amount:"}),(0,sa.jsxs)("span",{children:["\u20b9",(Number(x.baseSalary||0)+Number(x.overtimeAmount||0)-Number(x.deductions||0)).toFixed(2)]})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{x.staffId&&x.baseSalary&&x.periodStartDate&&x.periodEndDate?f.mutate((0,i.A)((0,i.A)({},x),{},{baseSalary:Number(x.baseSalary),overtimeHours:x.overtimeHours?Number(x.overtimeHours):0,overtimeAmount:x.overtimeAmount?Number(x.overtimeAmount):0,deductions:x.deductions?Number(x.deductions):0})):jr.error("Please fill in all required fields")},disabled:f.isLoading,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:f.isLoading?"Processing...":"Process Salary"}),(0,sa.jsx)("button",{onClick:()=>{l(!1),y()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function Od(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)("tips"),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(1),[p,b]=(0,r.useState)(1),[g,f]=(0,r.useState)({search:"",startDate:"",endDate:"",dealerId:""}),[y,v]=(0,r.useState)({search:"",startDate:"",endDate:"",dealerId:""}),[j,w]=(0,r.useState)({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5}),[N,S]=(0,r.useState)({dealerId:"",tipDate:(new Date).toISOString().split("T")[0],totalTips:"",notes:""}),[C,k]=(0,r.useState)({dealerId:"",cashoutDate:(new Date).toISOString().split("T")[0],amount:"",notes:""}),{data:A}=ml({queryKey:["payroll-dealers",t],queryFn:()=>wr.oA.getDealersForPayroll(t),enabled:!!t}),{data:P}=ml({queryKey:["tip-settings",t,null===u||void 0===u?void 0:u.id],queryFn:()=>wr.oA.getTipSettings(t,null===u||void 0===u?void 0:u.id),enabled:!!t&&!!u&&n});(0,r.useEffect)(()=>{null!==P&&void 0!==P&&P.settings&&w({clubHoldPercentage:Number(P.settings.clubHoldPercentage),dealerSharePercentage:Number(P.settings.dealerSharePercentage),floorManagerPercentage:Number(P.settings.floorManagerPercentage)})},[P]);const{data:T,isLoading:I}=ml({queryKey:["dealer-tips",t,x,g],queryFn:()=>wr.oA.getDealerTips(t,(0,i.A)({page:x,limit:10},g)),enabled:!!t}),{data:_,isLoading:D}=ml({queryKey:["dealer-cashouts",t,p,y],queryFn:()=>wr.oA.getDealerCashouts(t,(0,i.A)({page:p,limit:10},y)),enabled:!!t}),E=bl({mutationFn:e=>{const s={clubHoldPercentage:parseFloat(e.clubHoldPercentage)||0,dealerSharePercentage:parseFloat(e.dealerSharePercentage)||0,floorManagerPercentage:parseFloat(e.floorManagerPercentage)||0};return wr.oA.updateTipSettings(t,s,null===u||void 0===u?void 0:u.id)},onSuccess:()=>{jr.success("Tip settings updated successfully!"),s.invalidateQueries(["tip-settings",t,null===u||void 0===u?void 0:u.id])},onError:e=>{jr.error(e.message||"Failed to update tip settings")}}),R=bl({mutationFn:e=>wr.oA.processDealerTips(t,e),onSuccess:()=>{jr.success("Dealer tips processed successfully!"),s.invalidateQueries(["dealer-tips",t]),o(!1),m(null),S({dealerId:"",tipDate:(new Date).toISOString().split("T")[0],totalTips:"",notes:""}),w({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5})},onError:e=>{jr.error(e.message||"Failed to process tips")}}),L=bl({mutationFn:e=>wr.oA.processDealerCashout(t,e),onSuccess:()=>{jr.success("Dealer cashout processed successfully!"),s.invalidateQueries(["dealer-cashouts",t]),c(!1),m(null),k({dealerId:"",cashoutDate:(new Date).toISOString().split("T")[0],amount:"",notes:""})},onError:e=>{jr.error(e.message||"Failed to process cashout")}}),O=(null===A||void 0===A?void 0:A.dealers)||[],M=(null===T||void 0===T?void 0:T.tips)||[],F=(null===_||void 0===_?void 0:_.cashouts)||[],B=(null===T||void 0===T?void 0:T.totalPages)||1,q=(null===T||void 0===T?void 0:T.total)||0,U=(null===_||void 0===_?void 0:_.totalPages)||1,z=(null===_||void 0===_?void 0:_.total)||0,W=Number(j.clubHoldPercentage)+Number(j.dealerSharePercentage)+Number(j.floorManagerPercentage);return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Dealer Tips Management"})}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>l("tips"),className:"px-6 py-3 font-semibold transition-colors ".concat("tips"===a?"text-white border-b-2 border-cyan-500":"text-gray-400 hover:text-white"),children:"Dealer Tips %"}),(0,sa.jsx)("button",{onClick:()=>l("cashout"),className:"px-6 py-3 font-semibold transition-colors ".concat("cashout"===a?"text-white border-b-2 border-cyan-500":"text-gray-400 hover:text-white"),children:"Dealer Cash Out"})]}),"tips"===a&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Dealer to Process Their Tips"}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:O.map(e=>(0,sa.jsxs)("button",{onClick:()=>(e=>{m(e),S((0,i.A)((0,i.A)({},N),{},{dealerId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-cyan-900/30 to-blue-900/30 border border-cyan-700 rounded-lg p-4 hover:from-cyan-800/40 hover:to-blue-800/40 transition-all text-left",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-cyan-400 mt-1",children:e.email}),(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]})]},e.id))})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Dealer Tips History"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"Dealer name...",value:g.search,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.startDate,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.endDate,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.dealerId,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{dealerId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Dealers"}),O.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),I?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===M.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No tips processed yet"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Dealer"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Total Tips"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Dealer Share"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Club Hold"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Floor Manager"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Status"})]})}),(0,sa.jsx)("tbody",{children:M.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:null===(t=e.dealer)||void 0===t?void 0:t.name}),(0,sa.jsxs)("td",{className:"text-right text-white p-3",children:["\u20b9",Number(e.totalTips).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-green-400 p-3",children:["\u20b9",Number(e.dealerShareAmount).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-cyan-400 p-3",children:["\u20b9",Number(e.clubHoldAmount).toFixed(2)]}),(0,sa.jsxs)("td",{className:"text-right text-blue-400 p-3",children:["\u20b9",Number(e.floorManagerAmount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.tipDate).toLocaleDateString()}),(0,sa.jsx)("td",{className:"text-white p-3",children:(0,sa.jsx)("span",{className:"px-2 py-1 bg-green-600 rounded text-xs",children:e.status})})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(x-1)+1," to ",Math.min(10*x,q)," of"," ",q," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===x,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(B)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>h(t+1),className:"px-4 py-2 rounded-lg ".concat(x===t+1?"bg-cyan-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>h(e=>Math.min(B,e+1)),disabled:x===B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),"cashout"===a&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Dealer to Process Cash Out"}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:O.map(e=>(0,sa.jsxs)("button",{onClick:()=>(e=>{m(e),k((0,i.A)((0,i.A)({},C),{},{dealerId:e.id})),c(!0)})(e),className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-700 rounded-lg p-4 hover:from-green-800/40 hover:to-emerald-800/40 transition-all text-left",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-green-400 mt-1",children:e.email}),(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]})]},e.id))})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Dealer Cashout History"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Dealer name...",value:y.search,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.startDate,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.endDate,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.dealerId,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{dealerId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Dealers"}),O.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),D?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===F.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No cashouts processed yet"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Dealer"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Notes"})]})}),(0,sa.jsx)("tbody",{children:F.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:null===(t=e.dealer)||void 0===t?void 0:t.name}),(0,sa.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.amount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.cashoutDate).toLocaleDateString()}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.notes||"-"})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(p-1)+1," to"," ",Math.min(10*p,z)," of ",z," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===p,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(U)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>b(t+1),className:"px-4 py-2 rounded-lg ".concat(p===t+1?"bg-green-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>b(e=>Math.min(U,e+1)),disabled:p===U,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-cyan-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Dealer Tips"}),u&&(0,sa.jsxs)("div",{className:"bg-cyan-900/30 border border-cyan-600 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("div",{className:"text-xs text-cyan-400 mb-1",children:"Processing tips for:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:u.name}),(0,sa.jsx)("p",{className:"text-sm text-cyan-300 mt-1",children:u.email})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-cyan-900/50 to-blue-900/50 rounded-lg p-6 border border-cyan-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83c\udfaf Tip Distribution Settings"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Club Hold Percentage"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.clubHoldPercentage,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{clubHoldPercentage:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Dealer Share Percentage"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.dealerSharePercentage,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{dealerSharePercentage:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Floor Manager Share"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.floorManagerPercentage,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{floorManagerPercentage:e.target.value}))})]}),(0,sa.jsxs)("div",{className:"bg-cyan-800/50 border border-cyan-600 rounded-lg p-4",children:[(0,sa.jsx)("p",{className:"text-white mb-2",children:"Current Distribution:"}),(0,sa.jsxs)("p",{className:"text-white",children:["Club: ",j.clubHoldPercentage,"% \u2022 Dealer: ",j.dealerSharePercentage,"% \u2022 Floor Manager: ",j.floorManagerPercentage,"%"]}),(0,sa.jsxs)("p",{className:"text-white font-semibold mt-2",children:["Total: ",W.toFixed(2),"%",Math.abs(W-100)>.01&&(0,sa.jsx)("span",{className:"text-red-400 ml-2",children:"\u26a0\ufe0f Must equal 100%"})]})]}),(0,sa.jsx)("button",{onClick:()=>{const e=Number(j.clubHoldPercentage)+Number(j.dealerSharePercentage)+Number(j.floorManagerPercentage);Math.abs(e-100)>.01?jr.error("Percentages must add up to 100%"):E.mutate(j)},disabled:E.isLoading,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:E.isLoading?"Updating...":"Update Settings"})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udcb5 Tip Processing"}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tip Date *"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:N.tipDate,onChange:e=>S((0,i.A)((0,i.A)({},N),{},{tipDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Total Tips (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"\u20b90.00",value:N.totalTips,onChange:e=>S((0,i.A)((0,i.A)({},N),{},{totalTips:e.target.value}))})]}),N.totalTips&&(0,sa.jsxs)("div",{className:"bg-cyan-900/30 border border-cyan-500 rounded-lg p-3",children:[(0,sa.jsx)("p",{className:"text-white text-sm mb-1 font-semibold",children:"Distribution Preview:"}),(0,sa.jsxs)("p",{className:"text-white text-xs",children:["Club: \u20b9",(Number(N.totalTips)*Number(j.clubHoldPercentage)/100).toFixed(2)," ","\u2022 Dealer: \u20b9",(Number(N.totalTips)*Number(j.dealerSharePercentage)/100).toFixed(2)," \u2022 Floor: \u20b9",(Number(N.totalTips)*Number(j.floorManagerPercentage)/100).toFixed(2)]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 h-20",placeholder:"Additional notes...",value:N.notes,onChange:e=>S((0,i.A)((0,i.A)({},N),{},{notes:e.target.value}))})]})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{N.dealerId&&N.totalTips?R.mutate((0,i.A)((0,i.A)({},N),{},{totalTips:Number(N.totalTips)})):jr.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:R.isLoading?"Processing...":"Process Tips"}),(0,sa.jsx)("button",{onClick:()=>{o(!1),m(null),w({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5})},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),d&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb5 Process Dealer Cash Out"}),u&&(0,sa.jsxs)("div",{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("div",{className:"text-xs text-green-400 mb-1",children:"Processing cashout for:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:u.name}),(0,sa.jsx)("p",{className:"text-sm text-green-300 mt-1",children:u.email})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Cashout Date *"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:C.cashoutDate,onChange:e=>k((0,i.A)((0,i.A)({},C),{},{cashoutDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Cash Out Amount (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"\u20b90.00",value:C.amount,onChange:e=>k((0,i.A)((0,i.A)({},C),{},{amount:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes (Optional)"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 h-24",placeholder:"Additional notes about the cash out...",value:C.notes,onChange:e=>k((0,i.A)((0,i.A)({},C),{},{notes:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{C.dealerId&&C.amount?L.mutate((0,i.A)((0,i.A)({},C),{},{amount:Number(C.amount)})):jr.error("Please fill in all required fields")},disabled:L.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:L.isLoading?"Processing...":"Process Cash Out"}),(0,sa.jsx)("button",{onClick:()=>{c(!1),m(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function Md(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("salary");return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Payroll Management"})}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("salary"),className:"px-6 py-3 font-semibold transition-all ".concat("salary"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Employee Salary"}),(0,sa.jsx)("button",{onClick:()=>a("dealer"),className:"px-6 py-3 font-semibold transition-all ".concat("dealer"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Dealer Tips & Cashouts"})]}),"salary"===s?(0,sa.jsx)(Ld,{selectedClubId:t}):(0,sa.jsx)(Od,{selectedClubId:t})]})}const Fd=["Welcome Bonus","Loyalty Bonus","Referral Bonus","Tournament Bonus","Special Event Bonus","Custom"],Bd=["Performance Bonus","Attendance Bonus","Special Achievement","Holiday Bonus","Year-end Bonus","Custom"];function qd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("player"),[l,n]=(0,r.useState)("process");return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Bonus Management"})}),(0,sa.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:(0,sa.jsx)("button",{onClick:()=>{a("player"),n("process")},className:"px-6 py-3 font-semibold transition-colors ".concat("player"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Player Bonus"})}),"player"===s&&(0,sa.jsx)(Ud,{selectedClubId:t,activeSubTab:l,setActiveSubTab:n}),"staff"===s&&(0,sa.jsx)(zd,{selectedClubId:t,activeSubTab:l,setActiveSubTab:n})]})}function Ud(e){let{selectedClubId:t,activeSubTab:s,setActiveSubTab:a}=e;const l=ra(),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)({search:"",startDate:"",endDate:"",playerId:""}),[g,f]=(0,r.useState)({playerId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""}),{data:y}=ml({queryKey:["bonus-players",t,x],queryFn:()=>wr.KG.getPlayersForBonus(t,x||void 0),enabled:!!t}),{data:v,isLoading:j}=ml({queryKey:["player-bonuses",t,u,p],queryFn:()=>wr.KG.getPlayerBonuses(t,(0,i.A)({page:u,limit:10},p)),enabled:!!t&&"history"===s}),w=bl({mutationFn:e=>wr.KG.processPlayerBonus(t,e),onSuccess:()=>{jr.success("Player bonus processed successfully!"),l.invalidateQueries(["player-bonuses",t]),o(!1),c(null),N()},onError:e=>{jr.error(e.message||"Failed to process bonus")}}),N=()=>{f({playerId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""})},S=(null===y||void 0===y?void 0:y.players)||[],C=(null===v||void 0===v?void 0:v.bonuses)||[],k=(null===v||void 0===v?void 0:v.totalPages)||1,A=(null===v||void 0===v?void 0:v.total)||0;return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("process"),className:"px-6 py-3 font-semibold transition-colors ".concat("process"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Process Bonus"}),(0,sa.jsx)("button",{onClick:()=>a("history"),className:"px-6 py-3 font-semibold transition-colors ".concat("history"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Bonus History"})]}),"process"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"\ud83d\udd0d Search Player (Type at least 3 characters)"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Search by name, email, phone number, or player ID...",value:x,onChange:e=>h(e.target.value)}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Only KYC approved/verified players are shown"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Player to Process Bonus"}),0===S.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:x.length>=3?"No players found matching your search":x.length>0?"Type at least 3 characters to search":"No KYC approved players found"}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:S.map(e=>(0,sa.jsxs)("button",{onClick:()=>(e=>{c(e),f((0,i.A)((0,i.A)({},g),{},{playerId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 border border-orange-700 rounded-lg p-4 hover:from-orange-800/40 hover:to-amber-800/40 transition-all text-left",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-orange-400 mt-1",children:e.email}),e.playerId&&(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["ID: ",e.playerId]}),e.phoneNumber&&(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Phone: ",e.phoneNumber]})]},e.id))})]})]}),"history"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Name, email, or ID...",value:p.search,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.startDate,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.endDate,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Player"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.playerId,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{playerId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Players"}),S.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Bonus History (Total: ",A,")"]}),j?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No bonuses found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Player"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Bonus Type"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Reason"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,sa.jsx)("tbody",{children:C.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:null===(t=e.player)||void 0===t?void 0:t.name}),(0,sa.jsx)("td",{className:"text-white p-3",children:e.bonusType}),(0,sa.jsxs)("td",{className:"text-right text-orange-400 font-semibold p-3",children:["\u20b9",Number(e.bonusAmount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.reason||"-"}),(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(u-1)+1," to ",Math.min(10*u,A)," of ",A," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(k)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>m(t+1),className:"px-4 py-2 rounded-lg ".concat(u===t+1?"bg-orange-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>m(e=>Math.min(k,e+1)),disabled:u===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-orange-900/90 to-amber-900/90 rounded-xl p-6 max-w-md w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Player Bonus"}),d&&(0,sa.jsxs)("div",{className:"bg-orange-900/30 border border-orange-600 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("div",{className:"text-xs text-orange-400 mb-1",children:"Processing bonus for:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:d.name}),(0,sa.jsx)("p",{className:"text-sm text-orange-300 mt-1",children:d.email})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Type *"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:g.bonusType,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{bonusType:e.target.value,customBonusType:""})),children:[(0,sa.jsx)("option",{value:"",children:"Select Bonus Type"}),Fd.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))]})]}),"Custom"===g.bonusType&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Bonus Type Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Enter custom bonus type name...",value:g.customBonusType,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{customBonusType:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Amount (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"\u20b90.00",value:g.bonusAmount,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{bonusAmount:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Reason"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 h-20",placeholder:"Bonus reason...",value:g.reason,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{reason:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{g.playerId&&g.bonusType&&g.bonusAmount?"Custom"!==g.bonusType||g.customBonusType?w.mutate({playerId:g.playerId,bonusType:"Custom"===g.bonusType?g.customBonusType:g.bonusType,bonusAmount:Number(g.bonusAmount),reason:g.reason||void 0}):jr.error("Please enter custom bonus type name"):jr.error("Please fill in all required fields")},disabled:w.isLoading,className:"flex-1 bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-500 hover:to-amber-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:w.isLoading?"Processing...":"Process Bonus"}),(0,sa.jsx)("button",{onClick:()=>{o(!1),c(null),N()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function zd(e){let{selectedClubId:t,activeSubTab:s,setActiveSubTab:a}=e;const l=ra(),[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)(""),[p,b]=(0,r.useState)({search:"",startDate:"",endDate:"",staffId:""}),[g,f]=(0,r.useState)({staffId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""}),{data:y}=ml({queryKey:["bonus-staff",t,x],queryFn:()=>wr.KG.getStaffForBonus(t,x||void 0),enabled:!!t}),{data:v,isLoading:j}=ml({queryKey:["staff-bonuses",t,u,p],queryFn:()=>wr.KG.getStaffBonuses(t,(0,i.A)({page:u,limit:10},p)),enabled:!!t&&"history"===s}),w=bl({mutationFn:e=>wr.KG.processStaffBonus(t,e),onSuccess:()=>{jr.success("Staff bonus processed successfully!"),l.invalidateQueries(["staff-bonuses",t]),o(!1),c(null),N()},onError:e=>{jr.error(e.message||"Failed to process bonus")}}),N=()=>{f({staffId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""})},S=(null===y||void 0===y?void 0:y.staff)||[],C=(null===v||void 0===v?void 0:v.bonuses)||[],k=(null===v||void 0===v?void 0:v.totalPages)||1,A=(null===v||void 0===v?void 0:v.total)||0;return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("process"),className:"px-6 py-3 font-semibold transition-colors ".concat("process"===s?"text-white border-b-2 border-pink-500":"text-gray-400 hover:text-white"),children:"Process Bonus"}),(0,sa.jsx)("button",{onClick:()=>a("history"),className:"px-6 py-3 font-semibold transition-colors ".concat("history"===s?"text-white border-b-2 border-pink-500":"text-gray-400 hover:text-white"),children:"Bonus History"})]}),"process"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"\ud83d\udd0d Search Staff Member (Type at least 3 characters)"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Search by name, email, phone number, or employee ID...",value:x,onChange:e=>h(e.target.value)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Staff Member to Process Bonus"}),0===S.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:x.length>=3?"No staff members found matching your search":x.length>0?"Type at least 3 characters to search":"No staff members found"}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:S.map(e=>(0,sa.jsxs)("button",{onClick:()=>(e=>{c(e),f((0,i.A)((0,i.A)({},g),{},{staffId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-pink-900/30 to-rose-900/30 border border-pink-700 rounded-lg p-4 hover:from-pink-800/40 hover:to-rose-800/40 transition-all text-left",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-pink-400 mt-1",children:e.email||"No email"}),(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]}),e.phone&&(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Phone: ",e.phone]}),e.employeeId&&(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Employee ID: ",e.employeeId]})]},e.id))})]})]}),"history"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Name, email, or ID...",value:p.search,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.startDate,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.endDate,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Staff"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.staffId,onChange:e=>b((0,i.A)((0,i.A)({},p),{},{staffId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Staff"}),S.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Bonus History (Total: ",A,")"]}),j?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No bonuses found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Staff"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Bonus Type"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Reason"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,sa.jsx)("tbody",{children:C.map(e=>{var t;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:null===(t=e.staff)||void 0===t?void 0:t.name}),(0,sa.jsx)("td",{className:"text-white p-3",children:e.bonusType}),(0,sa.jsxs)("td",{className:"text-right text-pink-400 font-semibold p-3",children:["\u20b9",Number(e.bonusAmount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.reason||"-"}),(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(u-1)+1," to ",Math.min(10*u,A)," of ",A," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(k)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>m(t+1),className:"px-4 py-2 rounded-lg ".concat(u===t+1?"bg-pink-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>m(e=>Math.min(k,e+1)),disabled:u===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-pink-900/90 to-rose-900/90 rounded-xl p-6 max-w-md w-full border border-pink-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Staff Bonus"}),d&&(0,sa.jsxs)("div",{className:"bg-pink-900/30 border border-pink-600 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("div",{className:"text-xs text-pink-400 mb-1",children:"Processing bonus for:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:d.name}),(0,sa.jsx)("p",{className:"text-sm text-pink-300 mt-1",children:d.email||"No email"}),(0,sa.jsxs)("p",{className:"text-xs text-pink-400 mt-1",children:["Role: ",d.role]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Type *"}),(0,sa.jsxs)("select",{className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:g.bonusType,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{bonusType:e.target.value,customBonusType:""})),children:[(0,sa.jsx)("option",{value:"",children:"Select Bonus Type"}),Bd.map(e=>(0,sa.jsx)("option",{value:e,children:e},e))]})]}),"Custom"===g.bonusType&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Bonus Type Name *"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Enter custom bonus type name...",value:g.customBonusType,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{customBonusType:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Amount (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"\u20b90.00",value:g.bonusAmount,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{bonusAmount:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Reason"}),(0,sa.jsx)("textarea",{className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500 h-20",placeholder:"Bonus reason...",value:g.reason,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{reason:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{g.staffId&&g.bonusType&&g.bonusAmount?"Custom"!==g.bonusType||g.customBonusType?w.mutate({staffId:g.staffId,bonusType:"Custom"===g.bonusType?g.customBonusType:g.bonusType,bonusAmount:Number(g.bonusAmount),reason:g.reason||void 0}):jr.error("Please enter custom bonus type name"):jr.error("Please fill in all required fields")},disabled:w.isLoading,className:"flex-1 bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-500 hover:to-rose-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:w.isLoading?"Processing...":"Process Bonus"}),(0,sa.jsx)("button",{onClick:()=>{o(!1),c(null),N()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function Wd(e){let{selectedPlayer:t,onSelect:s,clubId:a,placeholder:l="Search by name, ID, or email...",label:n="Search Player"}=e;const[i,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),u=(0,r.useRef)(null),{data:m=[],isLoading:x}=ml({queryKey:["approvedPlayers",a],queryFn:async()=>{if(!a)return[];const e=[];let t=1;let s=!0;for(;s;)try{const r=await wr.Dv.getPlayers(a,{limit:50,page:t}),l=(null===r||void 0===r?void 0:r.players)||[];if(!l||0===l.length){s=!1;break}const n=l.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),l.length<50?s=!1:(t++,t>20&&(s=!1))}catch(r){console.error("Error fetching page ".concat(t,":"),r),s=!1}return e},enabled:!!a}),h=m.filter(e=>{if(!i||i.length<1)return!1;const t=i.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phoneNumber&&e.phoneNumber.includes(i)||e.playerId&&e.playerId.toLowerCase().includes(t)}).slice(0,10);(0,r.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,sa.jsxs)("div",{className:"relative",ref:u,children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2",children:[n," ",(0,sa.jsx)("span",{className:"text-gray-400 text-sm",children:"(KYC Verified Players Only)"})]}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("input",{type:"text",value:t?"".concat(t.name," (").concat(t.email,")"):i,onChange:e=>{const a=e.target.value;t&&s(null),o(a),c(!0)},onFocus:()=>{!i&&t||c(!0)},placeholder:l,readOnly:!!t,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),t&&(0,sa.jsx)("button",{type:"button",onClick:()=>{s(null),o(""),c(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white text-xl leading-none",title:"Clear selection",children:"\xd7"})]}),d&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,sa.jsx)("div",{className:"absolute z-20 w-full mt-2 bg-slate-700 rounded-lg max-h-64 overflow-y-auto shadow-xl border border-slate-600",children:x?(0,sa.jsx)("div",{className:"px-4 py-3 text-gray-400 text-sm",children:(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,sa.jsx)("span",{children:"Loading approved players (searching all pages)..."})]})}):0===h.length?(0,sa.jsx)("div",{className:"px-4 py-3 text-gray-400 text-sm",children:i.length<1?"Start typing to search approved players...":"No approved players found matching your search"}):h.map(e=>(0,sa.jsxs)("button",{type:"button",onClick:()=>(e=>{s(e),o(""),c(!1)})(e),className:"w-full px-4 py-3 text-left hover:bg-slate-600 transition-colors border-b border-slate-600 last:border-b-0",children:[(0,sa.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:e.email}),e.phoneNumber&&(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:e.phoneNumber}),e.playerId&&(0,sa.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["ID: ",e.playerId]})]},e.id))})]}),t&&(0,sa.jsxs)("div",{className:"mt-2 p-3 bg-green-500/10 border border-green-500 rounded-lg",children:[(0,sa.jsx)("div",{className:"text-green-400 font-medium",children:t.name}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:t.email}),t.phoneNumber&&(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:t.phoneNumber})]})]})}function Hd(e){var t;let{selectedClubId:s,onBack:a}=e;const l=ra(),[n,o]=(0,r.useState)("buy-in"),[d,c]=(0,r.useState)(1),[u,m]=(0,r.useState)({type:"",playerName:"",startDate:"",endDate:""}),[x,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(""),[g,f]=(0,r.useState)("Cash"),[y,v]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[N,S]=(0,r.useState)(null),[C,k]=(0,r.useState)(""),[A,P]=(0,r.useState)("1"),[T,I]=(0,r.useState)(""),[_,D]=(0,r.useState)(!1),[E,R]=(0,r.useState)(null),{data:L}=ml({queryKey:["playerBalance",s,null===N||void 0===N?void 0:N.id],queryFn:()=>wr.Dv.getPlayerBalance(s,N.id),enabled:!!s&&!!N}),{data:O=[]}=ml({queryKey:["recentBuyIns",s],queryFn:async()=>(await wr.Dv.getTransactions(s)).filter(e=>"Deposit"===e.type||"Buy In"===e.type).slice(0,10),enabled:!!s}),{data:M,isLoading:F}=ml({queryKey:["transactionHistory",s,d,u],queryFn:async()=>{let e=(await wr.Dv.getTransactions(s)).filter(e=>"Deposit"===e.type||"Cashout"===e.type||"Buy In"===e.type);if(u.type&&(e=e.filter(e=>e.type===u.type)),u.playerName){const t=u.playerName.toLowerCase();e=e.filter(e=>{var s,a;return(null===(s=e.playerName)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.playerId)||void 0===a?void 0:a.toLowerCase().includes(t))})}if(u.startDate){const t=new Date(u.startDate);e=e.filter(e=>new Date(e.createdAt)>=t)}if(u.endDate){const t=new Date(u.endDate);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=t)}e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));const t=10*(d-1),a=t+10;return{transactions:e.slice(t,a),total:e.length,totalPages:Math.ceil(e.length/10),currentPage:d,perPage:10}},enabled:!!s&&"history"===n}),{data:B=[]}=ml({queryKey:["playersWithBalance",s],queryFn:async()=>{if(!s)return[];const e=[];let t=1;let a=!0;for(;a;)try{const r=await wr.Dv.getPlayers(s,{limit:50,page:t}),l=(null===r||void 0===r?void 0:r.players)||[];if(!l||0===l.length){a=!1;break}const n=l.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),l.length<50?a=!1:(t++,t>20&&(a=!1))}catch(r){console.error("Error fetching page ".concat(t,":"),r),a=!1}return e},enabled:!!s&&"cash-out"===n}),q=bl({mutationFn:async e=>await wr.Dv.createTransaction(s,{type:"Deposit",playerId:e.playerId,playerName:e.playerName,amount:parseFloat(e.amount),notes:e.notes}),onSuccess:()=>{jr.success("Buy-in processed successfully! Player balance updated."),l.invalidateQueries(["recentBuyIns",s]),l.invalidateQueries(["playerBalance"]),l.invalidateQueries(["clubPlayers",s]),h(null),b(""),f("Cash"),v(""),w("")},onError:e=>{jr.error(e.message||"Failed to process buy-in")}}),U=bl({mutationFn:async e=>await wr.Dv.createTransaction(s,{type:"Cashout",playerId:e.playerId,playerName:e.playerName,amount:parseFloat(e.amount),notes:e.notes}),onSuccess:()=>{jr.success("Cash-out processed successfully! Player balance updated."),l.invalidateQueries(["recentBuyIns",s]),l.invalidateQueries(["playerBalance"]),l.invalidateQueries(["clubPlayers",s]),l.invalidateQueries(["playersWithBalance",s]),S(null),k(""),P("1"),I(""),D(!1),R(null)},onError:e=>{jr.error(e.message||"Failed to process cash-out")}});return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Club Buy-In & Cash Out"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Manage player transactions and balance updates"})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-gray-700",children:[(0,sa.jsx)("button",{onClick:()=>o("buy-in"),className:"px-6 py-3 font-semibold transition-colors ".concat("buy-in"===n?"text-white border-b-2 border-green-500 bg-green-500/10":"text-gray-400 hover:text-white"),children:"Club Buy-In"}),(0,sa.jsx)("button",{onClick:()=>o("cash-out"),className:"px-6 py-3 font-semibold transition-colors ".concat("cash-out"===n?"text-white border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-white"),children:"Cash Out"}),(0,sa.jsx)("button",{onClick:()=>{o("history"),c(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("history"===n?"text-white border-b-2 border-purple-500 bg-purple-500/10":"text-gray-400 hover:text-white"),children:"Transaction History"})]}),"buy-in"===n&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Club Buy-In - Purchase Chips"}),(0,sa.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!x)return void jr.error("Please select a player");if(!p||parseFloat(p)<=0)return void jr.error("Please enter a valid buy-in amount");const t=parseFloat(p);if(t>1e7)return void jr.error("Amount cannot exceed \u20b910,000,000");const s=[j,"Payment: ".concat(g),y?"Ref: ".concat(y):""].filter(Boolean).join(" | ");q.mutate({playerId:x.id,playerName:x.name,amount:t,notes:s})},children:[(0,sa.jsx)("div",{className:"mb-4",children:(0,sa.jsx)(Wd,{selectedPlayer:x,onSelect:h,clubId:s,placeholder:"Search by name, ID, email, or phone...",label:"Search Player"})}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Buy-In Amount (\u20b9) ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",value:p,onChange:e=>b(e.target.value),placeholder:"\u20b90.00",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:"Enter the amount in real money (INR)"})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Payment Method ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,sa.jsx)("option",{value:"Cash",children:"Cash"}),(0,sa.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,sa.jsx)("option",{value:"UPI",children:"UPI"}),(0,sa.jsx)("option",{value:"Credit Card",children:"Credit Card"}),(0,sa.jsx)("option",{value:"Debit Card",children:"Debit Card"}),(0,sa.jsx)("option",{value:"Net Banking",children:"Net Banking"})]})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2",children:"Reference/Transaction Number"}),(0,sa.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Enter transaction reference (optional)",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:"For bank transfers, UPI, cards, etc."})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2",children:"Notes"}),(0,sa.jsx)("textarea",{value:j,onChange:e=>w(e.target.value),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,sa.jsx)("button",{type:"submit",disabled:q.isPending,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:q.isPending?"Processing...":"Process Club Buy-In"})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Recent Club Buy-Ins"}),(0,sa.jsx)("div",{className:"space-y-3",children:0===O.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No recent buy-ins found"}):O.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg hover:bg-slate-600 transition-colors",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:e.playerName}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:e.playerId})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("div",{className:"text-green-400 font-bold",children:["\u20b9",Number(e.amount).toLocaleString()]}),(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Chips: \u20b9",Number(e.amount).toLocaleString()]})]})]}),e.notes&&(0,sa.jsx)("div",{className:"text-gray-400 text-sm mt-2",children:e.notes.split("|").map((e,t)=>(0,sa.jsx)("div",{children:e.trim()},t))}),(0,sa.jsxs)("div",{className:"text-gray-500 text-xs mt-2",children:["Processed ",new Date(e.createdAt).toLocaleString()]})]},e.id))}),(0,sa.jsxs)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,sa.jsx)("h3",{className:"text-blue-400 font-semibold mb-2",children:"\ud83d\udca1 Buy-In Information"}),(0,sa.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1",children:[(0,sa.jsx)("li",{children:"\u2022 Players purchase chips using real money (INR)"}),(0,sa.jsx)("li",{children:"\u2022 Chips are added to player's available balance"}),(0,sa.jsx)("li",{children:"\u2022 Standard ratio is 1:1 (\u20b91 = 1 chip)"}),(0,sa.jsx)("li",{children:"\u2022 Players can use chips to buy-in at tables"}),(0,sa.jsx)("li",{children:"\u2022 All transactions are recorded for audit"})]})]})]})]}),"cash-out"===n&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Process Cash Out"}),(0,sa.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!N)return void jr.error("Please select a player");if(!C||parseFloat(C)<=0)return void jr.error("Please enter a valid cash-out amount");if(!E)return void jr.error("Please verify balance before processing cash-out");if("error"===E.status)return void jr.error("Cannot process cash-out with insufficient balance");const t=parseFloat(C),s=parseFloat(A)||1,a=t*s,r=[T,"Conversion Rate: \u20b9".concat(s," per chip"),"Cash Given: \u20b9".concat(a.toLocaleString()),"warning"===E.status?"\u26a0\ufe0f FLAGGED FOR VERIFICATION":"\u2713 Verified"].filter(Boolean).join(" | ");U.mutate({playerId:N.id,playerName:N.name,amount:t,notes:r})},children:[(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)(Wd,{selectedPlayer:N,onSelect:e=>{S(e),R(null),D(!1)},clubId:s,placeholder:"Search by name, ID, email, or phone...",label:"Search Player"}),N&&L&&(0,sa.jsxs)("div",{className:"mt-2 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,sa.jsx)("div",{className:"text-blue-400 font-medium",children:N.name}),(0,sa.jsx)("div",{className:"text-gray-400 text-sm",children:N.email}),(0,sa.jsxs)("div",{className:"mt-2 pt-2 border-t border-blue-500/30",children:[(0,sa.jsxs)("div",{className:"text-white text-sm",children:["Available Balance: ",(0,sa.jsxs)("span",{className:"font-bold",children:["\u20b9",(null===(t=L.availableBalance)||void 0===t?void 0:t.toLocaleString())||0]})]}),L.tableBalance>0&&(0,sa.jsxs)("div",{className:"text-yellow-400 text-sm",children:["Table Balance: \u20b9",L.tableBalance.toLocaleString()]})]})]})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Cash-Out Amount (Chips) ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",value:C,onChange:e=>{k(e.target.value),R(null)},placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2",children:"Conversion Rate (\u20b9 per chip)"}),(0,sa.jsx)("input",{type:"number",value:A,onChange:e=>P(e.target.value),placeholder:"1",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,sa.jsxs)("div",{className:"text-gray-400 text-sm mt-1",children:["Default: 1 chip = \u20b91 \u2022 Cash to give: \u20b9",(parseFloat(C||0)*parseFloat(A||1)).toLocaleString()]})]}),N&&C&&(0,sa.jsx)("button",{type:"button",onClick:async()=>{if(!N||!C)return void jr.error("Please select a player and enter amount");const e=parseFloat(C);if(!L)return void jr.error("Unable to fetch player balance");const t=L.availableBalance||0,s=L.tableBalance||0,a=L.totalBalance||0;Math.abs(e-t)<.01?(R({status:"success",message:"Balance verification successful",availableBalance:t,tableBalance:s,totalBalance:a}),D(!1),jr.success("Balance verified! You can proceed with cash-out.")):e>a?(R({status:"error",message:"Insufficient balance",availableBalance:t,tableBalance:s,totalBalance:a}),D(!0),jr.error("Cash-out amount exceeds player's total balance!")):e>t?(R({status:"warning",message:"Player has chips at table",availableBalance:t,tableBalance:s,totalBalance:a}),D(!0),jr.warning("Player has chips at table. Collect table chips first.")):(R({status:"warning",message:"Amount mismatch - flagged for review",availableBalance:t,tableBalance:s,totalBalance:a}),D(!0),jr.warning("Balance mismatch detected. Transaction will be flagged for verification."))},className:"w-full mb-4 bg-yellow-500 text-black py-2 rounded-lg font-semibold hover:bg-yellow-600 transition-all",children:"\ud83d\udd0d Verify Balance Before Cash-Out"}),E&&(0,sa.jsxs)("div",{className:"mb-4 p-4 rounded-lg border ".concat("success"===E.status?"bg-green-500/10 border-green-500":"error"===E.status?"bg-red-500/10 border-red-500":"bg-yellow-500/10 border-yellow-500"),children:[(0,sa.jsxs)("div",{className:"font-semibold mb-2 ".concat("success"===E.status?"text-green-400":"error"===E.status?"text-red-400":"text-yellow-400"),children:["success"===E.status?"\u2713":"\u26a0\ufe0f"," ",E.message]}),(0,sa.jsxs)("div",{className:"text-gray-300 text-sm space-y-1",children:[(0,sa.jsxs)("div",{children:["Available: \u20b9",E.availableBalance.toLocaleString()]}),(0,sa.jsxs)("div",{children:["At Table: \u20b9",E.tableBalance.toLocaleString()]}),(0,sa.jsxs)("div",{children:["Total: \u20b9",E.totalBalance.toLocaleString()]}),(0,sa.jsxs)("div",{children:["Requested: \u20b9",parseFloat(C).toLocaleString()]})]})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2",children:"Notes"}),(0,sa.jsx)("textarea",{value:T,onChange:e=>I(e.target.value),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,sa.jsx)("button",{type:"submit",disabled:U.isPending||!E,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:U.isPending?"Processing...":"Process Cash Out"})]})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsx)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:"\ud83d\udca1 How Cash Out Works:"}),(0,sa.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,sa.jsx)("li",{children:"\u2022 Select a player who has chips in their available balance"}),(0,sa.jsx)("li",{children:"\u2022 System validates balance consistency across three sources:"}),(0,sa.jsx)("li",{className:"ml-4",children:"- Player Portal Balance"}),(0,sa.jsx)("li",{className:"ml-4",children:"- Table Buy-Out Balance Records"}),(0,sa.jsx)("li",{className:"ml-4",children:"- Cashier/SuperAdmin View Balance"}),(0,sa.jsx)("li",{children:"\u2022 Enter the amount of chips to convert to real money"}),(0,sa.jsx)("li",{children:"\u2022 Set conversion rate (default: 1 chip = \u20b91)"}),(0,sa.jsx)("li",{children:"\u2022 Chips are deducted from player's balance, real money is paid out"})]})]}),(0,sa.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-yellow-400 font-semibold mb-3 flex items-center gap-2",children:"\u26a0\ufe0f Balance Validation:"}),(0,sa.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,sa.jsx)("li",{children:"\u2022 System automatically checks if balances match across all sources"}),(0,sa.jsx)("li",{children:"\u2022 If mismatch detected, transaction is flagged with warning"}),(0,sa.jsx)("li",{children:"\u2022 Review flagged transactions carefully before processing"}),(0,sa.jsx)("li",{children:"\u2022 Contact system administrator if balance discrepancies persist"})]})]}),(0,sa.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:"\ud83d\udca1 Important Notes:"}),(0,sa.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,sa.jsx)("li",{children:"\u2022 Cash out is permanent - chips cannot be recovered"}),(0,sa.jsx)("li",{children:"\u2022 Conversion rate can be adjusted based on club policy"}),(0,sa.jsx)("li",{children:"\u2022 Always verify player identity before processing cash out"}),(0,sa.jsx)("li",{children:"\u2022 Keep transaction records for audit purposes"})]})]}),(0,sa.jsxs)("div",{className:"bg-green-500/10 border border-green-500 rounded-lg p-6",children:[(0,sa.jsx)("h3",{className:"text-green-400 font-semibold mb-3",children:"Players with Available Balance:"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:[B.length," player(s) have chips available for cash out"]})]})]})]}),"history"===n&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Filter Transactions"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Transaction Type"}),(0,sa.jsxs)("select",{value:u.type,onChange:e=>{m((0,i.A)((0,i.A)({},u),{},{type:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,sa.jsx)("option",{value:"",children:"All Types"}),(0,sa.jsx)("option",{value:"Deposit",children:"Buy-In"}),(0,sa.jsx)("option",{value:"Cashout",children:"Cash-Out"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Player Name/ID"}),(0,sa.jsx)("input",{type:"text",value:u.playerName,onChange:e=>{m((0,i.A)((0,i.A)({},u),{},{playerName:e.target.value})),c(1)},placeholder:"Search by name or ID...",className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:u.startDate,onChange:e=>{m((0,i.A)((0,i.A)({},u),{},{startDate:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:u.endDate,onChange:e=>{m((0,i.A)((0,i.A)({},u),{},{endDate:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(u.type||u.playerName||u.startDate||u.endDate)&&(0,sa.jsx)("button",{onClick:()=>{m({type:"",playerName:"",startDate:"",endDate:""}),c(1)},className:"mt-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Clear All Filters"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white",children:"Transaction History"}),M&&(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(d-1)+1," - ",Math.min(10*d,M.total)," of ",M.total," transactions"]})]}),F?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Loading transactions..."})]}):M&&0!==M.transactions.length?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Date & Time"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Type"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player"}),(0,sa.jsx)("th",{className:"text-right py-3 px-4 text-gray-400 font-semibold",children:"Amount"}),(0,sa.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Notes"})]})}),(0,sa.jsx)("tbody",{children:M.transactions.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700/50 transition-colors",children:[(0,sa.jsxs)("td",{className:"py-4 px-4",children:[(0,sa.jsx)("div",{className:"text-white text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,sa.jsx)("div",{className:"text-gray-400 text-xs",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,sa.jsxs)("td",{className:"py-4 px-4",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Deposit"===e.type||"Buy In"===e.type?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"),children:"Deposit"===e.type||"Buy In"===e.type?"Buy-In":"Cash-Out"}),e.isOverridden&&(0,sa.jsx)("span",{onClick:()=>{e.overrideReason&&alert("Override Reason:\n\n".concat(e.overrideReason))},className:"ml-2 px-2 py-1 rounded text-xs bg-orange-900/30 text-orange-400 border border-orange-700 cursor-pointer hover:bg-orange-900/50 transition-colors inline-block",title:"Click to view override reason",children:"\u270f\ufe0f Overridden"})]}),(0,sa.jsxs)("td",{className:"py-4 px-4",children:[(0,sa.jsx)("div",{className:"text-white font-medium",children:e.playerName}),(0,sa.jsx)("div",{className:"text-gray-400 text-xs",children:e.playerId})]}),(0,sa.jsx)("td",{className:"py-4 px-4 text-right",children:(0,sa.jsxs)("div",{className:"flex flex-col items-end",children:[(0,sa.jsxs)("div",{className:"font-bold ".concat("Deposit"===e.type||"Buy In"===e.type?"text-green-400":"text-blue-400"),children:["Deposit"===e.type||"Buy In"===e.type?"+":"-","\u20b9",Number(e.amount).toLocaleString()]}),e.originalAmount&&(0,sa.jsxs)("div",{className:"text-xs text-gray-400 line-through mt-1",children:["Deposit"===e.type||"Buy In"===e.type?"+":"-","\u20b9",Number(e.originalAmount).toLocaleString()]})]})}),(0,sa.jsx)("td",{className:"py-4 px-4",children:e.notes?(0,sa.jsx)("div",{className:"text-gray-400 text-sm max-w-xs",children:e.notes.split("|").map((e,t)=>(0,sa.jsx)("div",{className:"truncate",children:e.trim()},t))}):(0,sa.jsx)("span",{className:"text-gray-500 text-sm",children:"-"})})]},e.id))})]})}),M.totalPages>1&&(0,sa.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,sa.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:Array.from({length:Math.min(5,M.totalPages)},(e,t)=>{let s;return s=M.totalPages<=5||d<=3?t+1:d>=M.totalPages-2?M.totalPages-4+t:d-2+t,(0,sa.jsx)("button",{onClick:()=>c(s),className:"px-4 py-2 rounded-lg transition-colors ".concat(d===s?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:s},s)})}),(0,sa.jsx)("button",{onClick:()=>c(e=>Math.min(M.totalPages,e+1)),disabled:d===M.totalPages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,sa.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sa.jsxs)("div",{className:"bg-green-500/10 border border-green-500 rounded-lg p-4",children:[(0,sa.jsx)("div",{className:"text-green-400 text-sm mb-1",children:"Total Buy-Ins"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",M.transactions.filter(e=>"Deposit"===e.type||"Buy In"===e.type).reduce((e,t)=>e+Number(t.amount),0).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500 rounded-lg p-4",children:[(0,sa.jsx)("div",{className:"text-blue-400 text-sm mb-1",children:"Total Cash-Outs"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",M.transactions.filter(e=>"Cashout"===e.type).reduce((e,t)=>e+Number(t.amount),0).toLocaleString()]})]}),(0,sa.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500 rounded-lg p-4",children:[(0,sa.jsx)("div",{className:"text-purple-400 text-sm mb-1",children:"Net Flow"}),(0,sa.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",(M.transactions.filter(e=>"Deposit"===e.type||"Buy In"===e.type).reduce((e,t)=>e+Number(t.amount),0)-M.transactions.filter(e=>"Cashout"===e.type).reduce((e,t)=>e+Number(t.amount),0)).toLocaleString()]})]})]})]}):(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No transactions found"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your filters"})]})]})]})]})}function Vd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("players"),[l,n]=(0,r.useState)("dealer-cashout"),[o,d]=(0,r.useState)(1),[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)(null),[b,g]=(0,r.useState)({amount:"",reason:""}),[f,y]=(0,r.useState)({reason:""}),v=ra(),{data:j,isLoading:w}=ml({queryKey:["financial-overrides",t,s,l,o],queryFn:()=>wr.bM.getAllTransactions(t,{category:"players"===s?"player":"staff",subCategory:"staff"===s?l:void 0,page:o,limit:50}),enabled:!!t}),N=bl({mutationFn:e=>{let{transactionId:s,data:a}=e;return wr.bM.editTransaction(t,s,a)},onSuccess:()=>{jr.success("Transaction edited successfully!"),v.invalidateQueries(["financial-overrides",t]),u(!1),p(null),g({amount:"",reason:""})},onError:e=>{jr.error(e.message||"Failed to edit transaction")}}),S=bl({mutationFn:e=>{let{transactionId:s,data:a}=e;return wr.bM.cancelTransaction(t,s,a)},onSuccess:()=>{jr.success("Transaction cancelled successfully!"),v.invalidateQueries(["financial-overrides",t]),x(!1),p(null),y({reason:""})},onError:e=>{jr.error(e.message||"Failed to cancel transaction")}}),C=(null===j||void 0===j?void 0:j.transactions)||[],k=(null===j||void 0===j?void 0:j.totalPages)||1,A=(null===j||void 0===j?void 0:j.total)||0,P=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"completed":return"text-green-400";case"pending":return"text-yellow-400";case"cancelled":return"text-red-400";case"failed":return"text-red-500";default:return"text-gray-400"}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Financial Overrides"})}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>{a("players"),d(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("players"===s?"text-white border-b-2 border-cyan-500 bg-cyan-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udc64 Player Transactions"}),(0,sa.jsx)("button",{onClick:()=>{a("staff"),n("dealer-cashout"),d(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===s?"text-white border-b-2 border-purple-500 bg-purple-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udc54 Staff Transactions"})]}),"staff"===s&&(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 mt-2",children:[(0,sa.jsx)("button",{onClick:()=>{n("dealer-cashout"),d(1)},className:"px-6 py-2 font-semibold transition-colors text-sm ".concat("dealer-cashout"===l?"text-white border-b-2 border-green-500 bg-green-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb5 Dealer Cashouts"}),(0,sa.jsx)("button",{onClick:()=>{n("salary-bonus"),d(1)},className:"px-6 py-2 font-semibold transition-colors text-sm ".concat("salary-bonus"===l?"text-white border-b-2 border-blue-500 bg-blue-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb0 Salary & Bonuses"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,sa.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["players"===s?"Player Transactions":"dealer-cashout"===l?"Dealer Cashouts":"Salary & Bonuses"," ","(",A,")"]})}),w?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No transactions found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Type"}),(0,sa.jsxs)("th",{className:"text-left text-white font-semibold p-3",children:["players"===s?"Player":"Staff"," Name"]}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Actions"})]})}),(0,sa.jsx)("tbody",{children:C.map(e=>{return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsxs)("td",{className:"p-3",children:[(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize border ".concat((t=e.type,t.includes("Bonus")?"bg-purple-900/30 text-purple-400 border-purple-700":t.includes("Salary")?"bg-blue-900/30 text-blue-400 border-blue-700":t.includes("Deposit")?"bg-green-900/30 text-green-400 border-green-700":t.includes("Cashout")||t.includes("Withdrawal")?"bg-red-900/30 text-red-400 border-red-700":t.includes("Buy In")?"bg-cyan-900/30 text-cyan-400 border-cyan-700":"bg-gray-900/30 text-gray-400 border-gray-700")),children:e.type}),e.isOverridden&&(0,sa.jsx)("span",{onClick:()=>{e.overrideReason&&alert("Override Reason:\n\n".concat(e.overrideReason))},className:"ml-2 px-2 py-1 rounded text-xs bg-orange-900/30 text-orange-400 border border-orange-700 cursor-pointer hover:bg-orange-900/50 transition-colors",title:"Click to view override reason",children:"\u270f\ufe0f Overridden"})]}),(0,sa.jsx)("td",{className:"text-white p-3",children:e.entityName}),(0,sa.jsx)("td",{className:"text-right p-3",children:(0,sa.jsxs)("div",{className:"flex flex-col items-end",children:[(0,sa.jsxs)("span",{className:"text-white font-semibold",children:["\u20b9",Number(e.amount).toFixed(2)]}),e.originalAmount&&(0,sa.jsxs)("span",{className:"text-xs text-gray-400 line-through",children:["\u20b9",Number(e.originalAmount).toFixed(2)]})]})}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsx)("span",{className:"font-semibold ".concat(P(e.status)),children:e.status})}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:new Date(e.date).toLocaleDateString()}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{p(e),g({amount:e.amount.toString(),reason:""}),u(!0)})(e),disabled:"Cancelled"===e.status,className:"px-3 py-1 bg-blue-900/30 hover:bg-blue-800/50 text-blue-400 rounded-lg text-sm border border-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>(e=>{p(e),y({reason:""}),x(!0)})(e),disabled:"Cancelled"===e.status,className:"px-3 py-1 bg-red-900/30 hover:bg-red-800/50 text-red-400 rounded-lg text-sm border border-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})})]},e.id);var t})})]})}),k>1&&(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",50*(o-1)+1," to ",Math.min(50*o,A)," of ",A," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===o,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(Math.min(k,5))].map((e,t)=>{const s=o<=3?t+1:o-2+t;return s>k?null:(0,sa.jsx)("button",{onClick:()=>d(s),className:"px-4 py-2 rounded-lg ".concat(o===s?"bg-cyan-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:s},s)})}),(0,sa.jsx)("button",{onClick:()=>d(e=>Math.min(k,e+1)),disabled:o===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),c&&h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-blue-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\u270f\ufe0f Edit Transaction"}),(0,sa.jsxs)("div",{className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4 mb-6",children:[(0,sa.jsx)("div",{className:"text-xs text-blue-400 mb-1",children:"Transaction Details:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold",children:h.type}),(0,sa.jsxs)("p",{className:"text-sm text-blue-300 mt-1",children:["players"===s?"Player":"Staff",": ",h.entityName]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Current Amount: \u20b9",Number(h.amount).toFixed(2)]}),h.originalAmount&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Original Amount: \u20b9",Number(h.originalAmount).toFixed(2)]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"New Amount (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",placeholder:"\u20b90.00",value:b.amount,onChange:e=>g((0,i.A)((0,i.A)({},b),{},{amount:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Reason for Override *"}),(0,sa.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 h-24",placeholder:"Please provide a reason for this override...",value:b.reason,onChange:e=>g((0,i.A)((0,i.A)({},b),{},{reason:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{!b.amount||parseFloat(b.amount)<=0?jr.error("Please enter a valid amount"):b.reason.trim()?N.mutate({transactionId:h.transactionId||h.id,data:{amount:parseFloat(b.amount),reason:b.reason.trim()}}):jr.error("Please provide a reason for the override")},disabled:N.isLoading,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:N.isLoading?"Saving...":"Save Changes"}),(0,sa.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),m&&h&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-red-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\u274c Cancel Transaction"}),(0,sa.jsxs)("div",{className:"bg-red-900/30 border border-red-600 rounded-lg p-4 mb-6",children:[(0,sa.jsx)("div",{className:"text-xs text-red-400 mb-1",children:"Transaction Details:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold",children:h.type}),(0,sa.jsxs)("p",{className:"text-sm text-red-300 mt-1",children:["players"===s?"Player":"Staff",": ",h.entityName]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Amount: \u20b9",Number(h.amount).toFixed(2)]})]}),(0,sa.jsx)("div",{className:"space-y-4",children:(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Reason for Cancellation (Optional)"}),(0,sa.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500 h-24",placeholder:"Please provide a reason for cancellation...",value:f.reason,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{reason:e.target.value}))})]})}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{S.mutate({transactionId:h.transactionId||h.id,data:{reason:f.reason.trim()||"Transaction cancelled by admin"}})},disabled:S.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:S.isLoading?"Cancelling...":"Cancel Transaction"}),(0,sa.jsx)("button",{onClick:()=>{x(!1),p(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Close"})]})]})})]})}function Jd(e){let{clubId:t}=e;const s=ra(),[a,l]=(0,r.useState)(null),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(""),{data:c=[],isLoading:u,refetch:m}=ml({queryKey:["buyInRequests",t],queryFn:()=>wr.Od.getBuyInRequests(t),enabled:!!t,refetchInterval:5e3}),x=bl({mutationFn:e=>{let{requestId:s,amount:a}=e;return wr.Od.approveBuyInRequest(t,s,{amount:a})},onSuccess:()=>{jr.success("Buy-in request approved and balance updated!"),s.invalidateQueries(["buyInRequests",t]),l(null)},onError:e=>{jr.error(e.message||"Failed to approve buy-in request")}}),h=bl({mutationFn:e=>{let{requestId:s,reason:a}=e;return wr.Od.rejectBuyInRequest(t,s,{reason:a})},onSuccess:()=>{jr.success("Buy-in request rejected!"),s.invalidateQueries(["buyInRequests",t]),l(null),i(!1),d("")},onError:e=>{jr.error(e.message||"Failed to reject buy-in request")}}),p=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},b=c.filter(e=>"pending"===e.status);return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Table Buy-In Requests"}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:[b.length," pending request",1!==b.length?"s":""]})]}),u?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading buy-in requests..."}):0===b.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending buy-in requests"}):(0,sa.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,sa.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.playerName}),(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:"PENDING"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Table:"}),(0,sa.jsx)("span",{className:"text-white ml-2 font-medium",children:e.tableNumber?"Table ".concat(e.tableNumber):"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Seat:"}),(0,sa.jsx)("span",{className:"text-white ml-2 font-medium",children:e.seatNumber?"Seat ".concat(e.seatNumber):"N/A"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Requested Amount:"}),(0,sa.jsxs)("span",{className:"text-green-400 ml-2 font-bold",children:["\u20b9",Number(e.requestedAmount||0).toLocaleString("en-IN")]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Current Balance:"}),(0,sa.jsxs)("span",{className:"text-white ml-2 font-medium",children:["\u20b9",Number(e.currentTableBalance||0).toLocaleString("en-IN")]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Requested At:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:p(e.requestedAt)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Email:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:e.playerEmail||"N/A"})]})]})]})}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{window.confirm("Approve buy-in request for ".concat(e.playerName,"? Amount: \u20b9").concat(Number(e.requestedAmount||0).toLocaleString("en-IN")))&&x.mutate({requestId:e.id,amount:e.requestedAmount||0})})(e),disabled:x.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x.isPending?"Processing...":"\u2713 Approve"}),(0,sa.jsx)("button",{onClick:()=>(e=>{l(e),i(!0)})(e),disabled:h.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2717 Reject"})]})]},e.id))})]}),n&&a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Reject Buy-In Request"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["Rejecting buy-in request for ",(0,sa.jsx)("strong",{children:a.playerName})," (\u20b9",Number(a.requestedAmount||0).toLocaleString("en-IN"),")"]}),(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for Rejection ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full bg-slate-700 text-white border border-slate-600 rounded-lg p-3 focus:outline-none focus:border-blue-500",rows:4})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{i(!1),d(""),l(null)},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:"Cancel"}),(0,sa.jsx)("button",{onClick:()=>{o.trim()?h.mutate({requestId:a.id,reason:o}):jr.error("Please provide a reason for rejection")},disabled:!o.trim()||h.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?"Rejecting...":"Reject Request"})]})]})})]})}function Kd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)("tables"),{data:d,isLoading:c}=ml({queryKey:["tables",t],queryFn:()=>wr.rj.getTables(t),enabled:!!t}),u=d||[],m=u.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status);return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view live tables"}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>o("tables"),className:"px-6 py-3 font-semibold transition-all ".concat("tables"===i?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:"Live Tables"}),(0,sa.jsx)("button",{onClick:()=>o("buyin-requests"),className:"px-6 py-3 font-semibold transition-all ".concat("buyin-requests"===i?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:"Buy-In Requests"})]}),"buyin-requests"===i?(0,sa.jsx)(Jd,{clubId:t}):(0,sa.jsxs)(sa.Fragment,{children:[!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view tables."})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - View Only"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"View live tables and their status."})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",m.length]}),(0,sa.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",m.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),c?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tables..."})]}):0===m.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber||e.number]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType||"Cash Game"})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,sa.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats||8]})]}),(0,sa.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,sa.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]})]}),(0,sa.jsxs)("button",{onClick:()=>{a(e),n(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83c\udfaf"}),(0,sa.jsx)("span",{children:"View Table Hologram"})]})]},e.id))})]}),l&&s&&(0,sa.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 overflow-y-auto",children:(0,sa.jsx)(xd,{tableId:s.id,onClose:()=>{n(!1),a(null)},isManagerMode:!0,isViewOnly:!0,tables:u})})]})]})}function Qd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),{data:l,isLoading:n}=ml({queryKey:["tournaments",t],queryFn:()=>wr.Re.getTournaments(t),enabled:!!t}),i=Array.isArray(l)?l:(null===l||void 0===l?void 0:l.tournaments)||(null===l||void 0===l?void 0:l.data)||[],o=Array.isArray(i)?i:[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Tournaments"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view tournament information"}),!t&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view tournaments."})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Tournament List - View Only"}),n?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading tournaments..."})]}):0===o.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No tournaments found"})]}):(0,sa.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Tournament"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),e.buyIn&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,sa.jsxs)("button",{onClick:()=>a(e),className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,sa.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Tournament"}),(0,sa.jsx)("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),s.buyIn&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,sa.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function Gd(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)(null),{data:l,isLoading:n}=ml({queryKey:["rummy-tournaments",t],queryFn:()=>wr.Re.getTournaments(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]}),i=l||[];return(0,sa.jsxs)("div",{className:"text-white space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tournaments"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view rummy tournament details"})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"All Rummy Tournaments"}),n?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===i.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,sa.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tournaments found"})]}):(0,sa.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Rummy Tournament"}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),(0,sa.jsxs)("p",{className:"text-sm text-emerald-400",children:["Variant: ",e.rummyVariant||"Points Rummy"]}),e.buyIn&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,sa.jsxs)("button",{onClick:()=>a(e),className:"bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,sa.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Rummy Tournament"}),(0,sa.jsx)("button",{onClick:()=>a(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Rummy Variant"}),(0,sa.jsx)("p",{className:"text-emerald-400 font-semibold",children:s.rummyVariant||"Points Rummy"})]}),s.buyIn&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,sa.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,sa.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function Yd(){var e,t,s,a,l,n,o,d;const c=me(),[u,m]=(ra(),(0,r.useState)("Dashboard")),[x,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=localStorage.getItem("clubId");e?h(e):c("/login")},[c]);const{data:j,isLoading:w}=ml({queryKey:["club",x],queryFn:()=>wr.Od.getClub(x),enabled:!!x});(0,r.useEffect)(()=>{j&&b(j)},[j]),(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("cashieruser")||"{}");e.id||t.userId?(e.mustResetPassword||t.mustResetPassword)&&f(!0):c("/login")},[c]);const{data:N,isLoading:S}=ml({queryKey:["clubRevenue",x],queryFn:()=>wr.Od.getClubRevenue(x),enabled:!!x,refetchInterval:3e4}),C=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),k=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("cashieruser")||"{}");t.mustResetPassword=!1,localStorage.setItem("cashieruser",JSON.stringify(t)),f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),A=g&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("cashieruser")||"{}"),a=t.email||s.email;a?y.currentPassword&&y.newPassword&&y.confirmPassword?y.newPassword===y.confirmPassword?y.newPassword.length<8?jr.error("Password must be at least 8 characters"):k.mutate({email:a,currentPassword:y.currentPassword,newPassword:y.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:y.currentPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:y.newPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:y.confirmPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:k.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:k.isLoading?"Resetting...":"Reset Password"})]})]})});if(w||!x)return(0,sa.jsxs)(sa.Fragment,{children:[A,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-white text-center",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]});const P=["Dashboard","Notifications","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides","Leave Management"],T=null!==j&&void 0!==j&&j.rummyEnabled?[...P,"Rummy"]:P;return(0,sa.jsxs)(sa.Fragment,{children:[A,(0,sa.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,sa.jsx)(Rd,{activeItem:u,setActiveItem:m,menuItems:T,onSignOut:()=>{localStorage.clear(),c("/login")}}),(0,sa.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===u&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===p||void 0===p?void 0:p.name)||(null===j||void 0===j?void 0:j.name)||"Loading..."]})}),selectedClubId&&(0,sa.jsx)(To,{selectedClubId:selectedClubId}),S?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading revenue data..."})]}):(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(e=N.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===N||void 0===N||null===(t=N.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:C((null===N||void 0===N||null===(s=N.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===N||void 0===N||null===(a=N.currentDay)||void 0===a?void 0:a.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(l=N.currentDay)||void 0===l?void 0:l.rake)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(n=N.previousDay)||void 0===n?void 0:n.rake)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(o=N.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(d=N.currentDay)||void 0===d?void 0:d.tips)||0)})]})]})]}),"Payroll Management"===u&&(0,sa.jsx)(Md,{selectedClubId:x}),"Bonus Management"===u&&(0,sa.jsx)(qd,{selectedClubId:x}),"Tables & Waitlist"===u&&(0,sa.jsx)(Kd,{selectedClubId:x}),"Club Buy-In"===u&&(0,sa.jsx)(Hd,{selectedClubId:x,onBack:()=>m("Dashboard")}),"Push Notifications"===u&&(0,sa.jsx)(Vl,{selectedClubId:x}),"Tournaments"===u&&(0,sa.jsx)(Qd,{selectedClubId:x}),"Chat"===u&&x&&(0,sa.jsx)(lo,{clubId:x}),"Financial Overrides"===u&&(0,sa.jsx)(Vd,{selectedClubId:x}),"Leave Management"===u&&x&&(0,sa.jsx)(bd,{clubId:x,userRole:"CASHIER"}),"Rummy"===u&&(0,sa.jsx)(Gd,{selectedClubId:x}),"Notifications"===u&&x&&(0,sa.jsx)(Ao,{selectedClubId:x,recipientType:"staff"}),!["Dashboard","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides","Rummy","Notifications"].includes(u)&&(0,sa.jsx)("div",{className:"text-white",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-6",children:u})})]})]})]})}function $d(e){let{clubId:t}=e;const[s,a]=(0,r.useState)("menu"),[l,n]=(0,r.useState)([]),[i,o]=(0,r.useState)([]),[d,c]=(0,r.useState)([]),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)(null);(0,r.useEffect)(()=>{"menu"===s?(y(),v()):j()},[t,s]);const y=async()=>{try{m(!0);const e=await wr.Zl.getMenu(t);n(e)}catch(e){console.error("Error loading menu items:",e),alert("Failed to load menu items")}finally{m(!1)}},v=async()=>{try{const e=await wr.Zl.getAllMenuCategories(t);o(e)}catch(e){console.error("Error loading categories:",e)}},j=async()=>{try{m(!0);const e=await wr.Zl.getInventory(t);c(e)}catch(e){console.error("Error loading inventory:",e),alert("Failed to load inventory")}finally{m(!1)}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{onClick:()=>a("menu"),className:"px-6 py-3 rounded-lg font-semibold ".concat("menu"===s?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Menu Management"}),(0,sa.jsx)("button",{onClick:()=>a("inventory"),className:"px-6 py-3 rounded-lg font-semibold ".concat("inventory"===s?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Inventory Management"})]}),"menu"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsxs)("button",{onClick:()=>h(!0),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\u2795"}),(0,sa.jsx)("span",{children:"Add Menu Item"})]}),(0,sa.jsxs)("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udcc1"}),(0,sa.jsx)("span",{children:"Add Category"})]})]})}),u?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading menu items..."})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,sa.jsx)(Zd,{item:e,onEdit:()=>{f(e),h(!0)},onDelete:async()=>{if(window.confirm("Delete this menu item?"))try{await wr.Zl.deleteMenuItem(t,e.id),y()}catch(s){alert("Failed to delete item")}}},e.id))}),0===l.length&&!u&&(0,sa.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-lg",children:"No menu items yet"}),(0,sa.jsx)("button",{onClick:()=>h(!0),className:"mt-4 text-orange-500 hover:text-orange-400",children:"Add your first menu item"})]})]}),"inventory"===s&&(0,sa.jsx)(tc,{clubId:t,inventory:d,loading:u,onUpdate:j}),x&&(0,sa.jsx)(Xd,{clubId:t,categories:i,item:g,onClose:()=>{h(!1),f(null)},onSave:()=>{h(!1),f(null),y()}}),p&&(0,sa.jsx)(ec,{clubId:t,onClose:()=>b(!1),onSave:()=>{b(!1),v()}})]})}function Zd(e){let{item:t,onEdit:s,onDelete:a}=e;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-orange-500 transition-all",children:[(0,sa.jsxs)("div",{className:"h-48 bg-slate-900 flex overflow-x-auto",children:[t.imageUrl1&&(0,sa.jsx)("img",{src:t.imageUrl1,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),t.imageUrl2&&(0,sa.jsx)("img",{src:t.imageUrl2,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),t.imageUrl3&&(0,sa.jsx)("img",{src:t.imageUrl3,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),!t.imageUrl1&&!t.imageUrl2&&!t.imageUrl3&&(0,sa.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-500",children:(0,sa.jsx)("span",{className:"text-6xl",children:"\ud83c\udf7d\ufe0f"})})]}),(0,sa.jsxs)("div",{className:"p-4 space-y-3",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:t.name}),(e=>{const t={available:{bg:"bg-green-500",text:"Available"},limited:{bg:"bg-yellow-500",text:"Limited"},out_of_stock:{bg:"bg-red-500",text:"Out of Stock"}},s=t[e]||t.available;return(0,sa.jsx)("span",{className:"".concat(s.bg," text-white px-3 py-1 rounded-full text-xs font-semibold"),children:s.text})})(t.availability)]}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm line-clamp-2",children:t.description||"No description"}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:["\u20b9",t.price]}),(0,sa.jsx)("p",{className:"text-xs text-gray-500",children:t.category})]}),(0,sa.jsx)("div",{className:"text-right",children:(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Stock: ",t.stock]})})]}),(0,sa.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,sa.jsx)("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,sa.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})]})}function Xd(e){let{clubId:t,categories:s,item:a,onClose:l,onSave:n}=e;const[o,d]=(0,r.useState)({name:(null===a||void 0===a?void 0:a.name)||"",category:(null===a||void 0===a?void 0:a.category)||"",isCustomCategory:(null===a||void 0===a?void 0:a.isCustomCategory)||!1,price:(null===a||void 0===a?void 0:a.price)||0,stock:(null===a||void 0===a?void 0:a.stock)||0,description:(null===a||void 0===a?void 0:a.description)||"",availability:(null===a||void 0===a?void 0:a.availability)||"available",imageUrl1:(null===a||void 0===a?void 0:a.imageUrl1)||"",imageUrl2:(null===a||void 0===a?void 0:a.imageUrl2)||"",imageUrl3:(null===a||void 0===a?void 0:a.imageUrl3)||""}),[c,u]=(0,r.useState)({img1:!1,img2:!1,img3:!1}),[m,x]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:a?"Edit Menu Item":"Add Menu Item"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{x(!0);const e=(0,i.A)((0,i.A)({},o),{},{price:parseFloat(o.price)||0,stock:parseInt(o.stock)||0});a?await wr.Zl.updateMenuItem(t,a.id,e):await wr.Zl.createMenuItem(t,e),n()}catch(s){alert("Failed to save menu item")}finally{x(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Item Name *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Chicken Biryani"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Category *"}),(0,sa.jsxs)("select",{value:o.category,onChange:e=>{const t="Custom"===e.target.value;d((0,i.A)((0,i.A)({},o),{},{category:t?"":e.target.value,isCustomCategory:t}))},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"Select Category"}),s.map(e=>(0,sa.jsx)("option",{value:e.categoryName,children:e.categoryName},e.id)),(0,sa.jsx)("option",{value:"Custom",children:"Custom..."})]}),o.isCustomCategory&&(0,sa.jsx)("input",{type:"text",required:!0,value:o.category,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mt-2",placeholder:"Enter custom category name"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Price (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:o.price,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{price:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Stock"}),(0,sa.jsx)("input",{type:"number",min:"0",value:o.stock,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{stock:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Availability *"}),(0,sa.jsxs)("select",{value:o.availability,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{availability:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"available",children:"Available"}),(0,sa.jsx)("option",{value:"limited",children:"Limited"}),(0,sa.jsx)("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Description"}),(0,sa.jsx)("textarea",{value:o.description,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{description:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",rows:"3",placeholder:"Describe the item..."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Images (up to 3)"}),(0,sa.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("div",{className:"h-32 bg-slate-700 rounded-lg flex items-center justify-center overflow-hidden",children:o["imageUrl".concat(e)]?(0,sa.jsx)("img",{src:o["imageUrl".concat(e)],alt:"Preview ".concat(e),className:"w-full h-full object-cover"}):(0,sa.jsx)("span",{className:"text-gray-500 text-4xl",children:"\ud83d\udcf7"})}),(0,sa.jsx)("input",{type:"file",accept:"image/*",onChange:s=>s.target.files[0]&&(async(e,s)=>{try{u((0,i.A)((0,i.A)({},c),{},{["img".concat(s)]:!0}));const a=await wd(e,t,"menu-items");d((0,i.A)((0,i.A)({},o),{},{["imageUrl".concat(s)]:a}))}catch(a){console.error("Image upload error:",a),alert("Failed to upload image: "+(a.message||"Unknown error"))}finally{u((0,i.A)((0,i.A)({},c),{},{["img".concat(s)]:!1}))}})(s.target.files[0],e),disabled:c["img".concat(e)],className:"w-full text-sm text-gray-400"}),c["img".concat(e)]&&(0,sa.jsx)("p",{className:"text-xs text-orange-500",children:"Uploading..."})]},e))})]}),(0,sa.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:m?"Saving...":a?"Update Item":"Add Item"}),(0,sa.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function ec(e){let{clubId:t,onClose:s,onSave:a}=e;const[l,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Add Custom Category"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o(!0),await wr.Zl.createMenuCategory(t,l),a()}catch(s){alert("Failed to create category")}finally{o(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Category Name *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:l,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Special Items"})]}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:i?"Adding...":"Add Category"}),(0,sa.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function tc(e){let{clubId:t,inventory:s,loading:a,onUpdate:l}=e;const[n,i]=(0,r.useState)(null),[o,d]=(0,r.useState)(!1);return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-lg flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-white font-semibold",children:"End of Day Stock Update"}),(0,sa.jsx)("p",{className:"text-white/80 text-sm",children:"Update inventory levels after service"})]}),(0,sa.jsx)("button",{onClick:()=>d(!0),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-semibold",children:"+ Add Inventory Item"})]}),a?(0,sa.jsx)("div",{className:"text-center py-12",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"})}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{const t=(s=e.currentStock,a=e.minStock,0===s?{color:"text-red-500",label:"Out of Stock",bg:"bg-red-500/20"}:s<=a?{color:"text-yellow-500",label:"Critical",bg:"bg-yellow-500/20"}:s<=2*a?{color:"text-orange-500",label:"Low",bg:"bg-orange-500/20"}:{color:"text-green-500",label:"Good",bg:"bg-green-500/20"});var s,a;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 ".concat(t.bg),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sa.jsx)("h4",{className:"text-white font-bold",children:e.name}),(0,sa.jsx)("span",{className:"text-xs font-semibold ".concat(t.color),children:t.label})]}),(0,sa.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Current Stock:"}),(0,sa.jsxs)("span",{className:"font-bold ".concat(t.color),children:[e.currentStock," ",e.unit]})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Min Stock:"}),(0,sa.jsxs)("span",{className:"text-white",children:[e.minStock," ",e.unit]})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Cost:"}),(0,sa.jsxs)("span",{className:"text-white",children:["\u20b9",e.cost||0]})]})]}),(0,sa.jsx)("button",{onClick:()=>i(e),className:"w-full mt-4 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Update Stock"})]},e.id)})}),n&&(0,sa.jsx)(sc,{clubId:t,item:n,onClose:()=>i(null),onSave:()=>{i(null),l()}}),o&&(0,sa.jsx)(ac,{clubId:t,onClose:()=>d(!1),onSave:()=>{d(!1),l()}})]})}function sc(e){let{clubId:t,item:s,onClose:a,onSave:l}=e;const[n,i]=(0,r.useState)(s.currentStock),[o,d]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Update Stock"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{d(!0),await wr.Zl.updateInventory(t,s.id,{currentStock:n}),l()}catch(a){alert("Failed to update stock")}finally{d(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("p",{className:"text-gray-400 mb-4",children:["Item: ",(0,sa.jsx)("span",{className:"text-white font-bold",children:s.name})]}),(0,sa.jsxs)("label",{className:"block text-white mb-2",children:["Current Stock (",s.unit,")"]}),(0,sa.jsx)("input",{type:"number",required:!0,min:"0",value:n,onChange:e=>i(parseInt(e.target.value)),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"}),(0,sa.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",s.minStock," ",s.unit]})]}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Updating...":"Update"}),(0,sa.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function ac(e){let{clubId:t,onClose:s,onSave:a}=e;const[l,n]=(0,r.useState)({name:"",category:"",currentStock:0,minStock:0,supplier:"",cost:0,unit:"units"}),[o,d]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Add Inventory Item"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{d(!0),await wr.Zl.createInventoryItem(t,l),a()}catch(s){console.error("Error creating inventory item:",s),alert("Failed to create inventory item")}finally{d(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Item Name *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:l.name,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Tomatoes, Flour, etc."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Category *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:l.category,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Vegetables, Dry Goods, etc."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Current Stock *"}),(0,sa.jsx)("input",{type:"number",required:!0,min:"0",value:l.currentStock,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{currentStock:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Minimum Stock *"}),(0,sa.jsx)("input",{type:"number",required:!0,min:"0",value:l.minStock,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{minStock:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Unit"}),(0,sa.jsxs)("select",{value:l.unit,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{unit:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"units",children:"Units"}),(0,sa.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,sa.jsx)("option",{value:"g",children:"Grams (g)"}),(0,sa.jsx)("option",{value:"L",children:"Liters (L)"}),(0,sa.jsx)("option",{value:"ml",children:"Milliliters (ml)"}),(0,sa.jsx)("option",{value:"pieces",children:"Pieces"}),(0,sa.jsx)("option",{value:"boxes",children:"Boxes"}),(0,sa.jsx)("option",{value:"packets",children:"Packets"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Cost (\u20b9)"}),(0,sa.jsx)("input",{type:"number",min:"0",step:"0.01",value:l.cost,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{cost:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"0.00"})]}),(0,sa.jsxs)("div",{className:"col-span-2",children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Supplier (Optional)"}),(0,sa.jsx)("input",{type:"text",value:l.supplier,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{supplier:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"Supplier name"})]})]}),(0,sa.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Creating...":"Create Item"}),(0,sa.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function rc(e){let{clubId:t}=e;const[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(1),[u,m]=(0,r.useState)(1),[x,h]=(0,r.useState)("all"),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)(!1);(0,r.useEffect)(()=>{j(),w()},[t,x,d]);const j=async()=>{try{o(!0);const e="all"===x?void 0:x,s=await wr.Zl.getOrders(t,e,d,10);s&&Array.isArray(s.orders)?(a(s.orders),m(s.totalPages||1)):Array.isArray(s)?a(s):a([])}catch(e){console.error("Error loading orders:",e),alert("Failed to load orders"),a([])}finally{o(!1)}},w=async()=>{try{const e=await wr.Zl.getKitchenStations(t,!0);n(e)}catch(e){console.error("Error loading stations:",e)}},N=s||[];return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 flex justify-between items-center",children:[(0,sa.jsx)("div",{className:"flex space-x-2",children:["all","pending","processing","ready","delivered","cancelled"].map(e=>(0,sa.jsx)("button",{onClick:()=>{h(e),c(1)},className:"px-4 py-2 rounded-lg font-semibold text-sm ".concat(x===e?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,sa.jsx)("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\udd04 Refresh"})]}),(0,sa.jsxs)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-xl p-4",children:[(0,sa.jsx)("h3",{className:"text-white font-bold mb-2",children:"\ud83d\udccb Order Processing Workflow"}),(0,sa.jsx)("p",{className:"text-blue-200 text-sm",children:"1. Player places order \u2192 2. FNB Manager processes & sends to Chef \u2192 3. Chef prepares food \u2192 4. Status updates visible in Player Portal"})]}),i?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading orders..."})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,sa.jsx)(lc,{order:e,onAccept:()=>{b(e),f(!0)},onReject:()=>{b(e),v(!0)},onMarkReady:()=>(async e=>{try{await wr.Zl.markOrderReady(t,e),alert("Order marked as ready!"),j()}catch(s){alert("Failed to mark order as ready")}})(e.id),onMarkDelivered:()=>(async e=>{try{await wr.Zl.markOrderDelivered(t,e),alert("Order delivered! Invoice generated."),j()}catch(s){alert("Failed to mark order as delivered")}})(e.id)},e.id))}),0===N.length&&(0,sa.jsx)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:(0,sa.jsx)("p",{className:"text-gray-400 text-lg",children:"No orders found"})}),u>1&&(0,sa.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,sa.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-white",children:["Page ",d," of ",u]}),(0,sa.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:d===u,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}),g&&p&&(0,sa.jsx)(nc,{order:p,stations:l,onAccept:async(e,s)=>{try{await wr.Zl.acceptOrder(t,e,s),alert("Order accepted successfully!"),f(!1),j()}catch(a){alert("Failed to accept order")}},onClose:()=>{f(!1),b(null)}}),y&&p&&(0,sa.jsx)(ic,{order:p,onReject:async(e,s)=>{try{await wr.Zl.rejectOrder(t,e,s),alert("Order rejected"),v(!1),j()}catch(a){alert("Failed to reject order")}},onClose:()=>{v(!1),b(null)}})]})}function lc(e){let{order:t,onAccept:s,onReject:a,onMarkReady:r,onMarkDelivered:l}=e;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[t.orderNumber?(0,sa.jsx)("h3",{className:"text-2xl font-bold text-orange-500",children:t.orderNumber}):(0,sa.jsx)("h3",{className:"text-2xl font-bold text-gray-500",children:"No Order # (Not Accepted)"}),(()=>{const e={pending:{bg:"bg-yellow-500",text:"\u23f3 Pending",icon:"\u23f3"},processing:{bg:"bg-blue-500",text:"\ud83d\udc68\u200d\ud83c\udf73 Processing",icon:"\ud83d\udc68\u200d\ud83c\udf73"},ready:{bg:"bg-green-500",text:"\u2705 Ready",icon:"\u2705"},delivered:{bg:"bg-emerald-500",text:"\ud83c\udf89 Delivered",icon:"\ud83c\udf89"},cancelled:{bg:"bg-red-500",text:"\u274c Cancelled",icon:"\u274c"}},s=e[t.status]||e.pending;return(0,sa.jsx)("span",{className:"".concat(s.bg," text-white px-4 py-2 rounded-full text-sm font-semibold"),children:s.text})})(t.status)]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,sa.jsxs)("p",{className:"text-gray-400",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),t.stationName&&(0,sa.jsxs)("p",{className:"text-blue-400",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Station:"})," ",t.stationName]})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("p",{className:"text-3xl font-bold text-orange-500",children:["\u20b9",t.totalAmount]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:new Date(t.createdAt).toLocaleString()}),t.invoiceNumber&&(0,sa.jsxs)("p",{className:"text-sm text-green-400 mt-1",children:["Invoice: ",t.invoiceNumber]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-4",children:[(0,sa.jsx)("h4",{className:"text-white font-semibold mb-2",children:"Order Items:"}),(0,sa.jsx)("ul",{className:"space-y-1",children:t.items.map((e,t)=>(0,sa.jsxs)("li",{className:"text-gray-300 flex justify-between",children:[(0,sa.jsxs)("span",{children:[e.quantity,"x ",e.name]}),(0,sa.jsxs)("span",{className:"text-orange-400",children:["\u20b9",e.price*e.quantity]})]},t))}),t.specialInstructions&&(0,sa.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-700",children:(0,sa.jsxs)("p",{className:"text-yellow-400 text-sm",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Special Instructions:"})," ",t.specialInstructions]})})]}),(0,sa.jsxs)("div",{className:"flex space-x-2",children:["pending"===t.status&&null===t.isAccepted&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:s,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u2705 Accept Order"}),(0,sa.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u274c Reject Order"})]}),"processing"===t.status&&(0,sa.jsx)("button",{onClick:r,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u2705 Mark as Ready"}),"ready"===t.status&&(0,sa.jsx)("button",{onClick:l,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83c\udf89 Mark as Delivered"}),"cancelled"===t.status&&t.rejectedReason&&(0,sa.jsxs)("div",{className:"flex-1 bg-red-600/20 border border-red-500 text-red-400 px-4 py-2 rounded-lg",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Rejected:"})," ",t.rejectedReason]})]})]})}function nc(e){let{order:t,stations:s,onAccept:a,onClose:l}=e;const[n,i]=(0,r.useState)(""),[o,d]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Accept Order"}),(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),(0,sa.jsxs)("p",{className:"text-orange-500 text-2xl font-bold mt-2",children:["\u20b9",t.totalAmount]})]}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n?(d(!0),await a(t.id,n),d(!1)):alert("Please select a station")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Select Kitchen Station *"}),(0,sa.jsxs)("select",{value:n,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"-- Select Station --"}),s.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.stationName," (Chef: ",e.chefName||"Unassigned",") - ",e.ordersPending," pending"]},e.id))]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Order will be assigned to this station for preparation"})]}),(0,sa.jsx)("div",{className:"bg-green-600/20 border border-green-500 rounded-lg p-3",children:(0,sa.jsx)("p",{className:"text-green-400 text-sm",children:"\u2705 Accepting will assign an order number and send to kitchen"})}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Accepting...":"\u2705 Accept & Send to Kitchen"}),(0,sa.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function ic(e){let{order:t,onReject:s,onClose:a}=e;const[l,n]=(0,r.useState)(""),[i,o]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Reject Order"}),(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),(0,sa.jsxs)("p",{className:"text-orange-500 text-2xl font-bold mt-2",children:["\u20b9",t.totalAmount]})]}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l.trim()?(o(!0),await s(t.id,l),o(!1)):alert("Please provide a rejection reason")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Rejection Reason *"}),(0,sa.jsx)("textarea",{value:l,onChange:e=>n(e.target.value),required:!0,rows:"3",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Out of stock, Kitchen closed, etc."})]}),(0,sa.jsx)("div",{className:"bg-red-600/20 border border-red-500 rounded-lg p-3",children:(0,sa.jsx)("p",{className:"text-red-400 text-sm",children:"\u26a0\ufe0f Rejecting will cancel the order (no order number assigned)"})}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:i?"Rejecting...":"\u274c Reject Order"}),(0,sa.jsx)("button",{type:"button",onClick:a,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}const oc=[{value:"meat_poultry",label:"Meat & Poultry"},{value:"vegetables",label:"Vegetables"},{value:"spices",label:"Spices"},{value:"dairy",label:"Dairy"},{value:"beverages",label:"Beverages"}];function dc(e){let{clubId:t}=e;const[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{u()},[t]);const u=async()=>{try{n(!0);const e=await wr.Zl.getSuppliers(t,!1);a(e)}catch(e){console.error("Error loading suppliers:",e),alert("Failed to load suppliers")}finally{n(!1)}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Supplier Management"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Manage your food & beverage suppliers"})]}),(0,sa.jsxs)("button",{onClick:()=>{c(null),o(!0)},className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\u2795"}),(0,sa.jsx)("span",{children:"Add Supplier"})]})]}),l?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading suppliers..."})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,sa.jsx)(cc,{supplier:e,onEdit:()=>{c(e),o(!0)},onDelete:async()=>{if(window.confirm('Delete supplier "'.concat(e.name,'"?')))try{await wr.Zl.deleteSupplier(t,e.id),u()}catch(s){alert("Failed to delete supplier")}}},e.id))}),0===s.length&&!l&&(0,sa.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-lg",children:"No suppliers yet"}),(0,sa.jsx)("button",{onClick:()=>o(!0),className:"mt-4 text-orange-500 hover:text-orange-400",children:"Add your first supplier"})]}),i&&(0,sa.jsx)(uc,{clubId:t,supplier:d,onClose:()=>{o(!1),c(null)},onSave:()=>{o(!1),c(null),u()}})]})}function cc(e){let{supplier:t,onEdit:s,onDelete:a}=e;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border ".concat(t.isActive?"border-green-500":"border-slate-700"),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:t.name}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:t.contact||"No contact person"})]}),(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.isActive?"Active":"Inactive"})]}),(0,sa.jsxs)("div",{className:"space-y-2 mb-4",children:[t.phone&&(0,sa.jsxs)("p",{className:"text-gray-300 text-sm flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udcde"}),(0,sa.jsx)("span",{children:t.phone})]}),t.email&&(0,sa.jsxs)("p",{className:"text-gray-300 text-sm flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udce7"}),(0,sa.jsx)("span",{children:t.email})]}),t.address&&(0,sa.jsxs)("p",{className:"text-gray-400 text-xs flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\ud83d\udccd"}),(0,sa.jsx)("span",{className:"line-clamp-2",children:t.address})]})]}),t.rating&&(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-lg",children:(e=>{const t=[],s=Math.floor(e||0),a=(e||0)%1>=.5;for(let r=0;r<5;r++)r<s||r===s&&a?t.push("\u2b50"):t.push("\u2606");return t.join("")})(t.rating)}),(0,sa.jsxs)("p",{className:"text-xs text-gray-400",children:[t.rating,"/5.0"]})]}),t.specializations&&t.specializations.length>0&&(0,sa.jsxs)("div",{className:"mb-4",children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Specializations:"}),(0,sa.jsx)("div",{className:"flex flex-wrap gap-2",children:t.specializations.map((e,t)=>(0,sa.jsx)("span",{className:"bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs",children:e.replace("_"," & ")},t))})]}),(0,sa.jsxs)("div",{className:"flex space-x-2 pt-4 border-t border-slate-700",children:[(0,sa.jsx)("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,sa.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})}function uc(e){var t;let{clubId:s,supplier:a,onClose:l,onSave:n}=e;const[o,d]=(0,r.useState)({name:(null===a||void 0===a?void 0:a.name)||"",contact:(null===a||void 0===a?void 0:a.contact)||"",phone:(null===a||void 0===a?void 0:a.phone)||"",email:(null===a||void 0===a?void 0:a.email)||"",address:(null===a||void 0===a?void 0:a.address)||"",rating:(null===a||void 0===a?void 0:a.rating)||0,isActive:null===(t=null===a||void 0===a?void 0:a.isActive)||void 0===t||t,specializations:(null===a||void 0===a?void 0:a.specializations)||[]}),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(!1),h=()=>{c.trim()&&!o.specializations.includes(c.trim())&&(d((0,i.A)((0,i.A)({},o),{},{specializations:[...o.specializations,c.trim()]})),u(""))};return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:a?"Edit Supplier":"Add Supplier"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{x(!0),a?await wr.Zl.updateSupplier(s,a.id,o):await wr.Zl.createSupplier(s,o),n()}catch(t){alert("Failed to save supplier")}finally{x(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Supplier Name *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Fresh Foods Ltd."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Contact Person"}),(0,sa.jsx)("input",{type:"text",value:o.contact,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{contact:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., John Smith"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Phone"}),(0,sa.jsx)("input",{type:"tel",value:o.phone,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{phone:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"+91 98765 43210"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Email"}),(0,sa.jsx)("input",{type:"email",value:o.email,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{email:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"supplier@example.com"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Address"}),(0,sa.jsx)("textarea",{value:o.address,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{address:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",rows:"2",placeholder:"Full address..."})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Specializations"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsx)("div",{className:"grid grid-cols-2 gap-2",children:oc.map(e=>(0,sa.jsxs)("label",{className:"flex items-center space-x-2 bg-slate-700 p-3 rounded-lg cursor-pointer hover:bg-slate-600",children:[(0,sa.jsx)("input",{type:"checkbox",checked:o.specializations.includes(e.value),onChange:()=>(e=>{o.specializations.includes(e)?d((0,i.A)((0,i.A)({},o),{},{specializations:o.specializations.filter(t=>t!==e)})):d((0,i.A)((0,i.A)({},o),{},{specializations:[...o.specializations,e]}))})(e.value),className:"w-4 h-4"}),(0,sa.jsx)("span",{className:"text-white",children:e.label})]},e.value))}),(0,sa.jsxs)("div",{className:"flex space-x-2",children:[(0,sa.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"Add custom specialization...",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),h())}),(0,sa.jsx)("button",{type:"button",onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Add"})]}),o.specializations.filter(e=>!oc.some(t=>t.value===e)).length>0&&(0,sa.jsx)("div",{className:"flex flex-wrap gap-2",children:o.specializations.filter(e=>!oc.some(t=>t.value===e)).map(e=>(0,sa.jsxs)("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:e}),(0,sa.jsx)("button",{type:"button",onClick:()=>(e=>{d((0,i.A)((0,i.A)({},o),{},{specializations:o.specializations.filter(t=>t!==e)}))})(e),className:"text-white hover:text-red-300",children:"\xd7"})]},e))})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Rating (0-5)"}),(0,sa.jsx)("input",{type:"number",min:"0",max:"5",step:"0.1",value:o.rating,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{rating:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Status"}),(0,sa.jsxs)("select",{value:o.isActive?"active":"inactive",onChange:e=>d((0,i.A)((0,i.A)({},o),{},{isActive:"active"===e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"active",children:"Active"}),(0,sa.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,sa.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:m?"Saving...":a?"Update Supplier":"Add Supplier"}),(0,sa.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function mc(e){let{clubId:t}=e;const[s,a]=(0,r.useState)([]),[l,n]=(0,r.useState)([]),[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(null),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{g(),f()},[t]);const g=async()=>{try{o(!0);const e=await wr.Zl.getKitchenStations(t,!1);a(e)}catch(e){console.error("Error loading stations:",e),alert("Failed to load kitchen stations")}finally{o(!1)}},f=async()=>{try{const e=await wr.staffAPI.getAllStaffMembers(t),s=(null===e||void 0===e?void 0:e.staff)||e||[],a=Array.isArray(s)?s.filter(e=>{const t="Active"===e.status||!e.status,s="FNB"===e.role,a="Staff"===e.role&&e.customRoleName;return t&&(s||a)}):[];n(a)}catch(e){console.error("Error loading chefs:",e),n([])}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Kitchen Operations"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Manage kitchen stations and track progress"})]}),(0,sa.jsxs)("button",{onClick:()=>{m(null),c(!0)},className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,sa.jsx)("span",{children:"\u2795"}),(0,sa.jsx)("span",{children:"Create Station"})]})]}),(0,sa.jsxs)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-xl p-4",children:[(0,sa.jsx)("h3",{className:"text-white font-bold mb-2",children:"\ud83c\udfe0 Kitchen Station Management"}),(0,sa.jsx)("p",{className:"text-blue-200 text-sm",children:"Create multiple stations for different food categories. Each station tracks pending and completed orders in real-time."})]}),i?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading stations..."})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,sa.jsx)(xc,{station:e,onEdit:()=>{m(e),c(!0)},onViewStats:()=>(async e=>{try{const s=await wr.Zl.getStationStatistics(t,e);b(s),h(!0)}catch(s){alert("Failed to load station statistics")}})(e.id),onDelete:async()=>{if(window.confirm('Delete station "'.concat(e.stationName,'"?')))try{await wr.Zl.deleteKitchenStation(t,e.id),g()}catch(s){alert(s.message||"Failed to delete station")}},onToggleStatus:async()=>{try{await wr.Zl.updateKitchenStation(t,e.id,{isActive:!e.isActive}),g()}catch(s){alert("Failed to update station status")}}},e.id))}),0===s.length&&!i&&(0,sa.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:"No kitchen stations yet"}),(0,sa.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:'Create stations like "Station 1 - Quick Snacks", "Station 2 - Main Meals", etc.'}),(0,sa.jsx)("button",{onClick:()=>c(!0),className:"text-orange-500 hover:text-orange-400 font-semibold",children:"Create your first station"})]}),d&&(0,sa.jsx)(hc,{clubId:t,station:u,chefs:l,onClose:()=>{c(!1),m(null)},onSave:()=>{c(!1),m(null),g()}}),x&&p&&(0,sa.jsx)(pc,{stats:p,onClose:()=>{h(!1),b(null)}})]})}function xc(e){let{station:t,onEdit:s,onViewStats:a,onDelete:r,onToggleStatus:l}=e;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border-2 ".concat(t.isActive?"border-green-500":"border-gray-600"),children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,sa.jsx)("span",{className:"text-3xl",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,sa.jsxs)("span",{className:"bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:["#",t.stationNumber]})]}),(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:t.stationName})]}),(0,sa.jsx)("button",{onClick:l,className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.isActive?"Active":"Inactive"})]}),(0,sa.jsxs)("div",{className:"mb-4 pb-4 border-b border-slate-700",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Chef:"}),(0,sa.jsx)("p",{className:"text-white font-semibold",children:t.chefName||"Unassigned"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,sa.jsxs)("div",{className:"bg-yellow-600/20 rounded-lg p-3",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-2xl font-bold",children:t.ordersPending}),(0,sa.jsx)("p",{className:"text-yellow-300 text-xs",children:"Pending Orders"})]}),(0,sa.jsxs)("div",{className:"bg-green-600/20 rounded-lg p-3",children:[(0,sa.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:t.ordersCompleted}),(0,sa.jsx)("p",{className:"text-green-300 text-xs",children:"Completed"})]})]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"\ud83d\udcca View Statistics"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,sa.jsx)("button",{onClick:s,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,sa.jsx)("button",{onClick:r,className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})]})}function hc(e){var t;let{clubId:s,station:a,chefs:l,onClose:n,onSave:o}=e;const[d,c]=(0,r.useState)({stationName:(null===a||void 0===a?void 0:a.stationName)||"",stationNumber:(null===a||void 0===a?void 0:a.stationNumber)||"",chefName:(null===a||void 0===a?void 0:a.chefName)||"",chefId:(null===a||void 0===a?void 0:a.chefId)||"",isActive:null===(t=null===a||void 0===a?void 0:a.isActive)||void 0===t||t}),[u,m]=(0,r.useState)(!1);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:a?"Edit Kitchen Station":"Create Kitchen Station"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{m(!0),a?await wr.Zl.updateKitchenStation(s,a.id,d):await wr.Zl.createKitchenStation(s,d),o()}catch(t){alert(t.message||"Failed to save station")}finally{m(!1)}},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Station Name *"}),(0,sa.jsx)("input",{type:"text",required:!0,value:d.stationName,onChange:e=>c((0,i.A)((0,i.A)({},d),{},{stationName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Station 1 - Quick Snacks"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Station Number *"}),(0,sa.jsx)("input",{type:"number",required:!0,min:"1",value:d.stationNumber,onChange:e=>c((0,i.A)((0,i.A)({},d),{},{stationNumber:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"1, 2, 3..."}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Unique number for this station"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Chef Name"}),(0,sa.jsx)("input",{type:"text",value:d.chefName,onChange:e=>c((0,i.A)((0,i.A)({},d),{},{chefName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Chef Raj"})]}),l.length>0&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Or Select from Staff"}),(0,sa.jsxs)("select",{value:d.chefId||"",onChange:e=>{const t=l.find(t=>t.id===e.target.value);c((0,i.A)((0,i.A)({},d),{},{chefId:e.target.value,chefName:(null===t||void 0===t?void 0:t.name)||d.chefName}))},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"-- Optional --"}),l.map(e=>{const t="Staff"===e.role&&e.customRoleName?"".concat(e.customRoleName," (Custom)"):e.role;return(0,sa.jsxs)("option",{value:e.id,children:[e.name," ",t?"- ".concat(t):""]},e.id)})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Showing all active staff members including custom roles"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Status"}),(0,sa.jsxs)("select",{value:d.isActive?"active":"inactive",onChange:e=>c((0,i.A)((0,i.A)({},d),{},{isActive:"active"===e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"active",children:"Active"}),(0,sa.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,sa.jsx)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-lg p-3",children:(0,sa.jsx)("p",{className:"text-blue-300 text-sm",children:"\ud83d\udca1 Orders will be assigned to this station by the FNB manager"})}),(0,sa.jsxs)("div",{className:"flex space-x-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:u,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:u?"Saving...":a?"Update Station":"Create Station"}),(0,sa.jsx)("button",{type:"button",onClick:n,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function pc(e){let{stats:t,onClose:s}=e;return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Station Statistics"}),(0,sa.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("span",{className:"text-4xl",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:t.station.name}),(0,sa.jsxs)("p",{className:"text-gray-400",children:["Station #",t.station.number]}),(0,sa.jsxs)("p",{className:"text-gray-400",children:["Chef: ",t.station.chefName||"Unassigned"]})]})]})}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,sa.jsxs)("div",{className:"bg-yellow-600/20 rounded-lg p-6",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-4xl font-bold mb-2",children:t.statistics.todayCompleted}),(0,sa.jsx)("p",{className:"text-yellow-300 text-sm",children:"Completed Today"})]}),(0,sa.jsxs)("div",{className:"bg-blue-600/20 rounded-lg p-6",children:[(0,sa.jsx)("p",{className:"text-blue-400 text-4xl font-bold mb-2",children:t.statistics.todayPending}),(0,sa.jsx)("p",{className:"text-blue-300 text-sm",children:"Pending Today"})]}),(0,sa.jsxs)("div",{className:"bg-green-600/20 rounded-lg p-6",children:[(0,sa.jsx)("p",{className:"text-green-400 text-4xl font-bold mb-2",children:t.statistics.allTimeCompleted}),(0,sa.jsx)("p",{className:"text-green-300 text-sm",children:"All-Time Completed"})]}),(0,sa.jsxs)("div",{className:"bg-purple-600/20 rounded-lg p-6",children:[(0,sa.jsx)("p",{className:"text-purple-400 text-4xl font-bold mb-2",children:t.statistics.storedPending}),(0,sa.jsx)("p",{className:"text-purple-300 text-sm",children:"Currently Pending"})]})]}),(0,sa.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Station Status:"}),(0,sa.jsx)("span",{className:"px-4 py-2 rounded-full font-semibold ".concat(t.station.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.station.isActive?"\u2705 Active":"\u2b55 Inactive"})]})}),(0,sa.jsx)("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold",children:"Close"})]})})}function bc(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null}=e;const[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ml({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4}),{data:g}=ml({queryKey:["unreadChatCounts",p],queryFn:()=>wr.h2.getUnreadCounts(p),enabled:!!p,refetchInterval:1e4}),f=((null===g||void 0===g?void 0:g.staffChats)||0)+((null===g||void 0===g?void 0:g.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(n&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[n,d]);const{data:y}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=v.email||"fnb@pokerroom.com",w=v.displayName||"FNB Manager",N=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[d&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-orange-500 to-red-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!n),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&n&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-orange-500/20 via-red-600/30 to-pink-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?n?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-300 to-pink-400 drop-shadow-lg mb-6",children:"FNB Portal"}),(0,sa.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"F"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:w}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:j})]})]}),u&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?jr.error("Password must be at least 8 characters"):N.mutate({email:j,currentPassword:x.currentPassword,newPassword:x.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:N.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),y&&y.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:y.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:a.map((e,a)=>(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-orange-400 to-red-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-orange-400/20 hover:to-red-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount}),"Chat"===e&&f>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f>9?"9+":f})]})},a))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function gc(){const[e,t]=(0,r.useState)("Menu & Inventory"),s=me(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=localStorage.getItem("clubId");e&&c(e)},[]),(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}");(e.mustResetPassword||t.mustResetPassword)&&l(!0)},[]);const u=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("fnb_staffuser",JSON.stringify(t))),l(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),m=a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}"),a=t.email||s.email||s.userEmail;a?n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword===n.confirmPassword?n.newPassword.length<8?jr.error("Password must be at least 8 characters"):u.mutate({email:a,currentPassword:n.currentPassword,newPassword:n.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:u.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:u.isLoading?"Resetting...":"Reset Password"})]})]})}),x=()=>{localStorage.removeItem("user"),localStorage.removeItem("fnb_staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(bc,{activeItem:e,setActiveItem:t,menuItems:["Menu & Inventory","Notifications","Order Management","Supplier Management","Kitchen Operations","Leave Management","Chat"],onSignOut:x}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsxs)("header",{className:"bg-gradient-to-r from-orange-600 via-red-500 to-pink-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["FNB Portal - ",e]}),(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage poker club F&B service, menu, and player orders"})]}),(0,sa.jsx)("button",{onClick:x,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view FNB management."})}),d&&(0,sa.jsx)(To,{selectedClubId:d}),"Menu & Inventory"===e&&d&&(0,sa.jsx)($d,{clubId:d}),"Order Management"===e&&d&&(0,sa.jsx)(rc,{clubId:d}),"Supplier Management"===e&&d&&(0,sa.jsx)(dc,{clubId:d}),"Kitchen Operations"===e&&d&&(0,sa.jsx)(mc,{clubId:d}),"Chat"===e&&d&&(0,sa.jsx)(lo,{clubId:d}),"Notifications"===e&&d&&(0,sa.jsx)(Ao,{selectedClubId:d,recipientType:"staff"}),"Leave Management"===e&&d&&(0,sa.jsx)(bd,{clubId:d,userRole:"FNB"})]})})]}),m]})}function fc(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null,customRoleName:n="Staff"}=e;const[i,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),u=localStorage.getItem("clubId"),{data:m}=ml({queryKey:["unreadNotificationCount",u,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(u,"staff"),enabled:!!u,refetchInterval:3e4}),{data:x}=ml({queryKey:["unreadChatCounts",u],queryFn:()=>wr.h2.getUnreadCounts(u),enabled:!!u,refetchInterval:1e4}),h=((null===x||void 0===x?void 0:x.staffChats)||0)+((null===x||void 0===x?void 0:x.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:p}=ml({queryKey:["club",u],queryFn:()=>wr.Od.getClub(u),enabled:!!u}),b=JSON.parse(localStorage.getItem("user")||"{}"),g=b.email||"",f=b.displayName||"Staff Member";return(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:()=>o(!i),className:"lg:hidden fixed top-4 left-4 z-50 bg-slate-800 p-2 rounded-lg text-white",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:static inset-y-0 left-0 z-40 w-64 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700 transform ".concat(i?"translate-x-0":"-translate-x-full"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,sa.jsxs)("div",{className:"flex flex-col h-full",children:[(0,sa.jsxs)("div",{className:"p-6 border-b border-slate-700",children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:n}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Staff Portal"})]}),(0,sa.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 cursor-pointer hover:bg-slate-700 transition-colors",children:[(0,sa.jsx)("p",{className:"text-white font-semibold truncate",children:f}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm truncate",children:g})]}),p&&(0,sa.jsxs)("div",{className:"mt-4 bg-green-900/30 border border-green-500/50 rounded-lg p-3",children:[(0,sa.jsx)("p",{className:"text-green-400 text-xs font-semibold mb-1",children:"Club Code"}),(0,sa.jsx)("p",{className:"text-green-300 text-lg font-bold",children:p.code||"N/A"}),(0,sa.jsx)("p",{className:"text-green-400/70 text-xs mt-1",children:"Players use this to sign up"})]})]}),(0,sa.jsx)("nav",{className:"flex-1 overflow-y-auto p-4",children:(0,sa.jsx)("ul",{className:"space-y-2",children:a.map(e=>(0,sa.jsx)("li",{children:(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left px-4 py-3 rounded-lg transition-colors ".concat(t===e?"bg-purple-600 text-white":"text-gray-300 hover:bg-slate-700"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,sa.jsx)("span",{children:e}),"Notifications"===e&&(null===m||void 0===m?void 0:m.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:m.unreadCount>9?"9+":m.unreadCount}),"Chat"===e&&h>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:h>9?"9+":h})]})})},e))})}),l&&(0,sa.jsx)("div",{className:"p-4 border-t border-slate-700",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Sign Out"})})]})}),i&&d&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>o(!1)})]})}function yc(){const[e,t]=(0,r.useState)("Chat"),s=me(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),[m,x]=(0,r.useState)(c.customRoleName||u.customRoleName||"Staff"),[h,p]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(d&&c.email)try{const e=await wr.staffAPI.getAllStaffMembers(d),t=((null===e||void 0===e?void 0:e.staff)||e||[]).find(e=>e.email===c.email);if(t&&(p(t.id),t.customRoleName)){x(t.customRoleName);const e=(0,i.A)((0,i.A)({},c),{},{customRoleName:t.customRoleName});localStorage.setItem("user",JSON.stringify(e))}}catch(e){console.error("Error fetching staff data:",e)}})()},[d,c.email]),(0,r.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&l(!0)},[]);const b=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=(0,i.A)((0,i.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,i.A)((0,i.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),l(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),g=a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword===n.confirmPassword?n.newPassword.length<8?jr.error("Password must be at least 8 characters"):b.mutate({email:t,currentPassword:n.currentPassword,newPassword:n.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:b.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:b.isLoading?"Resetting...":"Reset Password"})]})]})}),f=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(fc,{activeItem:e,setActiveItem:t,menuItems:["Notifications","Chat","Salary History","Bonus History","Leave Management"],onSignOut:f,customRoleName:m}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[m," Portal - ",e]}),(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:"Staff communication and financial records"})]}),(0,sa.jsx)("button",{onClick:f,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),d&&(0,sa.jsx)(To,{selectedClubId:d}),"Chat"===e&&d&&(0,sa.jsx)(lo,{clubId:d,hidePlayerChat:!0}),"Salary History"===e&&d&&h&&(0,sa.jsx)(vc,{clubId:d,staffId:h}),"Notifications"===e&&d&&(0,sa.jsx)(Ao,{selectedClubId:d,recipientType:"staff"}),"Bonus History"===e&&d&&h&&(0,sa.jsx)(jc,{clubId:d,staffId:h}),"Leave Management"===e&&d&&(0,sa.jsx)(bd,{clubId:d,userRole:"STAFF"})]})})]}),g]})}function vc(e){let{clubId:t,staffId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ml({queryKey:["salary-payments",t,s,a,n],queryFn:async()=>await wr.oA.getSalaryPayments(t,(0,i.A)({page:a,limit:10,staffId:s},n)),enabled:!!t&&!!s}),u=(null===d||void 0===d?void 0:d.payments)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1,x=(null===d||void 0===d?void 0:d.total)||0,h=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})),p=e=>e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return c?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading salary history..."})]}):(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Your Salary History"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,sa.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Records"}),(0,sa.jsx)("p",{className:"text-white text-2xl font-bold",children:x})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Paid"}),(0,sa.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:h(u.reduce((e,t)=>e+(t.amount||0),0))})]})]})}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full text-left",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Payment Date"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Amount"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Period"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Status"})]})}),(0,sa.jsx)("tbody",{children:0===u.length?(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-400",children:"No salary payments found"})}):u.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 text-white",children:p(e.paymentDate)}),(0,sa.jsx)("td",{className:"py-3 text-green-400 font-semibold",children:h(e.amount)}),(0,sa.jsx)("td",{className:"py-3 text-gray-300",children:e.periodStart&&e.periodEnd?"".concat(p(e.periodStart)," - ").concat(p(e.periodEnd)):"-"}),(0,sa.jsx)("td",{className:"py-3",children:(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Paid"===e.status?"bg-green-900/30 text-green-400":"bg-yellow-900/30 text-yellow-400"),children:e.status||"Paid"})})]},e.id))})]})}),m>1&&(0,sa.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",m]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(m,e+1)),disabled:a===m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Next"})]})]})})}function jc(e){let{clubId:t,staffId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ml({queryKey:["staff-bonuses",t,s,a,n],queryFn:async()=>await wr.KG.getStaffBonuses(t,(0,i.A)({page:a,limit:10,staffId:s},n)),enabled:!!t&&!!s}),u=(null===d||void 0===d?void 0:d.bonuses)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1,x=(null===d||void 0===d?void 0:d.total)||0,h=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));return c?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading bonus history..."})]}):(0,sa.jsx)("div",{className:"space-y-6",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Your Bonus History"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,sa.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Bonuses"}),(0,sa.jsx)("p",{className:"text-white text-2xl font-bold",children:x})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Bonus Amount"}),(0,sa.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:h(u.reduce((e,t)=>e+(t.bonusAmount||0),0))})]})]})}),(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full text-left",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Date"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Bonus Type"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Amount"}),(0,sa.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Reason"})]})}),(0,sa.jsx)("tbody",{children:0===u.length?(0,sa.jsx)("tr",{children:(0,sa.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-400",children:"No bonuses found"})}):u.map(e=>{return(0,sa.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,sa.jsx)("td",{className:"py-3 text-white",children:(t=e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,sa.jsx)("td",{className:"py-3 text-gray-300",children:e.bonusType||e.customBonusType||"-"}),(0,sa.jsx)("td",{className:"py-3 text-green-400 font-semibold",children:h(e.bonusAmount)}),(0,sa.jsx)("td",{className:"py-3 text-gray-400",children:e.reason||"-"})]},e.id);var t})})]})}),m>1&&(0,sa.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",m]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(m,e+1)),disabled:a===m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Next"})]})]})})}const wc={ADMIN:"/admin",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",MANAGER:"/manager",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"};function Nc(){var e,t;const[a,l]=(0,r.useState)({email:"",password:""}),[n,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(!1),u=me();null===(e=de().state)||void 0===e||null===(t=e.from)||void 0===t||t.pathname;(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("adminuser")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=JSON.parse(localStorage.getItem("masteradminuser")||"{}");if(e.id||t.userId||s.userId||a.userId){const r=e.role||t.role||s.role||a.role;"SUPER_ADMIN"===r||s.userId?u("/super-admin",{replace:!0}):e.isMasterAdmin||a.userId?u("/master-admin",{replace:!0}):r&&wc[r]&&u(wc[r],{replace:!0})}},[u]);const m=e=>{l((0,i.A)((0,i.A)({},a),{},{[e.target.name]:e.target.value}))};return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black flex items-center justify-center p-4",children:(0,sa.jsxs)("div",{className:"max-w-md w-full",children:[(0,sa.jsxs)("div",{className:"text-center mb-8",children:[(0,sa.jsx)("div",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-lg mb-4",children:"Staff Portal"}),(0,sa.jsx)("p",{className:"text-gray-300",children:"Sign in to access your dashboard"})]}),(0,sa.jsx)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-8 shadow-2xl border border-gray-700",children:(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),c(!0);try{var t,r,l,i,d,m,x,h,p,b,g,f;const e=await wr.R2.login(a.email,a.password);if(console.log("Login response:",e),null!==(t=e.user)&&void 0!==t&&t.isMasterAdmin&&(!e.clubRoles||0===e.clubRoles.length))throw new Error("Master Admin should use /master-admin/signin");const o=null===(r=e.tenantRoles)||void 0===r?void 0:r.some(e=>"SUPER_ADMIN"===e.role),c=e.clubRoles&&e.clubRoles.length>0;if(o&&!c)throw new Error("Super Admin should use /super-admin/signin");const y=null===(l=e.clubRoles)||void 0===l||null===(i=l[0])||void 0===i?void 0:i.role,v=null===(d=e.tenantRoles)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.role,j=y||v;if(console.log("Detected role:",j,"clubRoles:",e.clubRoles,"tenantRoles:",e.tenantRoles),!j)throw new Error("No role assigned. Please contact administrator.");let w=null;if("STAFF"===j&&null!==(x=e.clubRoles)&&void 0!==x&&null!==(h=x[0])&&void 0!==h&&null!==(p=h.club)&&void 0!==p&&p.id)try{const{staffAPI:t}=await Promise.resolve().then(s.bind(s,980)),r=e.clubRoles[0].club.id,l=await t.getAllStaffMembers(r),n=((null===l||void 0===l?void 0:l.staff)||l||[]).find(e=>e.email===a.email);null!==n&&void 0!==n&&n.customRoleName&&(w=n.customRoleName)}catch(n){console.error("Error fetching custom role name:",n)}const N={id:e.user.id,email:a.email,displayName:e.user.displayName,role:j,mustResetPassword:e.user.mustResetPassword||!1,customRoleName:w},S="".concat(j.toLowerCase(),"user");localStorage.setItem(S,JSON.stringify({email:a.email,role:j,userId:e.user.id,displayName:e.user.displayName,mustResetPassword:e.user.mustResetPassword||!1,customRoleName:w})),localStorage.setItem("user",JSON.stringify(N)),null!==(b=e.clubRoles)&&void 0!==b&&null!==(g=b[0])&&void 0!==g&&null!==(f=g.club)&&void 0!==f&&f.id&&localStorage.setItem("clubId",e.clubRoles[0].club.id);u(wc[j]||"/",{replace:!0})}catch(lu){console.error("Login error:",lu),o(lu.message||"Invalid email or password. Please try again.")}finally{c(!1)}},className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,sa.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:a.email,onChange:m,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Enter your email",autoComplete:"email"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,sa.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:a.password,onChange:m,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Enter your password",autoComplete:"current-password"})]}),n&&(0,sa.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-300 text-sm",children:n}),(0,sa.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold py-3 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,sa.jsxs)("span",{className:"flex items-center justify-center",children:[(0,sa.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sa.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sa.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]})})]})})}const Sc=["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Reports & Analytics","System Control","Leave Management"];function Cc(e){let{activeItem:t,setActiveItem:s,menuItems:a=Sc,onSignOut:l=null,clubInfo:n=null}=e;const[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(window.innerWidth<1024),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=(null===n||void 0===n?void 0:n.rummyEnabled)||!1?[...a,"Rummy"]:a,g=localStorage.getItem("clubId"),{data:f}=ml({queryKey:["unreadNotificationCount",g,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(g,"staff"),enabled:!!g,refetchInterval:3e4});(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const y=JSON.parse(localStorage.getItem("user")||"{}"),v=JSON.parse(localStorage.getItem("adminuser")||"{}"),j=y.email||v.email||"admin@pokerroom.com",w=y.displayName||v.displayName||"Admin",{data:N}=(y.role||v.role,ml({queryKey:["club",g],queryFn:()=>wr.Od.getClub(g),enabled:!!g})),S=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("adminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("adminuser",JSON.stringify(t)),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[c&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-red-500 to-purple-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>d(!o),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&o&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>d(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-red-500/20 via-purple-600/30 to-indigo-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(c?o?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-purple-300 to-indigo-400 drop-shadow-lg mb-6",children:"Admin"}),(0,sa.jsxs)("div",{onClick:()=>x(!0),className:"bg-white/10 rounded-xl p-4 mb-6 text-white shadow-inner cursor-pointer hover:bg-white/15 transition-colors",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold",children:w}),(0,sa.jsx)("div",{className:"text-sm opacity-80",children:j})]}),m&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>x(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("adminuser")||"{}"),a=t.email||s.email;a?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?jr.error("Password must be at least 8 characters"):S.mutate({email:a,currentPassword:h.currentPassword,newPassword:h.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:S.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:S.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),N&&N.code&&(0,sa.jsx)("div",{className:"mb-6",children:(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:N.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:b.map(e=>(0,sa.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-red-400 to-purple-600 text-white font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-red-400/20 hover:to-purple-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===f||void 0===f?void 0:f.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f.unreadCount>9?"9+":f.unreadCount})]})},e))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function kc(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)(!1),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(null),[c,u]=(0,r.useState)({title:"",points:"",description:"",stock:"",images:["","",""],imageFiles:[null,null,null],isActive:!0}),{data:m=[],isLoading:x}=ml({queryKey:["vipProducts",t],queryFn:()=>wr.Dv.getVipProducts(t),enabled:!!t}),h=bl({mutationFn:async e=>{const s=[];for(let r=0;r<3;r++)if(e.imageFiles[r])try{const a=await wd(e.imageFiles[r],t,"vip-store");s.push({url:a})}catch(a){console.error("Failed to upload image ".concat(r+1,":"),a),jr.error("Failed to upload image ".concat(r+1))}else e.images[r]&&""!==e.images[r].trim()&&s.push({url:e.images[r]});return await wr.Dv.createVipProduct(t,{title:e.title,points:parseInt(e.points),description:e.description,stock:parseInt(e.stock)||0,images:s,isActive:e.isActive})},onSuccess:()=>{jr.success("Product created successfully!"),s.invalidateQueries(["vipProducts",t]),l(!1),g()},onError:e=>{jr.error(e.message||"Failed to create product")}}),p=bl({mutationFn:async e=>{let{productId:s,data:a}=e;const r=[];for(let n=0;n<3;n++)if(a.imageFiles[n])try{const e=await wd(a.imageFiles[n],t,"vip-store");r.push({url:e})}catch(l){console.error("Failed to upload image ".concat(n+1,":"),l),jr.error("Failed to upload image ".concat(n+1))}else a.images[n]&&""!==a.images[n].trim()&&r.push({url:a.images[n]});return await wr.Dv.updateVipProduct(t,s,{title:a.title,points:parseInt(a.points),description:a.description,stock:parseInt(a.stock)||0,images:r,isActive:a.isActive})},onSuccess:()=>{jr.success("Product updated successfully!"),s.invalidateQueries(["vipProducts",t]),i(!1),d(null),g()},onError:e=>{jr.error(e.message||"Failed to update product")}}),b=bl({mutationFn:async e=>await wr.Dv.deleteVipProduct(t,e),onSuccess:()=>{jr.success("Product deleted successfully!"),s.invalidateQueries(["vipProducts",t])},onError:e=>{jr.error(e.message||"Failed to delete product")}}),g=()=>{u({title:"",points:"",description:"",stock:"",images:["","",""],imageFiles:[null,null,null],isActive:!0})};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"VIP Store Management"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Manage products that players can redeem with VIP points"})]}),(0,sa.jsx)("button",{onClick:()=>{g(),l(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"+ Add New Product"})]}),x?(0,sa.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading products..."}):0===m.length?(0,sa.jsxs)("div",{className:"text-center py-12",children:[(0,sa.jsx)("p",{className:"text-gray-400 text-lg mb-4",children:"No products in the VIP Store yet"}),(0,sa.jsx)("button",{onClick:()=>{g(),l(!0)},className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors",children:"Create Your First Product"})]}):(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>{var t,s;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700 hover:border-purple-500 transition-all shadow-lg",children:[(0,sa.jsxs)("div",{className:"relative h-48 bg-slate-700",children:[e.images&&e.images.length>0&&null!==(t=e.images[0])&&void 0!==t&&t.url?(0,sa.jsx)("img",{src:e.images[0].url,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,sa.jsx)("div",{className:"absolute inset-0 flex items-center justify-center ".concat(e.images&&e.images.length>0&&null!==(s=e.images[0])&&void 0!==s&&s.url?"hidden":"flex"),children:(0,sa.jsx)("div",{className:"text-6xl text-gray-600",children:"\ud83c\udf81"})}),(0,sa.jsx)("div",{className:"absolute top-2 right-2",children:(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(e.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"),children:e.isActive?"Active":"Inactive"})})]}),(0,sa.jsxs)("div",{className:"p-4",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:e.description||"No description"}),(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("div",{className:"text-yellow-400 font-bold text-lg",children:[e.points.toLocaleString()," Points"]}),(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Stock: ",e.stock||0]})]}),e.images&&e.images.length>1&&(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["+",e.images.length-1," more ",2===e.images.length?"image":"images"]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{var t,s,a,r,l,n,o;d(e),u({title:e.title,points:e.points.toString(),description:e.description||"",stock:(null===(t=e.stock)||void 0===t?void 0:t.toString())||"0",images:[(null===(s=e.images)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.url)||"",(null===(r=e.images)||void 0===r||null===(l=r[1])||void 0===l?void 0:l.url)||"",(null===(n=e.images)||void 0===n||null===(o=n[2])||void 0===o?void 0:o.url)||""],imageFiles:[null,null,null],isActive:void 0===e.isActive||e.isActive}),i(!0)})(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),(0,sa.jsx)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&b.mutate(t));var t,s},disabled:b.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Delete"})]})]})]},e.id)})}),a&&(0,sa.jsx)(Ac,{title:"Create New Product",form:c,setForm:u,onSubmit:e=>{e.preventDefault(),c.title.trim()?!c.points||parseInt(c.points)<=0?jr.error("Valid points value is required"):h.mutate(c):jr.error("Product title is required")},onClose:()=>{l(!1),g()},isLoading:h.isPending}),n&&o&&(0,sa.jsx)(Ac,{title:"Edit Product",form:c,setForm:u,onSubmit:e=>{e.preventDefault(),c.title.trim()?!c.points||parseInt(c.points)<=0?jr.error("Valid points value is required"):p.mutate({productId:o.id,data:c}):jr.error("Product title is required")},onClose:()=>{i(!1),d(null),g()},isLoading:p.isPending})]})}function Ac(e){let{title:t,form:s,setForm:a,onSubmit:r,onClose:l,isLoading:n}=e;return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full my-8 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t}),(0,sa.jsxs)("form",{onSubmit:r,className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Product Title ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"text",value:s.title,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{title:e.target.value})),placeholder:"e.g., Premium Poker Chips Set",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["VIP Points ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",value:s.points,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{points:e.target.value})),placeholder:"e.g., 5000",min:"1",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Stock Quantity"}),(0,sa.jsx)("input",{type:"number",value:s.stock,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{stock:e.target.value})),placeholder:"e.g., 50",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Description"}),(0,sa.jsx)("textarea",{value:s.description,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{description:e.target.value})),placeholder:"Describe your product...",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Product Images (Up to 3)"}),[0,1,2].map(e=>(0,sa.jsxs)("div",{className:"mb-3",children:[(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,sa.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>{var r;const l=null===(r=t.target.files)||void 0===r?void 0:r[0];if(l){if(l.size>5242880)return void jr.error("Image must be less than 5MB");const t=[...s.imageFiles];t[e]=l,a((0,i.A)((0,i.A)({},s),{},{imageFiles:t}))}}}),s.imageFiles[e]?"\u2713 File Selected":"Choose File"]}),(0,sa.jsx)("input",{type:"url",value:s.images[e],onChange:t=>{const r=[...s.images];r[e]=t.target.value,a((0,i.A)((0,i.A)({},s),{},{images:r}))},placeholder:"Or paste URL ".concat(e+1).concat(0===e?" (Primary)":" (Optional)"),disabled:!!s.imageFiles[e],className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),(s.imageFiles[e]||s.images[e])&&(0,sa.jsx)("button",{type:"button",onClick:()=>{const t=[...s.imageFiles],r=[...s.images];t[e]=null,r[e]="",a((0,i.A)((0,i.A)({},s),{},{imageFiles:t,images:r}))},className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"\xd7"})]}),s.imageFiles[e]&&(0,sa.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.imageFiles[e].name," (",(s.imageFiles[e].size/1024).toFixed(1)," KB)"]})]},e)),(0,sa.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"Upload image files (max 5MB each) or paste direct URLs"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("input",{type:"checkbox",id:"isActive",checked:s.isActive,onChange:e=>a((0,i.A)((0,i.A)({},s),{},{isActive:e.target.checked})),className:"w-5 h-5 text-purple-600 bg-slate-700 border-gray-600 rounded focus:ring-purple-500"}),(0,sa.jsx)("label",{htmlFor:"isActive",className:"text-gray-300 font-semibold",children:"Product is Active (Available for redemption)"})]}),(0,sa.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,sa.jsx)("button",{type:"submit",disabled:n,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:n?"Saving...":"Create New Product"===t?"Create Product":"Update Product"}),(0,sa.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]})})}function Pc(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("salary");return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Payroll Management"})}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("salary"),className:"px-6 py-3 font-semibold transition-colors ".concat("salary"===s?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Employee Salary"}),(0,sa.jsx)("button",{onClick:()=>a("tips"),className:"px-6 py-3 font-semibold transition-colors ".concat("tips"===s?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Dealer Tips"})]}),"salary"===s&&(0,sa.jsx)(Ld,{selectedClubId:t}),"tips"===s&&(0,sa.jsx)(Od,{selectedClubId:t})]})}function Tc(e){let{selectedClubId:t}=e;const[s,a]=(0,r.useState)("list"),[l,n]=(0,r.useState)(1),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(null),[h,p]=(0,r.useState)(""),[b,g]=(0,r.useState)(""),[f,y]=(0,r.useState)({search:"",status:""}),[v,j]=(0,r.useState)({search:"",startDate:"",endDate:"",affiliateId:""}),[w,N]=(0,r.useState)(1),[S,C]=(0,r.useState)({affiliateId:"",amount:"",transactionType:"payment",description:"",notes:""}),k=ra(),{data:A,isLoading:P}=ml({queryKey:["affiliates",t,l,f],queryFn:()=>wr.Yt.getAffiliates(t,(0,i.A)({page:l,limit:10},f)),enabled:!!t&&"list"===s}),{data:T,isLoading:I}=ml({queryKey:["affiliate-referrals",null===m||void 0===m?void 0:m.id,h,b],queryFn:()=>wr.Yt.getAffiliateReferrals(t,null===m||void 0===m?void 0:m.id,{search:h,kycStatus:b}),enabled:!(null===m||void 0===m||!m.id)&&o}),{data:_,isLoading:D}=ml({queryKey:["affiliate-transactions",t,w,v],queryFn:()=>wr.Yt.getAffiliateTransactions(t,(0,i.A)({page:w,limit:10},v)),enabled:!!t&&"payments"===s}),E=bl({mutationFn:e=>wr.Yt.processAffiliatePayment(t,e),onSuccess:()=>{jr.success("Payment processed successfully!"),k.invalidateQueries(["affiliate-transactions",t]),k.invalidateQueries(["affiliates",t]),u(!1),x(null),C({affiliateId:"",amount:"",transactionType:"payment",description:"",notes:""})},onError:e=>{jr.error(e.message||"Failed to process payment")}}),R=(null===A||void 0===A?void 0:A.affiliates)||[],L=(null===A||void 0===A?void 0:A.totalPages)||1,O=(null===A||void 0===A?void 0:A.total)||0,M=(null===T||void 0===T?void 0:T.players)||[],F=(null===_||void 0===_?void 0:_.transactions)||[],B=(null===_||void 0===_?void 0:_.totalPages)||1,q=(null===_||void 0===_?void 0:_.total)||0,U=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"active":return"text-green-400";case"inactive":default:return"text-gray-400";case"suspended":return"text-red-400"}},z=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"approved":case"verified":return"bg-green-900/30 text-green-400 border-green-700";case"pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-700";case"rejected":return"bg-red-900/30 text-red-400 border-red-700";default:return"bg-gray-900/30 text-gray-400 border-gray-700"}};return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Affiliate Management"})}),(0,sa.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,sa.jsx)("button",{onClick:()=>a("list"),className:"px-6 py-3 font-semibold transition-colors ".concat("list"===s?"text-white border-b-2 border-yellow-500 bg-yellow-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udccb Affiliates List"}),(0,sa.jsx)("button",{onClick:()=>a("payments"),className:"px-6 py-3 font-semibold transition-colors ".concat("payments"===s?"text-white border-b-2 border-green-500 bg-green-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb0 Payments & Transactions"})]}),"list"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-yellow-500",placeholder:"Search by name, code, or email...",value:f.search,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Status"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-yellow-500",value:f.status,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{status:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"Active",children:"Active"}),(0,sa.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,sa.jsx)("option",{value:"Suspended",children:"Suspended"})]})]})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,sa.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Affiliates (",O,")"]})}),P?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===R.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No affiliates found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Name"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Email"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Code"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Referrals"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Earnings"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Actions"})]})}),(0,sa.jsx)("tbody",{children:R.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:e.name||"N/A"}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.email}),(0,sa.jsx)("td",{className:"p-3",children:(0,sa.jsx)("span",{className:"px-3 py-1 bg-yellow-900/30 text-yellow-400 rounded-lg font-mono text-sm border border-yellow-700",children:e.code})}),(0,sa.jsxs)("td",{className:"text-center p-3",children:[(0,sa.jsx)("div",{className:"text-cyan-400 font-semibold",children:e.totalReferrals}),(0,sa.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.verifiedReferrals," verified)"]})]}),(0,sa.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.totalCommission||0).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsx)("span",{className:"font-semibold ".concat(U(e.status)),children:e.status})}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,sa.jsx)("button",{onClick:()=>(e=>{x(e),d(!0),p(""),g("")})(e),className:"px-3 py-1 bg-cyan-900/30 hover:bg-cyan-800/50 text-cyan-400 rounded-lg text-sm border border-cyan-700 transition-colors",children:"View Players"}),(0,sa.jsx)("button",{onClick:()=>(e=>{x(e),C((0,i.A)((0,i.A)({},S),{},{affiliateId:e.id})),u(!0)})(e),className:"px-3 py-1 bg-green-900/30 hover:bg-green-800/50 text-green-400 rounded-lg text-sm border border-green-700 transition-colors",children:"Send Money"})]})})]},e.id))})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(l-1)+1," to ",Math.min(10*l,O)," of ",O," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>n(e=>Math.max(1,e-1)),disabled:1===l,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(L)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>n(t+1),className:"px-4 py-2 rounded-lg ".concat(l===t+1?"bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>n(e=>Math.min(L,e+1)),disabled:l===L,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),"payments"===s&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Search by name, code, email...",value:v.search,onChange:e=>j((0,i.A)((0,i.A)({},v),{},{search:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.startDate,onChange:e=>j((0,i.A)((0,i.A)({},v),{},{startDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"End Date"}),(0,sa.jsx)("input",{type:"date",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.endDate,onChange:e=>j((0,i.A)((0,i.A)({},v),{},{endDate:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Affiliate"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.affiliateId,onChange:e=>j((0,i.A)((0,i.A)({},v),{},{affiliateId:e.target.value})),children:[(0,sa.jsx)("option",{value:"",children:"All Affiliates"}),R.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name||e.email," (",e.code,")"]},e.id))]})]})]})}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,sa.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4",children:["Transaction History (",q,")"]}),D?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===F.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No transactions found"}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Affiliate"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Code"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Type"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Description"})]})}),(0,sa.jsx)("tbody",{children:F.map(e=>{var t,s,a,r;return(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()}),(0,sa.jsx)("td",{className:"text-white p-3",children:(null===(t=e.affiliate)||void 0===t?void 0:t.name)||(null===(s=e.affiliate)||void 0===s||null===(a=s.user)||void 0===a?void 0:a.email)||"N/A"}),(0,sa.jsx)("td",{className:"p-3",children:(0,sa.jsx)("span",{className:"px-2 py-1 bg-yellow-900/30 text-yellow-400 rounded text-xs font-mono border border-yellow-700",children:null===(r=e.affiliate)||void 0===r?void 0:r.code})}),(0,sa.jsx)("td",{className:"p-3",children:(0,sa.jsx)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-400 rounded text-xs capitalize border border-blue-700",children:e.transactionType})}),(0,sa.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.amount).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.description||e.notes||"-"})]},e.id)})})]})}),(0,sa.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(w-1)+1," to"," ",Math.min(10*w,q)," of ",q," entries"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===w,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,sa.jsx)("div",{className:"flex gap-2",children:[...Array(B)].map((e,t)=>(0,sa.jsx)("button",{onClick:()=>N(t+1),className:"px-4 py-2 rounded-lg ".concat(w===t+1?"bg-green-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,sa.jsx)("button",{onClick:()=>N(e=>Math.min(B,e+1)),disabled:w===B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),o&&m&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-5xl w-full border border-cyan-600 max-h-[90vh] overflow-y-auto",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Referral Players"}),(0,sa.jsxs)("p",{className:"text-cyan-400 mt-1",children:["Affiliate: ",m.name||m.email," (",m.code,")"]})]}),(0,sa.jsx)("button",{onClick:()=>{d(!1),x(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search Player"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"Search by name, email, or phone...",value:h,onChange:e=>p(e.target.value)})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"KYC Status"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:b,onChange:e=>g(e.target.value),children:[(0,sa.jsx)("option",{value:"",children:"All Status"}),(0,sa.jsx)("option",{value:"approved",children:"Approved"}),(0,sa.jsx)("option",{value:"verified",children:"Verified"}),(0,sa.jsx)("option",{value:"pending",children:"Pending"}),(0,sa.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),I?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===M.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No referral players found"}):(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"w-full",children:[(0,sa.jsx)("thead",{children:(0,sa.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Name"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Email"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Phone"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"KYC Status"}),(0,sa.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,sa.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Total Spent"}),(0,sa.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Joined"})]})}),(0,sa.jsx)("tbody",{children:M.map(e=>(0,sa.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,sa.jsx)("td",{className:"text-white p-3",children:e.name}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.email}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.phoneNumber||"N/A"}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize border ".concat(z(e.kycStatus)),children:e.kycStatus})}),(0,sa.jsx)("td",{className:"text-center p-3",children:(0,sa.jsx)("span",{className:"font-semibold ".concat(U(e.status)),children:e.status})}),(0,sa.jsxs)("td",{className:"text-right text-cyan-400 font-semibold p-3",children:["\u20b9",Number(e.totalSpent||0).toFixed(2)]}),(0,sa.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})})]})}),c&&m&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Send Money to Affiliate"}),(0,sa.jsxs)("div",{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 mb-6",children:[(0,sa.jsx)("div",{className:"text-xs text-green-400 mb-1",children:"Sending to:"}),(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:m.name||m.email}),(0,sa.jsxs)("p",{className:"text-sm text-green-300 mt-1",children:["Code: ",m.code]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Current Earnings: \u20b9",Number(m.totalCommission||0).toFixed(2)]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Amount (\u20b9) *"}),(0,sa.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"\u20b90.00",value:S.amount,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{amount:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Transaction Type"}),(0,sa.jsxs)("select",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:S.transactionType,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{transactionType:e.target.value})),children:[(0,sa.jsx)("option",{value:"payment",children:"Payment"}),(0,sa.jsx)("option",{value:"bonus",children:"Bonus"}),(0,sa.jsx)("option",{value:"adjustment",children:"Adjustment"}),(0,sa.jsx)("option",{value:"commission",children:"Commission"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Description"}),(0,sa.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Brief description...",value:S.description,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{description:e.target.value}))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Notes (Optional)"}),(0,sa.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 h-24",placeholder:"Additional notes...",value:S.notes,onChange:e=>C((0,i.A)((0,i.A)({},S),{},{notes:e.target.value}))})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,sa.jsx)("button",{onClick:()=>{!S.amount||parseFloat(S.amount)<=0?jr.error("Please enter a valid amount"):E.mutate((0,i.A)((0,i.A)({},S),{},{amount:parseFloat(S.amount)}))},disabled:E.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:E.isLoading?"Processing...":"Process Payment"}),(0,sa.jsx)("button",{onClick:()=>{u(!1),x(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function Ic(e){let{clubId:t}=e;const[s,a]=(0,r.useState)("menu-inventory");return(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 via-red-500 to-pink-500 p-6 rounded-xl shadow-lg",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Food & Beverage Management"}),(0,sa.jsx)("p",{className:"text-white/90",children:"Complete F&B management system for your poker club"})]}),(0,sa.jsx)("div",{className:"bg-slate-800 rounded-xl p-2 shadow-lg",children:(0,sa.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:[{id:"menu-inventory",label:"Menu & Inventory",icon:"\ud83d\udccb"},{id:"order-management",label:"Order Management",icon:"\ud83c\udf7d\ufe0f"},{id:"supplier-management",label:"Supplier Management",icon:"\ud83d\ude9a"},{id:"kitchen-operations",label:"Kitchen Operations",icon:"\ud83d\udc68\u200d\ud83c\udf73"}].map(e=>(0,sa.jsxs)("button",{onClick:()=>a(e.id),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-semibold transition-all whitespace-nowrap ".concat(s===e.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-slate-700"),children:[(0,sa.jsx)("span",{className:"text-xl",children:e.icon}),(0,sa.jsx)("span",{children:e.label})]},e.id))})}),(0,sa.jsxs)("div",{className:"min-h-[600px]",children:["menu-inventory"===s&&(0,sa.jsx)($d,{clubId:t}),"order-management"===s&&(0,sa.jsx)(rc,{clubId:t}),"supplier-management"===s&&(0,sa.jsx)(dc,{clubId:t}),"kitchen-operations"===s&&(0,sa.jsx)(mc,{clubId:t})]})]})}function _c(e){let{clubId:t}=e;const[s,a]=(0,r.useState)(null),l=[{id:"individual_player",name:"Individual Player Report",icon:(0,sa.jsx)(Dn,{className:"text-5xl"}),color:"from-blue-500 to-cyan-500",description:"Detailed report for a specific player"},{id:"cumulative_player",name:"Cumulative Player Report",icon:(0,sa.jsx)(dn,{className:"text-5xl"}),color:"from-purple-500 to-pink-500",description:"Overall statistics for all players"},{id:"daily_transactions",name:"Daily Transactions Report",icon:(0,sa.jsx)(hn,{className:"text-5xl"}),color:"from-yellow-500 to-orange-500",description:"All transactions for a date range"},{id:"daily_rake",name:"Daily Rake Report",icon:(0,sa.jsx)(un,{className:"text-5xl"}),color:"from-red-500 to-pink-500",description:"Rake collected per day"},{id:"per_table_transactions",name:"Per Table Transactions Report",icon:(0,sa.jsx)(An,{className:"text-5xl"}),color:"from-green-500 to-teal-500",description:"Transactions by table"},{id:"credit_transactions",name:"Credit Transactions Report",icon:(0,sa.jsx)(xn,{className:"text-5xl"}),color:"from-indigo-500 to-purple-500",description:"Credit requests and approvals"},{id:"expenses",name:"Expenses Report",icon:(0,sa.jsx)(Cn,{className:"text-5xl"}),color:"from-orange-500 to-red-500",description:"Salaries, tips, and other expenses"},{id:"bonus",name:"Bonus Report",icon:(0,sa.jsx)(jn,{className:"text-5xl"}),color:"from-pink-500 to-rose-500",description:"Player and staff bonuses"},{id:"custom",name:"Custom Report",icon:(0,sa.jsx)(En,{className:"text-5xl"}),color:"from-gray-500 to-slate-500",description:"Compile multiple reports"}];return(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,sa.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-lg mb-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Reports & Analytics"}),(0,sa.jsx)("p",{className:"text-white/80 mt-2",children:"Generate comprehensive reports with real-time data"})]}),(0,sa.jsxs)("div",{className:"mb-8",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Available Report Types"}),(0,sa.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:l.map(e=>(0,sa.jsx)("button",{onClick:()=>a(e),className:"bg-gradient-to-br ".concat(e.color," p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300 text-white"),children:(0,sa.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,sa.jsx)("div",{className:"p-4 bg-white/20 rounded-full",children:e.icon}),(0,sa.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,sa.jsx)("p",{className:"text-sm text-white/80",children:e.description})]})},e.id))})]}),s&&(0,sa.jsx)(Dc,{report:s,clubId:t,onClose:()=>a(null)})]})})}function Dc(e){let{report:t,clubId:s,onClose:a}=e;const[l,n]=(0,r.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],format:"excel",playerId:"",playerSearch:"",tableNumber:"",customReportTypes:[]}),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)([]),[m,x]=(0,r.useState)([]);return(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full my-8",children:[(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Report Configuration"}),(0,sa.jsxs)("div",{className:"bg-gradient-to-r ".concat(t.color," p-4 rounded-lg mb-6 flex items-center gap-4"),children:[(0,sa.jsx)("div",{className:"text-white text-3xl",children:t.icon}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:t.name}),(0,sa.jsx)("p",{className:"text-white/80 text-sm",children:t.description})]})]}),"individual_player"===t.id&&(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsxs)("label",{className:"block text-white mb-2 font-semibold",children:["Search Player ",(0,sa.jsx)("span",{className:"text-red-400",children:"(Type at least 3 characters)"})]}),(0,sa.jsx)("input",{type:"text",value:l.playerSearch,onChange:e=>{n((0,i.A)((0,i.A)({},l),{},{playerSearch:e.target.value})),(async e=>{if(e.length<3)x([]);else try{x([{id:"1",name:"John Doe",email:"john@example.com"},{id:"2",name:"Jane Smith",email:"jane@example.com"}])}catch(t){console.error("Error searching players:",t)}})(e.target.value)},placeholder:"Search by name, ID, or email...",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"}),m.length>0&&(0,sa.jsx)("div",{className:"mt-2 bg-slate-700 rounded-lg max-h-48 overflow-y-auto",children:m.map(e=>(0,sa.jsxs)("button",{onClick:()=>{n((0,i.A)((0,i.A)({},l),{},{playerId:e.id,playerSearch:e.name})),x([])},className:"w-full text-left px-4 py-3 text-white hover:bg-slate-600 transition-colors",children:[(0,sa.jsx)("div",{className:"font-semibold",children:e.name}),(0,sa.jsx)("div",{className:"text-sm text-white/60",children:e.email})]},e.id))})]}),"per_table_transactions"===t.id&&(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsxs)("label",{className:"block text-white mb-2 font-semibold",children:["Table Number ",(0,sa.jsx)("span",{className:"text-white/60 text-sm",children:"(Optional - leave blank for all tables)"})]}),(0,sa.jsx)("input",{type:"text",value:l.tableNumber,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{tableNumber:e.target.value})),placeholder:"e.g., Table 1, T-5",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]}),"custom"===t.id&&(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-white mb-3 font-semibold",children:"Select Multiple Report Types to Compile"}),(0,sa.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["cumulative_player","daily_transactions","daily_rake","credit_transactions","expenses","bonus"].map(e=>(0,sa.jsxs)("label",{className:"flex items-center gap-2 bg-slate-700 p-3 rounded-lg cursor-pointer hover:bg-slate-600",children:[(0,sa.jsx)("input",{type:"checkbox",checked:l.customReportTypes.includes(e),onChange:t=>{t.target.checked?n((0,i.A)((0,i.A)({},l),{},{customReportTypes:[...l.customReportTypes,e]})):n((0,i.A)((0,i.A)({},l),{},{customReportTypes:l.customReportTypes.filter(t=>t!==e)}))},className:"w-4 h-4"}),(0,sa.jsx)("span",{className:"text-white text-sm capitalize",children:e.replace(/_/g," ")})]},e))})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Date Range"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:l.startDate,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{startDate:e.target.value})),className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:l.endDate,onChange:e=>n((0,i.A)((0,i.A)({},l),{},{endDate:e.target.value})),className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]})]})]}),(0,sa.jsxs)("div",{className:"mb-8",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Download Format"}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sa.jsxs)("button",{onClick:()=>n((0,i.A)((0,i.A)({},l),{},{format:"excel"})),className:"p-4 rounded-lg border-2 transition-all ".concat("excel"===l.format?"bg-green-600 border-green-400 text-white":"bg-slate-700 border-slate-600 text-white/70 hover:border-slate-500"),children:[(0,sa.jsx)(fn,{className:"text-4xl mx-auto mb-2"}),(0,sa.jsx)("div",{className:"font-semibold",children:"Excel (.xlsx)"})]}),(0,sa.jsxs)("button",{onClick:()=>n((0,i.A)((0,i.A)({},l),{},{format:"pdf"})),className:"p-4 rounded-lg border-2 transition-all ".concat("pdf"===l.format?"bg-red-600 border-red-400 text-white":"bg-slate-700 border-slate-600 text-white/70 hover:border-slate-500"),children:[(0,sa.jsx)(yn,{className:"text-4xl mx-auto mb-2"}),(0,sa.jsx)("div",{className:"font-semibold",children:"PDF (.pdf)"})]})]})]}),(0,sa.jsxs)("div",{className:"flex gap-4",children:[(0,sa.jsxs)("button",{onClick:async()=>{try{d(!0);const e=(0,i.A)((0,i.A)((0,i.A)({reportType:t.id,startDate:l.startDate,endDate:l.endDate,format:l.format},"individual_player"===t.id&&{playerId:l.playerId}),"per_table_transactions"===t.id&&{tableNumber:l.tableNumber}),"custom"===t.id&&{customReportTypes:l.customReportTypes}),r="https://poker-crm-backend.onrender.com/api",n=await fetch("".concat(r,"/clubs/").concat(s,"/reports/generate"),{method:"POST",headers:(0,wr.z5)(),body:JSON.stringify(e)});if(!n.ok)throw new Error("Failed to generate report");const o=await n.blob(),c=window.URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download="".concat(t.id,"_report_").concat(l.startDate,".").concat("excel"===l.format?"xlsx":"pdf"),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c),alert("Report generated successfully!"),a()}catch(e){console.error("Error generating report:",e),alert("Failed to generate report")}finally{d(!1)}},disabled:o||"individual_player"===t.id&&!l.playerId||"custom"===t.id&&0===l.customReportTypes.length,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white px-6 py-4 rounded-lg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,sa.jsx)(pn,{}),o?"Generating...":"Generate Report"]}),(0,sa.jsx)("button",{onClick:a,className:"px-6 py-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold",children:"Cancel"})]})]})})}function Ec(e){let{clubId:t}=e;const[s,a]=(0,r.useState)(!1),[l,n]=(0,r.useState)(!1),[i,o]=(0,r.useState)(""),[d,c]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),x=bl({mutationFn:async e=>{let{password:s,confirmationText:a}=e;return await(0,wr.AT)("/clubs/".concat(t,"/system/factory-reset"),{method:"POST",body:JSON.stringify({password:s,confirmationText:a})})},onSuccess:()=>{alert("Factory reset completed successfully. All club data has been wiped. Please refresh the page."),window.location.reload()},onError:e=>{m(e.message||"Failed to perform factory reset")}}),h=()=>{a(!1),n(!1),o(""),c(""),m("")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:[(0,sa.jsxs)("div",{className:"mb-8",children:[(0,sa.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"System Control"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Dangerous operations that affect the entire club"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-8 border border-red-500/30",children:[(0,sa.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,sa.jsx)("div",{className:"bg-red-500/20 p-4 rounded-xl",children:(0,sa.jsx)(In,{className:"text-3xl text-red-500"})}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Factory Reset"}),(0,sa.jsx)("p",{className:"text-gray-300 mb-4",children:"Factory Reset clears local data and resets the UI. Use with caution."}),(0,sa.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4 mb-4",children:(0,sa.jsxs)("div",{className:"flex items-start gap-3",children:[(0,sa.jsx)(gn,{className:"text-red-400 text-xl mt-0.5 flex-shrink-0"}),(0,sa.jsxs)("div",{className:"text-red-200 text-sm",children:[(0,sa.jsx)("p",{className:"font-semibold mb-2",children:"\u26a0\ufe0f WARNING: This action is irreversible!"}),(0,sa.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,sa.jsx)("li",{children:"All players will be permanently deleted"}),(0,sa.jsx)("li",{children:"All staff (except Super Admin & Admin) will be removed"}),(0,sa.jsx)("li",{children:"All financial records will be wiped"}),(0,sa.jsx)("li",{children:"All transactions, bonuses, and credit data will be lost"}),(0,sa.jsx)("li",{children:"All tables, waitlists, and tournaments will be deleted"}),(0,sa.jsx)("li",{children:"All FNB orders, inventory, and suppliers will be removed"}),(0,sa.jsx)("li",{children:"All chat history will be erased"}),(0,sa.jsx)("li",{children:"The club will be reset to a fresh state"})]}),(0,sa.jsx)("p",{className:"mt-3 font-semibold text-green-300",children:"\u2713 Super Admin and Admin accounts will be preserved!"}),(0,sa.jsx)("p",{className:"mt-2 font-semibold text-red-300",children:"This operation cannot be undone. All other data will be permanently lost!"})]})]})})]})]}),(0,sa.jsx)("button",{onClick:()=>{m(""),o(""),c(""),a(!0)},disabled:x.isPending,className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white px-8 py-4 rounded-lg font-bold text-lg transition-all shadow-lg hover:shadow-xl",children:x.isPending?"Processing...":"Factory Reset"})]}),s&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-slate-700 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,sa.jsx)("div",{className:"bg-red-500/20 p-3 rounded-xl",children:(0,sa.jsx)(wn,{className:"text-2xl text-red-500"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Verify Password"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"Enter your password to continue"})]})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i?(a(!1),n(!0)):m("Please enter your password")},children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("label",{className:"block text-white font-medium mb-2",children:"Password"}),(0,sa.jsx)("input",{type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your password",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0})]}),u&&(0,sa.jsx)("div",{className:"mb-4 bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:u}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:h,className:"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-medium transition-all",children:"Continue"})]})]})]})}),l&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-red-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,sa.jsx)("div",{className:"bg-red-500/20 p-3 rounded-xl",children:(0,sa.jsx)(gn,{className:"text-2xl text-red-500"})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Final Confirmation"}),(0,sa.jsx)("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone!"})]})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4 mb-4",children:(0,sa.jsx)("p",{className:"text-red-200 text-sm font-semibold",children:"You are about to permanently delete ALL club data!"})}),(0,sa.jsxs)("p",{className:"text-white mb-4",children:["To confirm, type ",(0,sa.jsx)("span",{className:"font-bold text-red-400",children:"DELETE ALL DATA"})," below:"]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"DELETE ALL DATA"===d?(x.mutate({password:i,confirmationText:d}),n(!1)):m('Please type "DELETE ALL DATA" exactly to confirm')},children:[(0,sa.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Type: DELETE ALL DATA",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent mb-4",autoFocus:!0}),u&&(0,sa.jsx)("div",{className:"mb-4 bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:u}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:h,className:"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:x.isPending||"DELETE ALL DATA"!==d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:x.isPending?"Deleting...":"Delete Everything"})]})]})]})]})})]})}function Rc(){var e,t,s,a,l,n,o,d,c;const u=me(),m=ra(),[x,h]=(0,r.useState)("Dashboard"),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(null),[y,v]=(0,r.useState)(!1),[j,w]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=localStorage.getItem("clubId");e?b(e):u("/login")},[u]);const{data:N,isLoading:S}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p});(0,r.useEffect)(()=>{N&&f(N)},[N]),(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("adminuser")||"{}"),s=wr.R2.getCurrentUser();if(!e.id&&!t.userId)return void u("/login");const a="ADMIN"===e.role||t.userId||"ADMIN"===t.role||"ADMIN"===(null===s||void 0===s?void 0:s.role),r="SUPER_ADMIN"===e.role||"SUPER_ADMIN"===(null===s||void 0===s?void 0:s.role),l=e.isMasterAdmin||(null===s||void 0===s?void 0:s.isMasterAdmin);if(!a&&!r&&!l){const a=(null===s||void 0===s?void 0:s.role)||e.role||t.role,r={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},l=a&&r[a]?r[a]:"/login";return void u(l,{replace:!0})}(e.mustResetPassword||t.mustResetPassword)&&v(!0)},[u]);const{data:C,isLoading:k}=ml({queryKey:["clubRevenue",p],queryFn:()=>wr.Od.getClubRevenue(p),enabled:!!p,refetchInterval:3e4}),{data:A,isLoading:P}=ml({queryKey:["clubPlayers",p],queryFn:()=>wr.bS.getPlayers(p,{limit:100}),enabled:!!p}),{data:T=[],isLoading:I}=ml({queryKey:["pendingPlayers",p],queryFn:()=>wr.bS.getPendingApprovalPlayers(p),enabled:!!p}),{data:_=[],isLoading:D}=ml({queryKey:["suspendedPlayers",p],queryFn:()=>wr.bS.getSuspendedPlayers(p),enabled:!!p}),E=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),R=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("adminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("adminuser",JSON.stringify(t)),v(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),L=y&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("adminuser")||"{}"),a=t.email||s.email;a?j.currentPassword&&j.newPassword&&j.confirmPassword?j.newPassword===j.confirmPassword?j.newPassword.length<8?jr.error("Password must be at least 8 characters"):R.mutate({email:a,currentPassword:j.currentPassword,newPassword:j.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:j.currentPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:j.newPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:j.confirmPassword,onChange:e=>w((0,i.A)((0,i.A)({},j),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:R.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:R.isLoading?"Resetting...":"Reset Password"})]})]})});if(S||!p)return(0,sa.jsxs)(sa.Fragment,{children:[L,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-white text-center",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]});return(0,sa.jsxs)(sa.Fragment,{children:[L,(0,sa.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,sa.jsx)(Cc,{activeItem:x,setActiveItem:h,menuItems:["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Reports & Analytics","System Control"],onSignOut:()=>{localStorage.clear(),u("/login")},clubInfo:g||N}),(0,sa.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Notifications"===x&&(0,sa.jsx)(Ao,{selectedClubId:p,recipientType:"staff"}),"Dashboard"===x&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===g||void 0===g?void 0:g.name)||(null===N||void 0===N?void 0:N.name)||"Loading..."]})}),k?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading revenue data..."})]}):(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(e=C.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(t=C.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:E((null===C||void 0===C||null===(s=C.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(a=C.currentDay)||void 0===a?void 0:a.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(l=C.currentDay)||void 0===l?void 0:l.rake)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(n=C.previousDay)||void 0===n?void 0:n.rake)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(o=C.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(d=C.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,sa.jsx)("span",{className:"text-white font-semibold",children:P?"...":(null===A||void 0===A||null===(c=A.players)||void 0===c?void 0:c.length)||0})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,sa.jsx)("span",{className:"text-yellow-400 font-semibold",children:I?"...":T.length})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,sa.jsx)("span",{className:"text-red-400 font-semibold",children:D?"...":_.length})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,sa.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",I?"...":T.length,")"]}),(0,sa.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",D?"...":_.length,")"]})]})]})]})]}),"Player Management"===x&&(0,sa.jsx)(vl,{selectedClubId:p,playersData:A,playersLoading:P,pendingPlayers:T,pendingLoading:I,suspendedPlayers:_,suspendedLoading:D,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,sa.jsx)(wl,{selectedClubId:p}),"VIP Store"===x&&(0,sa.jsx)(kc,{selectedClubId:p}),"Push Notifications"===x&&(0,sa.jsx)(Vl,{selectedClubId:p}),"Tournaments"===x&&(0,sa.jsx)(Gl,{selectedClubId:p}),"Staff Management"===x&&(0,sa.jsx)(kd,{selectedClubId:p}),"Payroll Management"===x&&(0,sa.jsx)(Pc,{selectedClubId:p}),"Bonus Management"===x&&(0,sa.jsx)(qd,{selectedClubId:p}),"Affiliates"===x&&(0,sa.jsx)(Tc,{selectedClubId:p}),"FNB"===x&&p&&(0,sa.jsx)(Ic,{clubId:p}),"Chat"===x&&p&&(0,sa.jsx)(lo,{clubId:p}),"Reports & Analytics"===x&&p&&(0,sa.jsx)(_c,{clubId:p}),"System Control"===x&&p&&(0,sa.jsx)(Ec,{clubId:p}),"Rummy"===x&&p&&(0,sa.jsx)(jo,{selectedClubId:p}),"Notifications"===x&&p&&(0,sa.jsx)(Ao,{selectedClubId:p,recipientType:"staff"}),!["Dashboard","Player Management","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Staff Management","Payroll Management","Bonus Management","Affiliates","FNB","Chat","Reports & Analytics","System Control","Rummy","Notifications"].includes(x)&&(0,sa.jsx)("div",{className:"text-white",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]})}function Lc(){return(0,sa.jsx)(jd,{role:"MASTER_ADMIN",roleDisplayName:"Master Admin",redirectPath:"/master-admin",gradientFrom:"from-indigo-400",gradientTo:"to-purple-600",description:"System-wide Administration"})}function Oc(e){let{title:t,subtitle:s}=e;const[a,l]=r.useState(!1);return(0,sa.jsx)("header",{className:"bg-gradient-to-r from-emerald-600 via-green-500 to-yellow-400 p-6 rounded-xl shadow-md flex items-center justify-between",children:(0,sa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,sa.jsx)("div",{className:"w-12 h-12 rounded-lg bg-white/20 flex items-center justify-center overflow-hidden border border-white/30",children:a?(0,sa.jsx)("div",{className:"text-white font-bold",children:"WL"}):(0,sa.jsx)("img",{src:"/branding/logo.png",alt:"Brand Logo",className:"w-full h-full object-contain",onError:()=>l(!0)})}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h1",{className:"text-2xl font-bold text-white",children:t}),s&&(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:s})]})]})})}function Mc(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null,userEmail:n=null,userName:o=null}=e;const[d,c]=(0,r.useState)(!1),[u,m]=(0,r.useState)(window.innerWidth<1024),[x,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)(!1),[g,f]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[y,v]=(0,r.useState)(""),[j,w]=(0,r.useState)(""),[N,S]=(0,r.useState)(!1),[C,k]=(0,r.useState)(!1),[A,P]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1);return(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;m(e),e||c(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(d&&u){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[d,u]),(0,sa.jsxs)(sa.Fragment,{children:[u&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-emerald-500 to-teal-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>c(!d),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),u&&d&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>c(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-emerald-500/20 via-teal-600/30 to-cyan-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(u?d?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 drop-shadow-lg mb-6",children:"Master Admin"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsxs)("button",{onClick:()=>h(!x),className:"flex items-center text-white min-w-0 w-full hover:bg-white/10 p-2 rounded-lg transition-colors",children:[(0,sa.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-400 to-cyan-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,sa.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:o?o.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"MA"})}),(0,sa.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold truncate",children:o||"Master Admin"}),(0,sa.jsx)("div",{className:"text-sm opacity-80 truncate",children:n||"No email"})]}),(0,sa.jsx)("svg",{className:"w-4 h-4 ml-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,sa.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50 overflow-hidden",children:[(0,sa.jsxs)("div",{className:"p-3 border-b border-gray-700",children:[(0,sa.jsx)("div",{className:"text-white font-semibold text-sm mb-1",children:"Profile"}),(0,sa.jsx)("div",{className:"text-gray-400 text-xs truncate",children:n||"No email"})]}),(0,sa.jsxs)("button",{onClick:()=>{b(!0),h(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-white/10 transition-colors flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Change Password"]})]})]})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:a.map(e=>(0,sa.jsx)("button",{onClick:()=>{s(e),u&&c(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-emerald-400 to-cyan-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-emerald-400/20 hover:to-cyan-500/20 text-white"),children:(0,sa.jsx)("span",{className:"block truncate",children:e})},e))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})}),p&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-md border border-gray-700",children:[(0,sa.jsxs)("div",{className:"p-6 border-b border-gray-700 flex justify-between items-center",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white",children:"Change Password"}),(0,sa.jsx)("button",{onClick:()=>{b(!1),f({currentPassword:"",newPassword:"",confirmPassword:""}),v(""),w("")},className:"text-gray-400 hover:text-white transition",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sa.jsxs)("div",{className:"p-6 space-y-4",children:[y&&(0,sa.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg text-sm",children:y}),j&&(0,sa.jsx)("div",{className:"bg-green-500/20 border border-green-500 text-green-400 px-4 py-3 rounded-lg text-sm",children:j}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Current Password"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("input",{type:C?"text":"password",value:g.currentPassword,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{currentPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",disabled:N}),(0,sa.jsx)("button",{type:"button",onClick:()=>k(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:C?(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,sa.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"New Password"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("input",{type:A?"text":"password",value:g.newPassword,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{newPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",disabled:N}),(0,sa.jsx)("button",{type:"button",onClick:()=>P(!A),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:A?(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,sa.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirm New Password"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)("input",{type:T?"text":"password",value:g.confirmPassword,onChange:e=>f((0,i.A)((0,i.A)({},g),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",disabled:N}),(0,sa.jsx)("button",{type:"button",onClick:()=>I(!T),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:T?(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,sa.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,sa.jsx)("button",{onClick:()=>{b(!1),f({currentPassword:"",newPassword:"",confirmPassword:""}),v(""),w("")},className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition",disabled:N,children:"Cancel"}),(0,sa.jsx)("button",{onClick:async()=>{if(v(""),w(""),g.currentPassword&&g.newPassword&&g.confirmPassword)if(g.newPassword.length<6)v("New password must be at least 6 characters");else if(g.newPassword===g.confirmPassword)try{S(!0);const e=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/change-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,currentPassword:g.currentPassword,newPassword:g.newPassword})}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to change password");w("Password changed successfully!"),f({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{b(!1),w("")},2e3)}catch(e){v(e.message||"Failed to change password")}finally{S(!1)}else v("New passwords do not match");else v("All fields are required")},className:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:N,children:N?"Changing...":"Change Password"})]})]})]})})]})}function Fc(){var e,t;const[s,a]=(0,r.useState)("Dashboard"),[l,n]=(0,r.useState)(!0),[o,d]=(0,r.useState)(""),[c,u]=(0,r.useState)(""),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(null),[b,g]=(0,r.useState)([]),[f,y]=(0,r.useState)([]),[v,j]=(0,r.useState)(null),[w,N]=(0,r.useState)(null),[S,C]=(0,r.useState)("all"),[k,A]=(0,r.useState)("name"),[P,T]=(0,r.useState)("name"),[I,_]=(0,r.useState)("price"),[D,E]=(0,r.useState)(null),[R,L]=(0,r.useState)({}),[O,M]=(0,r.useState)(!1),[F,B]=(0,r.useState)(!1),[q,U]=(0,r.useState)(null),[z,W]=(0,r.useState)({tenantName:"",superAdminName:"",superAdminEmail:""}),[H,V]=(0,r.useState)({clubName:"",clubDescription:"",skinColor:"#10b981",gradient:"emerald-green-teal",logoUrl:"",videoUrl:"",tenantId:"",createNewTenant:!1,newTenantName:"",newSuperAdminName:"",newSuperAdminEmail:""}),[J,K]=(0,r.useState)(null),[Q,G]=(0,r.useState)(!1),[Y,$]=(0,r.useState)(!1),[Z,X]=(0,r.useState)(null),[ee,te]=(0,r.useState)(""),[se,ae]=(0,r.useState)(""),[re,le]=(0,r.useState)({termsText:"",publicUrl:""}),ne=me();(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("masteradminuser")||"{}"),s=wr.R2.getCurrentUser();if(!(e.isMasterAdmin||t.userId||(null===s||void 0===s?void 0:s.isMasterAdmin))){const a=(null===s||void 0===s?void 0:s.role)||e.role||t.role,r={SUPER_ADMIN:"/super-admin",ADMIN:"/admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},l=a&&r[a]?r[a]:"/login";ne(l,{replace:!0})}},[ne]);const ie=[{value:"emerald-green-teal",label:"Emerald \u2192 Green \u2192 Teal",class:"from-emerald-600 via-green-500 to-teal-500"},{value:"teal-cyan-blue",label:"Teal \u2192 Cyan \u2192 Blue",class:"from-teal-500 via-cyan-500 to-blue-500"},{value:"cyan-blue-indigo",label:"Cyan \u2192 Blue \u2192 Indigo",class:"from-cyan-500 via-blue-500 to-indigo-600"},{value:"blue-indigo-purple",label:"Blue \u2192 Indigo \u2192 Purple",class:"from-blue-600 via-indigo-500 to-purple-600"},{value:"purple-pink-rose",label:"Purple \u2192 Pink \u2192 Rose",class:"from-purple-600 via-pink-500 to-rose-500"},{value:"pink-red-orange",label:"Pink \u2192 Red \u2192 Orange",class:"from-pink-500 via-red-500 to-orange-500"},{value:"red-orange-yellow",label:"Red \u2192 Orange \u2192 Yellow",class:"from-red-600 via-orange-500 to-yellow-500"},{value:"orange-yellow-lime",label:"Orange \u2192 Yellow \u2192 Lime",class:"from-orange-500 via-yellow-500 to-lime-500"},{value:"yellow-lime-green",label:"Yellow \u2192 Lime \u2192 Green",class:"from-yellow-500 via-lime-500 to-green-500"},{value:"indigo-purple-pink",label:"Indigo \u2192 Purple \u2192 Pink",class:"from-indigo-600 via-purple-500 to-pink-500"},{value:"gray-slate-zinc",label:"Gray \u2192 Slate \u2192 Zinc",class:"from-gray-600 via-slate-500 to-zinc-500"},{value:"slate-gray-neutral",label:"Slate \u2192 Gray \u2192 Neutral",class:"from-slate-600 via-gray-500 to-neutral-500"}];(0,r.useEffect)(()=>{(async()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("userEmail");if(e)try{const s=JSON.parse(e);return u(s.email||t||""),void x(s.displayName||s.name||"Master Admin")}catch(ia){console.error("Failed to parse user data:",ia)}if(t)return u(t),void x("Master Admin");t&&(u(t),x("Master Admin"));if(localStorage.getItem("userId")&&!e)try{const e=await wr.o_.getCurrentUser();e&&e.email&&(u(e.email),x(e.displayName||"Master Admin"),localStorage.setItem("user",JSON.stringify({id:e.id,email:e.email,name:e.displayName||e.email,displayName:e.displayName})))}catch(lu){console.error("Failed to fetch user info:",lu),t&&(u(t),x("Master Admin"))}})()},[]),(0,r.useEffect)(()=>{oe()},[]);const oe=async()=>{n(!0),d("");try{const e=await wr.o_.getDashboardStats();p(e),g(e.clubs||[]),y(e.tenants||[]),e.clubs&&e.clubs.length>0&&N(e.clubs[0].id)}catch(lu){console.error("Failed to load dashboard data:",lu),d("Failed to load dashboard data: "+lu.message)}finally{n(!1)}},de=()=>{wr.R2.logout(),ne("/master-admin/signin")},ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";te(e),ae(t),setTimeout(()=>{te(""),ae("")},5e3)},ue=async(e,t,s)=>{if(confirm("Are you sure you want to ".concat(t," this club?\n\n").concat(s?"Reason: "+s:"")))try{await wr.o_.updateClubStatus(e,t,s),alert("\u2705 Club status updated to: ".concat(t)),oe()}catch(lu){alert("Failed to update club status: "+lu.message)}},xe=()=>{E(null),L({})},he=async e=>{if(e&&e.preventDefault(),w)if(re.termsText&&""!==re.termsText.trim())try{await wr.o_.updateClubTerms(w,re.termsText),alert("\u2705 Terms & Conditions updated successfully!"),oe();const e=b.find(e=>e.id===w);e&&le((0,i.A)((0,i.A)({},re),{},{termsText:e.termsAndConditions||re.termsText}))}catch(lu){alert("Failed to update Terms & Conditions: "+lu.message)}else alert("Terms & Conditions text cannot be empty");else alert("Please select a club first")},pe=async(e,t)=>{if(confirm("Are you sure you want to ".concat(t?"enable":"disable"," Rummy mode for this club?")))try{await wr.o_.updateClubRummyEnabled(e,t),ce("\u2705 Rummy mode ".concat(t?"enabled":"disabled"," successfully!"),"success"),oe()}catch(lu){ce("Failed to update Rummy mode: "+lu.message,"error")}},be=b.filter(e=>"all"===S||e.status===S).sort((e,t)=>"name"===k?e.name.localeCompare(t.name):"status"===k?e.status.localeCompare(t.status):"subscription"===k?parseFloat(t.subscriptionPrice)-parseFloat(e.subscriptionPrice):0),ge=[...f].sort((e,t)=>{if("name"===P)return e.name.localeCompare(t.name);if("clubs"===P){const s=b.filter(t=>t.tenant.id===e.id).length,a=b.filter(e=>e.tenant.id===t.id).length;return a-s}return 0}),fe=w?b.find(e=>e.id===w):null;return l?(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-center",children:[(0,sa.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-xl font-medium",children:"Loading Master Admin Dashboard..."}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Fetching data from backend..."})]})}):o?(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"max-w-md text-center",children:[(0,sa.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),(0,sa.jsx)("p",{className:"text-gray-400 mb-6",children:o}),(0,sa.jsx)("button",{onClick:oe,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium",children:"Retry"})]})}):(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(Mc,{activeItem:s,setActiveItem:a,menuItems:["Dashboard","Tenants Management","Clubs Management","Rummy Settings","Terms & Conditions","Subscriptions","Reports"],onSignOut:de,userEmail:c,userName:m}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsx)("div",{className:"mt-16 lg:mt-0",children:(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)(Oc,{title:"Master Admin - ".concat(s),subtitle:"White-label control center"}),(0,sa.jsx)("button",{onClick:de,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]})}),"Dashboard"===s&&h&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,sa.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-emerald-400 via-teal-500 to-cyan-500 text-gray-900 shadow-lg",children:[(0,sa.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Total Tenants"}),(0,sa.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.totalTenants}),(0,sa.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"Organization groups"})]}),(0,sa.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-500 text-gray-900 shadow-lg",children:[(0,sa.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Total Clubs"}),(0,sa.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.totalClubs}),(0,sa.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"All poker clubs"})]}),(0,sa.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-400 via-emerald-500 to-teal-500 text-gray-900 shadow-lg",children:[(0,sa.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Active Clubs"}),(0,sa.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.activeClubs}),(0,sa.jsxs)("div",{className:"text-xs mt-1 text-white/70",children:[h.suspendedClubs>0&&"".concat(h.suspendedClubs," suspended, "),h.killedClubs>0&&"".concat(h.killedClubs," killed")]})]}),(0,sa.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 text-gray-900 shadow-lg",children:[(0,sa.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Monthly Revenue"}),(0,sa.jsxs)("div",{className:"text-3xl font-bold mt-2 text-white",children:["\u20b9",h.monthlyRevenue.toLocaleString("en-IN")]}),(0,sa.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"From subscriptions"})]})]}),(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Quick Actions"}),(0,sa.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,sa.jsx)("button",{onClick:()=>M(!0),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"+ Create Tenant"}),(0,sa.jsx)("button",{onClick:()=>B(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"+ Create Club"}),(0,sa.jsx)("button",{onClick:()=>a("Reports"),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"View Reports"})]})]}),(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Recent Clubs"}),(0,sa.jsx)("div",{className:"space-y-4",children:b.slice(0,5).map(e=>(0,sa.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-bold text-white",children:e.name}),(0,sa.jsxs)("div",{className:"text-sm text-gray-400",children:["Code: ",e.code," | Tenant: ",e.tenant.name]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status}),(0,sa.jsxs)("span",{className:"text-emerald-400 font-medium",children:["\u20b9",e.subscriptionPrice,"/mo"]})]})]},e.id))})]})]}),"Tenants Management"===s&&(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Tenants (",f.length,")"]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsxs)("select",{value:P,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,sa.jsx)("option",{value:"name",children:"Sort by Name"}),(0,sa.jsx)("option",{value:"clubs",children:"Sort by Club Count"})]}),(0,sa.jsx)("button",{onClick:()=>M(!0),className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-medium",children:"+ Create Tenant"})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ge.map(e=>{const t=b.filter(t=>t.tenant.id===e.id),s=v===e.id;return(0,sa.jsxs)("div",{className:"p-6 bg-slate-800/50 rounded-lg border ".concat(s?"border-emerald-500":"border-slate-700"," cursor-pointer transition-all hover:border-emerald-500/50"),children:[(0,sa.jsx)("div",{onClick:()=>j(s?null:e.id),children:(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:t.length}),(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:"Clubs"})]})]})}),s&&t.length>0&&(0,sa.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-2",children:[(0,sa.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-3",children:"Clubs:"}),t.map(e=>(0,sa.jsx)("div",{className:"p-3 bg-slate-900/50 rounded border border-slate-700",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,sa.jsxs)("div",{className:"text-xs text-gray-400 font-mono",children:["Code: ",e.code]})]}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status})]})},e.id))]}),s&&0===t.length&&(0,sa.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-700 text-center text-gray-400 text-sm",children:"No clubs yet"})]},e.id)}),0===f.length&&(0,sa.jsx)("div",{className:"col-span-full text-center py-12 text-gray-400",children:(0,sa.jsx)("p",{children:"No tenants found. Create your first tenant to get started!"})})]})]}),"Clubs Management"===s&&(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["All Clubs (",be.length,")"]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,sa.jsx)("option",{value:"all",children:"All Status"}),(0,sa.jsx)("option",{value:"active",children:"Active"}),(0,sa.jsx)("option",{value:"suspended",children:"Suspended"}),(0,sa.jsx)("option",{value:"killed",children:"Killed"})]}),(0,sa.jsxs)("select",{value:k,onChange:e=>A(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,sa.jsx)("option",{value:"name",children:"Sort by Name"}),(0,sa.jsx)("option",{value:"status",children:"Sort by Status"}),(0,sa.jsx)("option",{value:"subscription",children:"Sort by Subscription"})]}),(0,sa.jsx)("button",{onClick:()=>B(!0),className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-medium",children:"+ Create Club"})]})]}),(0,sa.jsxs)("div",{className:"grid gap-4",children:[be.map(e=>(0,sa.jsx)("div",{className:"p-6 bg-slate-800/50 rounded-lg border border-slate-700",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Club Code:"}),(0,sa.jsx)("span",{className:"text-white font-mono ml-2",children:e.code})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Tenant:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:e.tenant.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Subscription:"}),(0,sa.jsxs)("span",{className:"text-emerald-400 ml-2 font-medium",children:["\u20b9",e.subscriptionPrice,"/month"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Sub Status:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:e.subscriptionStatus})]})]}),e.description&&(0,sa.jsx)("p",{className:"text-gray-400 mt-3 text-sm",children:e.description})]}),(0,sa.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:["active"===e.status&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("button",{onClick:()=>ue(e.id,"suspended","Temporary suspension"),className:"bg-yellow-600 hover:bg-yellow-500 px-3 py-1 rounded text-sm",children:"Suspend"}),(0,sa.jsx)("button",{onClick:()=>ue(e.id,"killed","Permanent closure"),className:"bg-red-600 hover:bg-red-500 px-3 py-1 rounded text-sm",children:"Kill"})]}),"suspended"===e.status&&(0,sa.jsx)("button",{onClick:()=>ue(e.id,"active","Reactivated"),className:"bg-green-600 hover:bg-green-500 px-3 py-1 rounded text-sm",children:"Reactivate"}),"killed"===e.status&&(0,sa.jsx)("button",{onClick:()=>ue(e.id,"active","Restored from killed status"),className:"bg-blue-600 hover:bg-blue-500 px-3 py-1 rounded text-sm",children:"Restore"}),(0,sa.jsx)("button",{onClick:()=>{U(e),a("Subscriptions")},className:"bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded text-sm",children:"Edit Sub"}),(0,sa.jsx)("button",{onClick:()=>{U(e),N(e.id),a("Terms & Conditions")},className:"bg-indigo-600 hover:bg-indigo-500 px-3 py-1 rounded text-sm",children:"Terms"})]})]})},e.id)),0===be.length&&(0,sa.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,sa.jsx)("p",{children:"No clubs found with the selected filters."})})]})]}),"Rummy Settings"===s&&(()=>{const e=b.find(e=>e.id===w);return(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Rummy Mode Settings"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Club Selection"}),(0,sa.jsxs)("select",{value:w||"",onChange:e=>N(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"Choose a club..."}),b.map(e=>(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),e&&(0,sa.jsxs)("div",{className:"p-6 bg-slate-800/70 rounded-lg border border-slate-600",children:[(0,sa.jsxs)("h4",{className:"font-bold text-lg mb-4 text-emerald-400",children:[e.rummyEnabled?"Disable":"Enable"," Rummy Mode for ",e.name]}),(0,sa.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:"When enabled, the club's backend dashboard and player portal will show Rummy-specific features:"}),(0,sa.jsxs)("ul",{className:"space-y-2 text-sm text-gray-400 mb-6",children:[(0,sa.jsx)("li",{children:'\u2022 UI labels change from "Poker Table" to "Rummy Table"'}),(0,sa.jsx)("li",{children:"\u2022 Table shape switches to round for Rummy tables"}),(0,sa.jsx)("li",{children:"\u2022 Rummy variants become available in table creation"}),(0,sa.jsx)("li",{children:"\u2022 Rummy-specific rules and gameplay features are enabled"})]}),e.rummyEnabled?(0,sa.jsx)("button",{onClick:()=>pe(e.id,!1),className:"w-full bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Disable Rummy Mode"}):(0,sa.jsx)("button",{onClick:()=>pe(e.id,!0),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Enable Rummy Mode"}),(0,sa.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"Note: Table creation and management is handled by club staff (Admin/Manager) in their respective portals, just like poker tables. This setting only enables/disables Rummy mode features for the club."})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Club Rummy Status"}),(0,sa.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,sa.jsxs)("div",{className:"p-4 bg-slate-800/70 rounded-lg border border-slate-600 flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,sa.jsxs)("div",{className:"text-xs text-gray-400",children:["Rummy Mode: ",e.rummyEnabled?"Enabled":"Disabled"]})]}),(0,sa.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.rummyEnabled?"bg-emerald-500/20 text-emerald-300":"bg-gray-500/20 text-gray-300"),children:e.rummyEnabled?"Enabled":"Disabled"})]},e.id))})]})]})]})})(),"Terms & Conditions"===s&&(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Terms & Conditions (Per Club)"}),(0,sa.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,sa.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,sa.jsxs)("select",{value:w||"",onChange:e=>{const t=e.target.value;N(t);const s=b.find(e=>e.id===t);le(s?{termsText:s.termsAndConditions||"",publicUrl:""}:{termsText:"",publicUrl:""})},className:"flex-1 px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"",children:"Choose a club..."}),b.map(e=>{var t;return(0,sa.jsxs)("option",{value:e.id,children:[e.name," (",e.code,") - ",(null===(t=e.tenant)||void 0===t?void 0:t.name)||"No Tenant"]},e.id)})]}),(0,sa.jsx)("input",{type:"text",placeholder:"Optional public URL",value:re.publicUrl,onChange:e=>le((0,i.A)((0,i.A)({},re),{},{publicUrl:e.target.value})),className:"flex-1 px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-500"}),(0,sa.jsx)("button",{onClick:he,disabled:!w,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-600 disabled:cursor-not-allowed px-8 py-3 rounded-lg font-medium text-white whitespace-nowrap",children:"Upload / Save"})]}),fe?(0,sa.jsxs)("form",{onSubmit:he,className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sa.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Editing T&C for: ",(0,sa.jsx)("span",{className:"text-emerald-400",children:fe.name})]}),(0,sa.jsxs)("span",{className:"text-xs text-gray-400",children:["Club Code: ",(0,sa.jsx)("span",{className:"font-mono text-emerald-400",children:fe.code})]})]}),(0,sa.jsxs)("p",{className:"text-sm text-gray-400",children:["Tenant: ",(null===(e=fe.tenant)||void 0===e?void 0:e.name)||"N/A"]})]}),(0,sa.jsx)("textarea",{name:"terms",value:re.termsText,onChange:e=>le((0,i.A)((0,i.A)({},re),{},{termsText:e.target.value})),rows:15,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-mono text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Paste Terms & Conditions here... Each club can have different T&C stored separately in the database."}),(0,sa.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"\u26a0\ufe0f Only Master Admin can manage club T&C. Each club's T&C is stored separately in the database."}),(0,sa.jsx)("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium text-white transition-colors",children:"Save Terms & Conditions"})]})]}):(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,sa.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcc4"}),(0,sa.jsx)("p",{className:"text-lg mb-2",children:"Select a club from the dropdown above"}),(0,sa.jsx)("p",{className:"text-sm",children:"to edit terms & conditions for that specific club."}),(0,sa.jsx)("p",{className:"text-xs mt-4 text-gray-500",children:"Each club can have different Terms & Conditions stored separately in the database."})]})]})]}),"Subscriptions"===s&&(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Subscription Management (",b.length,")"]}),(0,sa.jsxs)("select",{value:I,onChange:e=>_(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,sa.jsx)("option",{value:"price",children:"Sort by Price"}),(0,sa.jsx)("option",{value:"name",children:"Sort by Club Name"}),(0,sa.jsx)("option",{value:"tenant",children:"Sort by Tenant Name"}),(0,sa.jsx)("option",{value:"date",children:"Sort by Date Created"})]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[[...b].sort((e,t)=>"price"===I?parseFloat(t.subscriptionPrice)-parseFloat(e.subscriptionPrice):"name"===I?e.name.localeCompare(t.name):"tenant"===I?e.tenant.name.localeCompare(t.tenant.name):"date"===I?new Date(t.createdAt)-new Date(e.createdAt):0).map(e=>(0,sa.jsx)("div",{className:"p-6 bg-slate-800/50 rounded-lg border border-slate-700",children:D===e.id?(0,sa.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async(e,t)=>{try{await wr.o_.updateClubSubscription(e,t),alert("\u2705 Subscription updated successfully!"),E(null),L({}),oe()}catch(lu){alert("Failed to update subscription: "+lu.message)}})(e.id,{subscriptionPrice:parseFloat(R.price),subscriptionStatus:R.status,subscriptionNotes:R.notes})},className:"space-y-4",children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Club Name"}),(0,sa.jsxs)("div",{className:"px-4 py-2 bg-slate-900 rounded-lg text-white",children:[e.name," (",e.code,")"]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Tenant"}),(0,sa.jsx)("div",{className:"px-4 py-2 bg-slate-900 rounded-lg text-white",children:e.tenant.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Monthly Price (\u20b9)"}),(0,sa.jsx)("input",{type:"number",step:"0.01",value:R.price,onChange:e=>L((0,i.A)((0,i.A)({},R),{},{price:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Status"}),(0,sa.jsxs)("select",{value:R.status,onChange:e=>L((0,i.A)((0,i.A)({},R),{},{status:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,sa.jsx)("option",{value:"active",children:"Active"}),(0,sa.jsx)("option",{value:"paused",children:"Paused"}),(0,sa.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Notes"}),(0,sa.jsx)("textarea",{value:R.notes,onChange:e=>L((0,i.A)((0,i.A)({},R),{},{notes:e.target.value})),rows:3,className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",placeholder:"Payment notes, reminders, etc."})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium",children:"Save Changes"}),(0,sa.jsx)("button",{type:"button",onClick:xe,className:"bg-slate-600 hover:bg-slate-500 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]}):(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,sa.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,sa.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-700 text-gray-300",children:e.code})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Tenant:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:e.tenant.name})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Created:"}),(0,sa.jsx)("span",{className:"text-white ml-2",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Monthly Price:"}),(0,sa.jsxs)("span",{className:"text-emerald-400 ml-2 font-bold text-lg",children:["\u20b9",e.subscriptionPrice]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,sa.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.subscriptionStatus?"bg-green-500/20 text-green-300":"paused"===e.subscriptionStatus?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.subscriptionStatus})]})]}),e.subscriptionNotes&&(0,sa.jsxs)("div",{className:"mt-3 text-sm text-gray-400",children:[(0,sa.jsx)("span",{className:"font-medium",children:"Notes:"})," ",e.subscriptionNotes]})]}),(0,sa.jsx)("button",{onClick:()=>(e=>{E(e.id),L({price:e.subscriptionPrice,status:e.subscriptionStatus,notes:e.subscriptionNotes||""})})(e),className:"ml-4 bg-purple-600 hover:bg-purple-500 px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap",children:"Edit Subscription"})]})},e.id)),0===b.length&&(0,sa.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,sa.jsx)("p",{children:"No clubs found."})})]})]}),"Reports"===s&&(0,sa.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Revenue Reports"}),(0,sa.jsx)("button",{onClick:()=>{const e=b.map(e=>[e.name,e.code,e.tenant.name,e.subscriptionPrice,e.status,e.subscriptionStatus,new Date(e.createdAt).toLocaleDateString()]),t=[["Club Name","Club Code","Tenant Name","Monthly Price (\u20b9)","Status","Subscription Status","Created Date"].join(","),...e.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),r=URL.createObjectURL(s);a.setAttribute("href",r),a.setAttribute("download","revenue-report-".concat((new Date).toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium text-white",children:"Export CSV"})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,sa.jsxs)("div",{className:"p-6 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-lg border border-emerald-500/30",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Total Monthly Revenue"}),(0,sa.jsxs)("div",{className:"text-3xl font-bold text-emerald-400 mt-2",children:["\u20b9",null===h||void 0===h?void 0:h.monthlyRevenue.toLocaleString("en-IN")]})]}),(0,sa.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 rounded-lg border border-blue-500/30",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Active Subscriptions"}),(0,sa.jsx)("div",{className:"text-3xl font-bold text-blue-400 mt-2",children:b.filter(e=>"active"===e.subscriptionStatus).length})]}),(0,sa.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-lg border border-purple-500/30",children:[(0,sa.jsx)("div",{className:"text-sm text-gray-300",children:"Avg. Subscription"}),(0,sa.jsxs)("div",{className:"text-3xl font-bold text-purple-400 mt-2",children:["\u20b9",b.length>0?Math.round((null===h||void 0===h?void 0:h.monthlyRevenue)/b.length).toLocaleString("en-IN"):0]})]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-bold text-white",children:"Club Revenue Breakdown"}),b.map(e=>(0,sa.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,sa.jsx)("div",{className:"text-sm text-gray-400",children:e.tenant.name})]}),(0,sa.jsxs)("div",{className:"text-right",children:[(0,sa.jsxs)("div",{className:"text-xl font-bold text-emerald-400",children:["\u20b9",e.subscriptionPrice,"/mo"]}),(0,sa.jsx)("div",{className:"text-xs text-gray-400",children:e.subscriptionStatus})]})]},e.id))]})]})]})})]}),O&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create Tenant + Super Admin"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await wr.Ox.createTenant({name:z.tenantName,superAdminName:z.superAdminName,superAdminEmail:z.superAdminEmail});X({type:"tenant",tenantName:e.tenant.name,superAdminEmail:e.superAdmin.email,tempPassword:e.superAdmin.tempPassword}),$(!0),M(!1),W({tenantName:"",superAdminName:"",superAdminEmail:""}),oe()}catch(lu){const t=lu.message||"Unknown error";t.includes("already exists")||t.includes("already used")||t.includes("Tenant name")?ce(t,"error"):ce("Failed to create tenant: "+t,"error")}},className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-emerald-400",children:"Tenant Information"}),(0,sa.jsx)("input",{type:"text",placeholder:"Tenant Name (e.g., Poker Group India)",value:z.tenantName,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{tenantName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-blue-400",children:"Super Admin"}),(0,sa.jsx)("input",{type:"text",placeholder:"Super Admin Name",value:z.superAdminName,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{superAdminName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,sa.jsx)("input",{type:"email",placeholder:"Super Admin Email",value:z.superAdminEmail,onChange:e=>W((0,i.A)((0,i.A)({},z),{},{superAdminEmail:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,sa.jsx)("p",{className:"text-sm text-gray-400",children:"A temporary password will be generated automatically"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium text-white",children:"Create Tenant"}),(0,sa.jsx)("button",{type:"button",onClick:()=>M(!1),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium text-white",children:"Cancel"})]})]})]})}),F&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,sa.jsxs)("div",{className:"bg-slate-900 rounded-xl p-8 max-w-6xl w-full my-8 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create Club with Branding"}),(0,sa.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),G(!0);try{var t;let e,a=H.logoUrl;const r=(null===(t=ie.find(e=>e.value===H.gradient))||void 0===t?void 0:t.class)||H.gradient;if(H.createNewTenant){if(e=await wr.o_.createTenantWithClub({tenantName:H.newTenantName,superAdminName:H.newSuperAdminName,superAdminEmail:H.newSuperAdminEmail,clubName:H.clubName,clubDescription:H.clubDescription,skinColor:H.skinColor,gradient:r,logoUrl:H.logoUrl||void 0,videoUrl:H.videoUrl||void 0}),J&&e.club&&e.tenant)try{const t=e.tenant.id,s=e.club.id,r=await wr.Ox.getLogoUploadUrl(t,s);await wr.Ox.uploadLogo(r.signedUrl,J),a=await wr.Ox.getLogoPublicUrl(t,s)}catch(s){console.error("Logo upload failed:",s),ce("Club created but logo upload failed","error")}X({type:"tenant-club",tenant:e.tenant,superAdmin:e.superAdmin,club:e.club,logoUrl:a}),$(!0)}else{if(e=await wr.Ox.createClubWithBranding(H.tenantId,{name:H.clubName,description:H.clubDescription||void 0,skinColor:H.skinColor||void 0,gradient:r||void 0,logoUrl:H.logoUrl||void 0,videoUrl:H.videoUrl||void 0}),J&&e.id)try{const t=H.tenantId,s=e.id,r=await wr.Ox.getLogoUploadUrl(t,s);await wr.Ox.uploadLogo(r.signedUrl,J),a=await wr.Ox.getLogoPublicUrl(t,s)}catch(s){console.error("Logo upload failed:",s),ce("Club created but logo upload failed","error")}X({type:"club",club:e,logoUrl:a}),$(!0)}B(!1),V({clubName:"",clubDescription:"",skinColor:"#10b981",gradient:"emerald-green-teal",logoUrl:"",videoUrl:"",tenantId:"",createNewTenant:!1,newTenantName:"",newSuperAdminName:"",newSuperAdminEmail:""}),K(null),oe()}catch(lu){const t=lu.message||"Unknown error";t.includes("already exists")||t.includes("already used")?ce(t,"error"):ce("Failed to create club: "+t,"error")}finally{G(!1)}},children:[(0,sa.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-purple-400",children:"Club Information"}),(0,sa.jsx)("input",{type:"text",placeholder:"Club Name (e.g., Emerald Poker Mumbai)",value:H.clubName,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{clubName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,sa.jsx)("textarea",{placeholder:"Club Description",value:H.clubDescription,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{clubDescription:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",rows:3})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-pink-400",children:"Club Branding"}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Club Logo (PNG)"}),(0,sa.jsx)("input",{type:"file",accept:"image/png",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return ce("Logo file size must be less than 5MB","error"),void(e.target.value="");if(!t.type.includes("png"))return ce("Logo must be a PNG image","error"),void(e.target.value="");K(t)}},className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500 file:cursor-pointer"}),J&&(0,sa.jsxs)("p",{className:"text-xs text-emerald-400 mt-2",children:["\u2713 ",J.name," selected (will upload when club is created)"]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Logo will be uploaded to Supabase when you create the club (max 5MB)"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Promo Video URL (mp4) - Optional"}),(0,sa.jsx)("input",{type:"text",placeholder:"Promo Video URL (mp4)",value:H.videoUrl,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{videoUrl:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-500"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Skin Color"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("input",{type:"color",value:H.skinColor,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{skinColor:e.target.value})),className:"w-16 h-12 bg-slate-800 border border-slate-600 rounded-lg cursor-pointer"}),(0,sa.jsx)("input",{type:"text",value:H.skinColor,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{skinColor:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white font-mono"})]}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Primary theme color for the club"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Gradient Selection"}),(0,sa.jsx)("select",{value:H.gradient,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{gradient:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:ie.map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,sa.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Gradient theme for club branding"})]})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-cyan-400",children:"Tenant Assignment"}),(0,sa.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"radio",checked:!H.createNewTenant,onChange:()=>V((0,i.A)((0,i.A)({},H),{},{createNewTenant:!1})),className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Assign to Existing Tenant"})]}),(0,sa.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,sa.jsx)("input",{type:"radio",checked:H.createNewTenant,onChange:()=>V((0,i.A)((0,i.A)({},H),{},{createNewTenant:!0})),className:"w-4 h-4"}),(0,sa.jsx)("span",{children:"Create New Tenant"})]})]}),H.createNewTenant?(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h4",{className:"text-sm font-medium text-emerald-400",children:"New Tenant Details"}),(0,sa.jsx)("input",{type:"text",placeholder:"Tenant Name",value:H.newTenantName,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{newTenantName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant}),(0,sa.jsx)("input",{type:"text",placeholder:"Super Admin Name",value:H.newSuperAdminName,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{newSuperAdminName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant}),(0,sa.jsx)("input",{type:"email",placeholder:"Super Admin Email",value:H.newSuperAdminEmail,onChange:e=>V((0,i.A)((0,i.A)({},H),{},{newSuperAdminEmail:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant})]}):(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm mb-2",children:"Select Tenant"}),(0,sa.jsxs)("select",{value:H.tenantId,onChange:async e=>{const t=e.target.value;if(V((0,i.A)((0,i.A)({},H),{},{tenantId:t})),t)try{const e=await wr.Ox.getTenant(t);e&&e.superAdmin&&console.log("\u2705 Tenant has super admin:",e.superAdmin.email)}catch(lu){console.error("Failed to fetch tenant info:",lu)}},className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!H.createNewTenant,children:[(0,sa.jsx)("option",{value:"",children:"Choose a tenant..."}),f.map(e=>(0,sa.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,sa.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"A unique 6-digit club code will be generated automatically"})]}),(0,sa.jsxs)("div",{className:"space-y-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-medium text-white",children:"Live Preview"}),(0,sa.jsx)("div",{className:"p-8 rounded-xl bg-gradient-to-br ".concat((e=>{const t=ie.find(t=>t.value===e);return t?t.class:e})(H.gradient)," min-h-[500px]"),children:(0,sa.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,sa.jsx)("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white font-bold text-xs overflow-hidden",style:{backgroundColor:H.skinColor},children:J?(0,sa.jsx)("img",{src:URL.createObjectURL(J),alt:"Logo Preview",className:"w-full h-full object-cover rounded-lg"}):H.logoUrl?(0,sa.jsx)("img",{src:H.logoUrl,alt:"Logo",className:"w-full h-full object-contain rounded-lg",onError:e=>e.target.style.display="none"}):"LOGO"}),(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("h4",{className:"text-2xl font-bold text-white",children:H.clubName||"Club Name"}),(0,sa.jsx)("p",{className:"text-white/80 text-sm",children:H.clubDescription||"Club description will appear here"})]})]}),(0,sa.jsxs)("div",{className:"space-y-3 text-white",children:[(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"font-medium",children:"Logo:"}),(0,sa.jsx)("span",{className:"text-white/80",children:J?"".concat(J.name," (").concat((J.size/1024).toFixed(1),"KB)"):H.logoUrl?"Set via URL":"Not set"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"font-medium",children:"Video:"}),(0,sa.jsx)("span",{className:"text-white/80",children:H.videoUrl?"Set":"Not set"})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"font-medium",children:"Skin Color:"}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("div",{className:"w-6 h-6 rounded border-2 border-white",style:{backgroundColor:H.skinColor}}),(0,sa.jsx)("span",{className:"text-white/80 font-mono text-sm",children:H.skinColor})]})]}),(0,sa.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sa.jsx)("span",{className:"font-medium",children:"Gradient:"}),(0,sa.jsx)("span",{className:"text-white/80 text-sm",children:(null===(t=ie.find(e=>e.value===H.gradient))||void 0===t?void 0:t.label)||H.gradient})]})]}),(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/20",children:(0,sa.jsx)("p",{className:"text-white/70 text-sm",children:"This preview shows how the branding will appear in the player portal and club dashboards."})})]})})]})]}),(0,sa.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,sa.jsx)("button",{type:"submit",disabled:Q,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-600 disabled:cursor-not-allowed px-6 py-3 rounded-lg font-medium text-white",children:Q?"Uploading Logo...":"Create Club"}),(0,sa.jsx)("button",{type:"button",onClick:()=>{B(!1),K(null)},disabled:Q,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:cursor-not-allowed rounded-lg font-medium text-white",children:"Cancel"})]})]})]})}),ee&&(0,sa.jsx)("div",{className:"fixed top-4 right-4 z-[100] px-6 py-4 rounded-lg shadow-2xl border-2 ".concat("error"===se?"bg-red-900 border-red-500 text-red-100":"bg-emerald-900 border-emerald-500 text-emerald-100"),children:(0,sa.jsxs)("div",{className:"flex items-center gap-3",children:["error"===se?(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,sa.jsx)("p",{className:"font-medium",children:ee})]})}),Y&&Z&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-500 rounded-full mb-4",children:(0,sa.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"tenant"===Z.type?"\ud83c\udf89 Tenant Created!":"tenant-club"===Z.type?"\ud83c\udf89 Tenant & Club Created!":"\ud83c\udf89 Club Created!"}),(0,sa.jsx)("p",{className:"text-emerald-400 text-sm",children:"Save these credentials securely!"})]}),(0,sa.jsxs)("div",{className:"space-y-6",children:["tenant"===Z.type&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[(0,sa.jsxs)("h3",{className:"text-purple-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),"Tenant Details"]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.tenantName]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-blue-500/30",children:[(0,sa.jsxs)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Super Admin Login"]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",Z.superAdminEmail]}),(0,sa.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,sa.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:Z.tempPassword})]})]})]})]}),"tenant-club"===Z.type&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[(0,sa.jsxs)("h3",{className:"text-purple-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),"Tenant Details"]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.tenant.name]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-blue-500/30",children:[(0,sa.jsxs)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Super Admin Login"]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.superAdmin.displayName||Z.superAdmin.email]}),(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",Z.superAdmin.email]}),(0,sa.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,sa.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,sa.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:Z.superAdmin.tempPassword})]})]})]})]}),("tenant-club"===Z.type||"club"===Z.type)&&(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-emerald-500/30",children:[(0,sa.jsxs)("h3",{className:"text-emerald-400 font-semibold mb-3 flex items-center gap-2",children:[(0,sa.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sa.jsx)("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),"Club Details"]}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("p",{className:"text-white",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Club Name:"})," ",Z.club.name]}),(0,sa.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3 mt-2",children:[(0,sa.jsx)("p",{className:"text-emerald-400 text-sm font-medium mb-1",children:"\ud83c\udfae Unique Club Code"}),(0,sa.jsx)("p",{className:"text-emerald-100 font-mono text-2xl font-bold tracking-wider",children:Z.club.code}),(0,sa.jsx)("p",{className:"text-emerald-300 text-xs mt-1",children:"Players use this code to sign up"})]}),Z.logoUrl&&(0,sa.jsx)("p",{className:"text-emerald-400 text-sm mt-2",children:"\u2705 Logo uploaded successfully"})]})]})]}),(0,sa.jsx)("button",{onClick:()=>{$(!1),X(null)},className:"w-full mt-6 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Got it! Close"})]})})]})}function Bc(){return(0,sa.jsx)(jd,{role:"SUPER_ADMIN",roleDisplayName:"Super Admin",redirectPath:"/super-admin",gradientFrom:"from-blue-400",gradientTo:"to-indigo-600",description:"Tenant-level Administration"})}const qc=["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","Club Buy-In","Credit Management","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Financial Overrides","Reports & Analytics","Audit Logs","System Control"];function Uc(e){let{activeItem:t,setActiveItem:s,menuItems:a=qc,onSignOut:l=null,clubs:n=[],selectedClubId:o=null,onClubChange:d=null}=e;const[c,u]=(0,r.useState)(!1),[m,x]=(0,r.useState)(window.innerWidth<1024),[h,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[f,y]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),v=o||localStorage.getItem("clubId"),{data:j}=ml({queryKey:["unreadNotificationCount",v,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(v,"staff"),enabled:!!v,refetchInterval:3e4});(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;x(e),e||u(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(c&&m){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[c,m]);const w=n.find(e=>e.clubId===o)||n[0],N=(null===w||void 0===w?void 0:w.rummyEnabled)||!1,S=JSON.parse(localStorage.getItem("user")||"{}"),C=JSON.parse(localStorage.getItem("superadminuser")||"{}"),k=S.email||C.email||"super@admin.com",A=S.displayName||C.displayName||"Root Administrator",P=(S.role||C.role,N?[...a,"Rummy"]:a),T=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("superadminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("superadminuser",JSON.stringify(t)),g(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}});return(0,sa.jsxs)(sa.Fragment,{children:[m&&(0,sa.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-red-500 to-purple-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>u(!c),"aria-label":"Toggle sidebar",children:(0,sa.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),m&&c&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>u(!1)}),(0,sa.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-red-500/20 via-purple-600/30 to-indigo-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(m?c?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,sa.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-purple-300 to-indigo-400 drop-shadow-lg mb-6",children:"Super Admin"}),(0,sa.jsxs)("div",{onClick:()=>g(!0),className:"bg-white/10 rounded-xl p-4 mb-6 text-white shadow-inner cursor-pointer hover:bg-white/15 transition-colors",children:[(0,sa.jsx)("div",{className:"text-lg font-semibold",children:A}),(0,sa.jsx)("div",{className:"text-sm opacity-80",children:k})]}),b&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>g(!1),children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=t.email||s.email;a?f.currentPassword&&f.newPassword&&f.confirmPassword?f.newPassword===f.confirmPassword?f.newPassword.length<8?jr.error("Password must be at least 8 characters"):T.mutate({email:a,currentPassword:f.currentPassword,newPassword:f.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:f.currentPassword,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:f.newPassword,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:f.confirmPassword,onChange:e=>y((0,i.A)((0,i.A)({},f),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{type:"button",onClick:()=>{g(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,sa.jsx)("button",{type:"submit",disabled:T.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:T.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),n.length>0&&d&&(0,sa.jsxs)("div",{className:"mb-6 relative min-w-0",children:[(0,sa.jsx)("label",{className:"text-white text-sm mb-2 block font-semibold",children:"\ud83d\udccd Select Club"}),(0,sa.jsxs)("div",{className:"relative min-w-0",children:[(0,sa.jsxs)("button",{type:"button",onClick:()=>p(!h),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-600/20 to-teal-600/20 border border-emerald-500/40 rounded-lg text-white text-left flex items-center justify-between hover:from-emerald-600/30 hover:to-teal-600/30 transition-all overflow-hidden min-w-0 shadow-md",children:[(0,sa.jsx)("span",{className:"truncate min-w-0 flex-1 font-medium",children:(null===w||void 0===w?void 0:w.clubName)||"Select Club"}),(0,sa.jsx)("svg",{className:"w-5 h-5 ml-2 transition-transform ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),(0,sa.jsx)("div",{className:"absolute z-20 w-full mt-2 bg-slate-800 border border-emerald-500/40 rounded-lg shadow-2xl max-h-64 overflow-y-auto overflow-x-hidden hide-scrollbar",children:n.map(e=>(0,sa.jsxs)("button",{type:"button",onClick:()=>{d(e.clubId),p(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-emerald-600/30 transition-colors overflow-hidden border-b border-slate-700 last:border-b-0 ".concat(o===e.clubId?"bg-emerald-600/40 font-semibold":""),children:[(0,sa.jsx)("span",{className:"block truncate",children:e.clubName}),(0,sa.jsx)("span",{className:"block text-xs text-gray-400 truncate mt-0.5",children:e.tenantName})]},e.clubId))})]})]}),(0,sa.jsxs)("p",{className:"text-xs text-emerald-400 mt-2 font-medium",children:["\ud83d\udcca ",n.length," ",1===n.length?"Club":"Clubs"," Available"]}),w&&w.code&&(0,sa.jsxs)("div",{className:"mt-3 bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,sa.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,sa.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:w.code}),(0,sa.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})]})]}),(0,sa.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:P.map(e=>(0,sa.jsx)("button",{onClick:()=>{s(e),m&&u(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-red-400 to-purple-600 text-white font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-red-400/20 hover:to-purple-500/20 text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between",children:[(0,sa.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===j||void 0===j?void 0:j.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:j.unreadCount>9?"9+":j.unreadCount})]})},e))}),l&&(0,sa.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,sa.jsx)("button",{onClick:l,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function zc(e){let{selectedClubId:t}=e;const s=ra(),[a,l]=(0,r.useState)("players-list"),[n,i]=(0,r.useState)(!1),[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(null),[m,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(null),[f,y]=(0,r.useState)(""),{data:v=[],isLoading:j}=ml({queryKey:["creditPlayers",t],queryFn:async()=>{if(!t)return[];const e=[];let s=1;let a=!0;for(;a;)try{const r=await wr.Dv.getPlayers(t,{limit:50,page:s}),l=(null===r||void 0===r?void 0:r.players)||[];if(!l||0===l.length){a=!1;break}const n=l.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),l.length<50?a=!1:(s++,s>20&&(a=!1))}catch(r){console.error("Error fetching page ".concat(s,":"),r),a=!1}return e},enabled:!!t}),{data:w=[],isLoading:N}=ml({queryKey:["creditRequests",t],queryFn:()=>wr.Dv.getCreditRequests(t,"Pending"),enabled:!!t&&"credit-requests"===a}),S=bl({mutationFn:async e=>{let{playerId:s,limit:a}=e;return await wr.Dv.unlockCredit(t,s,{creditLimit:parseFloat(a)})},onSuccess:()=>{jr.success("Credit feature unlocked successfully!"),s.invalidateQueries(["creditPlayers",t]),i(!1),u(null),x("")},onError:e=>{jr.error(e.message||"Failed to unlock credit feature")}}),C=bl({mutationFn:async e=>{let{playerId:s,limit:a}=e;return await wr.Dv.updateCreditLimit(t,s,{creditLimit:parseFloat(a)})},onSuccess:()=>{jr.success("Credit limit updated successfully!"),s.invalidateQueries(["creditPlayers",t]),d(!1),u(null),x("")},onError:e=>{jr.error(e.message||"Failed to update credit limit")}}),k=bl({mutationFn:async e=>{let{requestId:s,playerId:a}=e;return await wr.Dv.approveCreditRequest(t,s)},onSuccess:()=>{jr.success("Credit request approved!"),s.invalidateQueries(["creditRequests",t]),s.invalidateQueries(["creditPlayers",t])},onError:e=>{jr.error(e.message||"Failed to approve credit request")}}),A=bl({mutationFn:async e=>{let{requestId:s,reason:a}=e;return await wr.Dv.rejectCreditRequest(t,s,{reason:a})},onSuccess:()=>{jr.success("Credit request rejected"),s.invalidateQueries(["creditRequests",t]),p(!1),g(null),y("")},onError:e=>{jr.error(e.message||"Failed to reject credit request")}});return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Credit Feature Management"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Ultimate control: players, staff, credit, overrides and more"})]}),(0,sa.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,sa.jsx)("button",{onClick:()=>l("players-list"),className:"px-6 py-3 font-semibold rounded-t-lg transition-colors ".concat("players-list"===a?"bg-gradient-to-r from-amber-600 to-amber-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Players List & Credit Management"}),(0,sa.jsx)("button",{onClick:()=>l("credit-requests"),className:"px-6 py-3 font-semibold rounded-t-lg transition-colors ".concat("credit-requests"===a?"bg-gradient-to-r from-amber-600 to-amber-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Credit Approval Requests"})]}),(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-amber-900/30 to-orange-900/30 rounded-lg p-6",children:["players-list"===a&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"All Players - Credit Management"}),j?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading players..."}):0===v.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No players found"}):(0,sa.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,sa.jsx)("div",{className:"bg-slate-800/50 rounded-lg p-5 border border-slate-700",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-white font-semibold text-lg",children:e.name}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["ID: ",e.playerId||e.id]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Email: ",e.email]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Balance: ",(0,sa.jsxs)("span",{className:"font-bold text-green-400",children:["\u20b9",e.balance||0]})]}),e.creditEnabled&&(0,sa.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,sa.jsxs)("p",{className:"text-blue-400 text-sm",children:["Credit Limit: ",(0,sa.jsxs)("span",{className:"font-bold",children:["\u20b9",e.creditLimit||0]})]}),(0,sa.jsxs)("p",{className:"text-yellow-400 text-sm",children:["Credit Used: ",(0,sa.jsxs)("span",{className:"font-bold",children:["\u20b9",e.creditUsed||0]})]}),(0,sa.jsxs)("p",{className:"text-green-400 text-sm",children:["Available Credit: ",(0,sa.jsxs)("span",{className:"font-bold",children:["\u20b9",(e.creditLimit||0)-(e.creditUsed||0)]})]})]})]}),(0,sa.jsxs)("div",{className:"flex flex-col gap-2",children:[e.creditEnabled?(0,sa.jsx)("button",{onClick:()=>{var t;u(e),x((null===(t=e.creditLimit)||void 0===t?void 0:t.toString())||""),d(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",children:"Edit Limit"}):(0,sa.jsx)("button",{onClick:()=>{u(e),i(!0)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors",children:"Unlock Credit"}),e.creditEnabled&&(0,sa.jsx)("span",{className:"px-4 py-2 bg-green-600 text-white text-center rounded-lg font-semibold",children:"Credit Enabled"})]})]})},e.id))})]}),"credit-requests"===a&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Credit Approval Requests"}),N?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading requests..."}):0===w.length?(0,sa.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending credit requests"}):(0,sa.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("h3",{className:"text-white font-semibold text-xl",children:e.playerName}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Player ID: ",e.playerId]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Requested Amount: ",(0,sa.jsxs)("span",{className:"font-bold text-yellow-400",children:["\u20b9",Number(e.amount).toLocaleString()]})]}),e.limit&&(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Credit Limit: ",(0,sa.jsxs)("span",{className:"font-bold text-blue-400",children:["\u20b9",Number(e.limit).toLocaleString()]})]}),(0,sa.jsxs)("p",{className:"text-gray-400 text-sm",children:["Requested: ",new Date(e.createdAt).toLocaleDateString()]}),e.notes&&(0,sa.jsxs)("p",{className:"text-gray-300 text-sm mt-2",children:["Notes: ",e.notes]})]}),(0,sa.jsx)("span",{className:"px-3 py-1 bg-yellow-600 text-white text-sm font-semibold rounded",children:"Pending"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>k.mutate({requestId:e.id,playerId:e.playerId}),disabled:k.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:k.isPending?"Approving...":"Approve Credit"}),(0,sa.jsx)("button",{onClick:()=>{g(e),p(!0)},disabled:A.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Reject"})]})]},e.id))})]})]}),n&&c&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Unlock Credit Feature"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["Do you want to unlock the credit feature for ",(0,sa.jsx)("span",{className:"font-semibold text-white",children:c.name}),"?"]}),(0,sa.jsx)("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:(0,sa.jsxs)("p",{className:"text-blue-400 text-sm",children:["Current Balance: \u20b9",c.balance||0]})}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Set Credit Limit (\u20b9) ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",value:m,onChange:e=>x(e.target.value),placeholder:"Enter credit limit",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{!m||parseFloat(m)<=0?jr.error("Please enter a valid credit limit"):S.mutate({playerId:c.id,limit:m})},disabled:S.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:S.isPending?"Unlocking...":"Unlock & Set Limit"}),(0,sa.jsx)("button",{onClick:()=>{i(!1),u(null),x("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),o&&c&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Edit Credit Limit"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["Update credit limit for ",(0,sa.jsx)("span",{className:"font-semibold text-white",children:c.name})]}),(0,sa.jsxs)("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,sa.jsxs)("p",{className:"text-blue-400 text-sm",children:["Current Limit: \u20b9",c.creditLimit||0]}),(0,sa.jsxs)("p",{className:"text-blue-400 text-sm",children:["Credit Used: \u20b9",c.creditUsed||0]})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["New Credit Limit (\u20b9) ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("input",{type:"number",value:m,onChange:e=>x(e.target.value),placeholder:"Enter new credit limit",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{!m||parseFloat(m)<=0?jr.error("Please enter a valid credit limit"):C.mutate({playerId:c.id,limit:m})},disabled:C.isPending,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:C.isPending?"Updating...":"Update Limit"}),(0,sa.jsx)("button",{onClick:()=>{d(!1),u(null),x("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),h&&b&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Reject Credit Request"}),(0,sa.jsxs)("p",{className:"text-gray-300 mb-4",children:["Rejecting request from ",(0,sa.jsx)("span",{className:"font-semibold text-white",children:b.playerName})]}),(0,sa.jsxs)("div",{className:"mb-6",children:[(0,sa.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Rejection Reason ",(0,sa.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,sa.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Enter reason for rejection...",rows:4,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,sa.jsxs)("div",{className:"flex gap-3",children:[(0,sa.jsx)("button",{onClick:()=>{f.trim()?A.mutate({requestId:b.id,reason:f}):jr.error("Please provide a reason for rejection")},disabled:A.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:A.isPending?"Rejecting...":"Confirm Rejection"}),(0,sa.jsx)("button",{onClick:()=>{p(!1),g(null),y("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function Wc(e){var t,s;let{clubId:a}=e;const[l,n]=(0,r.useState)(1),[o,d]=(0,r.useState)({search:"",category:"",staffRole:"",startDate:"",endDate:""}),[c,u]=(0,r.useState)({}),[m,x]=(0,r.useState)(!1),{data:h,isLoading:p,refetch:b}=ml({queryKey:["auditLogs",a,l,c],queryFn:async()=>{const e=new URLSearchParams((0,i.A)({page:l.toString(),limit:"10"},c));return await(0,wr.AT)("/clubs/".concat(a,"/audit-logs?").concat(e))},enabled:!!a}),{data:g}=ml({queryKey:["auditLogStats",a],queryFn:async()=>await(0,wr.AT)("/clubs/".concat(a,"/audit-logs/statistics?days=30")),enabled:!!a}),f=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"}).format(t)};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:[(0,sa.jsxs)("div",{className:"mb-8",children:[(0,sa.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Audit Logs & Backups"}),(0,sa.jsx)("p",{className:"text-gray-400",children:"Track all staff activities and system events"})]}),g&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[(0,sa.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,sa.jsx)(dn,{className:"text-3xl opacity-75"})}),(0,sa.jsx)("div",{className:"text-3xl font-bold mb-1",children:g.totalActions}),(0,sa.jsx)("div",{className:"text-sm opacity-90",children:"Total Actions (30 days)"})]}),Object.entries(g.byCategory||{}).slice(0,3).map((e,t)=>{let[s,a]=e;return(0,sa.jsxs)("div",{className:"bg-gradient-to-br ".concat(0===t?"from-green-500 to-green-600":1===t?"from-orange-500 to-orange-600":"from-purple-500 to-purple-600"," rounded-xl p-6 text-white"),children:[(0,sa.jsx)("div",{className:"text-2xl font-bold mb-1",children:a}),(0,sa.jsx)("div",{className:"text-sm opacity-90 capitalize",children:s.replace(/_/g," ")})]},s)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 mb-6 border border-slate-700",children:[(0,sa.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,sa.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),(0,sa.jsxs)("div",{className:"relative",children:[(0,sa.jsx)(kn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,sa.jsx)("input",{type:"text",value:o.search,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{search:e.target.value})),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:o.startDate,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:o.endDate,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,sa.jsxs)("button",{onClick:()=>x(!m),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg flex items-center gap-2 transition-colors",children:[(0,sa.jsx)(vn,{}),"More Filters"]}),(0,sa.jsx)("button",{onClick:()=>{const e={};o.search&&(e.search=o.search),o.category&&(e.category=o.category),o.staffRole&&(e.staffRole=o.staffRole),o.startDate&&(e.startDate=o.startDate),o.endDate&&(e.endDate=o.endDate),u(e),n(1),x(!1)},className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-medium transition-colors",children:"Apply Filters"}),Object.keys(c).length>0&&(0,sa.jsx)("button",{onClick:()=>{d({search:"",category:"",staffRole:"",startDate:"",endDate:""}),u({}),n(1)},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Clear"})]}),m&&(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),(0,sa.jsx)("select",{value:o.category,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[{value:"",label:"All Categories"},{value:"player_management",label:"Player Management"},{value:"financial",label:"Financial"},{value:"table_management",label:"Table Management"},{value:"staff_management",label:"Staff Management"},{value:"tournament",label:"Tournament"},{value:"bonus",label:"Bonus"},{value:"credit",label:"Credit"},{value:"fnb",label:"FNB"},{value:"shift",label:"Shift"},{value:"payroll",label:"Payroll"},{value:"override",label:"Override"},{value:"system",label:"System"}].map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Staff Role"}),(0,sa.jsx)("select",{value:o.staffRole,onChange:e=>d((0,i.A)((0,i.A)({},o),{},{staffRole:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGER",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE"},{value:"CASHIER",label:"Cashier"},{value:"DEALER",label:"Dealer"},{value:"KITCHEN_STAFF",label:"Kitchen Staff"},{value:"AFFILIATE",label:"Affiliate"}].map(e=>(0,sa.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Audit Log"}),p?(0,sa.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):0===(null===h||void 0===h||null===(t=h.logs)||void 0===t?void 0:t.length)?(0,sa.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,sa.jsx)("p",{className:"text-lg",children:"No audit logs found"}),(0,sa.jsx)("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"space-y-3 mb-6",children:null===h||void 0===h||null===(s=h.logs)||void 0===s?void 0:s.map(e=>(0,sa.jsx)("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg p-4 hover:bg-slate-700 transition-colors",children:(0,sa.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sa.jsxs)("div",{className:"flex-1",children:[(0,sa.jsx)("p",{className:"text-white font-medium mb-1",children:e.description}),(0,sa.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm text-gray-400",children:[(0,sa.jsxs)("span",{className:"flex items-center gap-1",children:[(0,sa.jsx)("span",{className:"font-medium text-purple-400",children:e.staffName}),(0,sa.jsxs)("span",{children:["(",e.staffRole.replace(/_/g," "),")"]})]}),e.targetName&&(0,sa.jsxs)("span",{children:["\u2192 ",(0,sa.jsx)("span",{className:"font-medium text-blue-400",children:e.targetName})]}),(0,sa.jsx)("span",{className:"text-gray-500",children:"\u2022"}),(0,sa.jsx)("span",{className:"capitalize text-green-400",children:e.actionCategory.replace(/_/g," ")})]})]}),(0,sa.jsx)("div",{className:"text-right text-sm text-gray-400 ml-4",children:f(e.createdAt)})]})},e.id))}),h&&h.totalPages>1&&(0,sa.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[(0,sa.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing page ",l," of ",h.totalPages," (",h.total," total logs)"]}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>n(e=>Math.max(1,e-1)),disabled:1===l,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Previous"}),(0,sa.jsx)("button",{onClick:()=>n(e=>Math.min(h.totalPages,e+1)),disabled:l===h.totalPages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Next"})]})]})]})]})]})}function Hc(){var e,t,s,a,l,n,o,d,c;const u=me(),m=ra(),[x,h]=(0,r.useState)("Dashboard"),[p,b]=(0,r.useState)(null),[g,f]=(0,r.useState)(!1),[y,v]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("superadminuser")||"{}");e.id||t.userId?(e.mustResetPassword||t.mustResetPassword)&&f(!0):u("/super-admin/signin")},[u]);const{data:j=[],isLoading:w,error:N}=ml({queryKey:["superAdminClubs"],queryFn:wr.Dv.getClubs});(0,r.useEffect)(()=>{j&&j.length>0&&!p&&b(j[0].clubId)},[j,p]);const{data:S,isLoading:C}=ml({queryKey:["clubRevenue",p],queryFn:()=>wr.Dv.getClubRevenue(p),enabled:!!p}),{data:k,isLoading:A}=ml({queryKey:["clubPlayers",p],queryFn:()=>wr.Dv.getAllPlayers(p,{limit:100}),enabled:!!p}),{data:P=[],isLoading:T}=ml({queryKey:["pendingPlayers",p],queryFn:()=>wr.Dv.getPendingApprovalPlayers(p),enabled:!!p}),{data:I=[],isLoading:_}=ml({queryKey:["suspendedPlayers",p],queryFn:()=>wr.Dv.getSuspendedPlayers(p),enabled:!!p}),D=j.find(e=>e.clubId===p),E="suspended"===(null===D||void 0===D?void 0:D.status),R="killed"===(null===D||void 0===D?void 0:D.status),L=()=>{localStorage.clear(),u("/super-admin/signin")},O=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),M=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("superadminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("superadminuser",JSON.stringify(t)),f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),F=g&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=t.email||s.email;a?y.currentPassword&&y.newPassword&&y.confirmPassword?y.newPassword===y.confirmPassword?y.newPassword.length<8?jr.error("Password must be at least 8 characters"):M.mutate({email:a,currentPassword:y.currentPassword,newPassword:y.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:y.currentPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:y.newPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:y.confirmPassword,onChange:e=>v((0,i.A)((0,i.A)({},y),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:M.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:M.isLoading?"Resetting...":"Reset Password"})]})]})});return w?(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,sa.jsxs)("div",{className:"text-white text-center",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{className:"text-xl",children:"Loading clubs..."})]})})]}):N?(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center p-8",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-red-600 max-w-2xl w-full",children:[(0,sa.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,sa.jsx)("p",{className:"text-xl text-red-400 mb-2",children:"Error loading clubs"}),(0,sa.jsx)("p",{className:"text-gray-400 mb-8",children:N.message}),(0,sa.jsx)("button",{onClick:L,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):j&&0!==j.length?R?(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-red-900 flex items-center justify-center p-8",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-red-600 max-w-2xl w-full",children:[(0,sa.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\ud83d\udeab"}),(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Club Not Found"}),(0,sa.jsx)("p",{className:"text-gray-400 mb-8",children:"This club has been removed by Master Admin."}),(0,sa.jsx)("button",{onClick:L,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):E?(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-orange-900 flex items-center justify-center p-8",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-orange-600 max-w-2xl w-full",children:[(0,sa.jsx)("div",{className:"text-orange-400 text-6xl mb-4",children:"\ud83d\udd12"}),(0,sa.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Club Suspended"}),(0,sa.jsx)("p",{className:"text-gray-400 mb-4",children:"This club has been temporarily suspended by Master Admin."}),(null===D||void 0===D?void 0:D.subscriptionNotes)&&(0,sa.jsxs)("div",{className:"bg-orange-900/30 border border-orange-700 rounded-lg p-4 mb-8",children:[(0,sa.jsx)("p",{className:"text-sm text-orange-300 font-semibold mb-2",children:"Suspension Reason:"}),(0,sa.jsx)("p",{className:"text-gray-300",children:D.subscriptionNotes})]}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mb-8",children:"Please contact Master Admin for more information."}),(0,sa.jsx)("button",{onClick:L,className:"bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,sa.jsx)(Uc,{activeItem:x,setActiveItem:h,clubs:j,selectedClubId:p,onClubChange:b,onSignOut:L}),(0,sa.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===x&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)("div",{className:"flex justify-between items-center",children:(0,sa.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===D||void 0===D?void 0:D.clubName)||"Loading..."]})}),C?(0,sa.jsxs)("div",{className:"text-white text-center py-12",children:[(0,sa.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,sa.jsx)("p",{children:"Loading revenue data..."})]}):(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(e=S.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===S||void 0===S||null===(t=S.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:O((null===S||void 0===S||null===(s=S.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===S||void 0===S||null===(a=S.currentDay)||void 0===a?void 0:a.date)||"-"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(l=S.currentDay)||void 0===l?void 0:l.rake)||0)}),(0,sa.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(n=S.previousDay)||void 0===n?void 0:n.rake)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(o=S.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,sa.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(d=S.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,sa.jsx)("span",{className:"text-white font-semibold",children:A?"...":(null===k||void 0===k||null===(c=k.players)||void 0===c?void 0:c.length)||0})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,sa.jsx)("span",{className:"text-yellow-400 font-semibold",children:T?"...":P.length})]}),(0,sa.jsxs)("div",{className:"flex justify-between",children:[(0,sa.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,sa.jsx)("span",{className:"text-red-400 font-semibold",children:_?"...":I.length})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,sa.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,sa.jsxs)("div",{className:"space-y-2",children:[(0,sa.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,sa.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",T?"...":P.length,")"]}),(0,sa.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",_?"...":I.length,")"]})]})]})]})]}),"Player Management"===x&&(0,sa.jsx)(vl,{selectedClubId:p,playersData:k,playersLoading:A,pendingPlayers:P,pendingLoading:T,suspendedPlayers:I,suspendedLoading:_,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,sa.jsx)(wl,{selectedClubId:p}),"Club Buy-In"===x&&(0,sa.jsx)(Hd,{selectedClubId:p}),"Credit Management"===x&&(0,sa.jsx)(zc,{selectedClubId:p}),"VIP Store"===x&&(0,sa.jsx)(kc,{selectedClubId:p}),"Push Notifications"===x&&(0,sa.jsx)(Vl,{selectedClubId:p}),"Tournaments"===x&&(0,sa.jsx)(Gl,{selectedClubId:p}),"Staff Management"===x&&(0,sa.jsx)(kd,{selectedClubId:p}),"Payroll Management"===x&&(0,sa.jsx)(Pc,{selectedClubId:p}),"Bonus Management"===x&&(0,sa.jsx)(qd,{selectedClubId:p}),"Affiliates"===x&&(0,sa.jsx)(Tc,{selectedClubId:p}),"Financial Overrides"===x&&(0,sa.jsx)(Vd,{selectedClubId:p}),"FNB"===x&&p&&(0,sa.jsx)(Ic,{clubId:p}),"Chat"===x&&p&&(0,sa.jsx)(lo,{clubId:p}),"Reports & Analytics"===x&&p&&(0,sa.jsx)(_c,{clubId:p}),"Audit Logs"===x&&p&&(0,sa.jsx)(Wc,{clubId:p}),"Rummy"===x&&p&&(0,sa.jsx)(jo,{selectedClubId:p}),"Notifications"===x&&p&&(0,sa.jsx)(Ao,{selectedClubId:p,recipientType:"staff"}),"System Control"===x&&p&&(0,sa.jsx)(Ec,{clubId:p}),!["Dashboard","Player Management","Tables & Waitlist","Club Buy-In","Credit Management","VIP Store","Push Notifications","Tournaments","Staff Management","Payroll Management","Bonus Management","Affiliates","Financial Overrides","FNB","Chat","Reports & Analytics","Audit Logs","Rummy","System Control","Notifications"].includes(x)&&(0,sa.jsx)("div",{className:"text-white",children:(0,sa.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]}):(0,sa.jsxs)(sa.Fragment,{children:[F,(0,sa.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center p-8",children:(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700 max-w-2xl w-full",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-6xl mb-6",children:"\ud83c\udfe2"}),(0,sa.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"No Clubs Created Yet"}),(0,sa.jsx)("p",{className:"text-gray-400 text-lg mb-8",children:"You don't have any clubs assigned to you. Please contact the Master Admin to create a club for your tenant."}),(0,sa.jsx)("div",{className:"bg-slate-700 rounded-lg p-6 border border-slate-600 mb-8",children:(0,sa.jsx)("p",{className:"text-sm text-gray-300",children:"\ud83d\udcde Need help? Contact Master Admin to set up your first club and start managing players, tables, and tournaments."})}),(0,sa.jsx)("button",{onClick:L,className:"w-full max-w-xs mx-auto bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors shadow-lg",children:"Sign Out"})]})})]})}function Vc(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null,affiliateCode:n=null}=e;const[o,d]=(0,r.useState)(!1),[c,u]=(0,r.useState)(window.innerWidth<1024),[m,x]=(0,r.useState)(!1),[h,p]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const b=localStorage.getItem("clubId"),{data:g}=ml({queryKey:["club",b],queryFn:()=>wr.Od.getClub(b),enabled:!!b}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=JSON.parse(localStorage.getItem("staffuser")||"{}"),v=f.email||y.email||"affiliate@pokerroom.com",j=f.displayName||y.displayName||"Affiliate",w=n||f.affiliateCode,N=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("staffuser",JSON.stringify(t))),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),S=m&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?jr.error("Password must be at least 8 characters"):N.mutate({email:v,currentPassword:h.currentPassword,newPassword:h.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,i.A)((0,i.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:N.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})}),document.body);return(0,sa.jsxs)(sa.Fragment,{children:[c&&(0,sa.jsx)("button",{onClick:()=>d(!o),className:"sidebar-toggle fixed top-4 left-4 z-[100] p-2 rounded-md text-white bg-slate-700 lg:hidden",children:(0,sa.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,sa.jsx)("aside",{className:"sidebar-container fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-br from-gray-800 to-gray-900 text-white shadow-lg transform ".concat(c&&!o?"-translate-x-full":"translate-x-0"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,sa.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,sa.jsxs)("div",{className:"px-6 py-8",children:[(0,sa.jsx)("div",{className:"text-center mb-10",children:(0,sa.jsx)("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Affiliate Portal"})}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-4 mb-8 shadow-inner border border-slate-600 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>x(!0),children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-lg font-bold",children:j.charAt(0).toUpperCase()}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-semibold text-white",children:j}),(0,sa.jsx)("p",{className:"text-sm text-gray-300",children:"Affiliate"})]})]}),b&&(0,sa.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-600 space-y-2",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Club Code:"}),(0,sa.jsx)("p",{className:"font-mono text-sm text-yellow-400",children:(null===g||void 0===g?void 0:g.code)||"N/A"})]}),w&&(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Affiliate Code:"}),(0,sa.jsx)("p",{className:"font-mono text-sm text-purple-400",children:w})]})]})]}),(0,sa.jsx)("nav",{className:"space-y-2",children:a.map(e=>(0,sa.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"flex items-center w-full px-4 py-3 rounded-lg text-left font-medium transition-colors duration-200\n                    ".concat(t===e?"bg-purple-600 text-white shadow-md":"text-gray-300 hover:bg-slate-700 hover:text-white"),children:e},e))})]}),(0,sa.jsx)("div",{className:"px-6 pb-8",children:(0,sa.jsxs)("button",{onClick:l,className:"flex items-center justify-center w-full px-4 py-3 rounded-lg font-medium text-red-400 bg-red-900/20 hover:bg-red-900/40 transition-colors duration-200",children:[(0,sa.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})}),S]})}function Jc(){const[e,t]=(0,r.useState)("Referral Players"),s=me(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),m=JSON.parse(localStorage.getItem("affiliateuser")||"{}"),[x,h]=(0,r.useState)(null),[p,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(!d)return;const e=c.id||c.userId||u.userId||m.userId;if(e)try{const t=await wr.Yt.getAffiliates(d),s=(null===t||void 0===t?void 0:t.affiliates)||t||[],a=s.find(t=>{var s;if(t.userId===e)return!0;if(t.user_id===e)return!0;if((null===(s=t.user)||void 0===s?void 0:s.id)===e)return!0;if(t.user&&"object"===typeof t.user&&t.user.id===e)return!0;const a=c.email||u.email||m.email;return!(!a||t.email!==a)});if(a){h(a.id),b(a.code);const e=(0,i.A)((0,i.A)({},c),{},{affiliateCode:a.code,affiliateId:a.id});localStorage.setItem("user",JSON.stringify(e))}else if(1===s.length){const e=s[0];h(e.id),b(e.code);const t=(0,i.A)((0,i.A)({},c),{},{affiliateCode:e.code,affiliateId:e.id});localStorage.setItem("user",JSON.stringify(t))}else console.error("Affiliate not found for userId:",e),console.error("Available affiliates:",s.map(e=>({id:e.id,userId:e.userId,user_id:e.user_id,user:e.user?{id:e.user.id,email:e.user.email}:null,code:e.code})))}catch(t){console.error("Error fetching affiliate data:",t)}else console.error("No user ID found")})()},[d,c.id,c.userId,u.userId,m.userId]),(0,r.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&l(!0)},[]);const g=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=(0,i.A)((0,i.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,i.A)((0,i.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),l(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),f=a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword===n.confirmPassword?n.newPassword.length<8?jr.error("Password must be at least 8 characters"):g.mutate({email:t,currentPassword:n.currentPassword,newPassword:n.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:g.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:g.isLoading?"Resetting...":"Reset Password"})]})]})}),y=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(Vc,{activeItem:e,setActiveItem:t,menuItems:["Referral Players","Transactions"],onSignOut:y,affiliateCode:p}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Affiliate Portal - ",e]}),(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage your referrals and transactions"})]}),(0,sa.jsx)("button",{onClick:y,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),d&&!x&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Loading affiliate information..."})}),"Referral Players"===e&&d&&x&&(0,sa.jsx)(Kc,{clubId:d,affiliateId:x}),"Transactions"===e&&d&&x&&(0,sa.jsx)(Qc,{clubId:d,affiliateId:x})]})})]}),f]})}function Kc(e){let{clubId:t,affiliateId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({search:"",kycStatus:"",startDate:"",endDate:""}),{data:d,isLoading:c}=ml({queryKey:["affiliate-referrals",t,s,a,n],queryFn:()=>wr.Yt.getAffiliateReferrals(t,s,{search:n.search,kycStatus:n.kycStatus,startDate:n.startDate,endDate:n.endDate}),enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})),m=e=>{const t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",label:"Approved"},rejected:{bg:"bg-red-100",text:"text-red-800",label:"Rejected"},verified:{bg:"bg-blue-100",text:"text-blue-800",label:"Verified"}}[null===e||void 0===e?void 0:e.toLowerCase()]||{bg:"bg-gray-100",text:"text-gray-800",label:e||"Unknown"};return(0,sa.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(t.bg," ").concat(t.text),children:t.label})};if(c)return(0,sa.jsx)("div",{className:"text-center py-8",children:"Loading referral players..."});const x=(null===d||void 0===d?void 0:d.players)||[],h=Math.ceil(x.length/10),p=x.slice(10*(a-1),10*a);return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Referral Players"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Search by Name/Email"}),(0,sa.jsx)("input",{type:"text",value:n.search,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{search:e.target.value})),placeholder:"Search...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"KYC Status"}),(0,sa.jsxs)("select",{value:n.kycStatus,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{kycStatus:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"All"}),(0,sa.jsx)("option",{value:"pending",children:"Pending"}),(0,sa.jsx)("option",{value:"approved",children:"Approved"}),(0,sa.jsx)("option",{value:"rejected",children:"Rejected"}),(0,sa.jsx)("option",{value:"verified",children:"Verified"})]})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"From Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"To Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,sa.jsx)("div",{className:"mb-4 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>o({search:"",kycStatus:"",startDate:"",endDate:""}),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})}),p.length>0?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Spent"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Commission"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Created"})]})}),(0,sa.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:p.map(e=>{return(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.name}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.email}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.phoneNumber||"-"}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:m(e.kycStatus)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:u(e.totalSpent||0)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.totalCommission||0)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")})]},e.id);var t})})]})}),(0,sa.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",h||1," (Showing ",p.length," of ",x.length," players)"]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(h||1,e+1)),disabled:a===(h||1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No referral players found."})]})}function Qc(e){let{clubId:t,affiliateId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({search:"",startDate:"",endDate:""}),{data:d,isLoading:c}=ml({queryKey:["affiliate-transactions",t,s,a,n],queryFn:()=>wr.Yt.getAffiliateTransactions(t,(0,i.A)({page:a,limit:10,affiliateId:s},n)),enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));if(c)return(0,sa.jsx)("div",{className:"text-center py-8",children:"Loading transactions..."});const m=(null===d||void 0===d?void 0:d.transactions)||[],x=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Transactions"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Search"}),(0,sa.jsx)("input",{type:"text",value:n.search,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{search:e.target.value})),placeholder:"Search...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,sa.jsx)("div",{className:"mb-4 flex justify-end",children:(0,sa.jsx)("button",{onClick:()=>o({search:"",startDate:"",endDate:""}),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})}),m.length>0?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Type"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Amount"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Notes"})]})}),(0,sa.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:m.map(e=>{return(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.type||"Payment"}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.amount||0)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.date||e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,sa.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Completed"===e.status||"Paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Pending"})}),(0,sa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.notes||e.description||"-"})]},e.id);var t})})]})}),(0,sa.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",x]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(x,e+1)),disabled:a===x,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No transactions found."})]})}function Gc(e){let{activeItem:t,setActiveItem:s,menuItems:a=[],onSignOut:l=null}=e;const[n,o]=(0,r.useState)(!1),[d,c]=(0,r.useState)(window.innerWidth<1024),[u,m]=(0,r.useState)(!1),[x,h]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ml({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>wr.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4}),{data:g}=ml({queryKey:["unreadChatCounts",p],queryFn:()=>wr.h2.getUnreadCounts(p),enabled:!!p,refetchInterval:1e4}),f=((null===g||void 0===g?void 0:g.staffChats)||0)+((null===g||void 0===g?void 0:g.playerChats)||0);(0,r.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{if(n&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[n,d]);const{data:y}=ml({queryKey:["club",p],queryFn:()=>wr.Od.getClub(p),enabled:!!p}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=JSON.parse(localStorage.getItem("staffuser")||"{}"),w=v.email||j.email||"dealer@pokerroom.com",N=v.displayName||j.displayName||"Dealer",S=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("staffuser",JSON.stringify(t))),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),C=u&&(0,gl.createPortal)((0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?jr.error("Password must be at least 8 characters"):S.mutate({email:w,currentPassword:x.currentPassword,newPassword:x.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,i.A)((0,i.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:S.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:S.isLoading?"Resetting...":"Reset Password"})]})]})}),document.body);return(0,sa.jsxs)(sa.Fragment,{children:[d&&(0,sa.jsx)("button",{onClick:()=>o(!n),className:"sidebar-toggle fixed top-4 left-4 z-[100] p-2 rounded-md text-white bg-slate-700 lg:hidden",children:(0,sa.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:n?(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,sa.jsx)("aside",{className:"sidebar-container fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-br from-gray-800 to-gray-900 text-white shadow-lg transform ".concat(d&&!n?"-translate-x-full":"translate-x-0"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,sa.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,sa.jsxs)("div",{className:"px-6 py-8",children:[(0,sa.jsx)("div",{className:"text-center mb-10",children:(0,sa.jsx)("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Dealer Portal"})}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-xl p-4 mb-8 shadow-inner border border-slate-600 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>m(!0),children:[(0,sa.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sa.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-lg font-bold",children:N.charAt(0).toUpperCase()}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("p",{className:"font-semibold text-white",children:N}),(0,sa.jsx)("p",{className:"text-sm text-gray-300",children:"Dealer"})]})]}),p&&(0,sa.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[(0,sa.jsx)("p",{className:"text-xs text-gray-400",children:"Club Code:"}),(0,sa.jsx)("p",{className:"font-mono text-sm text-yellow-400",children:(null===y||void 0===y?void 0:y.code)||"N/A"})]})]}),(0,sa.jsx)("nav",{className:"space-y-2",children:a.map(e=>(0,sa.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"flex items-center w-full px-4 py-3 rounded-lg text-left font-medium transition-colors duration-200\n                    ".concat(t===e?"bg-purple-600 text-white shadow-md":"text-gray-300 hover:bg-slate-700 hover:text-white"),children:(0,sa.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,sa.jsx)("span",{children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount}),"Chat"===e&&f>0&&(0,sa.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f>9?"9+":f})]})},e))})]}),(0,sa.jsx)("div",{className:"px-6 pb-8",children:(0,sa.jsxs)("button",{onClick:l,className:"flex items-center justify-center w-full px-4 py-3 rounded-lg font-medium text-red-400 bg-red-900/20 hover:bg-red-900/40 transition-colors duration-200",children:[(0,sa.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,sa.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})}),C]})}function Yc(){const[e,t]=(0,r.useState)("Shift Timings"),s=me(),[a,l]=(0,r.useState)(!1),[n,o]=(0,r.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),[m,x]=(0,r.useState)(null);(0,r.useEffect)(()=>{(async()=>{if(d&&c.email)try{const e=await wr.staffAPI.getAllStaffMembers(d),t=((null===e||void 0===e?void 0:e.staff)||e||[]).find(e=>e.email===c.email&&"Dealer"===e.role);t&&x(t.id)}catch(e){console.error("Error fetching dealer data:",e)}})()},[d,c.email]),(0,r.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&l(!0)},[]);const h=bl({mutationFn:async e=>{const t=await fetch("".concat("https://poker-crm-backend.onrender.com/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{jr.success("Password reset successfully!");const e=(0,i.A)((0,i.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,i.A)((0,i.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),l(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{jr.error(e.message||"Failed to reset password")}}),p=a&&(0,sa.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,sa.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,sa.jsxs)("div",{className:"text-center mb-6",children:[(0,sa.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,sa.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,sa.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?n.currentPassword&&n.newPassword&&n.confirmPassword?n.newPassword===n.confirmPassword?n.newPassword.length<8?jr.error("Password must be at least 8 characters"):h.mutate({email:t,currentPassword:n.currentPassword,newPassword:n.newPassword}):jr.error("New passwords do not match"):jr.error("All fields are required"):jr.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,sa.jsx)("input",{type:"password",value:n.currentPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,sa.jsx)("input",{type:"password",value:n.newPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,sa.jsx)("input",{type:"password",value:n.confirmPassword,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,sa.jsx)("button",{type:"submit",disabled:h.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:h.isLoading?"Resetting...":"Reset Password"})]})]})}),b=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,sa.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,sa.jsxs)("div",{className:"flex",children:[(0,sa.jsx)(Gc,{activeItem:e,setActiveItem:t,menuItems:["Shift Timings","Notifications","Transactions","Tips","Tip Settings","Leave Management","Chat"],onSignOut:b}),(0,sa.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,sa.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,sa.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Dealer Portal - ",e]}),(0,sa.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage your shifts, tips, and transactions"})]}),(0,sa.jsx)("button",{onClick:b,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,sa.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,sa.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),"Shift Timings"===e&&d&&m&&(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsx)(To,{selectedClubId:d}),(0,sa.jsx)($c,{clubId:d,dealerId:m})]}),"Transactions"===e&&d&&m&&(0,sa.jsx)(Zc,{clubId:d,dealerId:m}),"Tips"===e&&d&&m&&(0,sa.jsx)(Xc,{clubId:d,dealerId:m}),"Tip Settings"===e&&d&&m&&(0,sa.jsx)(eu,{clubId:d,dealerId:m}),"Chat"===e&&d&&(0,sa.jsx)(lo,{clubId:d,hidePlayerChat:!0}),"Notifications"===e&&d&&(0,sa.jsx)(Ao,{selectedClubId:d,recipientType:"staff"}),"Leave Management"===e&&d&&(0,sa.jsx)(bd,{clubId:d,userRole:"DEALER"})]})})]}),p]})}function $c(e){let{clubId:t,dealerId:s}=e;const[a,l]=(0,r.useState)(new Date),[n,i]=(0,r.useState)("week"),o=()=>{const e=new Date(a),t=new Date(a);if("week"===n){const s=e.getDay(),a=e.getDate()-s+(0===s?-6:1);e.setDate(a),t.setDate(e.getDate()+6)}else e.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0);return{startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}},{data:d,isLoading:c}=ml({queryKey:["shifts",t,s,a,n],queryFn:()=>{const{startDate:e,endDate:a}=o();return wr.iw.getShifts(t,{startDate:e,endDate:a,staffId:s})},enabled:!!t&&!!s}),u=e=>{const t=new Date(a);"week"===n?t.setDate(t.getDate()+7*e):t.setMonth(t.getMonth()+e),l(t)},m=(null===d||void 0===d?void 0:d.shifts)||[],x=()=>{const e=[],{startDate:t}=o(),s=new Date(t);for(let a=0;a<7;a++){const t=new Date(s);t.setDate(s.getDate()+a),e.push(t)}return e},h=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),p=e=>e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return c?(0,sa.jsx)("div",{className:"text-white text-center py-8",children:"Loading shifts..."}):(0,sa.jsxs)("div",{className:"space-y-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 flex items-center justify-between",children:[(0,sa.jsx)("button",{onClick:()=>u(-1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"\u2190 Previous"}),(0,sa.jsxs)("div",{className:"flex items-center gap-4",children:[(0,sa.jsx)("h2",{className:"text-xl font-bold text-white",children:a.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,sa.jsx)("button",{onClick:()=>l(new Date),className:"bg-slate-700 hover:bg-slate-600 text-white px-3 py-1 rounded-lg text-sm transition-colors",children:"Today"}),(0,sa.jsxs)("div",{className:"flex gap-2",children:[(0,sa.jsx)("button",{onClick:()=>i("week"),className:"px-4 py-2 rounded-lg text-sm font-semibold transition-colors ".concat("week"===n?"bg-purple-600 text-white":"bg-slate-700 text-gray-300"),children:"Week"}),(0,sa.jsx)("button",{onClick:()=>i("month"),className:"px-4 py-2 rounded-lg text-sm font-semibold transition-colors ".concat("month"===n?"bg-purple-600 text-white":"bg-slate-700 text-gray-300"),children:"Month"})]})]}),(0,sa.jsx)("button",{onClick:()=>u(1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Next \u2192"})]}),"week"===n?(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:(0,sa.jsxs)("div",{className:"grid grid-cols-8 gap-px bg-slate-700",children:[(0,sa.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold",children:"Date"}),x().map(e=>(0,sa.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold text-center",children:p(e)},e.toISOString())),(0,sa.jsx)("div",{className:"bg-slate-800 p-3 text-gray-300",children:"Shifts"}),x().map(e=>{const t=(e=>{const t=e.toISOString().split("T")[0];return m.filter(e=>new Date(e.shiftDate).toISOString().split("T")[0]===t)})(e);return(0,sa.jsx)("div",{className:"bg-slate-800 p-3 min-h-[100px]",children:t.length>0?(0,sa.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,sa.jsxs)("div",{className:"bg-purple-600/20 border border-purple-500/50 rounded p-2 text-sm",children:[(0,sa.jsxs)("div",{className:"text-purple-300 font-semibold",children:[h(e.shiftStartTime)," - ",h(e.shiftEndTime)]}),e.isOffDay&&(0,sa.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:"Off Day"}),e.notes&&(0,sa.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:e.notes})]},e.id))}):(0,sa.jsx)("div",{className:"text-gray-500 text-sm text-center",children:"No shifts"})},e.toISOString())})]})}):(0,sa.jsx)("div",{className:"bg-slate-800 rounded-lg p-6",children:(0,sa.jsxs)("div",{className:"space-y-4",children:[m.map(e=>(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 flex justify-between items-center",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("div",{className:"text-white font-semibold",children:new Date(e.shiftDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,sa.jsxs)("div",{className:"text-gray-300 text-sm mt-1",children:[h(e.shiftStartTime)," - ",h(e.shiftEndTime)]}),e.notes&&(0,sa.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:e.notes})]}),e.isOffDay&&(0,sa.jsx)("span",{className:"bg-yellow-600 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Off Day"})]},e.id)),0===m.length&&(0,sa.jsx)("div",{className:"text-center text-gray-400 py-8",children:"No shifts scheduled for this period"})]})})]})}function Zc(e){let{clubId:t,dealerId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ml({queryKey:["dealer-transactions",t,s,a,n],queryFn:async()=>{const e=await wr.bM.getAllTransactions(t,{category:"staff",subCategory:"dealer-cashout",page:a,limit:10}),r=await wr.oA.getSalaryPayments(t,(0,i.A)({page:a,limit:10,staffId:s},n)),l=await wr.KG.getStaffBonuses(t,(0,i.A)({page:a,limit:10,staffId:s},n)),o=[...e.transactions||[],...(r.payments||[]).map(e=>({id:e.id,type:"Salary Payment",amount:e.netAmount,date:e.paymentDate||e.createdAt,status:e.status,notes:e.notes})),...(l.bonuses||[]).map(e=>({id:e.id,type:"Staff Bonus",amount:e.bonusAmount,date:e.processedAt||e.createdAt,status:"Completed",notes:e.reason}))].sort((e,t)=>new Date(t.date)-new Date(e.date));return{transactions:o.slice(10*(a-1),10*a),total:o.length,totalPages:Math.ceil(o.length/10)}},enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));if(c)return(0,sa.jsx)("div",{className:"text-center py-8",children:"Loading transactions..."});const m=(null===d||void 0===d?void 0:d.transactions)||[],x=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Transactions"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:()=>o({startDate:"",endDate:""}),className:"w-full bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})})]}),m.length>0?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Type"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Amount"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Notes"})]})}),(0,sa.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:m.map(e=>{return(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.type}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.amount)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.date,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,sa.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Completed"===e.status||"PROCESSED"===e.status||"Paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,sa.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.notes||"-"})]},e.id);var t})})]})}),(0,sa.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",x]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(x,e+1)),disabled:a===x,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No transactions found."})]})}function Xc(e){let{clubId:t,dealerId:s}=e;const[a,l]=(0,r.useState)(1),[n,o]=(0,r.useState)({startDate:"",endDate:"",status:""}),{data:d,isLoading:c}=ml({queryKey:["dealer-tips",t,s,a,n],queryFn:()=>wr.oA.getDealerTips(t,(0,i.A)({page:a,limit:10,dealerId:s},n)),enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));if(c)return(0,sa.jsx)("div",{className:"text-center py-8",children:"Loading tips..."});const m=(null===d||void 0===d?void 0:d.tips)||[],x=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Tips"}),(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,sa.jsx)("input",{type:"date",value:n.startDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,sa.jsx)("input",{type:"date",value:n.endDate,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,sa.jsxs)("div",{children:[(0,sa.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),(0,sa.jsxs)("select",{value:n.status,onChange:e=>o((0,i.A)((0,i.A)({},n),{},{status:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,sa.jsx)("option",{value:"",children:"All"}),(0,sa.jsx)("option",{value:"Pending",children:"Pending"}),(0,sa.jsx)("option",{value:"Processed",children:"Processed"}),(0,sa.jsx)("option",{value:"Paid",children:"Paid"})]})]}),(0,sa.jsx)("div",{className:"flex items-end",children:(0,sa.jsx)("button",{onClick:()=>o({startDate:"",endDate:"",status:""}),className:"w-full bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})})]}),m.length>0?(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("div",{className:"overflow-x-auto",children:(0,sa.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,sa.jsx)("thead",{className:"bg-slate-700",children:(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Tips"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"My Share"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Share %"}),(0,sa.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,sa.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:m.map(e=>{return(0,sa.jsxs)("tr",{children:[(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.tipDate,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-semibold",children:u(e.totalTips)}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.dealerShareAmount)}),(0,sa.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[e.dealerSharePercentage,"%"]}),(0,sa.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,sa.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Paid"===e.status?"bg-green-100 text-green-800":"Processed"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id);var t})})]})}),(0,sa.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,sa.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===a,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,sa.jsxs)("span",{className:"text-gray-300",children:["Page ",a," of ",x]}),(0,sa.jsx)("button",{onClick:()=>l(e=>Math.min(x,e+1)),disabled:a===x,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No tips found."})]})}function eu(e){let{clubId:t,dealerId:s}=e;const{data:a,isLoading:r}=ml({queryKey:["tip-settings",t,s],queryFn:()=>wr.oA.getTipSettings(t,s),enabled:!!t&&!!s});if(r)return(0,sa.jsx)("div",{className:"text-center py-8",children:"Loading tip settings..."});const l=(null===a||void 0===a?void 0:a.settings)||a;return(0,sa.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,sa.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Tip Settings"}),(0,sa.jsx)("div",{className:"bg-blue-900/20 border border-blue-500/50 rounded-lg p-4 mb-6",children:(0,sa.jsx)("p",{className:"text-blue-300 text-sm",children:"\ud83d\udca1 These settings are configured by the administrator. Contact your manager if you need changes."})}),l?(0,sa.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tip Distribution"}),(0,sa.jsxs)("div",{className:"space-y-3",children:[(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Club Hold:"}),(0,sa.jsxs)("span",{className:"text-white font-semibold",children:[l.clubHoldPercentage||15,"%"]})]}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"My Share:"}),(0,sa.jsxs)("span",{className:"text-green-400 font-semibold",children:[l.dealerSharePercentage||85,"%"]})]}),(0,sa.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sa.jsx)("span",{className:"text-gray-300",children:"Floor Manager:"}),(0,sa.jsxs)("span",{className:"text-white font-semibold",children:[l.floorManagerPercentage||5,"%"]})]})]})]}),(0,sa.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4",children:[(0,sa.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Settings Info"}),(0,sa.jsx)("div",{className:"space-y-3",children:(0,sa.jsxs)("div",{children:[(0,sa.jsx)("span",{className:"text-gray-300 text-sm",children:"Last Updated:"}),(0,sa.jsx)("p",{className:"text-white",children:l.updatedAt?new Date(l.updatedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})})]})]}):(0,sa.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No tip settings found."})]})}function tu(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}const su=r.forwardRef((e,t)=>{let{id:s,name:a,value:l,defaultValue:n,onChange:o,options:d=[],placeholder:c="Select an option",disabled:u=!1,className:m="",dropdownPlacement:x,size:h="md",fullWidth:p=!0,renderValue:b,renderOption:g,ariaLabel:f,ariaDescribedBy:y,allowSearch:v=!1,searchPlaceholder:j="Search\u2026",emptyState:w="No matches found",children:N}=e;const S=(0,r.useRef)(null),C=(0,r.useRef)(null),k=(0,r.useRef)(null),[A,P]=(0,r.useState)(!1),[T,I]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),E=void 0!==l,[R,L]=(0,r.useState)(null!==n&&void 0!==n?n:""),O=E?l:R,M=(0,r.useMemo)(()=>N?r.Children.toArray(N).filter(e=>r.isValidElement(e)&&("option"===e.type||"optgroup"===e.type)).flatMap((e,t)=>{var s,a,l,n,i,o,d,c,u;if("optgroup"===e.type){const s=e.props.label;return r.Children.toArray(e.props.children||[]).map((e,a)=>{var r,l,n,i,o,d,c,u,m;return{group:s,value:null!==(r=null!==(l=null===(n=e.props)||void 0===n?void 0:n.value)&&void 0!==l?l:null===(i=e.props)||void 0===i?void 0:i.children)&&void 0!==r?r:"option-".concat(t,"-").concat(a),label:null!==(o=null!==(d=null===(c=e.props)||void 0===c?void 0:c.children)&&void 0!==d?d:null===(u=e.props)||void 0===u?void 0:u.value)&&void 0!==o?o:"",disabled:null===(m=e.props)||void 0===m?void 0:m.disabled}})}return{value:null!==(s=null!==(a=null===(l=e.props)||void 0===l?void 0:l.value)&&void 0!==a?a:null===(n=e.props)||void 0===n?void 0:n.children)&&void 0!==s?s:"option-".concat(t),label:null!==(i=null!==(o=null===(d=e.props)||void 0===d?void 0:d.children)&&void 0!==o?o:null===(c=e.props)||void 0===c?void 0:c.value)&&void 0!==i?i:"",disabled:null===(u=e.props)||void 0===u?void 0:u.disabled}}):[],[N]),F=(0,r.useMemo)(()=>(d.length?d:M).map((e,t)=>{var s,a,r,l,n;return(0,i.A)((0,i.A)({},e),{},{key:null!==(s=e.value)&&void 0!==s?s:t.toString(),label:null!==(a=null!==(r=e.label)&&void 0!==r?r:e.value)&&void 0!==a?a:"",value:null!==(l=null!==(n=e.value)&&void 0!==n?n:e.label)&&void 0!==l?l:"option-".concat(t)})}),[d,M]),B=(0,r.useMemo)(()=>{if(!v||!_.trim())return F;const e=_.toLowerCase();return F.filter(t=>{var s,a,r;const l=String(null!==(s=t.label)&&void 0!==s?s:""),n=String(null!==(a=t.value)&&void 0!==a?a:""),i=String(null!==(r=t.description)&&void 0!==r?r:"");return l.toLowerCase().includes(e)||n.toLowerCase().includes(e)||i.toLowerCase().includes(e)})},[F,v,_]),q=F.find(e=>e.value===O),U=null!==x&&void 0!==x?x:"bottom";(0,r.useEffect)(()=>{function e(e){S.current&&!S.current.contains(e.target)&&P(!1)}return A?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[A]),(0,r.useEffect)(()=>{!A&&v&&D("")},[A,v]);const z=e=>{var t;if(!e.disabled){if(E||L(e.value),o){const t={target:{value:e.value,name:a},currentTarget:{value:e.value,name:a},value:e.value,option:e,preventDefault:()=>{},stopPropagation:()=>{}};o(t,e)}P(!1),null===(t=C.current)||void 0===t||t.focus()}};return(0,sa.jsxs)("div",{ref:S,className:tu("relative select-none text-white",p&&"w-full",m),children:[(0,sa.jsxs)("button",{id:s,ref:C,name:a,type:"button",className:tu("flex items-center justify-between gap-3 rounded-lg border bg-white/5 px-3 py-2 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","sm"===h?"py-1.5 text-sm":"py-2 text-sm",u?"cursor-not-allowed border-white/10 text-white/40":T?"border-white/40 bg-white/10":"border-white/15 hover:border-white/35 hover:bg-white/10"),"aria-haspopup":"listbox","aria-expanded":A,"aria-label":f,"aria-describedby":y,disabled:u,onClick:()=>P(e=>!e),onKeyDown:e=>{if(!u)switch(e.key){case" ":case"Enter":case"ArrowUp":case"ArrowDown":if(e.preventDefault(),A){if("ArrowUp"===e.key||"ArrowDown"===e.key){const t=B.findIndex(e=>e.value===O);let s="ArrowDown"===e.key?Math.min(t+1,B.length-1):Math.max(t-1,0);-1===t&&(s="ArrowDown"===e.key?0:B.length-1);const a=B[s];a&&!a.disabled&&z(a)}}else P(!0);break;case"Escape":A&&(e.preventDefault(),P(!1))}},onFocus:()=>I(!0),onBlur:()=>I(!1),children:[(0,sa.jsx)("div",{className:"flex-1 text-left truncate",children:q?b?b(q):(0,sa.jsx)("span",{className:"font-medium text-white",children:q.label}):(0,sa.jsx)("span",{className:"text-gray-400",children:c})}),(0,sa.jsx)("svg",{className:tu("h-4 w-4 flex-shrink-0 text-gray-300 transition-transform",A?"rotate-180":"rotate-0"),viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,sa.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),A&&(0,sa.jsxs)("div",{ref:k,role:"listbox",tabIndex:-1,className:tu("absolute z-40 mt-1 max-h-56 overflow-y-auto rounded-lg border border-white/10 bg-gray-900/95 shadow-xl backdrop-blur-sm","top"===U?"bottom-full mb-2":"top-full"),children:[v&&(0,sa.jsx)("div",{className:"p-3 border-b border-white/10",children:(0,sa.jsx)("input",{autoFocus:!0,type:"text",value:_,onChange:e=>D(e.target.value),placeholder:j,className:"w-full rounded-md border border-white/15 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:border-white/40 focus:outline-none focus:ring-0"})}),(0,sa.jsxs)("ul",{className:"py-1",children:[0===B.length&&(0,sa.jsx)("li",{className:"px-3 py-6 text-center text-sm text-gray-400",children:w}),B.map(e=>{const t=e.value===O,s=tu("flex flex-col gap-1 px-3 py-2 cursor-pointer transition text-sm",e.disabled?"cursor-not-allowed text-gray-500":t?"bg-white/15 border-l-2 border-emerald-400 text-white":"text-gray-200 hover:bg-white/10");return(0,sa.jsx)("li",{role:"option","aria-selected":t,className:s,onClick:()=>z(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),z(e))},children:g?g(e,{isSelected:t}):(0,sa.jsxs)(sa.Fragment,{children:[(0,sa.jsx)("span",{className:"font-medium",children:e.label}),e.description&&(0,sa.jsx)("span",{className:"text-xs text-gray-400",children:e.description})]})},e.key)})]})]})]})});su.displayName="CustomSelect";const au=new ta({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e5}}});const ru=function(){return(0,sa.jsx)(la,{client:au,children:(0,sa.jsx)(ut,{children:(0,sa.jsxs)("div",{className:"App",children:[(0,sa.jsx)(vr,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1e293b",color:"#fff",border:"1px solid #334155"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),(0,sa.jsxs)(De,{children:[(0,sa.jsx)(Ie,{path:"/login",element:(0,sa.jsx)(Nc,{})}),(0,sa.jsx)(Ie,{path:"/master-admin/signin",element:(0,sa.jsx)(Lc,{})}),(0,sa.jsx)(Ie,{path:"/super-admin/signin",element:(0,sa.jsx)(Bc,{})}),(0,sa.jsx)(Ie,{path:"/gre/signin",element:(0,sa.jsx)(Te,{to:"/login",replace:!0})}),(0,sa.jsx)(Ie,{path:"/hr/signin",element:(0,sa.jsx)(Te,{to:"/login",replace:!0})}),(0,sa.jsx)(Ie,{path:"/cashier/signin",element:(0,sa.jsx)(Te,{to:"/login",replace:!0})}),(0,sa.jsx)(Ie,{path:"/fnb/signin",element:(0,sa.jsx)(Te,{to:"/login",replace:!0})}),(0,sa.jsx)(Ie,{path:"/admin/signin",element:(0,sa.jsx)(Te,{to:"/login",replace:!0})}),(0,sa.jsx)(Ie,{path:"/gre",element:(0,sa.jsx)(Sr,{requiredRole:"GRE",children:(0,sa.jsx)(vd,{})})}),(0,sa.jsx)(Ie,{path:"/hr",element:(0,sa.jsx)(Sr,{requiredRole:"HR",children:(0,sa.jsx)(Dd,{})})}),(0,sa.jsx)(Ie,{path:"/cashier",element:(0,sa.jsx)(Sr,{requiredRole:"CASHIER",children:(0,sa.jsx)(Yd,{})})}),(0,sa.jsx)(Ie,{path:"/fnb",element:(0,sa.jsx)(Sr,{requiredRole:"FNB",children:(0,sa.jsx)(gc,{})})}),(0,sa.jsx)(Ie,{path:"/admin",element:(0,sa.jsx)(Sr,{requiredRole:"ADMIN",children:(0,sa.jsx)(Rc,{})})}),(0,sa.jsx)(Ie,{path:"/master-admin",element:(0,sa.jsx)(Sr,{requiredRole:"MASTER_ADMIN",children:(0,sa.jsx)(Fc,{})})}),(0,sa.jsx)(Ie,{path:"/super-admin",element:(0,sa.jsx)(Sr,{requiredRole:"SUPER_ADMIN",children:(0,sa.jsx)(Hc,{})})}),(0,sa.jsx)(Ie,{path:"/manager",element:(0,sa.jsx)(Sr,{requiredRole:"MANAGER",children:(0,sa.jsx)(Io,{})})}),(0,sa.jsx)(Ie,{path:"/staff",element:(0,sa.jsx)(Sr,{requiredRole:"STAFF",children:(0,sa.jsx)(yc,{})})}),(0,sa.jsx)(Ie,{path:"/dealer",element:(0,sa.jsx)(Sr,{requiredRole:"DEALER",children:(0,sa.jsx)(Yc,{})})}),(0,sa.jsx)(Ie,{path:"/affiliate",element:(0,sa.jsx)(Sr,{requiredRole:"AFFILIATE",children:(0,sa.jsx)(Jc,{})})}),(0,sa.jsx)(Ie,{path:"/404",element:(0,sa.jsx)(Cr,{})}),(0,sa.jsx)(Ie,{path:"/",element:(0,sa.jsx)(Te,{to:"/manager",replace:!0})}),(0,sa.jsx)(Ie,{path:"*",element:(0,sa.jsx)(Cr,{})})]})]})})})};l.createRoot(document.getElementById("root")).render((0,sa.jsx)(r.StrictMode,{children:(0,sa.jsx)(ru,{})}))})();
//# sourceMappingURL=main.88c5ce1e.js.map