/*! For license information please see main.2186eda3.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,s)=>{e.exports=s(202)},153:(e,t,s)=>{var a=s(43),l=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,s){var a,r={},d=null,c=null;for(a in void 0!==s&&(d=""+s),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)n.call(t,a)&&!o.hasOwnProperty(a)&&(r[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===r[a]&&(r[a]=t[a]);return{$$typeof:l,type:e,key:d,ref:c,props:r,_owner:i.current}}t.Fragment=r,t.jsx=d,t.jsxs=d},202:(e,t)=>{var s=Symbol.for("react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),x=Symbol.iterator;var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,b={};function g(e,t,s){this.props=e,this.context=t,this.refs=b,this.updater=s||h}function f(){}function y(e,t,s){this.props=e,this.context=t,this.refs=b,this.updater=s||h}g.prototype.isReactComponent={},g.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},g.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},f.prototype=g.prototype;var v=y.prototype=new f;v.constructor=y,p(v,g.prototype),v.isPureReactComponent=!0;var j=Array.isArray,w=Object.prototype.hasOwnProperty,N={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function C(e,t,a){var l,r={},n=null,i=null;if(null!=t)for(l in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(n=""+t.key),t)w.call(t,l)&&!S.hasOwnProperty(l)&&(r[l]=t[l]);var o=arguments.length-2;if(1===o)r.children=a;else if(1<o){for(var d=Array(o),c=0;c<o;c++)d[c]=arguments[c+2];r.children=d}if(e&&e.defaultProps)for(l in o=e.defaultProps)void 0===r[l]&&(r[l]=o[l]);return{$$typeof:s,type:e,key:n,ref:i,props:r,_owner:N.current}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===s}var P=/\/+/g;function A(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,l,r,n){var i=typeof e;"undefined"!==i&&"boolean"!==i||(e=null);var o=!1;if(null===e)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case s:case a:o=!0}}if(o)return n=n(o=e),e=""===r?"."+A(o,0):r,j(n)?(l="",null!=e&&(l=e.replace(P,"$&/")+"/"),I(n,t,l,"",function(e){return e})):null!=n&&(k(n)&&(n=function(e,t){return{$$typeof:s,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(n,l+(!n.key||o&&o.key===n.key?"":(""+n.key).replace(P,"$&/")+"/")+e)),t.push(n)),1;if(o=0,r=""===r?".":r+":",j(e))for(var d=0;d<e.length;d++){var c=r+A(i=e[d],d);o+=I(i,t,l,c,n)}else if(c=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=x&&e[x]||e["@@iterator"])?e:null}(e),"function"===typeof c)for(e=c.call(e),d=0;!(i=e.next()).done;)o+=I(i=i.value,t,l,c=r+A(i,d++),n);else if("object"===i)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function D(e,t,s){if(null==e)return e;var a=[],l=0;return I(e,a,"","",function(e){return t.call(s,e,l++)}),a}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var _={current:null},E={transition:null},R={ReactCurrentDispatcher:_,ReactCurrentBatchConfig:E,ReactCurrentOwner:N};function L(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,s){D(e,function(){t.apply(this,arguments)},s)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=g,t.Fragment=l,t.Profiler=n,t.PureComponent=y,t.StrictMode=r,t.Suspense=c,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=L,t.cloneElement=function(e,t,a){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var l=p({},e.props),r=e.key,n=e.ref,i=e._owner;if(null!=t){if(void 0!==t.ref&&(n=t.ref,i=N.current),void 0!==t.key&&(r=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(d in t)w.call(t,d)&&!S.hasOwnProperty(d)&&(l[d]=void 0===t[d]&&void 0!==o?o[d]:t[d])}var d=arguments.length-2;if(1===d)l.children=a;else if(1<d){o=Array(d);for(var c=0;c<d;c++)o[c]=arguments[c+2];l.children=o}return{$$typeof:s,type:e.type,key:r,ref:n,props:l,_owner:i}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},t.createElement=C,t.createFactory=function(e){var t=C.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:d,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=E.transition;E.transition={};try{e()}finally{E.transition=t}},t.unstable_act=L,t.useCallback=function(e,t){return _.current.useCallback(e,t)},t.useContext=function(e){return _.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return _.current.useDeferredValue(e)},t.useEffect=function(e,t){return _.current.useEffect(e,t)},t.useId=function(){return _.current.useId()},t.useImperativeHandle=function(e,t,s){return _.current.useImperativeHandle(e,t,s)},t.useInsertionEffect=function(e,t){return _.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return _.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return _.current.useMemo(e,t)},t.useReducer=function(e,t,s){return _.current.useReducer(e,t,s)},t.useRef=function(e){return _.current.useRef(e)},t.useState=function(e){return _.current.useState(e)},t.useSyncExternalStore=function(e,t,s){return _.current.useSyncExternalStore(e,t,s)},t.useTransition=function(){return _.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function s(e,t){var s=e.length;e.push(t);e:for(;0<s;){var a=s-1>>>1,l=e[a];if(!(0<r(l,t)))break e;e[a]=t,e[s]=l,s=a}}function a(e){return 0===e.length?null:e[0]}function l(e){if(0===e.length)return null;var t=e[0],s=e.pop();if(s!==t){e[0]=s;e:for(var a=0,l=e.length,n=l>>>1;a<n;){var i=2*(a+1)-1,o=e[i],d=i+1,c=e[d];if(0>r(o,s))d<l&&0>r(c,o)?(e[a]=c,e[d]=s,a=d):(e[a]=o,e[i]=s,a=i);else{if(!(d<l&&0>r(c,s)))break e;e[a]=c,e[d]=s,a=d}}}return t}function r(e,t){var s=e.sortIndex-t.sortIndex;return 0!==s?s:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var n=performance;t.unstable_now=function(){return n.now()}}else{var i=Date,o=i.now();t.unstable_now=function(){return i.now()-o}}var d=[],c=[],u=1,m=null,x=3,h=!1,p=!1,b=!1,g="function"===typeof setTimeout?setTimeout:null,f="function"===typeof clearTimeout?clearTimeout:null,y="undefined"!==typeof setImmediate?setImmediate:null;function v(e){for(var t=a(c);null!==t;){if(null===t.callback)l(c);else{if(!(t.startTime<=e))break;l(c),t.sortIndex=t.expirationTime,s(d,t)}t=a(c)}}function j(e){if(b=!1,v(e),!p)if(null!==a(d))p=!0,E(w);else{var t=a(c);null!==t&&R(j,t.startTime-e)}}function w(e,s){p=!1,b&&(b=!1,f(k),k=-1),h=!0;var r=x;try{for(v(s),m=a(d);null!==m&&(!(m.expirationTime>s)||e&&!I());){var n=m.callback;if("function"===typeof n){m.callback=null,x=m.priorityLevel;var i=n(m.expirationTime<=s);s=t.unstable_now(),"function"===typeof i?m.callback=i:m===a(d)&&l(d),v(s)}else l(d);m=a(d)}if(null!==m)var o=!0;else{var u=a(c);null!==u&&R(j,u.startTime-s),o=!1}return o}finally{m=null,x=r,h=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,S=!1,C=null,k=-1,P=5,A=-1;function I(){return!(t.unstable_now()-A<P)}function D(){if(null!==C){var e=t.unstable_now();A=e;var s=!0;try{s=C(!0,e)}finally{s?N():(S=!1,C=null)}}else S=!1}if("function"===typeof y)N=function(){y(D)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,_=T.port2;T.port1.onmessage=D,N=function(){_.postMessage(null)}}else N=function(){g(D,0)};function E(e){C=e,S||(S=!0,N())}function R(e,s){k=g(function(){e(t.unstable_now())},s)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||h||(p=!0,E(w))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return x},t.unstable_getFirstCallbackNode=function(){return a(d)},t.unstable_next=function(e){switch(x){case 1:case 2:case 3:var t=3;break;default:t=x}var s=x;x=t;try{return e()}finally{x=s}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var s=x;x=e;try{return t()}finally{x=s}},t.unstable_scheduleCallback=function(e,l,r){var n=t.unstable_now();switch("object"===typeof r&&null!==r?r="number"===typeof(r=r.delay)&&0<r?n+r:n:r=n,e){case 1:var i=-1;break;case 2:i=250;break;case 5:i=1073741823;break;case 4:i=1e4;break;default:i=5e3}return e={id:u++,callback:l,priorityLevel:e,startTime:r,expirationTime:i=r+i,sortIndex:-1},r>n?(e.sortIndex=r,s(c,e),null===a(d)&&e===a(c)&&(b?(f(k),k=-1):b=!0,R(j,r-n))):(e.sortIndex=i,s(d,e),p||h||(p=!0,E(w))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=x;return function(){var s=x;x=t;try{return e.apply(this,arguments)}finally{x=s}}}},391:(e,t,s)=>{var a=s(950);t.createRoot=a.createRoot,t.hydrateRoot=a.hydrateRoot},555:(e,t,s)=>{function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var l=s.call(e,t||"default");if("object"!=a(l))return l;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function r(e,t,s){return(t=l(t))in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function n(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function i(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?n(Object(s),!0).forEach(function(t){r(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):n(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}s.d(t,{A:()=>i})},579:(e,t,s)=>{e.exports=s(153)},730:(e,t,s)=>{var a=s(43),l=s(853);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,s=1;s<arguments.length;s++)t+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function o(e,t){d(e,t),d(e+"Capture",t)}function d(e,t){for(i[e]=t,e=0;e<t.length;e++)n.add(t[e])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,x={},h={};function p(e,t,s,a,l,r,n){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=l,this.mustUseProperty=s,this.propertyName=e,this.type=t,this.sanitizeURL=r,this.removeEmptyString=n}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){b[e]=new p(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];b[t]=new p(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){b[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){b[e]=new p(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){b[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){b[e]=new p(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){b[e]=new p(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){b[e]=new p(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){b[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)});var g=/[\-:]([a-z])/g;function f(e){return e[1].toUpperCase()}function y(e,t,s,a){var l=b.hasOwnProperty(t)?b[t]:null;(null!==l?0!==l.type:a||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,s,a){if(null===t||"undefined"===typeof t||function(e,t,s,a){if(null!==s&&0===s.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==s?!s.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,s,a))return!0;if(a)return!1;if(null!==s)switch(s.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,s,l,a)&&(s=null),a||null===l?function(e){return!!u.call(h,e)||!u.call(x,e)&&(m.test(e)?h[e]=!0:(x[e]=!0,!1))}(t)&&(null===s?e.removeAttribute(t):e.setAttribute(t,""+s)):l.mustUseProperty?e[l.propertyName]=null===s?3!==l.type&&"":s:(t=l.attributeName,a=l.attributeNamespace,null===s?e.removeAttribute(t):(s=3===(l=l.type)||4===l&&!0===s?"":""+s,a?e.setAttributeNS(a,t,s):e.setAttribute(t,s))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(g,f);b[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){b[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)}),b.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){b[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)});var v=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,j=Symbol.for("react.element"),w=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),P=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var E=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,M=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(ma){var t=ma.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var B=!1;function q(e,t){if(!e||B)return"";B=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(oa){var a=oa}Reflect.construct(e,[],t)}else{try{t.call()}catch(oa){a=oa}e.call(t.prototype)}else{try{throw Error()}catch(oa){a=oa}e()}}catch(oa){if(oa&&a&&"string"===typeof oa.stack){for(var l=oa.stack.split("\n"),r=a.stack.split("\n"),n=l.length-1,i=r.length-1;1<=n&&0<=i&&l[n]!==r[i];)i--;for(;1<=n&&0<=i;n--,i--)if(l[n]!==r[i]){if(1!==n||1!==i)do{if(n--,0>--i||l[n]!==r[i]){var o="\n"+l[n].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=n&&0<=i);break}}}finally{B=!1,Error.prepareStackTrace=s}return(e=e?e.displayName||e.name:"")?F(e):""}function z(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case w:return"Portal";case C:return"Profiler";case S:return"StrictMode";case I:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case P:return(e.displayName||"Context")+".Consumer";case k:return(e._context.displayName||"Context")+".Provider";case A:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return U(e(t))}catch(ma){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function J(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",s=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),a=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof s&&"function"===typeof s.get&&"function"===typeof s.set){var l=s.get,r=s.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(e){a=""+e,r.call(this,e)}}),Object.defineProperty(e,t,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(e){a=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var s=t.getValue(),a="";return e&&(a=V(e)?e.checked?"true":"false":e.value),(e=a)!==s&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function G(e,t){var s=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=s?s:e._wrapperState.initialChecked})}function Y(e,t){var s=null==t.defaultValue?"":t.defaultValue,a=null!=t.checked?t.checked:t.defaultChecked;s=H(null!=t.value?t.value:s),e._wrapperState={initialChecked:a,initialValue:s,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&y(e,"checked",t,!1)}function Z(e,t){$(e,t);var s=H(t.value),a=t.type;if(null!=s)"number"===a?(0===s&&""===e.value||e.value!=s)&&(e.value=""+s):e.value!==""+s&&(e.value=""+s);else if("submit"===a||"reset"===a)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,s):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,s){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var a=t.type;if(!("submit"!==a&&"reset"!==a||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,s||t===e.value||(e.value=t),e.defaultValue=t}""!==(s=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==s&&(e.name=s)}function ee(e,t,s){"number"===t&&Q(e.ownerDocument)===e||(null==s?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+s&&(e.defaultValue=""+s))}var te=Array.isArray;function se(e,t,s,a){if(e=e.options,t){t={};for(var l=0;l<s.length;l++)t["$"+s[l]]=!0;for(s=0;s<e.length;s++)l=t.hasOwnProperty("$"+e[s].value),e[s].selected!==l&&(e[s].selected=l),l&&a&&(e[s].defaultSelected=!0)}else{for(s=""+H(s),t=null,l=0;l<e.length;l++){if(e[l].value===s)return e[l].selected=!0,void(a&&(e[l].defaultSelected=!0));null!==t||e[l].disabled||(t=e[l])}null!==t&&(t.selected=!0)}}function ae(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(r(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function le(e,t){var s=t.value;if(null==s){if(s=t.children,t=t.defaultValue,null!=s){if(null!=t)throw Error(r(92));if(te(s)){if(1<s.length)throw Error(r(93));s=s[0]}t=s}null==t&&(t=""),s=t}e._wrapperState={initialValue:H(s)}}function re(e,t){var s=H(t.value),a=H(t.defaultValue);null!=s&&((s=""+s)!==e.value&&(e.value=s),null==t.defaultValue&&e.defaultValue!==s&&(e.defaultValue=s)),null!=a&&(e.defaultValue=""+a)}function ne(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ie(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ie(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var de,ce=function(e){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,s,a,l){MSApp.execUnsafeLocalFunction(function(){return e(t,s)})}:e}(function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((de=de||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=de.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function ue(e,t){if(t){var s=e.firstChild;if(s&&s===e.lastChild&&3===s.nodeType)return void(s.nodeValue=t)}e.textContent=t}var me={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xe=["Webkit","ms","Moz","O"];function he(e,t,s){return null==t||"boolean"===typeof t||""===t?"":s||"number"!==typeof t||0===t||me.hasOwnProperty(e)&&me[e]?(""+t).trim():t+"px"}function pe(e,t){for(var s in e=e.style,t)if(t.hasOwnProperty(s)){var a=0===s.indexOf("--"),l=he(s,t[s],a);"float"===s&&(s="cssFloat"),a?e.setProperty(s,l):e[s]=l}}Object.keys(me).forEach(function(e){xe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),me[t]=me[e]})});var be=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(be[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(r(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(r(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(r(62))}}function fe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ye=null;function ve(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,we=null,Ne=null;function Se(e){if(e=Pl(e)){if("function"!==typeof je)throw Error(r(280));var t=e.stateNode;t&&(t=Il(t),je(e.stateNode,e.type,t))}}function Ce(e){we?Ne?Ne.push(e):Ne=[e]:we=e}function ke(){if(we){var e=we,t=Ne;if(Ne=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Pe(e,t){return e(t)}function Ae(){}var Ie=!1;function De(e,t,s){if(Ie)return e(t,s);Ie=!0;try{return Pe(e,t,s)}finally{Ie=!1,(null!==we||null!==Ne)&&(Ae(),ke())}}function Te(e,t){var s=e.stateNode;if(null===s)return null;var a=Il(s);if(null===a)return null;s=a[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(a=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!a;break e;default:e=!1}if(e)return null;if(s&&"function"!==typeof s)throw Error(r(231,t,typeof s));return s}var _e=!1;if(c)try{var Ee={};Object.defineProperty(Ee,"passive",{get:function(){_e=!0}}),window.addEventListener("test",Ee,Ee),window.removeEventListener("test",Ee,Ee)}catch(da){_e=!1}function Re(e,t,s,a,l,r,n,i,o){var d=Array.prototype.slice.call(arguments,3);try{t.apply(s,d)}catch(c){this.onError(c)}}var Le=!1,Oe=null,Me=!1,Fe=null,Be={onError:function(e){Le=!0,Oe=e}};function qe(e,t,s,a,l,r,n,i,o){Le=!1,Oe=null,Re.apply(Be,arguments)}function ze(e){var t=e,s=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(s=t.return),e=t.return}while(e)}return 3===t.tag?s:null}function Ue(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function We(e){if(ze(e)!==e)throw Error(r(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(r(188));return t!==e?null:e}for(var s=e,a=t;;){var l=s.return;if(null===l)break;var n=l.alternate;if(null===n){if(null!==(a=l.return)){s=a;continue}break}if(l.child===n.child){for(n=l.child;n;){if(n===s)return We(l),e;if(n===a)return We(l),t;n=n.sibling}throw Error(r(188))}if(s.return!==a.return)s=l,a=n;else{for(var i=!1,o=l.child;o;){if(o===s){i=!0,s=l,a=n;break}if(o===a){i=!0,a=l,s=n;break}o=o.sibling}if(!i){for(o=n.child;o;){if(o===s){i=!0,s=n,a=l;break}if(o===a){i=!0,a=n,s=l;break}o=o.sibling}if(!i)throw Error(r(189))}}if(s.alternate!==a)throw Error(r(190))}if(3!==s.tag)throw Error(r(188));return s.stateNode.current===s?e:t}(e),null!==e?Ve(e):null}function Ve(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ve(e);if(null!==t)return t;e=e.sibling}return null}var Je=l.unstable_scheduleCallback,Ke=l.unstable_cancelCallback,Qe=l.unstable_shouldYield,Ge=l.unstable_requestPaint,Ye=l.unstable_now,$e=l.unstable_getCurrentPriorityLevel,Ze=l.unstable_ImmediatePriority,Xe=l.unstable_UserBlockingPriority,et=l.unstable_NormalPriority,tt=l.unstable_LowPriority,st=l.unstable_IdlePriority,at=null,lt=null;var rt=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(nt(e)/it|0)|0},nt=Math.log,it=Math.LN2;var ot=64,dt=4194304;function ct(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ut(e,t){var s=e.pendingLanes;if(0===s)return 0;var a=0,l=e.suspendedLanes,r=e.pingedLanes,n=268435455&s;if(0!==n){var i=n&~l;0!==i?a=ct(i):0!==(r&=n)&&(a=ct(r))}else 0!==(n=s&~l)?a=ct(n):0!==r&&(a=ct(r));if(0===a)return 0;if(0!==t&&t!==a&&0===(t&l)&&((l=a&-a)>=(r=t&-t)||16===l&&0!==(4194240&r)))return t;if(0!==(4&a)&&(a|=16&s),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=a;0<t;)l=1<<(s=31-rt(t)),a|=e[s],t&=~l;return a}function mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function xt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ot;return 0===(4194240&(ot<<=1))&&(ot=64),e}function pt(e){for(var t=[],s=0;31>s;s++)t.push(e);return t}function bt(e,t,s){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-rt(t)]=s}function gt(e,t){var s=e.entangledLanes|=t;for(e=e.entanglements;s;){var a=31-rt(s),l=1<<a;l&t|e[a]&t&&(e[a]|=t),s&=~l}}var ft=0;function yt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var vt,jt,wt,Nt,St,Ct=!1,kt=[],Pt=null,At=null,It=null,Dt=new Map,Tt=new Map,_t=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Pt=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":It=null;break;case"pointerover":case"pointerout":Dt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tt.delete(t.pointerId)}}function Lt(e,t,s,a,l,r){return null===e||e.nativeEvent!==r?(e={blockedOn:t,domEventName:s,eventSystemFlags:a,nativeEvent:r,targetContainers:[l]},null!==t&&(null!==(t=Pl(t))&&jt(t)),e):(e.eventSystemFlags|=a,t=e.targetContainers,null!==l&&-1===t.indexOf(l)&&t.push(l),e)}function Ot(e){var t=kl(e.target);if(null!==t){var s=ze(t);if(null!==s)if(13===(t=s.tag)){if(null!==(t=Ue(s)))return e.blockedOn=t,void St(e.priority,function(){wt(s)})}else if(3===t&&s.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===s.tag?s.stateNode.containerInfo:null)}e.blockedOn=null}function Mt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var s=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==s)return null!==(t=Pl(s))&&jt(t),e.blockedOn=s,!1;var a=new(s=e.nativeEvent).constructor(s.type,s);ye=a,s.target.dispatchEvent(a),ye=null,t.shift()}return!0}function Ft(e,t,s){Mt(e)&&s.delete(t)}function Bt(){Ct=!1,null!==Pt&&Mt(Pt)&&(Pt=null),null!==At&&Mt(At)&&(At=null),null!==It&&Mt(It)&&(It=null),Dt.forEach(Ft),Tt.forEach(Ft)}function qt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return qt(t,e)}if(0<kt.length){qt(kt[0],e);for(var s=1;s<kt.length;s++){var a=kt[s];a.blockedOn===e&&(a.blockedOn=null)}}for(null!==Pt&&qt(Pt,e),null!==At&&qt(At,e),null!==It&&qt(It,e),Dt.forEach(t),Tt.forEach(t),s=0;s<_t.length;s++)(a=_t[s]).blockedOn===e&&(a.blockedOn=null);for(;0<_t.length&&null===(s=_t[0]).blockedOn;)Ot(s),null===s.blockedOn&&_t.shift()}var Ut=v.ReactCurrentBatchConfig,Wt=!0;function Ht(e,t,s,a){var l=ft,r=Ut.transition;Ut.transition=null;try{ft=1,Jt(e,t,s,a)}finally{ft=l,Ut.transition=r}}function Vt(e,t,s,a){var l=ft,r=Ut.transition;Ut.transition=null;try{ft=4,Jt(e,t,s,a)}finally{ft=l,Ut.transition=r}}function Jt(e,t,s,a){if(Wt){var l=Qt(e,t,s,a);if(null===l)$a(e,t,a,Kt,s),Rt(e,a);else if(function(e,t,s,a,l){switch(t){case"focusin":return Pt=Lt(Pt,e,t,s,a,l),!0;case"dragenter":return At=Lt(At,e,t,s,a,l),!0;case"mouseover":return It=Lt(It,e,t,s,a,l),!0;case"pointerover":var r=l.pointerId;return Dt.set(r,Lt(Dt.get(r)||null,e,t,s,a,l)),!0;case"gotpointercapture":return r=l.pointerId,Tt.set(r,Lt(Tt.get(r)||null,e,t,s,a,l)),!0}return!1}(l,e,t,s,a))a.stopPropagation();else if(Rt(e,a),4&t&&-1<Et.indexOf(e)){for(;null!==l;){var r=Pl(l);if(null!==r&&vt(r),null===(r=Qt(e,t,s,a))&&$a(e,t,a,Kt,s),r===l)break;l=r}null!==l&&a.stopPropagation()}else $a(e,t,a,null,s)}}var Kt=null;function Qt(e,t,s,a){if(Kt=null,null!==(e=kl(e=ve(a))))if(null===(t=ze(e)))e=null;else if(13===(s=t.tag)){if(null!==(e=Ue(t)))return e;e=null}else if(3===s){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Kt=e,null}function Gt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch($e()){case Ze:return 1;case Xe:return 4;case et:case tt:return 16;case st:return 536870912;default:return 16}default:return 16}}var Yt=null,$t=null,Zt=null;function Xt(){if(Zt)return Zt;var e,t,s=$t,a=s.length,l="value"in Yt?Yt.value:Yt.textContent,r=l.length;for(e=0;e<a&&s[e]===l[e];e++);var n=a-e;for(t=1;t<=n&&s[a-t]===l[r-t];t++);return Zt=l.slice(e,1<t?1-t:void 0)}function es(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function ts(){return!0}function ss(){return!1}function as(e){function t(t,s,a,l,r){for(var n in this._reactName=t,this._targetInst=a,this.type=s,this.nativeEvent=l,this.target=r,this.currentTarget=null,e)e.hasOwnProperty(n)&&(t=e[n],this[n]=t?t(l):l[n]);return this.isDefaultPrevented=(null!=l.defaultPrevented?l.defaultPrevented:!1===l.returnValue)?ts:ss,this.isPropagationStopped=ss,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=ts)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=ts)},persist:function(){},isPersistent:ts}),t}var ls,rs,ns,is={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},os=as(is),ds=M({},is,{view:0,detail:0}),cs=as(ds),us=M({},ds,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ns,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&"mousemove"===e.type?(ls=e.screenX-ns.screenX,rs=e.screenY-ns.screenY):rs=ls=0,ns=e),ls)},movementY:function(e){return"movementY"in e?e.movementY:rs}}),ms=as(us),xs=as(M({},us,{dataTransfer:0})),hs=as(M({},ds,{relatedTarget:0})),ps=as(M({},is,{animationName:0,elapsedTime:0,pseudoElement:0})),bs=M({},is,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),gs=as(bs),fs=as(M({},is,{data:0})),ys={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},js={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ws(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=js[e])&&!!t[e]}function Ns(){return ws}var Ss=M({},ds,{key:function(e){if(e.key){var t=ys[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=es(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?vs[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ns,charCode:function(e){return"keypress"===e.type?es(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?es(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cs=as(Ss),ks=as(M({},us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ps=as(M({},ds,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ns})),As=as(M({},is,{propertyName:0,elapsedTime:0,pseudoElement:0})),Is=M({},us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ds=as(Is),Ts=[9,13,27,32],_s=c&&"CompositionEvent"in window,Es=null;c&&"documentMode"in document&&(Es=document.documentMode);var Rs=c&&"TextEvent"in window&&!Es,Ls=c&&(!_s||Es&&8<Es&&11>=Es),Os=String.fromCharCode(32),Ms=!1;function Fs(e,t){switch(e){case"keyup":return-1!==Ts.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bs(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var qs=!1;var zs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Us(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zs[e.type]:"textarea"===t}function Ws(e,t,s,a){Ce(a),0<(t=Xa(t,"onChange")).length&&(s=new os("onChange","change",null,s,a),e.push({event:s,listeners:t}))}var Hs=null,Vs=null;function Js(e){Va(e,0)}function Ks(e){if(K(Al(e)))return e}function Qs(e,t){if("change"===e)return t}var Gs=!1;if(c){var Ys;if(c){var $s="oninput"in document;if(!$s){var Zs=document.createElement("div");Zs.setAttribute("oninput","return;"),$s="function"===typeof Zs.oninput}Ys=$s}else Ys=!1;Gs=Ys&&(!document.documentMode||9<document.documentMode)}function Xs(){Hs&&(Hs.detachEvent("onpropertychange",ea),Vs=Hs=null)}function ea(e){if("value"===e.propertyName&&Ks(Vs)){var t=[];Ws(t,Vs,e,ve(e)),De(Js,t)}}function ta(e,t,s){"focusin"===e?(Xs(),Vs=s,(Hs=t).attachEvent("onpropertychange",ea)):"focusout"===e&&Xs()}function sa(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Ks(Vs)}function aa(e,t){if("click"===e)return Ks(t)}function la(e,t){if("input"===e||"change"===e)return Ks(t)}var ra="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function ca(e,t){if(ra(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var l=s[a];if(!u.call(t,l)||!ra(e[l],t[l]))return!1}return!0}function ua(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xa(e,t){var s,a=ua(e);for(e=0;a;){if(3===a.nodeType){if(s=e+a.textContent.length,e<=t&&s>=t)return{node:a,offset:t-e};e=s}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=ua(a)}}function ha(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ha(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function pa(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var s="string"===typeof t.contentWindow.location.href}catch(ba){s=!1}if(!s)break;t=Q((e=t.contentWindow).document)}return t}function fa(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function va(e){var t=pa(),s=e.focusedElem,a=e.selectionRange;if(t!==s&&s&&s.ownerDocument&&ha(s.ownerDocument.documentElement,s)){if(null!==a&&fa(s))if(t=a.start,void 0===(e=a.end)&&(e=t),"selectionStart"in s)s.selectionStart=t,s.selectionEnd=Math.min(e,s.value.length);else if((e=(t=s.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var l=s.textContent.length,r=Math.min(a.start,l);a=void 0===a.end?r:Math.min(a.end,l),!e.extend&&r>a&&(l=a,a=r,r=l),l=xa(s,r);var n=xa(s,a);l&&n&&(1!==e.rangeCount||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==n.node||e.focusOffset!==n.offset)&&((t=t.createRange()).setStart(l.node,l.offset),e.removeAllRanges(),r>a?(e.addRange(t),e.extend(n.node,n.offset)):(t.setEnd(n.node,n.offset),e.addRange(t)))}for(t=[],e=s;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof s.focus&&s.focus(),s=0;s<t.length;s++)(e=t[s]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ja=c&&"documentMode"in document&&11>=document.documentMode,wa=null,Na=null,Sa=null,Ca=!1;function ka(e,t,s){var a=s.window===s?s.document:9===s.nodeType?s:s.ownerDocument;Ca||null==wa||wa!==Q(a)||("selectionStart"in(a=wa)&&fa(a)?a={start:a.selectionStart,end:a.selectionEnd}:a={anchorNode:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset},Sa&&ca(Sa,a)||(Sa=a,0<(a=Xa(Na,"onSelect")).length&&(t=new os("onSelect","select",null,t,s),e.push({event:t,listeners:a}),t.target=wa)))}function Pa(e,t){var s={};return s[e.toLowerCase()]=t.toLowerCase(),s["Webkit"+e]="webkit"+t,s["Moz"+e]="moz"+t,s}var Aa={animationend:Pa("Animation","AnimationEnd"),animationiteration:Pa("Animation","AnimationIteration"),animationstart:Pa("Animation","AnimationStart"),transitionend:Pa("Transition","TransitionEnd")},Ia={},Da={};function Ta(e){if(Ia[e])return Ia[e];if(!Aa[e])return e;var t,s=Aa[e];for(t in s)if(s.hasOwnProperty(t)&&t in Da)return Ia[e]=s[t];return e}c&&(Da=document.createElement("div").style,"AnimationEvent"in window||(delete Aa.animationend.animation,delete Aa.animationiteration.animation,delete Aa.animationstart.animation),"TransitionEvent"in window||delete Aa.transitionend.transition);var _a=Ta("animationend"),Ea=Ta("animationiteration"),Ra=Ta("animationstart"),La=Ta("transitionend"),Oa=new Map,Ma="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fa(e,t){Oa.set(e,t),o(t,[e])}for(var Ba=0;Ba<Ma.length;Ba++){var za=Ma[Ba];Fa(za.toLowerCase(),"on"+(za[0].toUpperCase()+za.slice(1)))}Fa(_a,"onAnimationEnd"),Fa(Ea,"onAnimationIteration"),Fa(Ra,"onAnimationStart"),Fa("dblclick","onDoubleClick"),Fa("focusin","onFocus"),Fa("focusout","onBlur"),Fa(La,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ua="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wa=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ua));function Ha(e,t,s){var a=e.type||"unknown-event";e.currentTarget=s,function(e,t,s,a,l,n,i,o,d){if(qe.apply(this,arguments),Le){if(!Le)throw Error(r(198));var c=Oe;Le=!1,Oe=null,Me||(Me=!0,Fe=c)}}(a,t,void 0,e),e.currentTarget=null}function Va(e,t){t=0!==(4&t);for(var s=0;s<e.length;s++){var a=e[s],l=a.event;a=a.listeners;e:{var r=void 0;if(t)for(var n=a.length-1;0<=n;n--){var i=a[n],o=i.instance,d=i.currentTarget;if(i=i.listener,o!==r&&l.isPropagationStopped())break e;Ha(l,i,d),r=o}else for(n=0;n<a.length;n++){if(o=(i=a[n]).instance,d=i.currentTarget,i=i.listener,o!==r&&l.isPropagationStopped())break e;Ha(l,i,d),r=o}}}if(Me)throw e=Fe,Me=!1,Fe=null,e}function Ja(e,t){var s=t[Nl];void 0===s&&(s=t[Nl]=new Set);var a=e+"__bubble";s.has(a)||(Ya(t,e,2,!1),s.add(a))}function Ka(e,t,s){var a=0;t&&(a|=4),Ya(s,e,a,t)}var Qa="_reactListening"+Math.random().toString(36).slice(2);function Ga(e){if(!e[Qa]){e[Qa]=!0,n.forEach(function(t){"selectionchange"!==t&&(Wa.has(t)||Ka(t,!1,e),Ka(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Qa]||(t[Qa]=!0,Ka("selectionchange",!1,t))}}function Ya(e,t,s,a){switch(Gt(t)){case 1:var l=Ht;break;case 4:l=Vt;break;default:l=Jt}s=l.bind(null,t,s,e),l=void 0,!_e||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(l=!0),a?void 0!==l?e.addEventListener(t,s,{capture:!0,passive:l}):e.addEventListener(t,s,!0):void 0!==l?e.addEventListener(t,s,{passive:l}):e.addEventListener(t,s,!1)}function $a(e,t,s,a,l){var r=a;if(0===(1&t)&&0===(2&t)&&null!==a)e:for(;;){if(null===a)return;var n=a.tag;if(3===n||4===n){var i=a.stateNode.containerInfo;if(i===l||8===i.nodeType&&i.parentNode===l)break;if(4===n)for(n=a.return;null!==n;){var o=n.tag;if((3===o||4===o)&&((o=n.stateNode.containerInfo)===l||8===o.nodeType&&o.parentNode===l))return;n=n.return}for(;null!==i;){if(null===(n=kl(i)))return;if(5===(o=n.tag)||6===o){a=r=n;continue e}i=i.parentNode}}a=a.return}De(function(){var a=r,l=ve(s),n=[];e:{var i=Oa.get(e);if(void 0!==i){var o=os,d=e;switch(e){case"keypress":if(0===es(s))break e;case"keydown":case"keyup":o=Cs;break;case"focusin":d="focus",o=hs;break;case"focusout":d="blur",o=hs;break;case"beforeblur":case"afterblur":o=hs;break;case"click":if(2===s.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=ms;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=xs;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Ps;break;case _a:case Ea:case Ra:o=ps;break;case La:o=As;break;case"scroll":o=cs;break;case"wheel":o=Ds;break;case"copy":case"cut":case"paste":o=gs;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=ks}var c=0!==(4&t),u=!c&&"scroll"===e,m=c?null!==i?i+"Capture":null:i;c=[];for(var x,h=a;null!==h;){var p=(x=h).stateNode;if(5===x.tag&&null!==p&&(x=p,null!==m&&(null!=(p=Te(h,m))&&c.push(Za(h,p,x)))),u)break;h=h.return}0<c.length&&(i=new o(i,d,null,s,l),n.push({event:i,listeners:c}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(i="mouseover"===e||"pointerover"===e)||s===ye||!(d=s.relatedTarget||s.fromElement)||!kl(d)&&!d[wl])&&(o||i)&&(i=l.window===l?l:(i=l.ownerDocument)?i.defaultView||i.parentWindow:window,o?(o=a,null!==(d=(d=s.relatedTarget||s.toElement)?kl(d):null)&&(d!==(u=ze(d))||5!==d.tag&&6!==d.tag)&&(d=null)):(o=null,d=a),o!==d)){if(c=ms,p="onMouseLeave",m="onMouseEnter",h="mouse","pointerout"!==e&&"pointerover"!==e||(c=ks,p="onPointerLeave",m="onPointerEnter",h="pointer"),u=null==o?i:Al(o),x=null==d?i:Al(d),(i=new c(p,h+"leave",o,s,l)).target=u,i.relatedTarget=x,p=null,kl(l)===a&&((c=new c(m,h+"enter",d,s,l)).target=x,c.relatedTarget=u,p=c),u=p,o&&d)e:{for(m=d,h=0,x=c=o;x;x=el(x))h++;for(x=0,p=m;p;p=el(p))x++;for(;0<h-x;)c=el(c),h--;for(;0<x-h;)m=el(m),x--;for(;h--;){if(c===m||null!==m&&c===m.alternate)break e;c=el(c),m=el(m)}c=null}else c=null;null!==o&&tl(n,i,o,c,!1),null!==d&&null!==u&&tl(n,u,d,c,!0)}if("select"===(o=(i=a?Al(a):window).nodeName&&i.nodeName.toLowerCase())||"input"===o&&"file"===i.type)var b=Qs;else if(Us(i))if(Gs)b=la;else{b=sa;var g=ta}else(o=i.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===i.type||"radio"===i.type)&&(b=aa);switch(b&&(b=b(e,a))?Ws(n,b,s,l):(g&&g(e,i,a),"focusout"===e&&(g=i._wrapperState)&&g.controlled&&"number"===i.type&&ee(i,"number",i.value)),g=a?Al(a):window,e){case"focusin":(Us(g)||"true"===g.contentEditable)&&(wa=g,Na=a,Sa=null);break;case"focusout":Sa=Na=wa=null;break;case"mousedown":Ca=!0;break;case"contextmenu":case"mouseup":case"dragend":Ca=!1,ka(n,s,l);break;case"selectionchange":if(ja)break;case"keydown":case"keyup":ka(n,s,l)}var f;if(_s)e:{switch(e){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else qs?Fs(e,s)&&(y="onCompositionEnd"):"keydown"===e&&229===s.keyCode&&(y="onCompositionStart");y&&(Ls&&"ko"!==s.locale&&(qs||"onCompositionStart"!==y?"onCompositionEnd"===y&&qs&&(f=Xt()):($t="value"in(Yt=l)?Yt.value:Yt.textContent,qs=!0)),0<(g=Xa(a,y)).length&&(y=new fs(y,e,null,s,l),n.push({event:y,listeners:g}),f?y.data=f:null!==(f=Bs(s))&&(y.data=f))),(f=Rs?function(e,t){switch(e){case"compositionend":return Bs(t);case"keypress":return 32!==t.which?null:(Ms=!0,Os);case"textInput":return(e=t.data)===Os&&Ms?null:e;default:return null}}(e,s):function(e,t){if(qs)return"compositionend"===e||!_s&&Fs(e,t)?(e=Xt(),Zt=$t=Yt=null,qs=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ls&&"ko"!==t.locale?null:t.data}}(e,s))&&(0<(a=Xa(a,"onBeforeInput")).length&&(l=new fs("onBeforeInput","beforeinput",null,s,l),n.push({event:l,listeners:a}),l.data=f))}Va(n,t)})}function Za(e,t,s){return{instance:e,listener:t,currentTarget:s}}function Xa(e,t){for(var s=t+"Capture",a=[];null!==e;){var l=e,r=l.stateNode;5===l.tag&&null!==r&&(l=r,null!=(r=Te(e,s))&&a.unshift(Za(e,r,l)),null!=(r=Te(e,t))&&a.push(Za(e,r,l))),e=e.return}return a}function el(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function tl(e,t,s,a,l){for(var r=t._reactName,n=[];null!==s&&s!==a;){var i=s,o=i.alternate,d=i.stateNode;if(null!==o&&o===a)break;5===i.tag&&null!==d&&(i=d,l?null!=(o=Te(s,r))&&n.unshift(Za(s,o,i)):l||null!=(o=Te(s,r))&&n.push(Za(s,o,i))),s=s.return}0!==n.length&&e.push({event:t,listeners:n})}var sl=/\r\n?/g,ll=/\u0000|\uFFFD/g;function rl(e){return("string"===typeof e?e:""+e).replace(sl,"\n").replace(ll,"")}function nl(e,t,s){if(t=rl(t),rl(e)!==t&&s)throw Error(r(425))}function il(){}var ol=null,dl=null;function cl(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ul="function"===typeof setTimeout?setTimeout:void 0,ml="function"===typeof clearTimeout?clearTimeout:void 0,xl="function"===typeof Promise?Promise:void 0,hl="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof xl?function(e){return xl.resolve(null).then(e).catch(pl)}:ul;function pl(e){setTimeout(function(){throw e})}function bl(e,t){var s=t,a=0;do{var l=s.nextSibling;if(e.removeChild(s),l&&8===l.nodeType)if("/$"===(s=l.data)){if(0===a)return e.removeChild(l),void zt(t);a--}else"$"!==s&&"$?"!==s&&"$!"!==s||a++;s=l}while(s);zt(t)}function gl(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function fl(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var s=e.data;if("$"===s||"$!"===s||"$?"===s){if(0===t)return e;t--}else"/$"===s&&t++}e=e.previousSibling}return null}var yl=Math.random().toString(36).slice(2),vl="__reactFiber$"+yl,jl="__reactProps$"+yl,wl="__reactContainer$"+yl,Nl="__reactEvents$"+yl,Sl="__reactListeners$"+yl,Cl="__reactHandles$"+yl;function kl(e){var t=e[vl];if(t)return t;for(var s=e.parentNode;s;){if(t=s[wl]||s[vl]){if(s=t.alternate,null!==t.child||null!==s&&null!==s.child)for(e=fl(e);null!==e;){if(s=e[vl])return s;e=fl(e)}return t}s=(e=s).parentNode}return null}function Pl(e){return!(e=e[vl]||e[wl])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function Al(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(r(33))}function Il(e){return e[jl]||null}var Dl=[],Tl=-1;function _l(e){return{current:e}}function El(e){0>Tl||(e.current=Dl[Tl],Dl[Tl]=null,Tl--)}function Rl(e,t){Tl++,Dl[Tl]=e.current,e.current=t}var Ll={},Ol=_l(Ll),Ml=_l(!1),Fl=Ll;function Bl(e,t){var s=e.type.contextTypes;if(!s)return Ll;var a=e.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===t)return a.__reactInternalMemoizedMaskedChildContext;var l,r={};for(l in s)r[l]=t[l];return a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ql(e){return null!==(e=e.childContextTypes)&&void 0!==e}function zl(){El(Ml),El(Ol)}function Ul(e,t,s){if(Ol.current!==Ll)throw Error(r(168));Rl(Ol,t),Rl(Ml,s)}function Wl(e,t,s){var a=e.stateNode;if(t=t.childContextTypes,"function"!==typeof a.getChildContext)return s;for(var l in a=a.getChildContext())if(!(l in t))throw Error(r(108,W(e)||"Unknown",l));return M({},s,a)}function Hl(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ll,Fl=Ol.current,Rl(Ol,e),Rl(Ml,Ml.current),!0}function Vl(e,t,s){var a=e.stateNode;if(!a)throw Error(r(169));s?(e=Wl(e,t,Fl),a.__reactInternalMemoizedMergedChildContext=e,El(Ml),El(Ol),Rl(Ol,e)):El(Ml),Rl(Ml,s)}var Jl=null,Kl=!1,Ql=!1;function Gl(e){null===Jl?Jl=[e]:Jl.push(e)}function Yl(){if(!Ql&&null!==Jl){Ql=!0;var e=0,t=ft;try{var s=Jl;for(ft=1;e<s.length;e++){var a=s[e];do{a=a(!0)}while(null!==a)}Jl=null,Kl=!1}catch(na){throw null!==Jl&&(Jl=Jl.slice(e+1)),Je(Ze,Yl),na}finally{ft=t,Ql=!1}}return null}var $l=[],Zl=0,Xl=null,er=0,tr=[],sr=0,ar=null,lr=1,rr="";function nr(e,t){$l[Zl++]=er,$l[Zl++]=Xl,Xl=e,er=t}function ir(e,t,s){tr[sr++]=lr,tr[sr++]=rr,tr[sr++]=ar,ar=e;var a=lr;e=rr;var l=32-rt(a)-1;a&=~(1<<l),s+=1;var r=32-rt(t)+l;if(30<r){var n=l-l%5;r=(a&(1<<n)-1).toString(32),a>>=n,l-=n,lr=1<<32-rt(t)+l|s<<l|a,rr=r+e}else lr=1<<r|s<<l|a,rr=e}function or(e){null!==e.return&&(nr(e,1),ir(e,1,0))}function dr(e){for(;e===Xl;)Xl=$l[--Zl],$l[Zl]=null,er=$l[--Zl],$l[Zl]=null;for(;e===ar;)ar=tr[--sr],tr[sr]=null,rr=tr[--sr],tr[sr]=null,lr=tr[--sr],tr[sr]=null}var cr=null,ur=null,mr=!1,xr=null;function hr(e,t){var s=qd(5,null,null,0);s.elementType="DELETED",s.stateNode=t,s.return=e,null===(t=e.deletions)?(e.deletions=[s],e.flags|=16):t.push(s)}function pr(e,t){switch(e.tag){case 5:var s=e.type;return null!==(t=1!==t.nodeType||s.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,cr=e,ur=gl(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,cr=e,ur=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(s=null!==ar?{id:lr,overflow:rr}:null,e.memoizedState={dehydrated:t,treeContext:s,retryLane:1073741824},(s=qd(18,null,null,0)).stateNode=t,s.return=e,e.child=s,cr=e,ur=null,!0);default:return!1}}function br(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function gr(e){if(mr){var t=ur;if(t){var s=t;if(!pr(e,t)){if(br(e))throw Error(r(418));t=gl(s.nextSibling);var a=cr;t&&pr(e,t)?hr(a,s):(e.flags=-4097&e.flags|2,mr=!1,cr=e)}}else{if(br(e))throw Error(r(418));e.flags=-4097&e.flags|2,mr=!1,cr=e}}}function fr(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;cr=e}function yr(e){if(e!==cr)return!1;if(!mr)return fr(e),mr=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!cl(e.type,e.memoizedProps)),t&&(t=ur)){if(br(e))throw vr(),Error(r(418));for(;t;)hr(e,t),t=gl(t.nextSibling)}if(fr(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(r(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var s=e.data;if("/$"===s){if(0===t){ur=gl(e.nextSibling);break e}t--}else"$"!==s&&"$!"!==s&&"$?"!==s||t++}e=e.nextSibling}ur=null}}else ur=cr?gl(e.stateNode.nextSibling):null;return!0}function vr(){for(var e=ur;e;)e=gl(e.nextSibling)}function jr(){ur=cr=null,mr=!1}function wr(e){null===xr?xr=[e]:xr.push(e)}var Nr=v.ReactCurrentBatchConfig;function Sr(e,t,s){if(null!==(e=s.ref)&&"function"!==typeof e&&"object"!==typeof e){if(s._owner){if(s=s._owner){if(1!==s.tag)throw Error(r(309));var a=s.stateNode}if(!a)throw Error(r(147,e));var l=a,n=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===n?t.ref:(t=function(e){var t=l.refs;null===e?delete t[n]:t[n]=e},t._stringRef=n,t)}if("string"!==typeof e)throw Error(r(284));if(!s._owner)throw Error(r(290,e))}return e}function Cr(e,t){throw e=Object.prototype.toString.call(t),Error(r(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function kr(e){return(0,e._init)(e._payload)}function Pr(e){function t(t,s){if(e){var a=t.deletions;null===a?(t.deletions=[s],t.flags|=16):a.push(s)}}function s(s,a){if(!e)return null;for(;null!==a;)t(s,a),a=a.sibling;return null}function a(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function l(e,t){return(e=Ud(e,t)).index=0,e.sibling=null,e}function n(t,s,a){return t.index=a,e?null!==(a=t.alternate)?(a=a.index)<s?(t.flags|=2,s):a:(t.flags|=2,s):(t.flags|=1048576,s)}function i(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,s,a){return null===t||6!==t.tag?((t=Jd(s,e.mode,a)).return=e,t):((t=l(t,s)).return=e,t)}function d(e,t,s,a){var r=s.type;return r===N?u(e,t,s.props.children,a,s.key):null!==t&&(t.elementType===r||"object"===typeof r&&null!==r&&r.$$typeof===_&&kr(r)===t.type)?((a=l(t,s.props)).ref=Sr(e,t,s),a.return=e,a):((a=Wd(s.type,s.key,s.props,null,e.mode,a)).ref=Sr(e,t,s),a.return=e,a)}function c(e,t,s,a){return null===t||4!==t.tag||t.stateNode.containerInfo!==s.containerInfo||t.stateNode.implementation!==s.implementation?((t=Kd(s,e.mode,a)).return=e,t):((t=l(t,s.children||[])).return=e,t)}function u(e,t,s,a,r){return null===t||7!==t.tag?((t=Hd(s,e.mode,a,r)).return=e,t):((t=l(t,s)).return=e,t)}function m(e,t,s){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Jd(""+t,e.mode,s)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case j:return(s=Wd(t.type,t.key,t.props,null,e.mode,s)).ref=Sr(e,null,t),s.return=e,s;case w:return(t=Kd(t,e.mode,s)).return=e,t;case _:return m(e,(0,t._init)(t._payload),s)}if(te(t)||L(t))return(t=Hd(t,e.mode,s,null)).return=e,t;Cr(e,t)}return null}function x(e,t,s,a){var l=null!==t?t.key:null;if("string"===typeof s&&""!==s||"number"===typeof s)return null!==l?null:o(e,t,""+s,a);if("object"===typeof s&&null!==s){switch(s.$$typeof){case j:return s.key===l?d(e,t,s,a):null;case w:return s.key===l?c(e,t,s,a):null;case _:return x(e,t,(l=s._init)(s._payload),a)}if(te(s)||L(s))return null!==l?null:u(e,t,s,a,null);Cr(e,s)}return null}function h(e,t,s,a,l){if("string"===typeof a&&""!==a||"number"===typeof a)return o(t,e=e.get(s)||null,""+a,l);if("object"===typeof a&&null!==a){switch(a.$$typeof){case j:return d(t,e=e.get(null===a.key?s:a.key)||null,a,l);case w:return c(t,e=e.get(null===a.key?s:a.key)||null,a,l);case _:return h(e,t,s,(0,a._init)(a._payload),l)}if(te(a)||L(a))return u(t,e=e.get(s)||null,a,l,null);Cr(t,a)}return null}function p(l,r,i,o){for(var d=null,c=null,u=r,p=r=0,b=null;null!==u&&p<i.length;p++){u.index>p?(b=u,u=null):b=u.sibling;var g=x(l,u,i[p],o);if(null===g){null===u&&(u=b);break}e&&u&&null===g.alternate&&t(l,u),r=n(g,r,p),null===c?d=g:c.sibling=g,c=g,u=b}if(p===i.length)return s(l,u),mr&&nr(l,p),d;if(null===u){for(;p<i.length;p++)null!==(u=m(l,i[p],o))&&(r=n(u,r,p),null===c?d=u:c.sibling=u,c=u);return mr&&nr(l,p),d}for(u=a(l,u);p<i.length;p++)null!==(b=h(u,l,p,i[p],o))&&(e&&null!==b.alternate&&u.delete(null===b.key?p:b.key),r=n(b,r,p),null===c?d=b:c.sibling=b,c=b);return e&&u.forEach(function(e){return t(l,e)}),mr&&nr(l,p),d}function b(l,i,o,d){var c=L(o);if("function"!==typeof c)throw Error(r(150));if(null==(o=c.call(o)))throw Error(r(151));for(var u=c=null,p=i,b=i=0,g=null,f=o.next();null!==p&&!f.done;b++,f=o.next()){p.index>b?(g=p,p=null):g=p.sibling;var y=x(l,p,f.value,d);if(null===y){null===p&&(p=g);break}e&&p&&null===y.alternate&&t(l,p),i=n(y,i,b),null===u?c=y:u.sibling=y,u=y,p=g}if(f.done)return s(l,p),mr&&nr(l,b),c;if(null===p){for(;!f.done;b++,f=o.next())null!==(f=m(l,f.value,d))&&(i=n(f,i,b),null===u?c=f:u.sibling=f,u=f);return mr&&nr(l,b),c}for(p=a(l,p);!f.done;b++,f=o.next())null!==(f=h(p,l,b,f.value,d))&&(e&&null!==f.alternate&&p.delete(null===f.key?b:f.key),i=n(f,i,b),null===u?c=f:u.sibling=f,u=f);return e&&p.forEach(function(e){return t(l,e)}),mr&&nr(l,b),c}return function e(a,r,n,o){if("object"===typeof n&&null!==n&&n.type===N&&null===n.key&&(n=n.props.children),"object"===typeof n&&null!==n){switch(n.$$typeof){case j:e:{for(var d=n.key,c=r;null!==c;){if(c.key===d){if((d=n.type)===N){if(7===c.tag){s(a,c.sibling),(r=l(c,n.props.children)).return=a,a=r;break e}}else if(c.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===_&&kr(d)===c.type){s(a,c.sibling),(r=l(c,n.props)).ref=Sr(a,c,n),r.return=a,a=r;break e}s(a,c);break}t(a,c),c=c.sibling}n.type===N?((r=Hd(n.props.children,a.mode,o,n.key)).return=a,a=r):((o=Wd(n.type,n.key,n.props,null,a.mode,o)).ref=Sr(a,r,n),o.return=a,a=o)}return i(a);case w:e:{for(c=n.key;null!==r;){if(r.key===c){if(4===r.tag&&r.stateNode.containerInfo===n.containerInfo&&r.stateNode.implementation===n.implementation){s(a,r.sibling),(r=l(r,n.children||[])).return=a,a=r;break e}s(a,r);break}t(a,r),r=r.sibling}(r=Kd(n,a.mode,o)).return=a,a=r}return i(a);case _:return e(a,r,(c=n._init)(n._payload),o)}if(te(n))return p(a,r,n,o);if(L(n))return b(a,r,n,o);Cr(a,n)}return"string"===typeof n&&""!==n||"number"===typeof n?(n=""+n,null!==r&&6===r.tag?(s(a,r.sibling),(r=l(r,n)).return=a,a=r):(s(a,r),(r=Jd(n,a.mode,o)).return=a,a=r),i(a)):s(a,r)}}var Ar=Pr(!0),Ir=Pr(!1),Dr=_l(null),Tr=null,_r=null,Er=null;function Rr(){Er=_r=Tr=null}function Lr(e){var t=Dr.current;El(Dr),e._currentValue=t}function Or(e,t,s){for(;null!==e;){var a=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==a&&(a.childLanes|=t)):null!==a&&(a.childLanes&t)!==t&&(a.childLanes|=t),e===s)break;e=e.return}}function Mr(e,t){Tr=e,Er=_r=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Pi=!0),e.firstContext=null)}function Fr(e){var t=e._currentValue;if(Er!==e)if(e={context:e,memoizedValue:t,next:null},null===_r){if(null===Tr)throw Error(r(308));_r=e,Tr.dependencies={lanes:0,firstContext:e}}else _r=_r.next=e;return t}var Br=null;function qr(e){null===Br?Br=[e]:Br.push(e)}function zr(e,t,s,a){var l=t.interleaved;return null===l?(s.next=s,qr(t)):(s.next=l.next,l.next=s),t.interleaved=s,Ur(e,a)}function Ur(e,t){e.lanes|=t;var s=e.alternate;for(null!==s&&(s.lanes|=t),s=e,e=e.return;null!==e;)e.childLanes|=t,null!==(s=e.alternate)&&(s.childLanes|=t),s=e,e=e.return;return 3===s.tag?s.stateNode:null}var Wr=!1;function Hr(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Vr(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jr(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kr(e,t,s){var a=e.updateQueue;if(null===a)return null;if(a=a.shared,0!==(2&Mo)){var l=a.pending;return null===l?t.next=t:(t.next=l.next,l.next=t),a.pending=t,Ur(e,s)}return null===(l=a.interleaved)?(t.next=t,qr(a)):(t.next=l.next,l.next=t),a.interleaved=t,Ur(e,s)}function Qr(e,t,s){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&s))){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,gt(e,s)}}function Gr(e,t){var s=e.updateQueue,a=e.alternate;if(null!==a&&s===(a=a.updateQueue)){var l=null,r=null;if(null!==(s=s.firstBaseUpdate)){do{var n={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};null===r?l=r=n:r=r.next=n,s=s.next}while(null!==s);null===r?l=r=t:r=r.next=t}else l=r=t;return s={baseState:a.baseState,firstBaseUpdate:l,lastBaseUpdate:r,shared:a.shared,effects:a.effects},void(e.updateQueue=s)}null===(e=s.lastBaseUpdate)?s.firstBaseUpdate=t:e.next=t,s.lastBaseUpdate=t}function Yr(e,t,s,a){var l=e.updateQueue;Wr=!1;var r=l.firstBaseUpdate,n=l.lastBaseUpdate,i=l.shared.pending;if(null!==i){l.shared.pending=null;var o=i,d=o.next;o.next=null,null===n?r=d:n.next=d,n=o;var c=e.alternate;null!==c&&((i=(c=c.updateQueue).lastBaseUpdate)!==n&&(null===i?c.firstBaseUpdate=d:i.next=d,c.lastBaseUpdate=o))}if(null!==r){var u=l.baseState;for(n=0,c=d=o=null,i=r;;){var m=i.lane,x=i.eventTime;if((a&m)===m){null!==c&&(c=c.next={eventTime:x,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var h=e,p=i;switch(m=t,x=s,p.tag){case 1:if("function"===typeof(h=p.payload)){u=h.call(x,u,m);break e}u=h;break e;case 3:h.flags=-65537&h.flags|128;case 0:if(null===(m="function"===typeof(h=p.payload)?h.call(x,u,m):h)||void 0===m)break e;u=M({},u,m);break e;case 2:Wr=!0}}null!==i.callback&&0!==i.lane&&(e.flags|=64,null===(m=l.effects)?l.effects=[i]:m.push(i))}else x={eventTime:x,lane:m,tag:i.tag,payload:i.payload,callback:i.callback,next:null},null===c?(d=c=x,o=u):c=c.next=x,n|=m;if(null===(i=i.next)){if(null===(i=l.shared.pending))break;i=(m=i).next,m.next=null,l.lastBaseUpdate=m,l.shared.pending=null}}if(null===c&&(o=u),l.baseState=o,l.firstBaseUpdate=d,l.lastBaseUpdate=c,null!==(t=l.shared.interleaved)){l=t;do{n|=l.lane,l=l.next}while(l!==t)}else null===r&&(l.shared.lanes=0);Vo|=n,e.lanes=n,e.memoizedState=u}}function $r(e,t,s){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var a=e[t],l=a.callback;if(null!==l){if(a.callback=null,a=s,"function"!==typeof l)throw Error(r(191,l));l.call(a)}}}var Zr={},Xr=_l(Zr),en=_l(Zr),tn=_l(Zr);function sn(e){if(e===Zr)throw Error(r(174));return e}function an(e,t){switch(Rl(tn,t),Rl(en,e),Rl(Xr,Zr),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}El(Xr),Rl(Xr,t)}function ln(){El(Xr),El(en),El(tn)}function rn(e){sn(tn.current);var t=sn(Xr.current),s=oe(t,e.type);t!==s&&(Rl(en,e),Rl(Xr,s))}function nn(e){en.current===e&&(El(Xr),El(en))}var on=_l(0);function dn(e){for(var t=e;null!==t;){if(13===t.tag){var s=t.memoizedState;if(null!==s&&(null===(s=s.dehydrated)||"$?"===s.data||"$!"===s.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var cn=[];function un(){for(var e=0;e<cn.length;e++)cn[e]._workInProgressVersionPrimary=null;cn.length=0}var mn=v.ReactCurrentDispatcher,xn=v.ReactCurrentBatchConfig,hn=0,pn=null,bn=null,gn=null,fn=!1,yn=!1,vn=0,jn=0;function wn(){throw Error(r(321))}function Nn(e,t){if(null===t)return!1;for(var s=0;s<t.length&&s<e.length;s++)if(!ra(e[s],t[s]))return!1;return!0}function Sn(e,t,s,a,l,n){if(hn=n,pn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,mn.current=null===e||null===e.memoizedState?ii:oi,e=s(a,l),yn){n=0;do{if(yn=!1,vn=0,25<=n)throw Error(r(301));n+=1,gn=bn=null,t.updateQueue=null,mn.current=di,e=s(a,l)}while(yn)}if(mn.current=ni,t=null!==bn&&null!==bn.next,hn=0,gn=bn=pn=null,fn=!1,t)throw Error(r(300));return e}function Cn(){var e=0!==vn;return vn=0,e}function kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===gn?pn.memoizedState=gn=e:gn=gn.next=e,gn}function Pn(){if(null===bn){var e=pn.alternate;e=null!==e?e.memoizedState:null}else e=bn.next;var t=null===gn?pn.memoizedState:gn.next;if(null!==t)gn=t,bn=e;else{if(null===e)throw Error(r(310));e={memoizedState:(bn=e).memoizedState,baseState:bn.baseState,baseQueue:bn.baseQueue,queue:bn.queue,next:null},null===gn?pn.memoizedState=gn=e:gn=gn.next=e}return gn}function An(e,t){return"function"===typeof t?t(e):t}function In(e){var t=Pn(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=bn,l=a.baseQueue,n=s.pending;if(null!==n){if(null!==l){var i=l.next;l.next=n.next,n.next=i}a.baseQueue=l=n,s.pending=null}if(null!==l){n=l.next,a=a.baseState;var o=i=null,d=null,c=n;do{var u=c.lane;if((hn&u)===u)null!==d&&(d=d.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),a=c.hasEagerState?c.eagerState:e(a,c.action);else{var m={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};null===d?(o=d=m,i=a):d=d.next=m,pn.lanes|=u,Vo|=u}c=c.next}while(null!==c&&c!==n);null===d?i=a:d.next=o,ra(a,t.memoizedState)||(Pi=!0),t.memoizedState=a,t.baseState=i,t.baseQueue=d,s.lastRenderedState=a}if(null!==(e=s.interleaved)){l=e;do{n=l.lane,pn.lanes|=n,Vo|=n,l=l.next}while(l!==e)}else null===l&&(s.lanes=0);return[t.memoizedState,s.dispatch]}function Dn(e){var t=Pn(),s=t.queue;if(null===s)throw Error(r(311));s.lastRenderedReducer=e;var a=s.dispatch,l=s.pending,n=t.memoizedState;if(null!==l){s.pending=null;var i=l=l.next;do{n=e(n,i.action),i=i.next}while(i!==l);ra(n,t.memoizedState)||(Pi=!0),t.memoizedState=n,null===t.baseQueue&&(t.baseState=n),s.lastRenderedState=n}return[n,a]}function Tn(){}function _n(e,t){var s=pn,a=Pn(),l=t(),n=!ra(a.memoizedState,l);if(n&&(a.memoizedState=l,Pi=!0),a=a.queue,Hn(Ln.bind(null,s,a,e),[e]),a.getSnapshot!==t||n||null!==gn&&1&gn.memoizedState.tag){if(s.flags|=2048,Bn(9,Rn.bind(null,s,a,l,t),void 0,null),null===Fo)throw Error(r(349));0!==(30&hn)||En(s,t,l)}return l}function En(e,t,s){e.flags|=16384,e={getSnapshot:t,value:s},null===(t=pn.updateQueue)?(t={lastEffect:null,stores:null},pn.updateQueue=t,t.stores=[e]):null===(s=t.stores)?t.stores=[e]:s.push(e)}function Rn(e,t,s,a){t.value=s,t.getSnapshot=a,On(t)&&Mn(e)}function Ln(e,t,s){return s(function(){On(t)&&Mn(e)})}function On(e){var t=e.getSnapshot;e=e.value;try{var s=t();return!ra(e,s)}catch(ba){return!0}}function Mn(e){var t=Ur(e,1);null!==t&&ud(t,e,1,-1)}function Fn(e){var t=kn();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:An,lastRenderedState:e},t.queue=e,e=e.dispatch=si.bind(null,pn,e),[t.memoizedState,e]}function Bn(e,t,s,a){return e={tag:e,create:t,destroy:s,deps:a,next:null},null===(t=pn.updateQueue)?(t={lastEffect:null,stores:null},pn.updateQueue=t,t.lastEffect=e.next=e):null===(s=t.lastEffect)?t.lastEffect=e.next=e:(a=s.next,s.next=e,e.next=a,t.lastEffect=e),e}function qn(){return Pn().memoizedState}function zn(e,t,s,a){var l=kn();pn.flags|=e,l.memoizedState=Bn(1|t,s,void 0,void 0===a?null:a)}function Un(e,t,s,a){var l=Pn();a=void 0===a?null:a;var r=void 0;if(null!==bn){var n=bn.memoizedState;if(r=n.destroy,null!==a&&Nn(a,n.deps))return void(l.memoizedState=Bn(t,s,r,a))}pn.flags|=e,l.memoizedState=Bn(1|t,s,r,a)}function Wn(e,t){return zn(8390656,8,e,t)}function Hn(e,t){return Un(2048,8,e,t)}function Vn(e,t){return Un(4,2,e,t)}function Jn(e,t){return Un(4,4,e,t)}function Kn(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qn(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,Un(4,4,Kn.bind(null,t,e),s)}function Gn(){}function Yn(e,t){var s=Pn();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&Nn(t,a[1])?a[0]:(s.memoizedState=[e,t],e)}function $n(e,t){var s=Pn();t=void 0===t?null:t;var a=s.memoizedState;return null!==a&&null!==t&&Nn(t,a[1])?a[0]:(e=e(),s.memoizedState=[e,t],e)}function Zn(e,t,s){return 0===(21&hn)?(e.baseState&&(e.baseState=!1,Pi=!0),e.memoizedState=s):(ra(s,t)||(s=ht(),pn.lanes|=s,Vo|=s,e.baseState=!0),t)}function Xn(e,t){var s=ft;ft=0!==s&&4>s?s:4,e(!0);var a=xn.transition;xn.transition={};try{e(!1),t()}finally{ft=s,xn.transition=a}}function ei(){return Pn().memoizedState}function ti(e,t,s){var a=cd(e);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},ai(e))li(t,s);else if(null!==(s=zr(e,t,s,a))){ud(s,e,a,dd()),ri(s,t,a)}}function si(e,t,s){var a=cd(e),l={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(ai(e))li(t,l);else{var r=e.alternate;if(0===e.lanes&&(null===r||0===r.lanes)&&null!==(r=t.lastRenderedReducer))try{var n=t.lastRenderedState,i=r(n,s);if(l.hasEagerState=!0,l.eagerState=i,ra(i,n)){var o=t.interleaved;return null===o?(l.next=l,qr(t)):(l.next=o.next,o.next=l),void(t.interleaved=l)}}catch(oa){}null!==(s=zr(e,t,l,a))&&(ud(s,e,a,l=dd()),ri(s,t,a))}}function ai(e){var t=e.alternate;return e===pn||null!==t&&t===pn}function li(e,t){yn=fn=!0;var s=e.pending;null===s?t.next=t:(t.next=s.next,s.next=t),e.pending=t}function ri(e,t,s){if(0!==(4194240&s)){var a=t.lanes;s|=a&=e.pendingLanes,t.lanes=s,gt(e,s)}}var ni={readContext:Fr,useCallback:wn,useContext:wn,useEffect:wn,useImperativeHandle:wn,useInsertionEffect:wn,useLayoutEffect:wn,useMemo:wn,useReducer:wn,useRef:wn,useState:wn,useDebugValue:wn,useDeferredValue:wn,useTransition:wn,useMutableSource:wn,useSyncExternalStore:wn,useId:wn,unstable_isNewReconciler:!1},ii={readContext:Fr,useCallback:function(e,t){return kn().memoizedState=[e,void 0===t?null:t],e},useContext:Fr,useEffect:Wn,useImperativeHandle:function(e,t,s){return s=null!==s&&void 0!==s?s.concat([e]):null,zn(4194308,4,Kn.bind(null,t,e),s)},useLayoutEffect:function(e,t){return zn(4194308,4,e,t)},useInsertionEffect:function(e,t){return zn(4,2,e,t)},useMemo:function(e,t){var s=kn();return t=void 0===t?null:t,e=e(),s.memoizedState=[e,t],e},useReducer:function(e,t,s){var a=kn();return t=void 0!==s?s(t):t,a.memoizedState=a.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},a.queue=e,e=e.dispatch=ti.bind(null,pn,e),[a.memoizedState,e]},useRef:function(e){return e={current:e},kn().memoizedState=e},useState:Fn,useDebugValue:Gn,useDeferredValue:function(e){return kn().memoizedState=e},useTransition:function(){var e=Fn(!1),t=e[0];return e=Xn.bind(null,e[1]),kn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,s){var a=pn,l=kn();if(mr){if(void 0===s)throw Error(r(407));s=s()}else{if(s=t(),null===Fo)throw Error(r(349));0!==(30&hn)||En(a,t,s)}l.memoizedState=s;var n={value:s,getSnapshot:t};return l.queue=n,Wn(Ln.bind(null,a,n,e),[e]),a.flags|=2048,Bn(9,Rn.bind(null,a,n,s,t),void 0,null),s},useId:function(){var e=kn(),t=Fo.identifierPrefix;if(mr){var s=rr;t=":"+t+"R"+(s=(lr&~(1<<32-rt(lr)-1)).toString(32)+s),0<(s=vn++)&&(t+="H"+s.toString(32)),t+=":"}else t=":"+t+"r"+(s=jn++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},oi={readContext:Fr,useCallback:Yn,useContext:Fr,useEffect:Hn,useImperativeHandle:Qn,useInsertionEffect:Vn,useLayoutEffect:Jn,useMemo:$n,useReducer:In,useRef:qn,useState:function(){return In(An)},useDebugValue:Gn,useDeferredValue:function(e){return Zn(Pn(),bn.memoizedState,e)},useTransition:function(){return[In(An)[0],Pn().memoizedState]},useMutableSource:Tn,useSyncExternalStore:_n,useId:ei,unstable_isNewReconciler:!1},di={readContext:Fr,useCallback:Yn,useContext:Fr,useEffect:Hn,useImperativeHandle:Qn,useInsertionEffect:Vn,useLayoutEffect:Jn,useMemo:$n,useReducer:Dn,useRef:qn,useState:function(){return Dn(An)},useDebugValue:Gn,useDeferredValue:function(e){var t=Pn();return null===bn?t.memoizedState=e:Zn(t,bn.memoizedState,e)},useTransition:function(){return[Dn(An)[0],Pn().memoizedState]},useMutableSource:Tn,useSyncExternalStore:_n,useId:ei,unstable_isNewReconciler:!1};function ci(e,t){if(e&&e.defaultProps){for(var s in t=M({},t),e=e.defaultProps)void 0===t[s]&&(t[s]=e[s]);return t}return t}function ui(e,t,s,a){s=null===(s=s(a,t=e.memoizedState))||void 0===s?t:M({},t,s),e.memoizedState=s,0===e.lanes&&(e.updateQueue.baseState=s)}var mi={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,s){e=e._reactInternals;var a=dd(),l=cd(e),r=Jr(a,l);r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=Kr(e,r,l))&&(ud(t,e,l,a),Qr(t,e,l))},enqueueReplaceState:function(e,t,s){e=e._reactInternals;var a=dd(),l=cd(e),r=Jr(a,l);r.tag=1,r.payload=t,void 0!==s&&null!==s&&(r.callback=s),null!==(t=Kr(e,r,l))&&(ud(t,e,l,a),Qr(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var s=dd(),a=cd(e),l=Jr(s,a);l.tag=2,void 0!==t&&null!==t&&(l.callback=t),null!==(t=Kr(e,l,a))&&(ud(t,e,a,s),Qr(t,e,a))}};function xi(e,t,s,a,l,r,n){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(a,r,n):!t.prototype||!t.prototype.isPureReactComponent||(!ca(s,a)||!ca(l,r))}function hi(e,t,s){var a=!1,l=Ll,r=t.contextType;return"object"===typeof r&&null!==r?r=Fr(r):(l=ql(t)?Fl:Ol.current,r=(a=null!==(a=t.contextTypes)&&void 0!==a)?Bl(e,l):Ll),t=new t(s,r),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=mi,e.stateNode=t,t._reactInternals=e,a&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=r),t}function pi(e,t,s,a){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(s,a),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(s,a),t.state!==e&&mi.enqueueReplaceState(t,t.state,null)}function bi(e,t,s,a){var l=e.stateNode;l.props=s,l.state=e.memoizedState,l.refs={},Hr(e);var r=t.contextType;"object"===typeof r&&null!==r?l.context=Fr(r):(r=ql(t)?Fl:Ol.current,l.context=Bl(e,r)),l.state=e.memoizedState,"function"===typeof(r=t.getDerivedStateFromProps)&&(ui(e,t,r,s),l.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof l.getSnapshotBeforeUpdate||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||(t=l.state,"function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount(),t!==l.state&&mi.enqueueReplaceState(l,l.state,null),Yr(e,s,l,a),l.state=e.memoizedState),"function"===typeof l.componentDidMount&&(e.flags|=4194308)}function gi(e,t){try{var s="",a=t;do{s+=z(a),a=a.return}while(a);var l=s}catch(ga){l="\nError generating stack: "+ga.message+"\n"+ga.stack}return{value:e,source:t,stack:l,digest:null}}function fi(e,t,s){return{value:e,source:null,stack:null!=s?s:null,digest:null!=t?t:null}}function yi(e,t){try{console.error(t.value)}catch(ma){setTimeout(function(){throw ma})}}var vi="function"===typeof WeakMap?WeakMap:Map;function ji(e,t,s){(s=Jr(-1,s)).tag=3,s.payload={element:null};var a=t.value;return s.callback=function(){Xo||(Xo=!0,ed=a),yi(0,t)},s}function wi(e,t,s){(s=Jr(-1,s)).tag=3;var a=e.type.getDerivedStateFromError;if("function"===typeof a){var l=t.value;s.payload=function(){return a(l)},s.callback=function(){yi(0,t)}}var r=e.stateNode;return null!==r&&"function"===typeof r.componentDidCatch&&(s.callback=function(){yi(0,t),"function"!==typeof a&&(null===td?td=new Set([this]):td.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),s}function Ni(e,t,s){var a=e.pingCache;if(null===a){a=e.pingCache=new vi;var l=new Set;a.set(t,l)}else void 0===(l=a.get(t))&&(l=new Set,a.set(t,l));l.has(s)||(l.add(s),e=Rd.bind(null,e,t,s),t.then(e,e))}function Si(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ci(e,t,s,a,l){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,s.flags|=131072,s.flags&=-52805,1===s.tag&&(null===s.alternate?s.tag=17:((t=Jr(-1,1)).tag=2,Kr(s,t,1))),s.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var ki=v.ReactCurrentOwner,Pi=!1;function Ai(e,t,s,a){t.child=null===e?Ir(t,null,s,a):Ar(t,e.child,s,a)}function Ii(e,t,s,a,l){s=s.render;var r=t.ref;return Mr(t,l),a=Sn(e,t,s,a,r,l),s=Cn(),null===e||Pi?(mr&&s&&or(t),t.flags|=1,Ai(e,t,a,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Zi(e,t,l))}function Di(e,t,s,a,l){if(null===e){var r=s.type;return"function"!==typeof r||zd(r)||void 0!==r.defaultProps||null!==s.compare||void 0!==s.defaultProps?((e=Wd(s.type,null,a,t,t.mode,l)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=r,Ti(e,t,r,a,l))}if(r=e.child,0===(e.lanes&l)){var n=r.memoizedProps;if((s=null!==(s=s.compare)?s:ca)(n,a)&&e.ref===t.ref)return Zi(e,t,l)}return t.flags|=1,(e=Ud(r,a)).ref=t.ref,e.return=t,t.child=e}function Ti(e,t,s,a,l){if(null!==e){var r=e.memoizedProps;if(ca(r,a)&&e.ref===t.ref){if(Pi=!1,t.pendingProps=a=r,0===(e.lanes&l))return t.lanes=e.lanes,Zi(e,t,l);0!==(131072&e.flags)&&(Pi=!0)}}return Ri(e,t,s,a,l)}function _i(e,t,s){var a=t.pendingProps,l=a.children,r=null!==e?e.memoizedState:null;if("hidden"===a.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rl(Uo,zo),zo|=s;else{if(0===(1073741824&s))return e=null!==r?r.baseLanes|s:s,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Rl(Uo,zo),zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=null!==r?r.baseLanes:s,Rl(Uo,zo),zo|=a}else null!==r?(a=r.baseLanes|s,t.memoizedState=null):a=s,Rl(Uo,zo),zo|=a;return Ai(e,t,l,s),t.child}function Ei(e,t){var s=t.ref;(null===e&&null!==s||null!==e&&e.ref!==s)&&(t.flags|=512,t.flags|=2097152)}function Ri(e,t,s,a,l){var r=ql(s)?Fl:Ol.current;return r=Bl(t,r),Mr(t,l),s=Sn(e,t,s,a,r,l),a=Cn(),null===e||Pi?(mr&&a&&or(t),t.flags|=1,Ai(e,t,s,l),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Zi(e,t,l))}function Li(e,t,s,a,l){if(ql(s)){var r=!0;Hl(t)}else r=!1;if(Mr(t,l),null===t.stateNode)$i(e,t),hi(t,s,a),bi(t,s,a,l),a=!0;else if(null===e){var n=t.stateNode,i=t.memoizedProps;n.props=i;var o=n.context,d=s.contextType;"object"===typeof d&&null!==d?d=Fr(d):d=Bl(t,d=ql(s)?Fl:Ol.current);var c=s.getDerivedStateFromProps,u="function"===typeof c||"function"===typeof n.getSnapshotBeforeUpdate;u||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==a||o!==d)&&pi(t,n,a,d),Wr=!1;var m=t.memoizedState;n.state=m,Yr(t,a,n,l),o=t.memoizedState,i!==a||m!==o||Ml.current||Wr?("function"===typeof c&&(ui(t,s,c,a),o=t.memoizedState),(i=Wr||xi(t,s,i,a,m,o,d))?(u||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||("function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount()),"function"===typeof n.componentDidMount&&(t.flags|=4194308)):("function"===typeof n.componentDidMount&&(t.flags|=4194308),t.memoizedProps=a,t.memoizedState=o),n.props=a,n.state=o,n.context=d,a=i):("function"===typeof n.componentDidMount&&(t.flags|=4194308),a=!1)}else{n=t.stateNode,Vr(e,t),i=t.memoizedProps,d=t.type===t.elementType?i:ci(t.type,i),n.props=d,u=t.pendingProps,m=n.context,"object"===typeof(o=s.contextType)&&null!==o?o=Fr(o):o=Bl(t,o=ql(s)?Fl:Ol.current);var x=s.getDerivedStateFromProps;(c="function"===typeof x||"function"===typeof n.getSnapshotBeforeUpdate)||"function"!==typeof n.UNSAFE_componentWillReceiveProps&&"function"!==typeof n.componentWillReceiveProps||(i!==u||m!==o)&&pi(t,n,a,o),Wr=!1,m=t.memoizedState,n.state=m,Yr(t,a,n,l);var h=t.memoizedState;i!==u||m!==h||Ml.current||Wr?("function"===typeof x&&(ui(t,s,x,a),h=t.memoizedState),(d=Wr||xi(t,s,d,a,m,h,o)||!1)?(c||"function"!==typeof n.UNSAFE_componentWillUpdate&&"function"!==typeof n.componentWillUpdate||("function"===typeof n.componentWillUpdate&&n.componentWillUpdate(a,h,o),"function"===typeof n.UNSAFE_componentWillUpdate&&n.UNSAFE_componentWillUpdate(a,h,o)),"function"===typeof n.componentDidUpdate&&(t.flags|=4),"function"===typeof n.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=a,t.memoizedState=h),n.props=a,n.state=h,n.context=o,a=d):("function"!==typeof n.componentDidUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof n.getSnapshotBeforeUpdate||i===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),a=!1)}return Oi(e,t,s,a,r,l)}function Oi(e,t,s,a,l,r){Ei(e,t);var n=0!==(128&t.flags);if(!a&&!n)return l&&Vl(t,s,!1),Zi(e,t,r);a=t.stateNode,ki.current=t;var i=n&&"function"!==typeof s.getDerivedStateFromError?null:a.render();return t.flags|=1,null!==e&&n?(t.child=Ar(t,e.child,null,r),t.child=Ar(t,null,i,r)):Ai(e,t,i,r),t.memoizedState=a.state,l&&Vl(t,s,!0),t.child}function Mi(e){var t=e.stateNode;t.pendingContext?Ul(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ul(0,t.context,!1),an(e,t.containerInfo)}function Fi(e,t,s,a,l){return jr(),wr(l),t.flags|=256,Ai(e,t,s,a),t.child}var Bi,qi,zi,Ui,Wi={dehydrated:null,treeContext:null,retryLane:0};function Hi(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vi(e,t,s){var a,l=t.pendingProps,n=on.current,i=!1,o=0!==(128&t.flags);if((a=o)||(a=(null===e||null!==e.memoizedState)&&0!==(2&n)),a?(i=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(n|=1),Rl(on,1&n),null===e)return gr(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(o=l.children,e=l.fallback,i?(l=t.mode,i=t.child,o={mode:"hidden",children:o},0===(1&l)&&null!==i?(i.childLanes=0,i.pendingProps=o):i=Vd(o,l,0,null),e=Hd(e,l,s,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Hi(s),t.memoizedState=Wi,e):Ji(t,o));if(null!==(n=e.memoizedState)&&null!==(a=n.dehydrated))return function(e,t,s,a,l,n,i){if(s)return 256&t.flags?(t.flags&=-257,Ki(e,t,i,a=fi(Error(r(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(n=a.fallback,l=t.mode,a=Vd({mode:"visible",children:a.children},l,0,null),(n=Hd(n,l,i,null)).flags|=2,a.return=t,n.return=t,a.sibling=n,t.child=a,0!==(1&t.mode)&&Ar(t,e.child,null,i),t.child.memoizedState=Hi(i),t.memoizedState=Wi,n);if(0===(1&t.mode))return Ki(e,t,i,null);if("$!"===l.data){if(a=l.nextSibling&&l.nextSibling.dataset)var o=a.dgst;return a=o,Ki(e,t,i,a=fi(n=Error(r(419)),a,void 0))}if(o=0!==(i&e.childLanes),Pi||o){if(null!==(a=Fo)){switch(i&-i){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(l=0!==(l&(a.suspendedLanes|i))?0:l)&&l!==n.retryLane&&(n.retryLane=l,Ur(e,l),ud(a,e,l,-1))}return Sd(),Ki(e,t,i,a=fi(Error(r(421))))}return"$?"===l.data?(t.flags|=128,t.child=e.child,t=Od.bind(null,e),l._reactRetry=t,null):(e=n.treeContext,ur=gl(l.nextSibling),cr=t,mr=!0,xr=null,null!==e&&(tr[sr++]=lr,tr[sr++]=rr,tr[sr++]=ar,lr=e.id,rr=e.overflow,ar=t),t=Ji(t,a.children),t.flags|=4096,t)}(e,t,o,l,a,n,s);if(i){i=l.fallback,o=t.mode,a=(n=e.child).sibling;var d={mode:"hidden",children:l.children};return 0===(1&o)&&t.child!==n?((l=t.child).childLanes=0,l.pendingProps=d,t.deletions=null):(l=Ud(n,d)).subtreeFlags=14680064&n.subtreeFlags,null!==a?i=Ud(a,i):(i=Hd(i,o,s,null)).flags|=2,i.return=t,l.return=t,l.sibling=i,t.child=l,l=i,i=t.child,o=null===(o=e.child.memoizedState)?Hi(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~s,t.memoizedState=Wi,l}return e=(i=e.child).sibling,l=Ud(i,{mode:"visible",children:l.children}),0===(1&t.mode)&&(l.lanes=s),l.return=t,l.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=l,t.memoizedState=null,l}function Ji(e,t){return(t=Vd({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Ki(e,t,s,a){return null!==a&&wr(a),Ar(t,e.child,null,s),(e=Ji(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Qi(e,t,s){e.lanes|=t;var a=e.alternate;null!==a&&(a.lanes|=t),Or(e.return,t,s)}function Gi(e,t,s,a,l){var r=e.memoizedState;null===r?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:l}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=a,r.tail=s,r.tailMode=l)}function Yi(e,t,s){var a=t.pendingProps,l=a.revealOrder,r=a.tail;if(Ai(e,t,a.children,s),0!==(2&(a=on.current)))a=1&a|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Qi(e,s,t);else if(19===e.tag)Qi(e,s,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}a&=1}if(Rl(on,a),0===(1&t.mode))t.memoizedState=null;else switch(l){case"forwards":for(s=t.child,l=null;null!==s;)null!==(e=s.alternate)&&null===dn(e)&&(l=s),s=s.sibling;null===(s=l)?(l=t.child,t.child=null):(l=s.sibling,s.sibling=null),Gi(t,!1,l,s,r);break;case"backwards":for(s=null,l=t.child,t.child=null;null!==l;){if(null!==(e=l.alternate)&&null===dn(e)){t.child=l;break}e=l.sibling,l.sibling=s,s=l,l=e}Gi(t,!0,s,null,r);break;case"together":Gi(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function $i(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Zi(e,t,s){if(null!==e&&(t.dependencies=e.dependencies),Vo|=t.lanes,0===(s&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(r(153));if(null!==t.child){for(s=Ud(e=t.child,e.pendingProps),t.child=s,s.return=t;null!==e.sibling;)e=e.sibling,(s=s.sibling=Ud(e,e.pendingProps)).return=t;s.sibling=null}return t.child}function Xi(e,t){if(!mr)switch(e.tailMode){case"hidden":t=e.tail;for(var s=null;null!==t;)null!==t.alternate&&(s=t),t=t.sibling;null===s?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var a=null;null!==s;)null!==s.alternate&&(a=s),s=s.sibling;null===a?t||null===e.tail?e.tail=null:e.tail.sibling=null:a.sibling=null}}function eo(e){var t=null!==e.alternate&&e.alternate.child===e.child,s=0,a=0;if(t)for(var l=e.child;null!==l;)s|=l.lanes|l.childLanes,a|=14680064&l.subtreeFlags,a|=14680064&l.flags,l.return=e,l=l.sibling;else for(l=e.child;null!==l;)s|=l.lanes|l.childLanes,a|=l.subtreeFlags,a|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=a,e.childLanes=s,t}function to(e,t,s){var a=t.pendingProps;switch(dr(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return eo(t),null;case 1:case 17:return ql(t.type)&&zl(),eo(t),null;case 3:return a=t.stateNode,ln(),El(Ml),El(Ol),un(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),null!==e&&null!==e.child||(yr(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==xr&&(pd(xr),xr=null))),qi(e,t),eo(t),null;case 5:nn(t);var l=sn(tn.current);if(s=t.type,null!==e&&null!=t.stateNode)zi(e,t,s,a,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!a){if(null===t.stateNode)throw Error(r(166));return eo(t),null}if(e=sn(Xr.current),yr(t)){a=t.stateNode,s=t.type;var n=t.memoizedProps;switch(a[vl]=t,a[jl]=n,e=0!==(1&t.mode),s){case"dialog":Ja("cancel",a),Ja("close",a);break;case"iframe":case"object":case"embed":Ja("load",a);break;case"video":case"audio":for(l=0;l<Ua.length;l++)Ja(Ua[l],a);break;case"source":Ja("error",a);break;case"img":case"image":case"link":Ja("error",a),Ja("load",a);break;case"details":Ja("toggle",a);break;case"input":Y(a,n),Ja("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!n.multiple},Ja("invalid",a);break;case"textarea":le(a,n),Ja("invalid",a)}for(var o in ge(s,n),l=null,n)if(n.hasOwnProperty(o)){var d=n[o];"children"===o?"string"===typeof d?a.textContent!==d&&(!0!==n.suppressHydrationWarning&&nl(a.textContent,d,e),l=["children",d]):"number"===typeof d&&a.textContent!==""+d&&(!0!==n.suppressHydrationWarning&&nl(a.textContent,d,e),l=["children",""+d]):i.hasOwnProperty(o)&&null!=d&&"onScroll"===o&&Ja("scroll",a)}switch(s){case"input":J(a),X(a,n,!0);break;case"textarea":J(a),ne(a);break;case"select":case"option":break;default:"function"===typeof n.onClick&&(a.onclick=il)}a=l,t.updateQueue=a,null!==a&&(t.flags|=4)}else{o=9===l.nodeType?l:l.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ie(s)),"http://www.w3.org/1999/xhtml"===e?"script"===s?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof a.is?e=o.createElement(s,{is:a.is}):(e=o.createElement(s),"select"===s&&(o=e,a.multiple?o.multiple=!0:a.size&&(o.size=a.size))):e=o.createElementNS(e,s),e[vl]=t,e[jl]=a,Bi(e,t,!1,!1),t.stateNode=e;e:{switch(o=fe(s,a),s){case"dialog":Ja("cancel",e),Ja("close",e),l=a;break;case"iframe":case"object":case"embed":Ja("load",e),l=a;break;case"video":case"audio":for(l=0;l<Ua.length;l++)Ja(Ua[l],e);l=a;break;case"source":Ja("error",e),l=a;break;case"img":case"image":case"link":Ja("error",e),Ja("load",e),l=a;break;case"details":Ja("toggle",e),l=a;break;case"input":Y(e,a),l=G(e,a),Ja("invalid",e);break;case"option":default:l=a;break;case"select":e._wrapperState={wasMultiple:!!a.multiple},l=M({},a,{value:void 0}),Ja("invalid",e);break;case"textarea":le(e,a),l=ae(e,a),Ja("invalid",e)}for(n in ge(s,l),d=l)if(d.hasOwnProperty(n)){var c=d[n];"style"===n?pe(e,c):"dangerouslySetInnerHTML"===n?null!=(c=c?c.__html:void 0)&&ce(e,c):"children"===n?"string"===typeof c?("textarea"!==s||""!==c)&&ue(e,c):"number"===typeof c&&ue(e,""+c):"suppressContentEditableWarning"!==n&&"suppressHydrationWarning"!==n&&"autoFocus"!==n&&(i.hasOwnProperty(n)?null!=c&&"onScroll"===n&&Ja("scroll",e):null!=c&&y(e,n,c,o))}switch(s){case"input":J(e),X(e,a,!1);break;case"textarea":J(e),ne(e);break;case"option":null!=a.value&&e.setAttribute("value",""+H(a.value));break;case"select":e.multiple=!!a.multiple,null!=(n=a.value)?se(e,!!a.multiple,n,!1):null!=a.defaultValue&&se(e,!!a.multiple,a.defaultValue,!0);break;default:"function"===typeof l.onClick&&(e.onclick=il)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return eo(t),null;case 6:if(e&&null!=t.stateNode)Ui(e,t,e.memoizedProps,a);else{if("string"!==typeof a&&null===t.stateNode)throw Error(r(166));if(s=sn(tn.current),sn(Xr.current),yr(t)){if(a=t.stateNode,s=t.memoizedProps,a[vl]=t,(n=a.nodeValue!==s)&&null!==(e=cr))switch(e.tag){case 3:nl(a.nodeValue,s,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&nl(a.nodeValue,s,0!==(1&e.mode))}n&&(t.flags|=4)}else(a=(9===s.nodeType?s:s.ownerDocument).createTextNode(a))[vl]=t,t.stateNode=a}return eo(t),null;case 13:if(El(on),a=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(mr&&null!==ur&&0!==(1&t.mode)&&0===(128&t.flags))vr(),jr(),t.flags|=98560,n=!1;else if(n=yr(t),null!==a&&null!==a.dehydrated){if(null===e){if(!n)throw Error(r(318));if(!(n=null!==(n=t.memoizedState)?n.dehydrated:null))throw Error(r(317));n[vl]=t}else jr(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;eo(t),n=!1}else null!==xr&&(pd(xr),xr=null),n=!0;if(!n)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=s,t):((a=null!==a)!==(null!==e&&null!==e.memoizedState)&&a&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&on.current)?0===Wo&&(Wo=3):Sd())),null!==t.updateQueue&&(t.flags|=4),eo(t),null);case 4:return ln(),qi(e,t),null===e&&Ga(t.stateNode.containerInfo),eo(t),null;case 10:return Lr(t.type._context),eo(t),null;case 19:if(El(on),null===(n=t.memoizedState))return eo(t),null;if(a=0!==(128&t.flags),null===(o=n.rendering))if(a)Xi(n,!1);else{if(0!==Wo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=dn(e))){for(t.flags|=128,Xi(n,!1),null!==(a=o.updateQueue)&&(t.updateQueue=a,t.flags|=4),t.subtreeFlags=0,a=s,s=t.child;null!==s;)e=a,(n=s).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=e,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,e=o.dependencies,n.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),s=s.sibling;return Rl(on,1&on.current|2),t.child}e=e.sibling}null!==n.tail&&Ye()>$o&&(t.flags|=128,a=!0,Xi(n,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=dn(o))){if(t.flags|=128,a=!0,null!==(s=e.updateQueue)&&(t.updateQueue=s,t.flags|=4),Xi(n,!0),null===n.tail&&"hidden"===n.tailMode&&!o.alternate&&!mr)return eo(t),null}else 2*Ye()-n.renderingStartTime>$o&&1073741824!==s&&(t.flags|=128,a=!0,Xi(n,!1),t.lanes=4194304);n.isBackwards?(o.sibling=t.child,t.child=o):(null!==(s=n.last)?s.sibling=o:t.child=o,n.last=o)}return null!==n.tail?(t=n.tail,n.rendering=t,n.tail=t.sibling,n.renderingStartTime=Ye(),t.sibling=null,s=on.current,Rl(on,a?1&s|2:1&s),t):(eo(t),null);case 22:case 23:return vd(),a=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==a&&(t.flags|=8192),a&&0!==(1&t.mode)?0!==(1073741824&zo)&&(eo(t),6&t.subtreeFlags&&(t.flags|=8192)):eo(t),null;case 24:case 25:return null}throw Error(r(156,t.tag))}function so(e,t){switch(dr(t),t.tag){case 1:return ql(t.type)&&zl(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ln(),El(Ml),El(Ol),un(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return nn(t),null;case 13:if(El(on),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(r(340));jr()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return El(on),null;case 4:return ln(),null;case 10:return Lr(t.type._context),null;case 22:case 23:return vd(),null;default:return null}}Bi=function(e,t){for(var s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break;for(;null===s.sibling;){if(null===s.return||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}},qi=function(){},zi=function(e,t,s,a){var l=e.memoizedProps;if(l!==a){e=t.stateNode,sn(Xr.current);var r,n=null;switch(s){case"input":l=G(e,l),a=G(e,a),n=[];break;case"select":l=M({},l,{value:void 0}),a=M({},a,{value:void 0}),n=[];break;case"textarea":l=ae(e,l),a=ae(e,a),n=[];break;default:"function"!==typeof l.onClick&&"function"===typeof a.onClick&&(e.onclick=il)}for(c in ge(s,a),s=null,l)if(!a.hasOwnProperty(c)&&l.hasOwnProperty(c)&&null!=l[c])if("style"===c){var o=l[c];for(r in o)o.hasOwnProperty(r)&&(s||(s={}),s[r]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(i.hasOwnProperty(c)?n||(n=[]):(n=n||[]).push(c,null));for(c in a){var d=a[c];if(o=null!=l?l[c]:void 0,a.hasOwnProperty(c)&&d!==o&&(null!=d||null!=o))if("style"===c)if(o){for(r in o)!o.hasOwnProperty(r)||d&&d.hasOwnProperty(r)||(s||(s={}),s[r]="");for(r in d)d.hasOwnProperty(r)&&o[r]!==d[r]&&(s||(s={}),s[r]=d[r])}else s||(n||(n=[]),n.push(c,s)),s=d;else"dangerouslySetInnerHTML"===c?(d=d?d.__html:void 0,o=o?o.__html:void 0,null!=d&&o!==d&&(n=n||[]).push(c,d)):"children"===c?"string"!==typeof d&&"number"!==typeof d||(n=n||[]).push(c,""+d):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(i.hasOwnProperty(c)?(null!=d&&"onScroll"===c&&Ja("scroll",e),n||o===d||(n=[])):(n=n||[]).push(c,d))}s&&(n=n||[]).push("style",s);var c=n;(t.updateQueue=c)&&(t.flags|=4)}},Ui=function(e,t,s,a){s!==a&&(t.flags|=4)};var ao=!1,lo=!1,ro="function"===typeof WeakSet?WeakSet:Set,no=null;function io(e,t){var s=e.ref;if(null!==s)if("function"===typeof s)try{s(null)}catch(ba){Ed(e,t,ba)}else s.current=null}function oo(e,t,s){try{s()}catch(ba){Ed(e,t,ba)}}var co=!1;function uo(e,t,s){var a=t.updateQueue;if(null!==(a=null!==a?a.lastEffect:null)){var l=a=a.next;do{if((l.tag&e)===e){var r=l.destroy;l.destroy=void 0,void 0!==r&&oo(t,s,r)}l=l.next}while(l!==a)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var s=t=t.next;do{if((s.tag&e)===e){var a=s.create;s.destroy=a()}s=s.next}while(s!==t)}}function xo(e){var t=e.ref;if(null!==t){var s=e.stateNode;e.tag,e=s,"function"===typeof t?t(e):t.current=e}}function ho(e){var t=e.alternate;null!==t&&(e.alternate=null,ho(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[vl],delete t[jl],delete t[Nl],delete t[Sl],delete t[Cl])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function po(e){return 5===e.tag||3===e.tag||4===e.tag}function bo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||po(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function go(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?8===s.nodeType?s.parentNode.insertBefore(e,t):s.insertBefore(e,t):(8===s.nodeType?(t=s.parentNode).insertBefore(e,s):(t=s).appendChild(e),null!==(s=s._reactRootContainer)&&void 0!==s||null!==t.onclick||(t.onclick=il));else if(4!==a&&null!==(e=e.child))for(go(e,t,s),e=e.sibling;null!==e;)go(e,t,s),e=e.sibling}function fo(e,t,s){var a=e.tag;if(5===a||6===a)e=e.stateNode,t?s.insertBefore(e,t):s.appendChild(e);else if(4!==a&&null!==(e=e.child))for(fo(e,t,s),e=e.sibling;null!==e;)fo(e,t,s),e=e.sibling}var yo=null,vo=!1;function jo(e,t,s){for(s=s.child;null!==s;)wo(e,t,s),s=s.sibling}function wo(e,t,s){if(lt&&"function"===typeof lt.onCommitFiberUnmount)try{lt.onCommitFiberUnmount(at,s)}catch(ya){}switch(s.tag){case 5:lo||io(s,t);case 6:var a=yo,l=vo;yo=null,jo(e,t,s),vo=l,null!==(yo=a)&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?e.parentNode.removeChild(s):e.removeChild(s)):yo.removeChild(s.stateNode));break;case 18:null!==yo&&(vo?(e=yo,s=s.stateNode,8===e.nodeType?bl(e.parentNode,s):1===e.nodeType&&bl(e,s),zt(e)):bl(yo,s.stateNode));break;case 4:a=yo,l=vo,yo=s.stateNode.containerInfo,vo=!0,jo(e,t,s),yo=a,vo=l;break;case 0:case 11:case 14:case 15:if(!lo&&(null!==(a=s.updateQueue)&&null!==(a=a.lastEffect))){l=a=a.next;do{var r=l,n=r.destroy;r=r.tag,void 0!==n&&(0!==(2&r)||0!==(4&r))&&oo(s,t,n),l=l.next}while(l!==a)}jo(e,t,s);break;case 1:if(!lo&&(io(s,t),"function"===typeof(a=s.stateNode).componentWillUnmount))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(ya){Ed(s,t,ya)}jo(e,t,s);break;case 21:jo(e,t,s);break;case 22:1&s.mode?(lo=(a=lo)||null!==s.memoizedState,jo(e,t,s),lo=a):jo(e,t,s);break;default:jo(e,t,s)}}function No(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var s=e.stateNode;null===s&&(s=e.stateNode=new ro),t.forEach(function(t){var a=Md.bind(null,e,t);s.has(t)||(s.add(t),t.then(a,a))})}}function So(e,t){var s=t.deletions;if(null!==s)for(var a=0;a<s.length;a++){var l=s[a];try{var n=e,i=t,o=i;e:for(;null!==o;){switch(o.tag){case 5:yo=o.stateNode,vo=!1;break e;case 3:case 4:yo=o.stateNode.containerInfo,vo=!0;break e}o=o.return}if(null===yo)throw Error(r(160));wo(n,i,l),yo=null,vo=!1;var d=l.alternate;null!==d&&(d.return=null),l.return=null}catch(oa){Ed(l,t,oa)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)Co(t,e),t=t.sibling}function Co(e,t){var s=e.alternate,a=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(So(t,e),ko(e),4&a){try{uo(3,e,e.return),mo(3,e)}catch(ia){Ed(e,e.return,ia)}try{uo(5,e,e.return)}catch(ia){Ed(e,e.return,ia)}}break;case 1:So(t,e),ko(e),512&a&&null!==s&&io(s,s.return);break;case 5:if(So(t,e),ko(e),512&a&&null!==s&&io(s,s.return),32&e.flags){var l=e.stateNode;try{ue(l,"")}catch(ia){Ed(e,e.return,ia)}}if(4&a&&null!=(l=e.stateNode)){var n=e.memoizedProps,i=null!==s?s.memoizedProps:n,o=e.type,d=e.updateQueue;if(e.updateQueue=null,null!==d)try{"input"===o&&"radio"===n.type&&null!=n.name&&$(l,n),fe(o,i);var c=fe(o,n);for(i=0;i<d.length;i+=2){var u=d[i],m=d[i+1];"style"===u?pe(l,m):"dangerouslySetInnerHTML"===u?ce(l,m):"children"===u?ue(l,m):y(l,u,m,c)}switch(o){case"input":Z(l,n);break;case"textarea":re(l,n);break;case"select":var x=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!n.multiple;var h=n.value;null!=h?se(l,!!n.multiple,h,!1):x!==!!n.multiple&&(null!=n.defaultValue?se(l,!!n.multiple,n.defaultValue,!0):se(l,!!n.multiple,n.multiple?[]:"",!1))}l[jl]=n}catch(ia){Ed(e,e.return,ia)}}break;case 6:if(So(t,e),ko(e),4&a){if(null===e.stateNode)throw Error(r(162));l=e.stateNode,n=e.memoizedProps;try{l.nodeValue=n}catch(ia){Ed(e,e.return,ia)}}break;case 3:if(So(t,e),ko(e),4&a&&null!==s&&s.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(ia){Ed(e,e.return,ia)}break;case 4:default:So(t,e),ko(e);break;case 13:So(t,e),ko(e),8192&(l=e.child).flags&&(n=null!==l.memoizedState,l.stateNode.isHidden=n,!n||null!==l.alternate&&null!==l.alternate.memoizedState||(Yo=Ye())),4&a&&No(e);break;case 22:if(u=null!==s&&null!==s.memoizedState,1&e.mode?(lo=(c=lo)||u,So(t,e),lo=c):So(t,e),ko(e),8192&a){if(c=null!==e.memoizedState,(e.stateNode.isHidden=c)&&!u&&0!==(1&e.mode))for(no=e,u=e.child;null!==u;){for(m=no=u;null!==no;){switch(h=(x=no).child,x.tag){case 0:case 11:case 14:case 15:uo(4,x,x.return);break;case 1:io(x,x.return);var p=x.stateNode;if("function"===typeof p.componentWillUnmount){a=x,s=x.return;try{t=a,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(ia){Ed(a,s,ia)}}break;case 5:io(x,x.return);break;case 22:if(null!==x.memoizedState){Do(m);continue}}null!==h?(h.return=x,no=h):Do(m)}u=u.sibling}e:for(u=null,m=e;;){if(5===m.tag){if(null===u){u=m;try{l=m.stateNode,c?"function"===typeof(n=l.style).setProperty?n.setProperty("display","none","important"):n.display="none":(o=m.stateNode,i=void 0!==(d=m.memoizedProps.style)&&null!==d&&d.hasOwnProperty("display")?d.display:null,o.style.display=he("display",i))}catch(ia){Ed(e,e.return,ia)}}}else if(6===m.tag){if(null===u)try{m.stateNode.nodeValue=c?"":m.memoizedProps}catch(ia){Ed(e,e.return,ia)}}else if((22!==m.tag&&23!==m.tag||null===m.memoizedState||m===e)&&null!==m.child){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;null===m.sibling;){if(null===m.return||m.return===e)break e;u===m&&(u=null),m=m.return}u===m&&(u=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:So(t,e),ko(e),4&a&&No(e);case 21:}}function ko(e){var t=e.flags;if(2&t){try{e:{for(var s=e.return;null!==s;){if(po(s)){var a=s;break e}s=s.return}throw Error(r(160))}switch(a.tag){case 5:var l=a.stateNode;32&a.flags&&(ue(l,""),a.flags&=-33),fo(e,bo(e),l);break;case 3:case 4:var n=a.stateNode.containerInfo;go(e,bo(e),n);break;default:throw Error(r(161))}}catch(qa){Ed(e,e.return,qa)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Po(e,t,s){no=e,Ao(e,t,s)}function Ao(e,t,s){for(var a=0!==(1&e.mode);null!==no;){var l=no,r=l.child;if(22===l.tag&&a){var n=null!==l.memoizedState||ao;if(!n){var i=l.alternate,o=null!==i&&null!==i.memoizedState||lo;i=ao;var d=lo;if(ao=n,(lo=o)&&!d)for(no=l;null!==no;)o=(n=no).child,22===n.tag&&null!==n.memoizedState?To(l):null!==o?(o.return=n,no=o):To(l);for(;null!==r;)no=r,Ao(r,t,s),r=r.sibling;no=l,ao=i,lo=d}Io(e)}else 0!==(8772&l.subtreeFlags)&&null!==r?(r.return=l,no=r):Io(e)}}function Io(e){for(;null!==no;){var t=no;if(0!==(8772&t.flags)){var s=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:lo||mo(5,t);break;case 1:var a=t.stateNode;if(4&t.flags&&!lo)if(null===s)a.componentDidMount();else{var l=t.elementType===t.type?s.memoizedProps:ci(t.type,s.memoizedProps);a.componentDidUpdate(l,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var n=t.updateQueue;null!==n&&$r(t,n,a);break;case 3:var i=t.updateQueue;if(null!==i){if(s=null,null!==t.child)switch(t.child.tag){case 5:case 1:s=t.child.stateNode}$r(t,i,s)}break;case 5:var o=t.stateNode;if(null===s&&4&t.flags){s=o;var d=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":d.autoFocus&&s.focus();break;case"img":d.src&&(s.src=d.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&zt(m)}}}break;default:throw Error(r(163))}lo||512&t.flags&&xo(t)}catch(x){Ed(t,t.return,x)}}if(t===e){no=null;break}if(null!==(s=t.sibling)){s.return=t.return,no=s;break}no=t.return}}function Do(e){for(;null!==no;){var t=no;if(t===e){no=null;break}var s=t.sibling;if(null!==s){s.return=t.return,no=s;break}no=t.return}}function To(e){for(;null!==no;){var t=no;try{switch(t.tag){case 0:case 11:case 15:var s=t.return;try{mo(4,t)}catch(qa){Ed(t,s,qa)}break;case 1:var a=t.stateNode;if("function"===typeof a.componentDidMount){var l=t.return;try{a.componentDidMount()}catch(qa){Ed(t,l,qa)}}var r=t.return;try{xo(t)}catch(qa){Ed(t,r,qa)}break;case 5:var n=t.return;try{xo(t)}catch(qa){Ed(t,n,qa)}}}catch(qa){Ed(t,t.return,qa)}if(t===e){no=null;break}var i=t.sibling;if(null!==i){i.return=t.return,no=i;break}no=t.return}}var _o,Eo=Math.ceil,Ro=v.ReactCurrentDispatcher,Lo=v.ReactCurrentOwner,Oo=v.ReactCurrentBatchConfig,Mo=0,Fo=null,Bo=null,qo=0,zo=0,Uo=_l(0),Wo=0,Ho=null,Vo=0,Jo=0,Ko=0,Qo=null,Go=null,Yo=0,$o=1/0,Zo=null,Xo=!1,ed=null,td=null,sd=!1,ad=null,ld=0,rd=0,nd=null,id=-1,od=0;function dd(){return 0!==(6&Mo)?Ye():-1!==id?id:id=Ye()}function cd(e){return 0===(1&e.mode)?1:0!==(2&Mo)&&0!==qo?qo&-qo:null!==Nr.transition?(0===od&&(od=ht()),od):0!==(e=ft)?e:e=void 0===(e=window.event)?16:Gt(e.type)}function ud(e,t,s,a){if(50<rd)throw rd=0,nd=null,Error(r(185));bt(e,s,a),0!==(2&Mo)&&e===Fo||(e===Fo&&(0===(2&Mo)&&(Jo|=s),4===Wo&&bd(e,qo)),md(e,a),1===s&&0===Mo&&0===(1&t.mode)&&($o=Ye()+500,Kl&&Yl()))}function md(e,t){var s=e.callbackNode;!function(e,t){for(var s=e.suspendedLanes,a=e.pingedLanes,l=e.expirationTimes,r=e.pendingLanes;0<r;){var n=31-rt(r),i=1<<n,o=l[n];-1===o?0!==(i&s)&&0===(i&a)||(l[n]=mt(i,t)):o<=t&&(e.expiredLanes|=i),r&=~i}}(e,t);var a=ut(e,e===Fo?qo:0);if(0===a)null!==s&&Ke(s),e.callbackNode=null,e.callbackPriority=0;else if(t=a&-a,e.callbackPriority!==t){if(null!=s&&Ke(s),1===t)0===e.tag?function(e){Kl=!0,Gl(e)}(gd.bind(null,e)):Gl(gd.bind(null,e)),hl(function(){0===(6&Mo)&&Yl()}),s=null;else{switch(yt(a)){case 1:s=Ze;break;case 4:s=Xe;break;case 16:default:s=et;break;case 536870912:s=st}s=Fd(s,xd.bind(null,e))}e.callbackPriority=t,e.callbackNode=s}}function xd(e,t){if(id=-1,od=0,0!==(6&Mo))throw Error(r(327));var s=e.callbackNode;if(Td()&&e.callbackNode!==s)return null;var a=ut(e,e===Fo?qo:0);if(0===a)return null;if(0!==(30&a)||0!==(a&e.expiredLanes)||t)t=Cd(e,a);else{t=a;var l=Mo;Mo|=2;var n=Nd();for(Fo===e&&qo===t||(Zo=null,$o=Ye()+500,jd(e,t));;)try{Pd();break}catch(ya){wd(e,ya)}Rr(),Ro.current=n,Mo=l,null!==Bo?t=0:(Fo=null,qo=0,t=Wo)}if(0!==t){if(2===t&&(0!==(l=xt(e))&&(a=l,t=hd(e,l))),1===t)throw s=Ho,jd(e,0),bd(e,a),md(e,Ye()),s;if(6===t)bd(e,a);else{if(l=e.current.alternate,0===(30&a)&&!function(e){for(var t=e;;){if(16384&t.flags){var s=t.updateQueue;if(null!==s&&null!==(s=s.stores))for(var a=0;a<s.length;a++){var l=s[a],r=l.getSnapshot;l=l.value;try{if(!ra(r(),l))return!1}catch(i){return!1}}}if(s=t.child,16384&t.subtreeFlags&&null!==s)s.return=t,t=s;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(l)&&(2===(t=Cd(e,a))&&(0!==(n=xt(e))&&(a=n,t=hd(e,n))),1===t))throw s=Ho,jd(e,0),bd(e,a),md(e,Ye()),s;switch(e.finishedWork=l,e.finishedLanes=a,t){case 0:case 1:throw Error(r(345));case 2:case 5:Dd(e,Go,Zo);break;case 3:if(bd(e,a),(130023424&a)===a&&10<(t=Yo+500-Ye())){if(0!==ut(e,0))break;if(((l=e.suspendedLanes)&a)!==a){dd(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=ul(Dd.bind(null,e,Go,Zo),t);break}Dd(e,Go,Zo);break;case 4:if(bd(e,a),(4194240&a)===a)break;for(t=e.eventTimes,l=-1;0<a;){var i=31-rt(a);n=1<<i,(i=t[i])>l&&(l=i),a&=~n}if(a=l,10<(a=(120>(a=Ye()-a)?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*Eo(a/1960))-a)){e.timeoutHandle=ul(Dd.bind(null,e,Go,Zo),a);break}Dd(e,Go,Zo);break;default:throw Error(r(329))}}}return md(e,Ye()),e.callbackNode===s?xd.bind(null,e):null}function hd(e,t){var s=Qo;return e.current.memoizedState.isDehydrated&&(jd(e,t).flags|=256),2!==(e=Cd(e,t))&&(t=Go,Go=s,null!==t&&pd(t)),e}function pd(e){null===Go?Go=e:Go.push.apply(Go,e)}function bd(e,t){for(t&=~Ko,t&=~Jo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var s=31-rt(t),a=1<<s;e[s]=-1,t&=~a}}function gd(e){if(0!==(6&Mo))throw Error(r(327));Td();var t=ut(e,0);if(0===(1&t))return md(e,Ye()),null;var s=Cd(e,t);if(0!==e.tag&&2===s){var a=xt(e);0!==a&&(t=a,s=hd(e,a))}if(1===s)throw s=Ho,jd(e,0),bd(e,t),md(e,Ye()),s;if(6===s)throw Error(r(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Dd(e,Go,Zo),md(e,Ye()),null}function fd(e,t){var s=Mo;Mo|=1;try{return e(t)}finally{0===(Mo=s)&&($o=Ye()+500,Kl&&Yl())}}function yd(e){null!==ad&&0===ad.tag&&0===(6&Mo)&&Td();var t=Mo;Mo|=1;var s=Oo.transition,a=ft;try{if(Oo.transition=null,ft=1,e)return e()}finally{ft=a,Oo.transition=s,0===(6&(Mo=t))&&Yl()}}function vd(){zo=Uo.current,El(Uo)}function jd(e,t){e.finishedWork=null,e.finishedLanes=0;var s=e.timeoutHandle;if(-1!==s&&(e.timeoutHandle=-1,ml(s)),null!==Bo)for(s=Bo.return;null!==s;){var a=s;switch(dr(a),a.tag){case 1:null!==(a=a.type.childContextTypes)&&void 0!==a&&zl();break;case 3:ln(),El(Ml),El(Ol),un();break;case 5:nn(a);break;case 4:ln();break;case 13:case 19:El(on);break;case 10:Lr(a.type._context);break;case 22:case 23:vd()}s=s.return}if(Fo=e,Bo=e=Ud(e.current,null),qo=zo=t,Wo=0,Ho=null,Ko=Jo=Vo=0,Go=Qo=null,null!==Br){for(t=0;t<Br.length;t++)if(null!==(a=(s=Br[t]).interleaved)){s.interleaved=null;var l=a.next,r=s.pending;if(null!==r){var n=r.next;r.next=l,a.next=n}s.pending=a}Br=null}return e}function wd(e,t){for(;;){var s=Bo;try{if(Rr(),mn.current=ni,fn){for(var a=pn.memoizedState;null!==a;){var l=a.queue;null!==l&&(l.pending=null),a=a.next}fn=!1}if(hn=0,gn=bn=pn=null,yn=!1,vn=0,Lo.current=null,null===s||null===s.return){Wo=1,Ho=t,Bo=null;break}e:{var n=e,i=s.return,o=s,d=t;if(t=qo,o.flags|=32768,null!==d&&"object"===typeof d&&"function"===typeof d.then){var c=d,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var x=u.alternate;x?(u.updateQueue=x.updateQueue,u.memoizedState=x.memoizedState,u.lanes=x.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=Si(i);if(null!==h){h.flags&=-257,Ci(h,i,o,0,t),1&h.mode&&Ni(n,c,t),d=c;var p=(t=h).updateQueue;if(null===p){var b=new Set;b.add(d),t.updateQueue=b}else p.add(d);break e}if(0===(1&t)){Ni(n,c,t),Sd();break e}d=Error(r(426))}else if(mr&&1&o.mode){var g=Si(i);if(null!==g){0===(65536&g.flags)&&(g.flags|=256),Ci(g,i,o,0,t),wr(gi(d,o));break e}}n=d=gi(d,o),4!==Wo&&(Wo=2),null===Qo?Qo=[n]:Qo.push(n),n=i;do{switch(n.tag){case 3:n.flags|=65536,t&=-t,n.lanes|=t,Gr(n,ji(0,d,t));break e;case 1:o=d;var f=n.type,y=n.stateNode;if(0===(128&n.flags)&&("function"===typeof f.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===td||!td.has(y)))){n.flags|=65536,t&=-t,n.lanes|=t,Gr(n,wi(n,o,t));break e}}n=n.return}while(null!==n)}Id(s)}catch(v){t=v,Bo===s&&null!==s&&(Bo=s=s.return);continue}break}}function Nd(){var e=Ro.current;return Ro.current=ni,null===e?ni:e}function Sd(){0!==Wo&&3!==Wo&&2!==Wo||(Wo=4),null===Fo||0===(268435455&Vo)&&0===(268435455&Jo)||bd(Fo,qo)}function Cd(e,t){var s=Mo;Mo|=2;var a=Nd();for(Fo===e&&qo===t||(Zo=null,jd(e,t));;)try{kd();break}catch(na){wd(e,na)}if(Rr(),Mo=s,Ro.current=a,null!==Bo)throw Error(r(261));return Fo=null,qo=0,Wo}function kd(){for(;null!==Bo;)Ad(Bo)}function Pd(){for(;null!==Bo&&!Qe();)Ad(Bo)}function Ad(e){var t=_o(e.alternate,e,zo);e.memoizedProps=e.pendingProps,null===t?Id(e):Bo=t,Lo.current=null}function Id(e){var t=e;do{var s=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(s=to(s,t,zo)))return void(Bo=s)}else{if(null!==(s=so(s,t)))return s.flags&=32767,void(Bo=s);if(null===e)return Wo=6,void(Bo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bo=t);Bo=t=e}while(null!==t);0===Wo&&(Wo=5)}function Dd(e,t,s){var a=ft,l=Oo.transition;try{Oo.transition=null,ft=1,function(e,t,s,a){do{Td()}while(null!==ad);if(0!==(6&Mo))throw Error(r(327));s=e.finishedWork;var l=e.finishedLanes;if(null===s)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(r(177));e.callbackNode=null,e.callbackPriority=0;var n=s.lanes|s.childLanes;if(function(e,t){var s=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var a=e.eventTimes;for(e=e.expirationTimes;0<s;){var l=31-rt(s),r=1<<l;t[l]=0,a[l]=-1,e[l]=-1,s&=~r}}(e,n),e===Fo&&(Bo=Fo=null,qo=0),0===(2064&s.subtreeFlags)&&0===(2064&s.flags)||sd||(sd=!0,Fd(et,function(){return Td(),null})),n=0!==(15990&s.flags),0!==(15990&s.subtreeFlags)||n){n=Oo.transition,Oo.transition=null;var i=ft;ft=1;var o=Mo;Mo|=4,Lo.current=null,function(e,t){if(ol=Wt,fa(e=pa())){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{var a=(s=(s=e.ownerDocument)&&s.defaultView||window).getSelection&&s.getSelection();if(a&&0!==a.rangeCount){s=a.anchorNode;var l=a.anchorOffset,n=a.focusNode;a=a.focusOffset;try{s.nodeType,n.nodeType}catch(al){s=null;break e}var i=0,o=-1,d=-1,c=0,u=0,m=e,x=null;t:for(;;){for(var h;m!==s||0!==l&&3!==m.nodeType||(o=i+l),m!==n||0!==a&&3!==m.nodeType||(d=i+a),3===m.nodeType&&(i+=m.nodeValue.length),null!==(h=m.firstChild);)x=m,m=h;for(;;){if(m===e)break t;if(x===s&&++c===l&&(o=i),x===n&&++u===a&&(d=i),null!==(h=m.nextSibling))break;x=(m=x).parentNode}m=h}s=-1===o||-1===d?null:{start:o,end:d}}else s=null}s=s||{start:0,end:0}}else s=null;for(dl={focusedElem:e,selectionRange:s},Wt=!1,no=t;null!==no;)if(e=(t=no).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,no=e;else for(;null!==no;){t=no;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var b=p.memoizedProps,g=p.memoizedState,f=t.stateNode,y=f.getSnapshotBeforeUpdate(t.elementType===t.type?b:ci(t.type,b),g);f.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;1===v.nodeType?v.textContent="":9===v.nodeType&&v.documentElement&&v.removeChild(v.documentElement);break;default:throw Error(r(163))}}catch(al){Ed(t,t.return,al)}if(null!==(e=t.sibling)){e.return=t.return,no=e;break}no=t.return}p=co,co=!1}(e,s),Co(s,e),va(dl),Wt=!!ol,dl=ol=null,e.current=s,Po(s,e,l),Ge(),Mo=o,ft=i,Oo.transition=n}else e.current=s;if(sd&&(sd=!1,ad=e,ld=l),n=e.pendingLanes,0===n&&(td=null),function(e){if(lt&&"function"===typeof lt.onCommitFiberRoot)try{lt.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(s.stateNode),md(e,Ye()),null!==t)for(a=e.onRecoverableError,s=0;s<t.length;s++)l=t[s],a(l.value,{componentStack:l.stack,digest:l.digest});if(Xo)throw Xo=!1,e=ed,ed=null,e;0!==(1&ld)&&0!==e.tag&&Td(),n=e.pendingLanes,0!==(1&n)?e===nd?rd++:(rd=0,nd=e):rd=0,Yl()}(e,t,s,a)}finally{Oo.transition=l,ft=a}return null}function Td(){if(null!==ad){var e=yt(ld),t=Oo.transition,s=ft;try{if(Oo.transition=null,ft=16>e?16:e,null===ad)var a=!1;else{if(e=ad,ad=null,ld=0,0!==(6&Mo))throw Error(r(331));var l=Mo;for(Mo|=4,no=e.current;null!==no;){var n=no,i=n.child;if(0!==(16&no.flags)){var o=n.deletions;if(null!==o){for(var d=0;d<o.length;d++){var c=o[d];for(no=c;null!==no;){var u=no;switch(u.tag){case 0:case 11:case 15:uo(8,u,n)}var m=u.child;if(null!==m)m.return=u,no=m;else for(;null!==no;){var x=(u=no).sibling,h=u.return;if(ho(u),u===c){no=null;break}if(null!==x){x.return=h,no=x;break}no=h}}}var p=n.alternate;if(null!==p){var b=p.child;if(null!==b){p.child=null;do{var g=b.sibling;b.sibling=null,b=g}while(null!==b)}}no=n}}if(0!==(2064&n.subtreeFlags)&&null!==i)i.return=n,no=i;else e:for(;null!==no;){if(0!==(2048&(n=no).flags))switch(n.tag){case 0:case 11:case 15:uo(9,n,n.return)}var f=n.sibling;if(null!==f){f.return=n.return,no=f;break e}no=n.return}}var y=e.current;for(no=y;null!==no;){var v=(i=no).child;if(0!==(2064&i.subtreeFlags)&&null!==v)v.return=i,no=v;else e:for(i=y;null!==no;){if(0!==(2048&(o=no).flags))try{switch(o.tag){case 0:case 11:case 15:mo(9,o)}}catch(w){Ed(o,o.return,w)}if(o===i){no=null;break e}var j=o.sibling;if(null!==j){j.return=o.return,no=j;break e}no=o.return}}if(Mo=l,Yl(),lt&&"function"===typeof lt.onPostCommitFiberRoot)try{lt.onPostCommitFiberRoot(at,e)}catch(w){}a=!0}return a}finally{ft=s,Oo.transition=t}}return!1}function _d(e,t,s){e=Kr(e,t=ji(0,t=gi(s,t),1),1),t=dd(),null!==e&&(bt(e,1,t),md(e,t))}function Ed(e,t,s){if(3===e.tag)_d(e,e,s);else for(;null!==t;){if(3===t.tag){_d(t,e,s);break}if(1===t.tag){var a=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof a.componentDidCatch&&(null===td||!td.has(a))){t=Kr(t,e=wi(t,e=gi(s,e),1),1),e=dd(),null!==t&&(bt(t,1,e),md(t,e));break}}t=t.return}}function Rd(e,t,s){var a=e.pingCache;null!==a&&a.delete(t),t=dd(),e.pingedLanes|=e.suspendedLanes&s,Fo===e&&(qo&s)===s&&(4===Wo||3===Wo&&(130023424&qo)===qo&&500>Ye()-Yo?jd(e,0):Ko|=s),md(e,t)}function Ld(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var s=dd();null!==(e=Ur(e,t))&&(bt(e,t,s),md(e,s))}function Od(e){var t=e.memoizedState,s=0;null!==t&&(s=t.retryLane),Ld(e,s)}function Md(e,t){var s=0;switch(e.tag){case 13:var a=e.stateNode,l=e.memoizedState;null!==l&&(s=l.retryLane);break;case 19:a=e.stateNode;break;default:throw Error(r(314))}null!==a&&a.delete(t),Ld(e,s)}function Fd(e,t){return Je(e,t)}function Bd(e,t,s,a){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qd(e,t,s,a){return new Bd(e,t,s,a)}function zd(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Ud(e,t){var s=e.alternate;return null===s?((s=qd(e.tag,t,e.key,e.mode)).elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=t,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=14680064&e.flags,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,t=e.dependencies,s.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s}function Wd(e,t,s,a,l,n){var i=2;if(a=e,"function"===typeof e)zd(e)&&(i=1);else if("string"===typeof e)i=5;else e:switch(e){case N:return Hd(s.children,l,n,t);case S:i=8,l|=8;break;case C:return(e=qd(12,s,t,2|l)).elementType=C,e.lanes=n,e;case I:return(e=qd(13,s,t,l)).elementType=I,e.lanes=n,e;case D:return(e=qd(19,s,t,l)).elementType=D,e.lanes=n,e;case E:return Vd(s,l,n,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case k:i=10;break e;case P:i=9;break e;case A:i=11;break e;case T:i=14;break e;case _:i=16,a=null;break e}throw Error(r(130,null==e?e:typeof e,""))}return(t=qd(i,s,t,l)).elementType=e,t.type=a,t.lanes=n,t}function Hd(e,t,s,a){return(e=qd(7,e,a,t)).lanes=s,e}function Vd(e,t,s,a){return(e=qd(22,e,a,t)).elementType=E,e.lanes=s,e.stateNode={isHidden:!1},e}function Jd(e,t,s){return(e=qd(6,e,null,t)).lanes=s,e}function Kd(e,t,s){return(t=qd(4,null!==e.children?e.children:[],e.key,t)).lanes=s,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Qd(e,t,s,a,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pt(0),this.expirationTimes=pt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pt(0),this.identifierPrefix=a,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Gd(e,t,s,a,l,r,n,i,o){return e=new Qd(e,t,s,i,o),1===t?(t=1,!0===r&&(t|=8)):t=0,r=qd(3,null,null,t),e.current=r,r.stateNode=e,r.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Hr(r),e}function Yd(e){if(!e)return Ll;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(r(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(ql(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(r(171))}if(1===e.tag){var s=e.type;if(ql(s))return Wl(e,s,t)}return t}function $d(e,t,s,a,l,r,n,i,o){return(e=Gd(s,a,!0,e,0,r,0,i,o)).context=Yd(null),s=e.current,(r=Jr(a=dd(),l=cd(s))).callback=void 0!==t&&null!==t?t:null,Kr(s,r,l),e.current.lanes=l,bt(e,l,a),md(e,a),e}function Zd(e,t,s,a){var l=t.current,r=dd(),n=cd(l);return s=Yd(s),null===t.context?t.context=s:t.pendingContext=s,(t=Jr(r,n)).payload={element:e},null!==(a=void 0===a?null:a)&&(t.callback=a),null!==(e=Kr(l,t,n))&&(ud(e,l,n,r),Qr(e,l,n)),n}function Xd(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function ec(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var s=e.retryLane;e.retryLane=0!==s&&s<t?s:t}}function tc(e,t){ec(e,t),(e=e.alternate)&&ec(e,t)}_o=function(e,t,s){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ml.current)Pi=!0;else{if(0===(e.lanes&s)&&0===(128&t.flags))return Pi=!1,function(e,t,s){switch(t.tag){case 3:Mi(t),jr();break;case 5:rn(t);break;case 1:ql(t.type)&&Hl(t);break;case 4:an(t,t.stateNode.containerInfo);break;case 10:var a=t.type._context,l=t.memoizedProps.value;Rl(Dr,a._currentValue),a._currentValue=l;break;case 13:if(null!==(a=t.memoizedState))return null!==a.dehydrated?(Rl(on,1&on.current),t.flags|=128,null):0!==(s&t.child.childLanes)?Vi(e,t,s):(Rl(on,1&on.current),null!==(e=Zi(e,t,s))?e.sibling:null);Rl(on,1&on.current);break;case 19:if(a=0!==(s&t.childLanes),0!==(128&e.flags)){if(a)return Yi(e,t,s);t.flags|=128}if(null!==(l=t.memoizedState)&&(l.rendering=null,l.tail=null,l.lastEffect=null),Rl(on,on.current),a)break;return null;case 22:case 23:return t.lanes=0,_i(e,t,s)}return Zi(e,t,s)}(e,t,s);Pi=0!==(131072&e.flags)}else Pi=!1,mr&&0!==(1048576&t.flags)&&ir(t,er,t.index);switch(t.lanes=0,t.tag){case 2:var a=t.type;$i(e,t),e=t.pendingProps;var l=Bl(t,Ol.current);Mr(t,s),l=Sn(null,t,a,e,l,s);var n=Cn();return t.flags|=1,"object"===typeof l&&null!==l&&"function"===typeof l.render&&void 0===l.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ql(a)?(n=!0,Hl(t)):n=!1,t.memoizedState=null!==l.state&&void 0!==l.state?l.state:null,Hr(t),l.updater=mi,t.stateNode=l,l._reactInternals=t,bi(t,a,e,s),t=Oi(null,t,a,!0,n,s)):(t.tag=0,mr&&n&&or(t),Ai(null,t,l,s),t=t.child),t;case 16:a=t.elementType;e:{switch($i(e,t),e=t.pendingProps,a=(l=a._init)(a._payload),t.type=a,l=t.tag=function(e){if("function"===typeof e)return zd(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===A)return 11;if(e===T)return 14}return 2}(a),e=ci(a,e),l){case 0:t=Ri(null,t,a,e,s);break e;case 1:t=Li(null,t,a,e,s);break e;case 11:t=Ii(null,t,a,e,s);break e;case 14:t=Di(null,t,a,ci(a.type,e),s);break e}throw Error(r(306,a,""))}return t;case 0:return a=t.type,l=t.pendingProps,Ri(e,t,a,l=t.elementType===a?l:ci(a,l),s);case 1:return a=t.type,l=t.pendingProps,Li(e,t,a,l=t.elementType===a?l:ci(a,l),s);case 3:e:{if(Mi(t),null===e)throw Error(r(387));a=t.pendingProps,l=(n=t.memoizedState).element,Vr(e,t),Yr(t,a,null,s);var i=t.memoizedState;if(a=i.element,n.isDehydrated){if(n={element:a,isDehydrated:!1,cache:i.cache,pendingSuspenseBoundaries:i.pendingSuspenseBoundaries,transitions:i.transitions},t.updateQueue.baseState=n,t.memoizedState=n,256&t.flags){t=Fi(e,t,a,s,l=gi(Error(r(423)),t));break e}if(a!==l){t=Fi(e,t,a,s,l=gi(Error(r(424)),t));break e}for(ur=gl(t.stateNode.containerInfo.firstChild),cr=t,mr=!0,xr=null,s=Ir(t,null,a,s),t.child=s;s;)s.flags=-3&s.flags|4096,s=s.sibling}else{if(jr(),a===l){t=Zi(e,t,s);break e}Ai(e,t,a,s)}t=t.child}return t;case 5:return rn(t),null===e&&gr(t),a=t.type,l=t.pendingProps,n=null!==e?e.memoizedProps:null,i=l.children,cl(a,l)?i=null:null!==n&&cl(a,n)&&(t.flags|=32),Ei(e,t),Ai(e,t,i,s),t.child;case 6:return null===e&&gr(t),null;case 13:return Vi(e,t,s);case 4:return an(t,t.stateNode.containerInfo),a=t.pendingProps,null===e?t.child=Ar(t,null,a,s):Ai(e,t,a,s),t.child;case 11:return a=t.type,l=t.pendingProps,Ii(e,t,a,l=t.elementType===a?l:ci(a,l),s);case 7:return Ai(e,t,t.pendingProps,s),t.child;case 8:case 12:return Ai(e,t,t.pendingProps.children,s),t.child;case 10:e:{if(a=t.type._context,l=t.pendingProps,n=t.memoizedProps,i=l.value,Rl(Dr,a._currentValue),a._currentValue=i,null!==n)if(ra(n.value,i)){if(n.children===l.children&&!Ml.current){t=Zi(e,t,s);break e}}else for(null!==(n=t.child)&&(n.return=t);null!==n;){var o=n.dependencies;if(null!==o){i=n.child;for(var d=o.firstContext;null!==d;){if(d.context===a){if(1===n.tag){(d=Jr(-1,s&-s)).tag=2;var c=n.updateQueue;if(null!==c){var u=(c=c.shared).pending;null===u?d.next=d:(d.next=u.next,u.next=d),c.pending=d}}n.lanes|=s,null!==(d=n.alternate)&&(d.lanes|=s),Or(n.return,s,t),o.lanes|=s;break}d=d.next}}else if(10===n.tag)i=n.type===t.type?null:n.child;else if(18===n.tag){if(null===(i=n.return))throw Error(r(341));i.lanes|=s,null!==(o=i.alternate)&&(o.lanes|=s),Or(i,s,t),i=n.sibling}else i=n.child;if(null!==i)i.return=n;else for(i=n;null!==i;){if(i===t){i=null;break}if(null!==(n=i.sibling)){n.return=i.return,i=n;break}i=i.return}n=i}Ai(e,t,l.children,s),t=t.child}return t;case 9:return l=t.type,a=t.pendingProps.children,Mr(t,s),a=a(l=Fr(l)),t.flags|=1,Ai(e,t,a,s),t.child;case 14:return l=ci(a=t.type,t.pendingProps),Di(e,t,a,l=ci(a.type,l),s);case 15:return Ti(e,t,t.type,t.pendingProps,s);case 17:return a=t.type,l=t.pendingProps,l=t.elementType===a?l:ci(a,l),$i(e,t),t.tag=1,ql(a)?(e=!0,Hl(t)):e=!1,Mr(t,s),hi(t,a,l),bi(t,a,l,s),Oi(null,t,a,!0,e,s);case 19:return Yi(e,t,s);case 22:return _i(e,t,s)}throw Error(r(156,t.tag))};var sc="function"===typeof reportError?reportError:function(e){console.error(e)};function ac(e){this._internalRoot=e}function lc(e){this._internalRoot=e}function rc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function nc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function ic(){}function oc(e,t,s,a,l){var r=s._reactRootContainer;if(r){var n=r;if("function"===typeof l){var i=l;l=function(){var e=Xd(n);i.call(e)}}Zd(t,n,e,l)}else n=function(e,t,s,a,l){if(l){if("function"===typeof a){var r=a;a=function(){var e=Xd(n);r.call(e)}}var n=$d(t,a,e,0,null,!1,0,"",ic);return e._reactRootContainer=n,e[wl]=n.current,Ga(8===e.nodeType?e.parentNode:e),yd(),n}for(;l=e.lastChild;)e.removeChild(l);if("function"===typeof a){var i=a;a=function(){var e=Xd(o);i.call(e)}}var o=Gd(e,0,!1,null,0,!1,0,"",ic);return e._reactRootContainer=o,e[wl]=o.current,Ga(8===e.nodeType?e.parentNode:e),yd(function(){Zd(t,o,s,a)}),o}(s,t,e,l,a);return Xd(n)}lc.prototype.render=ac.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(r(409));Zd(e,t,null,null)},lc.prototype.unmount=ac.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;yd(function(){Zd(null,e,null,null)}),t[wl]=null}},lc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Nt();e={blockedOn:null,target:e,priority:t};for(var s=0;s<_t.length&&0!==t&&t<_t[s].priority;s++);_t.splice(s,0,e),0===s&&Ot(e)}},vt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var s=ct(t.pendingLanes);0!==s&&(gt(t,1|s),md(t,Ye()),0===(6&Mo)&&($o=Ye()+500,Yl()))}break;case 13:yd(function(){var t=Ur(e,1);if(null!==t){var s=dd();ud(t,e,1,s)}}),tc(e,1)}},jt=function(e){if(13===e.tag){var t=Ur(e,134217728);if(null!==t)ud(t,e,134217728,dd());tc(e,134217728)}},wt=function(e){if(13===e.tag){var t=cd(e),s=Ur(e,t);if(null!==s)ud(s,e,t,dd());tc(e,t)}},Nt=function(){return ft},St=function(e,t){var s=ft;try{return ft=e,t()}finally{ft=s}},je=function(e,t,s){switch(t){case"input":if(Z(e,s),t=s.name,"radio"===s.type&&null!=t){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<s.length;t++){var a=s[t];if(a!==e&&a.form===e.form){var l=Il(a);if(!l)throw Error(r(90));K(a),Z(a,l)}}}break;case"textarea":re(e,s);break;case"select":null!=(t=s.value)&&se(e,!!s.multiple,t,!1)}},Pe=fd,Ae=yd;var dc={usingClientEntryPoint:!1,Events:[Pl,Al,Il,Ce,ke,fd]},cc={findFiberByHostInstance:kl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uc={bundleType:cc.bundleType,version:cc.version,rendererPackageName:cc.rendererPackageName,rendererConfig:cc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:v.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:cc.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var mc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mc.isDisabled&&mc.supportsFiber)try{at=mc.inject(uc),lt=mc}catch(da){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dc,t.createPortal=function(e,t){var s=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!rc(t))throw Error(r(200));return function(e,t,s){var a=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:w,key:null==a?null:""+a,children:e,containerInfo:t,implementation:s}}(e,t,null,s)},t.createRoot=function(e,t){if(!rc(e))throw Error(r(299));var s=!1,a="",l=sc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(s=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=Gd(e,1,!1,null,0,s,0,a,l),e[wl]=t.current,Ga(8===e.nodeType?e.parentNode:e),new ac(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(r(188));throw e=Object.keys(e).join(","),Error(r(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return yd(e)},t.hydrate=function(e,t,s){if(!nc(t))throw Error(r(200));return oc(null,e,t,!0,s)},t.hydrateRoot=function(e,t,s){if(!rc(e))throw Error(r(405));var a=null!=s&&s.hydratedSources||null,l=!1,n="",i=sc;if(null!==s&&void 0!==s&&(!0===s.unstable_strictMode&&(l=!0),void 0!==s.identifierPrefix&&(n=s.identifierPrefix),void 0!==s.onRecoverableError&&(i=s.onRecoverableError)),t=$d(t,null,e,1,null!=s?s:null,l,0,n,i),e[wl]=t.current,Ga(e),a)for(e=0;e<a.length;e++)l=(l=(s=a[e])._getVersion)(s._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[s,l]:t.mutableSourceEagerHydrationData.push(s,l);return new lc(t)},t.render=function(e,t,s){if(!nc(t))throw Error(r(200));return oc(null,e,t,!1,s)},t.unmountComponentAtNode=function(e){if(!nc(e))throw Error(r(40));return!!e._reactRootContainer&&(yd(function(){oc(null,null,e,!1,function(){e._reactRootContainer=null,e[wl]=null})}),!0)},t.unstable_batchedUpdates=fd,t.unstable_renderSubtreeIntoContainer=function(e,t,s,a){if(!nc(s))throw Error(r(200));if(null==e||void 0===e._reactInternals)throw Error(r(38));return oc(e,t,s,!1,a)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,s)=>{e.exports=s(234)},950:(e,t,s)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=s(730)},980:(e,t,s)=>{s.d(t,{AT:()=>n,Dv:()=>w,IX:()=>u,KG:()=>g,Od:()=>o,Ox:()=>v,R2:()=>i,Re:()=>x,Yt:()=>f,Zl:()=>m,bM:()=>y,bS:()=>d,h2:()=>N,ie:()=>S,iw:()=>p,oA:()=>b,o_:()=>j,rj:()=>c,staffAPI:()=>h,z5:()=>r});var a=s(555);const l={USER_ID:"userId",USER_EMAIL:"userEmail",USER_ROLE:"userRole",CLUB_ID:"clubId",TENANT_ID:"tenantId",AUTH_TOKEN:"authToken"},r=()=>{const e={"Content-Type":"application/json"},t=localStorage.getItem(l.USER_ID),s=localStorage.getItem(l.CLUB_ID),a=localStorage.getItem(l.TENANT_ID),r=localStorage.getItem(l.AUTH_TOKEN);return t&&(e["x-user-id"]=t),s&&(e["x-club-id"]=s),a&&(e["x-tenant-id"]=a),r&&(e.Authorization="Bearer ".concat(r)),e},n=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s="".concat("http://localhost:3333/api").concat(e),l=(0,a.A)((0,a.A)({},t),{},{headers:(0,a.A)((0,a.A)({},r()),t.headers)});try{const e=await fetch(s,l);if(!e.ok){let t;try{t=await e.json()}catch(na){t={message:e.statusText||"API Error: ".concat(e.status)}}if(401===e.status)throw new Error(t.message||"Invalid email or password");throw new Error(t.message||"API Error: ".concat(e.status))}return 204===e.status?null:await e.json()}catch(n){throw console.error("API Request Error:",n),n}},i={login:async(e,t)=>{const s=await n("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})});if(s.user)if(localStorage.setItem(l.USER_ID,s.user.id),localStorage.setItem(l.USER_EMAIL,s.user.email),localStorage.setItem("user",JSON.stringify({id:s.user.id,email:s.user.email,name:s.user.displayName||s.user.email,displayName:s.user.displayName,isMasterAdmin:s.user.isMasterAdmin||!1,staffId:s.user.staffId})),s.clubRoles&&s.clubRoles.length>0){const e=s.clubRoles[0];localStorage.setItem(l.USER_ROLE,e.role),localStorage.setItem(l.CLUB_ID,e.club.id),localStorage.setItem(l.TENANT_ID,e.club.tenantId)}else if(s.tenantRoles&&s.tenantRoles.length>0){const e=s.tenantRoles[0];localStorage.setItem(l.USER_ROLE,e.role),localStorage.setItem(l.TENANT_ID,e.tenant.id)}else s.user.isMasterAdmin&&localStorage.setItem(l.USER_ROLE,"MASTER_ADMIN");return s},logout:()=>{Object.values(l).forEach(e=>{localStorage.removeItem(e)})},getCurrentUser:()=>{const e=localStorage.getItem("user"),t=e?JSON.parse(e):{};return{userId:localStorage.getItem(l.USER_ID),email:localStorage.getItem(l.USER_EMAIL),role:localStorage.getItem(l.USER_ROLE),clubId:localStorage.getItem(l.CLUB_ID),tenantId:localStorage.getItem(l.TENANT_ID),isMasterAdmin:t.isMasterAdmin||!1,displayName:t.displayName||null}},isAuthenticated:()=>!!localStorage.getItem(l.USER_ID)},o={getClubs:async()=>await n("/clubs"),getClub:async e=>await n("/clubs/".concat(e)),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),getClubRevenue:async e=>await n("/clubs/".concat(e,"/revenue")),createClub:async e=>await n("/clubs",{method:"POST",body:JSON.stringify(e)}),updateClub:async(e,t)=>await n("/clubs/".concat(e),{method:"PUT",body:JSON.stringify(t)}),getActiveTablesForRakeCollection:async e=>await n("/clubs/".concat(e,"/rake-collections/active-tables")),createRakeCollection:async(e,t)=>await n("/clubs/".concat(e,"/rake-collections"),{method:"POST",body:JSON.stringify(t)}),getRakeCollections:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return""!==s&&null!==s&&void 0!==s})),a=new URLSearchParams(s).toString();return await n("/clubs/".concat(e,"/rake-collections").concat(a?"?".concat(a):""))},getRakeCollectionStats:async(e,t,s)=>{const a=new URLSearchParams;return t&&a.append("startDate",t),s&&a.append("endDate",s),await n("/clubs/".concat(e,"/rake-collections/stats").concat(a.toString()?"?".concat(a.toString()):""))},getBuyOutRequests:async e=>await n("/clubs/".concat(e,"/buyout-requests")),approveBuyOutRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyout-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)}),rejectBuyOutRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyout-requests/").concat(t,"/reject"),{method:"POST",body:JSON.stringify(s)}),getBuyInRequests:async e=>await n("/clubs/".concat(e,"/buyin-requests")),approveBuyInRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyin-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)}),rejectBuyInRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/buyin-requests/").concat(t,"/reject"),{method:"POST",body:JSON.stringify(s)}),getAttendanceRecords:async(e,t,s,a)=>{const l=new URLSearchParams;return t&&l.append("startDate",t),s&&l.append("endDate",s),a&&l.append("staffId",a),await n("/clubs/".concat(e,"/attendance").concat(l.toString()?"?".concat(l.toString()):""))},getAttendanceStats:async(e,t,s)=>{const a=new URLSearchParams;return t&&a.append("startDate",t),s&&a.append("endDate",s),await n("/clubs/".concat(e,"/attendance/stats").concat(a.toString()?"?".concat(a.toString()):""))},getSalaryPayments:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return""!==s&&null!==s&&void 0!==s})),a=new URLSearchParams(s).toString();return await n("/clubs/".concat(e,"/payroll/salary").concat(a?"?".concat(a):""))},createAttendanceRecord:async(e,t)=>await n("/clubs/".concat(e,"/attendance"),{method:"POST",body:JSON.stringify(t)})},d={getPlayers:async e=>await n("/clubs/".concat(e,"/players")),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),createPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players"),{method:"POST",body:JSON.stringify(t)}),updatePlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t),{method:"PUT",body:JSON.stringify(s)}),updateKycStatus:async(e,t,s,a)=>await n("/clubs/".concat(e,"/players/").concat(t,"/kyc-status"),{method:"PUT",body:JSON.stringify({kycStatus:s,approvedBy:a})}),getKycPending:async e=>(await n("/clubs/".concat(e,"/players"))).filter(e=>"pending"===e.kycStatus),getPendingApprovalPlayers:async e=>await n("/clubs/".concat(e,"/players-pending-approval")),getSuspendedPlayers:async e=>await n("/clubs/".concat(e,"/players-suspended"))},c={getTables:async e=>await n("/clubs/".concat(e,"/tables")),getTable:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t)),createTable:async(e,t)=>await n("/clubs/".concat(e,"/tables"),{method:"POST",body:JSON.stringify(t)}),updateTable:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteTable:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t),{method:"DELETE"}),assignSeat:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/assign-seat"),{method:"POST",body:JSON.stringify(s)}),pauseSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/pause-session"),{method:"POST"}),resumeSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/resume-session"),{method:"POST"}),endSession:async(e,t)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/end-session"),{method:"POST"}),updateSessionParams:async(e,t,s)=>await n("/clubs/".concat(e,"/tables/").concat(t,"/session-params"),{method:"PATCH",body:JSON.stringify(s)})},u={getWaitlist:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?status=".concat(t):"";return await n("/clubs/".concat(e,"/waitlist").concat(s))},addToWaitlist:async(e,t)=>await n("/clubs/".concat(e,"/waitlist"),{method:"POST",body:JSON.stringify(t)}),updateWaitlist:async(e,t,s)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"PUT",body:JSON.stringify(s)}),seatPlayer:async(e,t,s,a)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"PUT",body:JSON.stringify({status:"SEATED",tableNumber:s,seatedBy:a,seatedAt:(new Date).toISOString()})}),cancelWaitlist:async(e,t)=>await n("/clubs/".concat(e,"/waitlist/").concat(t),{method:"DELETE"})},m={getMenu:async e=>await n("/clubs/".concat(e,"/fnb/menu")),createMenuItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/menu"),{method:"POST",body:JSON.stringify(t)}),updateMenuItem:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/menu/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getOrders:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const l=new URLSearchParams;return t&&l.append("status",t),l.append("page",s.toString()),l.append("limit",a.toString()),await n("/clubs/".concat(e,"/fnb/orders?").concat(l.toString()))},createOrder:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders"),{method:"POST",body:JSON.stringify(t)}),updateOrderStatus:async(e,t,s,a)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t),{method:"PUT",body:JSON.stringify({status:s,processedBy:a})}),createKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations"),{method:"POST",body:JSON.stringify(t)}),getKitchenStations:async function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?activeOnly=true":"";return await n("/clubs/".concat(e,"/fnb/kitchen-stations").concat(t))},getKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t)),updateKitchenStation:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteKitchenStation:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t),{method:"DELETE"}),getStationStatistics:async(e,t)=>await n("/clubs/".concat(e,"/fnb/kitchen-stations/").concat(t,"/statistics")),acceptOrder:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/accept"),{method:"POST",body:JSON.stringify({stationId:s,isAccepted:!0})}),rejectOrder:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({rejectedReason:s,isAccepted:!1})}),markOrderReady:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/ready"),{method:"POST"}),markOrderDelivered:async(e,t)=>await n("/clubs/".concat(e,"/fnb/orders/").concat(t,"/delivered"),{method:"POST"}),getAllMenuCategories:async e=>await n("/clubs/".concat(e,"/fnb/categories/all")),createMenuCategory:async(e,t)=>await n("/clubs/".concat(e,"/fnb/categories"),{method:"POST",body:JSON.stringify({categoryName:t})}),deleteMenuCategory:async(e,t)=>await n("/clubs/".concat(e,"/fnb/categories/").concat(t),{method:"DELETE"}),getInventory:async e=>await n("/clubs/".concat(e,"/fnb/inventory")),createInventoryItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/inventory"),{method:"POST",body:JSON.stringify(t)}),updateInventory:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/inventory/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getSuppliers:async function(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?"?activeOnly=true":"";return await n("/clubs/".concat(e,"/fnb/suppliers").concat(t))},createSupplier:async(e,t)=>await n("/clubs/".concat(e,"/fnb/suppliers"),{method:"POST",body:JSON.stringify(t)}),updateSupplier:async(e,t,s)=>await n("/clubs/".concat(e,"/fnb/suppliers/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteSupplier:async(e,t)=>await n("/clubs/".concat(e,"/fnb/suppliers/").concat(t),{method:"DELETE"}),deleteMenuItem:async(e,t)=>await n("/clubs/".concat(e,"/fnb/menu/").concat(t),{method:"DELETE"})},x={getTournaments:async e=>{const t=await n("/clubs/".concat(e,"/tournaments"));return(null===t||void 0===t?void 0:t.tournaments)||t||[]},getTournamentById:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t)),createTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments"),{method:"POST",body:JSON.stringify(t)}),updateTournament:async(e,t,s)=>await n("/clubs/".concat(e,"/tournaments/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t),{method:"DELETE"}),startTournament:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/start"),{method:"POST"}),endTournament:async(e,t,s)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/end"),{method:"POST",body:JSON.stringify(s)}),getTournamentPlayers:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/players")),getTournamentWinners:async(e,t)=>await n("/clubs/".concat(e,"/tournaments/").concat(t,"/winners"))},h={getStaff:async e=>await n("/clubs/".concat(e,"/staff")),createStaff:async(e,t)=>await n("/clubs/".concat(e,"/staff"),{method:"POST",body:JSON.stringify(t)}),getAllStaffMembers:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.role&&s.append("role",t.role),t.status&&s.append("status",t.status),t.search&&s.append("search",t.search),t.sortBy&&s.append("sortBy",t.sortBy),t.sortOrder&&s.append("sortOrder",t.sortOrder);const a=s.toString();return await n("/clubs/".concat(e,"/staff-management").concat(a?"?"+a:""))},createStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/create"),{method:"POST",body:JSON.stringify(t)}),getStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t)),updateStaffMember:async(e,t,s)=>await n("/clubs/".concat(e,"/staff-management/").concat(t),{method:"PUT",body:JSON.stringify(s)}),suspendStaffMember:async(e,t,s)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/suspend"),{method:"POST",body:JSON.stringify({reason:s})}),reactivateStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/reactivate"),{method:"POST"}),deleteStaffMember:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t),{method:"DELETE"}),resetStaffPassword:async(e,t)=>await n("/clubs/".concat(e,"/staff-management/").concat(t,"/reset-password"),{method:"POST"}),updateStaff:async(e,t,s)=>await n("/clubs/".concat(e,"/staff/").concat(t),{method:"PUT",body:JSON.stringify(s)}),getAllChatableUsers:async e=>await n("/clubs/".concat(e,"/chat/chatable-users"))},p={getShifts:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/shifts").concat(t?"?"+t:""))},getShiftById:async(e,t)=>await n("/clubs/".concat(e,"/shifts/").concat(t)),createShift:async(e,t)=>await n("/clubs/".concat(e,"/shifts"),{method:"POST",body:JSON.stringify(t)}),updateShift:async(e,t,s)=>await n("/clubs/".concat(e,"/shifts/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),deleteShift:async(e,t)=>await n("/clubs/".concat(e,"/shifts/").concat(t),{method:"DELETE"}),copyShifts:async(e,t)=>await n("/clubs/".concat(e,"/shifts/copy"),{method:"POST",body:JSON.stringify(t)}),getDealers:async(e,t)=>{const s=t?"?date=".concat(t):"";return await n("/clubs/".concat(e,"/shifts-dealers").concat(s))},getAvailableDealersForDate:async(e,t)=>await n("/clubs/".concat(e,"/shifts/available-dealers?date=").concat(t)),deleteMultipleShifts:async(e,t)=>await n("/clubs/".concat(e,"/shifts/delete-multiple"),{method:"POST",body:JSON.stringify({shiftIds:t})})},b={processSalary:async(e,t)=>await n("/clubs/".concat(e,"/payroll/salary"),{method:"POST",body:JSON.stringify(t)}),getSalaryPayments:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/salary").concat(t?"?"+t:""))},getSalaryPaymentById:async(e,t)=>await n("/clubs/".concat(e,"/payroll/salary/").concat(t)),getAllStaffForPayroll:async e=>await n("/clubs/".concat(e,"/payroll/staff")),getDealersForPayroll:async e=>await n("/clubs/".concat(e,"/payroll/dealers")),getTipSettings:async(e,t)=>{const s=t?"?dealerId=".concat(t):"";return await n("/clubs/".concat(e,"/payroll/tips/settings").concat(s))},updateTipSettings:async(e,t,s)=>{const a=s?"?dealerId=".concat(s):"";return await n("/clubs/".concat(e,"/payroll/tips/settings").concat(a),{method:"POST",body:JSON.stringify(t)})},processDealerTips:async(e,t)=>await n("/clubs/".concat(e,"/payroll/tips"),{method:"POST",body:JSON.stringify(t)}),getDealerTips:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/tips").concat(t?"?"+t:""))},getDealerTipsSummary:async function(e,t){const s=new URLSearchParams(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).toString();return await n("/clubs/".concat(e,"/payroll/tips/").concat(t,"/summary").concat(s?"?"+s:""))},processDealerCashout:async(e,t)=>await n("/clubs/".concat(e,"/payroll/cashout"),{method:"POST",body:JSON.stringify(t)}),getDealerCashouts:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/payroll/cashout").concat(t?"?"+t:""))}},g={processPlayerBonus:async(e,t)=>await n("/clubs/".concat(e,"/bonuses/players"),{method:"POST",body:JSON.stringify(t)}),getPlayerBonuses:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/bonuses/players").concat(t?"?"+t:""))},getPlayersForBonus:async(e,t)=>{const s=t?"?search=".concat(encodeURIComponent(t)):"";return await n("/clubs/".concat(e,"/bonuses/players/list").concat(s))},processStaffBonus:async(e,t)=>await n("/clubs/".concat(e,"/bonuses/staff"),{method:"POST",body:JSON.stringify(t)}),getStaffBonuses:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/bonuses/staff").concat(t?"?"+t:""))},getStaffForBonus:async(e,t)=>{const s=t?"?search=".concat(encodeURIComponent(t)):"";return await n("/clubs/".concat(e,"/bonuses/staff/list").concat(s))}},f={getAffiliates:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/affiliates").concat(t?"?"+t:""))},getAffiliateReferrals:async function(e,t){const s=new URLSearchParams(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).toString();return await n("/clubs/".concat(e,"/affiliates/").concat(t,"/referrals").concat(s?"?"+s:""))},processAffiliatePayment:async(e,t)=>await n("/clubs/".concat(e,"/affiliates/payments"),{method:"POST",body:JSON.stringify(t)}),getAffiliateTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/affiliates/transactions").concat(t?"?"+t:""))}},y={getAllTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/financial-overrides/transactions").concat(t?"?"+t:""))},editTransaction:async(e,t,s)=>await n("/clubs/".concat(e,"/financial-overrides/transactions/").concat(t,"/edit"),{method:"PUT",body:JSON.stringify(s)}),cancelTransaction:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await n("/clubs/".concat(e,"/financial-overrides/transactions/").concat(t,"/cancel"),{method:"POST",body:JSON.stringify(s)})}},v={getTenants:async()=>await n("/tenants"),getTenant:async e=>await n("/tenants/".concat(e),{method:"GET"}),createTenant:async e=>{const t="string"===typeof e?{name:e}:e;return await n("/tenants",{method:"POST",body:JSON.stringify(t)})},createSuperAdmin:async(e,t,s)=>await n("/tenants/".concat(e,"/super-admins"),{method:"POST",body:JSON.stringify({email:t,displayName:s})}),setupTenant:async(e,t)=>await n("/tenants/".concat(e,"/setup"),{method:"POST",body:JSON.stringify(t)}),createClub:async(e,t)=>await n("/tenants/".concat(e,"/clubs"),{method:"POST",body:JSON.stringify(t)}),createClubWithBranding:async(e,t)=>{const s={name:t.name};return t.description&&(s.description=t.description),t.skinColor&&(s.skinColor=t.skinColor),t.gradient&&(s.gradient=t.gradient),t.logoUrl&&(s.logoUrl=t.logoUrl),t.videoUrl&&(s.videoUrl=t.videoUrl),await n("/tenants/".concat(e,"/clubs"),{method:"POST",body:JSON.stringify(s)})},getLogoUploadUrl:async(e,t)=>await n("/tenants/".concat(e,"/clubs/").concat(t,"/logo-upload-url"),{method:"POST"}),uploadLogo:async(e,t)=>{const s=await fetch(e,{method:"PUT",headers:{"Content-Type":"image/png"},body:t});if(!s.ok)throw new Error("Failed to upload logo");return s},getLogoPublicUrl:async(e,t)=>(await n("/tenants/".concat(e,"/clubs/").concat(t,"/logo-url"))).logoUrl},j={getCurrentUser:async()=>{const e=localStorage.getItem(l.USER_ID);if(!e)throw new Error("User not logged in");return await n("/users/".concat(e))},getAllClubs:async()=>await n("/clubs/master-admin/all"),updateClubStatus:async(e,t,s)=>await n("/clubs/".concat(e,"/status"),{method:"PUT",body:JSON.stringify({status:t,reason:s})}),updateClubDetails:async(e,t)=>await n("/clubs/".concat(e,"/master-admin/details"),{method:"PUT",body:JSON.stringify(t)}),updateClubSubscription:async(e,t)=>await n("/clubs/".concat(e,"/subscription"),{method:"PUT",body:JSON.stringify(t)}),updateClubTerms:async(e,t)=>await n("/clubs/".concat(e,"/terms"),{method:"PUT",body:JSON.stringify({termsAndConditions:t})}),updateClubRummyEnabled:async(e,t)=>await n("/clubs/".concat(e,"/rummy-enabled"),{method:"PUT",body:JSON.stringify({rummyEnabled:t})}),createTenantWithClub:async e=>await n("/tenants/with-club",{method:"POST",body:JSON.stringify(e)}),getDashboardStats:async()=>{try{const e=await j.getAllClubs(),t=await v.getTenants(),s=e.length,a=e.filter(e=>"active"===e.status).length,l=e.filter(e=>"suspended"===e.status).length,r=e.filter(e=>"killed"===e.status).length,n=e.reduce((e,t)=>e+(parseFloat(t.subscriptionPrice)||0),0);return{totalTenants:t.length,totalClubs:s,activeClubs:a,suspendedClubs:l,killedClubs:r,monthlyRevenue:n,clubs:e,tenants:t}}catch(e){return console.error("Error loading dashboard stats:",e),{totalTenants:0,totalClubs:0,activeClubs:0,suspendedClubs:0,killedClubs:0,monthlyRevenue:0,clubs:[],tenants:[]}}}},w={getClubs:async()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("superadminuser")||"{}"),s=e.id||t.userId;if(!s)throw new Error("User not logged in");return await n("/users/".concat(s,"/clubs"))},getClub:async e=>await n("/clubs/".concat(e)),getClubRevenue:async e=>await n("/clubs/".concat(e,"/revenue")),getAllPlayers:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/players?").concat(t))},createPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players"),{method:"POST",body:JSON.stringify(t)}),getPendingApprovalPlayers:async e=>await n("/clubs/".concat(e,"/players-pending-approval")),approvePlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/approve"),{method:"POST",body:JSON.stringify({notes:s})}),rejectPlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({reason:s})}),suspendPlayer:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/suspend"),{method:"POST",body:JSON.stringify(s)}),unsuspendPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t,"/unsuspend"),{method:"POST"}),getSuspendedPlayers:async e=>await n("/clubs/".concat(e,"/players-suspended")),getPlayer:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t)),getPlayers:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/players?").concat(t))},getPlayerBalance:async(e,t)=>await n("/clubs/".concat(e,"/players/").concat(t,"/balance")),getTransactions:async function(e){const t=new URLSearchParams(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).toString();return await n("/clubs/".concat(e,"/transactions").concat(t?"?"+t:""))},createTransaction:async(e,t)=>await n("/clubs/".concat(e,"/transactions"),{method:"POST",body:JSON.stringify(t)}),getCreditRequests:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?status=".concat(t):"";return await n("/clubs/".concat(e,"/credit-requests").concat(s))},approveCreditRequest:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return await n("/clubs/".concat(e,"/credit-requests/").concat(t,"/approve"),{method:"POST",body:JSON.stringify(s)})},rejectCreditRequest:async(e,t,s)=>await n("/clubs/".concat(e,"/credit-requests/").concat(t,"/deny"),{method:"POST",body:JSON.stringify(s)}),unlockCredit:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/enable-credit"),{method:"POST",body:JSON.stringify(s)}),updateCreditLimit:async(e,t,s)=>await n("/clubs/".concat(e,"/players/").concat(t,"/credit-limit"),{method:"PATCH",body:JSON.stringify(s)}),getVipProducts:async e=>await n("/clubs/".concat(e,"/vip-products")),createVipProduct:async(e,t)=>await n("/clubs/".concat(e,"/vip-products"),{method:"POST",body:JSON.stringify(t)}),updateVipProduct:async(e,t,s)=>await n("/clubs/".concat(e,"/vip-products/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deleteVipProduct:async(e,t)=>await n("/clubs/".concat(e,"/vip-products/").concat(t),{method:"DELETE"}),createVipProductImageUploadUrl:async(e,t)=>await n("/clubs/".concat(e,"/vip-products/upload-url"),{method:"POST",body:JSON.stringify({filename:t})}),uploadToSignedUrl:async(e,t)=>{try{const s=await fetch(e,{method:"PUT",body:t,headers:{"Content-Type":t.type||"image/png","Cache-Control":"3600"}});if(!s.ok){const t=await s.text().catch(()=>"Unknown error");throw console.error("Upload failed:",{status:s.status,statusText:s.statusText,error:t,url:e.substring(0,100)+"..."}),new Error("Upload failed (".concat(s.status,"): ").concat(s.statusText))}return s}catch(s){throw console.error("Upload error:",s),s}},getPushNotifications:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const s=t?"?notificationType=".concat(t):"";return await n("/clubs/".concat(e,"/push-notifications").concat(s))},createPushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications"),{method:"POST",body:JSON.stringify(t)}),updatePushNotification:async(e,t,s)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t),{method:"PUT",body:JSON.stringify(s)}),deletePushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t),{method:"DELETE"}),createPushNotificationUploadUrl:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return await n("/clubs/".concat(e,"/push-notifications/upload-url"),{method:"POST",body:JSON.stringify({filename:t,isVideo:s})})},sendPushNotification:async(e,t)=>await n("/clubs/".concat(e,"/push-notifications/").concat(t,"/send"),{method:"POST"}),getNotificationInbox:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;const l=JSON.parse(localStorage.getItem("user")||"{}").id;if(!l)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/inbox?recipientType=").concat(t,"&page=").concat(s,"&limit=").concat(a),{headers:{"x-user-id":l}})},getUnreadNotificationCount:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff";const s=JSON.parse(localStorage.getItem("user")||"{}").id;if(!s)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/unread-count?recipientType=").concat(t),{headers:{"x-user-id":s}})},markNotificationAsRead:async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"staff";const a=JSON.parse(localStorage.getItem("user")||"{}").id;if(!a)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/").concat(t,"/mark-read"),{method:"POST",headers:{"x-user-id":a},body:JSON.stringify({recipientType:s})})},markAllNotificationsAsRead:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"staff";const s=JSON.parse(localStorage.getItem("user")||"{}").id;if(!s)throw new Error("User ID not found");return await n("/clubs/".concat(e,"/notifications/mark-all-read"),{method:"POST",headers:{"x-user-id":s},body:JSON.stringify({recipientType:t})})}},N={createStaffChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/staff/sessions"),{method:"POST",body:JSON.stringify({recipientStaffId:t,subject:s})}),getStaffChatSessions:async function(e){let{page:t=1,limit:s=10,search:a,role:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new URLSearchParams;return r.append("page",t.toString()),r.append("limit",s.toString()),a&&r.append("search",a),l&&r.append("role",l),await n("/clubs/".concat(e,"/chat/staff/sessions?").concat(r.toString()))},createPlayerChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/player/sessions"),{method:"POST",body:JSON.stringify({playerId:t,subject:s})}),getPlayerChatSessions:async function(e){let{page:t=1,limit:s=10,status:a,search:l}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=new URLSearchParams;return r.append("page",t.toString()),r.append("limit",s.toString()),a&&r.append("status",a),l&&r.append("search",l),await n("/clubs/".concat(e,"/chat/player/sessions?").concat(r.toString()))},sendMessage:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t,"/messages"),{method:"POST",body:JSON.stringify({message:s})}),getSessionMessages:async function(e,t){let{page:s=1,limit:a=50}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const l=new URLSearchParams;return l.append("page",s.toString()),l.append("limit",a.toString()),await n("/clubs/".concat(e,"/chat/sessions/").concat(t,"/messages?").concat(l.toString()))},updateChatSession:async(e,t,s)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t),{method:"PATCH",body:JSON.stringify(s)}),getUnreadCounts:async e=>await n("/clubs/".concat(e,"/chat/unread-counts")),getChatableUsers:async e=>await n("/clubs/".concat(e,"/chat/chatable-users")),archiveChatSession:async(e,t)=>await n("/clubs/".concat(e,"/chat/sessions/").concat(t),{method:"DELETE"})},S={getLeavePolicies:async e=>await n("/clubs/".concat(e,"/leave-policies")),createLeavePolicy:async(e,t)=>await n("/clubs/".concat(e,"/leave-policies"),{method:"POST",body:JSON.stringify(t)}),updateLeavePolicy:async(e,t,s)=>await n("/clubs/".concat(e,"/leave-policies/").concat(encodeURIComponent(t)),{method:"PUT",body:JSON.stringify(s)}),deleteLeavePolicy:async(e,t)=>await n("/clubs/".concat(e,"/leave-policies/").concat(encodeURIComponent(t)),{method:"DELETE"}),getMyLeaveApplications:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.status&&s.append("status",t.status),t.startDate&&s.append("startDate",t.startDate),t.endDate&&s.append("endDate",t.endDate),t.page&&s.append("page",t.page.toString()),t.limit&&s.append("limit",t.limit.toString());const a=s.toString();return await n("/clubs/".concat(e,"/leave-applications/my-leaves").concat(a?"?"+a:""))},getLeaveBalance:async e=>await n("/clubs/".concat(e,"/leave-applications/balance")),getPendingLeaveApplications:async e=>await n("/clubs/".concat(e,"/leave-applications/pending")),getLeaveApplicationsForApproval:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=new URLSearchParams;t.status&&s.append("status",t.status),t.role&&s.append("role",t.role),t.startDate&&s.append("startDate",t.startDate),t.endDate&&s.append("endDate",t.endDate),t.search&&s.append("search",t.search),t.page&&s.append("page",t.page.toString()),t.limit&&s.append("limit",t.limit.toString());const a=s.toString();return await n("/clubs/".concat(e,"/leave-applications/for-approval").concat(a?"?"+a:""))},createLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications"),{method:"POST",body:JSON.stringify(t)}),approveLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/approve"),{method:"POST"}),rejectLeaveApplication:async(e,t,s)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/reject"),{method:"POST",body:JSON.stringify({rejectionReason:s})}),cancelLeaveApplication:async(e,t)=>await n("/clubs/".concat(e,"/leave-applications/").concat(t,"/cancel"),{method:"POST"})}}},t={};function s(a){var l=t[a];if(void 0!==l)return l.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,s),r.exports}s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var a=s(43),l=s(391);function r(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(-1!==t.indexOf(a))continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],-1===t.indexOf(s)&&{}.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}var n=s(555);const i=["sri"],o=["page"],d=["page","matches"],c=["onClick","discover","prefetch","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],m=["discover","fetcherKey","navigate","reloadDocument","replace","state","method","action","onSubmit","relative","preventScrollReset","viewTransition"];var x="popstate";function h(){return j(function(e,t){let{pathname:s,search:a,hash:l}=e.location;return f("",{pathname:s,search:a,hash:l},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:y(t)},null,arguments.length>0&&void 0!==arguments[0]?arguments[0]:{})}function p(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function b(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(na){}}}function g(e,t){return{usr:e.state,key:e.key,idx:t}}function f(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=arguments.length>3?arguments[3]:void 0;return(0,n.A)((0,n.A)({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?v(t):t),{},{state:s,key:t&&t.key||a||Math.random().toString(36).substring(2,10)})}function y(e){let{pathname:t="/",search:s="",hash:a=""}=e;return s&&"?"!==s&&(t+="?"===s.charAt(0)?s:"?"+s),a&&"#"!==a&&(t+="#"===a.charAt(0)?a:"#"+a),t}function v(e){let t={};if(e){let s=e.indexOf("#");s>=0&&(t.hash=e.substring(s),e=e.substring(0,s));let a=e.indexOf("?");a>=0&&(t.search=e.substring(a),e=e.substring(0,a)),e&&(t.pathname=e)}return t}function j(e,t,s){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},{window:l=document.defaultView,v5Compat:r=!1}=a,i=l.history,o="POP",d=null,c=u();function u(){return(i.state||{idx:null}).idx}function m(){o="POP";let e=u(),t=null==e?null:e-c;c=e,d&&d({action:o,location:p.location,delta:t})}function h(e){return w(e)}null==c&&(c=0,i.replaceState((0,n.A)((0,n.A)({},i.state),{},{idx:c}),""));let p={get action(){return o},get location(){return e(l,i)},listen(e){if(d)throw new Error("A history only accepts one active listener");return l.addEventListener(x,m),d=e,()=>{l.removeEventListener(x,m),d=null}},createHref:e=>t(l,e),createURL:h,encodeLocation(e){let t=h(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){o="PUSH";let a=f(p.location,e,t);s&&s(a,e),c=u()+1;let n=g(a,c),m=p.createHref(a);try{i.pushState(n,"",m)}catch(x){if(x instanceof DOMException&&"DataCloneError"===x.name)throw x;l.location.assign(m)}r&&d&&d({action:o,location:p.location,delta:1})},replace:function(e,t){o="REPLACE";let a=f(p.location,e,t);s&&s(a,e),c=u();let l=g(a,c),n=p.createHref(a);i.replaceState(l,"",n),r&&d&&d({action:o,location:p.location,delta:0})},go:e=>i.go(e)};return p}function w(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s="http://localhost";"undefined"!==typeof window&&(s="null"!==window.location.origin?window.location.origin:window.location.href),p(s,"No window.location.(origin|href) available to create URL");let a="string"===typeof e?e:y(e);return a=a.replace(/ $/,"%20"),!t&&a.startsWith("//")&&(a=s+a),new URL(a,s)}new WeakMap;function N(e,t){return S(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"/",!1)}function S(e,t,s,a){let l=B(("string"===typeof t?v(t):t).pathname||"/",s);if(null==l)return null;let r=C(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let s=e.length===t.length&&e.slice(0,-1).every((e,s)=>e===t[s]);return s?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(r);let n=null;for(let i=0;null==n&&i<r.length;++i){let e=F(l);n=L(r[i],e,a)}return n}function C(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",l=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l,i=arguments.length>3?arguments[3]:void 0,o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:r,route:e};if(o.relativePath.startsWith("/")){if(!o.relativePath.startsWith(a)&&n)return;p(o.relativePath.startsWith(a),'Absolute route path "'.concat(o.relativePath,'" nested under path "').concat(a,'" is not valid. An absolute child route path must start with the combined path of all its parent routes.')),o.relativePath=o.relativePath.slice(a.length)}let d=H([a,o.relativePath]),c=s.concat(o);e.children&&e.children.length>0&&(p(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'.concat(d,'".')),C(e.children,t,c,d,n)),(null!=e.path||e.index)&&t.push({path:d,score:R(d,e.index),routesMeta:c})};return e.forEach((e,t)=>{var s;if(""!==e.path&&null!==(s=e.path)&&void 0!==s&&s.includes("?"))for(let a of k(e.path))r(e,t,!0,a);else r(e,t)}),t}function k(e){let t=e.split("/");if(0===t.length)return[];let[s,...a]=t,l=s.endsWith("?"),r=s.replace(/\?$/,"");if(0===a.length)return l?[r,""]:[r];let n=k(a.join("/")),i=[];return i.push(...n.map(e=>""===e?r:[r,e].join("/"))),l&&i.push(...n),i.map(t=>e.startsWith("/")&&""===t?"/":t)}var P=/^:[\w-]+$/,A=3,I=2,D=1,T=10,_=-2,E=e=>"*"===e;function R(e,t){let s=e.split("/"),a=s.length;return s.some(E)&&(a+=_),t&&(a+=I),s.filter(e=>!E(e)).reduce((e,t)=>e+(P.test(t)?A:""===t?D:T),a)}function L(e,t){let s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],{routesMeta:a}=e,l={},r="/",n=[];for(let i=0;i<a.length;++i){let e=a[i],o=i===a.length-1,d="/"===r?t:t.slice(r.length)||"/",c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:o},d),u=e.route;if(!c&&o&&s&&!a[a.length-1].route.index&&(c=O({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},d)),!c)return null;Object.assign(l,c.params),n.push({params:l,pathname:H([r,c.pathname]),pathnameBase:V(H([r,c.pathnameBase])),route:u}),"/"!==c.pathnameBase&&(r=H([r,c.pathnameBase]))}return n}function O(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[s,a]=M(e.path,e.caseSensitive,e.end),l=t.match(s);if(!l)return null;let r=l[0],n=r.replace(/(.)\/+$/,"$1"),i=l.slice(1);return{params:a.reduce((e,t,s)=>{let{paramName:a,isOptional:l}=t;if("*"===a){let e=i[s]||"";n=r.slice(0,r.length-e.length).replace(/(.)\/+$/,"$1")}const o=i[s];return e[a]=l&&!o?void 0:(o||"").replace(/%2F/g,"/"),e},{}),pathname:r,pathnameBase:n,pattern:e}}function M(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];b("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'.concat(e,'" will be treated as if it were "').concat(e.replace(/\*$/,"/*"),'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "').concat(e.replace(/\*$/,"/*"),'".'));let a=[],l="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,s)=>(a.push({paramName:t,isOptional:null!=s}),s?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(a.push({paramName:"*"}),l+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?l+="\\/*$":""!==e&&"/"!==e&&(l+="(?:(?=\\/|$))"),[new RegExp(l,t?void 0:"i"),a]}function F(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return b(!1,'The URL path "'.concat(e,'" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (').concat(t,").")),e}}function B(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let s=t.endsWith("/")?t.length-1:t.length,a=e.charAt(s);return a&&"/"!==a?null:e.slice(s)||"/"}function q(e,t,s,a){return"Cannot include a '".concat(e,"' character in a manually specified `to.").concat(t,"` field [").concat(JSON.stringify(a),"].  Please separate it out to the `to.").concat(s,'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.')}function z(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e){let t=z(e);return t.map((e,s)=>s===t.length-1?e.pathname:e.pathnameBase)}function W(e,t,s){let a,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];"string"===typeof e?a=v(e):(a=(0,n.A)({},e),p(!a.pathname||!a.pathname.includes("?"),q("?","pathname","search",a)),p(!a.pathname||!a.pathname.includes("#"),q("#","pathname","hash",a)),p(!a.search||!a.search.includes("#"),q("#","search","hash",a)));let r,i=""===e||""===a.pathname,o=i?"/":a.pathname;if(null==o)r=s;else{let e=t.length-1;if(!l&&o.startsWith("..")){let t=o.split("/");for(;".."===t[0];)t.shift(),e-=1;a.pathname=t.join("/")}r=e>=0?t[e]:"/"}let d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/",{pathname:s,search:a="",hash:l=""}="string"===typeof e?v(e):e,r=s?s.startsWith("/")?s:function(e,t){let s=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?s.length>1&&s.pop():"."!==e&&s.push(e)}),s.length>1?s.join("/"):"/"}(s,t):t;return{pathname:r,search:J(a),hash:K(l)}}(a,r),c=o&&"/"!==o&&o.endsWith("/"),u=(i||"."===o)&&s.endsWith("/");return d.pathname.endsWith("/")||!c&&!u||(d.pathname+="/"),d}var H=e=>e.join("/").replace(/\/\/+/g,"/"),V=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),J=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",K=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";function Q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}var G=["POST","PUT","PATCH","DELETE"],Y=(new Set(G),["GET",...G]);new Set(Y),Symbol("ResetLoaderData");var $=a.createContext(null);$.displayName="DataRouter";var Z=a.createContext(null);Z.displayName="DataRouterState";var X=a.createContext(!1);var ee=a.createContext({isTransitioning:!1});ee.displayName="ViewTransition";var te=a.createContext(new Map);te.displayName="Fetchers";var se=a.createContext(null);se.displayName="Await";var ae=a.createContext(null);ae.displayName="Navigation";var le=a.createContext(null);le.displayName="Location";var re=a.createContext({outlet:null,matches:[],isDataRoute:!1});re.displayName="Route";var ne=a.createContext(null);ne.displayName="RouteError";function ie(){return null!=a.useContext(le)}function oe(){return p(ie(),"useLocation() may be used only in the context of a <Router> component."),a.useContext(le).location}var de="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function ce(e){a.useContext(ae).static||a.useLayoutEffect(e)}function ue(){let{isDataRoute:e}=a.useContext(re);return e?function(){let{router:e}=ve("useNavigate"),t=we("useNavigate"),s=a.useRef(!1);ce(()=>{s.current=!0});let l=a.useCallback(async function(a){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b(s.current,de),s.current&&("number"===typeof a?e.navigate(a):await e.navigate(a,(0,n.A)({fromRouteId:t},l)))},[e,t]);return l}():function(){p(ie(),"useNavigate() may be used only in the context of a <Router> component.");let e=a.useContext($),{basename:t,navigator:s}=a.useContext(ae),{matches:l}=a.useContext(re),{pathname:r}=oe(),n=JSON.stringify(U(l)),i=a.useRef(!1);ce(()=>{i.current=!0});let o=a.useCallback(function(a){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(b(i.current,de),!i.current)return;if("number"===typeof a)return void s.go(a);let o=W(a,JSON.parse(n),r,"path"===l.relative);null==e&&"/"!==t&&(o.pathname="/"===o.pathname?t:H([t,o.pathname])),(l.replace?s.replace:s.push)(o,l.state,l)},[t,s,n,r,e]);return o}()}a.createContext(null);function me(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{matches:s}=a.useContext(re),{pathname:l}=oe(),r=JSON.stringify(U(s));return a.useMemo(()=>W(e,JSON.parse(r),l,"path"===t),[e,r,l,t])}function xe(e,t,s,l,r){p(ie(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=a.useContext(ae),{matches:o}=a.useContext(re),d=o[o.length-1],c=d?d.params:{},u=d?d.pathname:"/",m=d?d.pathnameBase:"/",x=d&&d.route;{let e=x&&x.path||"";Ce(u,!x||e.endsWith("*")||e.endsWith("*?"),'You rendered descendant <Routes> (or called `useRoutes()`) at "'.concat(u,'" (under <Route path="').concat(e,'">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won\'t match anymore and therefore the child routes will never render.\n\nPlease change the parent <Route path="').concat(e,'"> to <Route path="').concat("/"===e?"*":"".concat(e,"/*"),'">.'))}let h,g=oe();if(t){var f;let e="string"===typeof t?v(t):t;p("/"===m||(null===(f=e.pathname)||void 0===f?void 0:f.startsWith(m)),'When overriding the location using `<Routes location>` or `useRoutes(routes, location)`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "'.concat(m,'" but pathname "').concat(e.pathname,'" was given in the `location` prop.')),h=e}else h=g;let y=h.pathname||"/",j=y;if("/"!==m){let e=m.replace(/^\//,"").split("/");j="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let w=N(e,{pathname:j});b(x||null!=w,'No routes matched location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" ')),b(null==w||void 0!==w[w.length-1].route.element||void 0!==w[w.length-1].route.Component||void 0!==w[w.length-1].route.lazy,'Matched leaf route at location "'.concat(h.pathname).concat(h.search).concat(h.hash,'" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.'));let S=fe(w&&w.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:H([m,i.encodeLocation?i.encodeLocation(e.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?m:H([m,i.encodeLocation?i.encodeLocation(e.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:e.pathnameBase])})),o,s,l,r);return t&&S?a.createElement(le.Provider,{value:{location:(0,n.A)({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:"POP"}},S):S}function he(){let e=Ne(),t=Q(e)?"".concat(e.status," ").concat(e.statusText):e instanceof Error?e.message:JSON.stringify(e),s=e instanceof Error?e.stack:null,l="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:l},n={padding:"2px 4px",backgroundColor:l},i=null;return console.error("Error handled by React Router default ErrorBoundary:",e),i=a.createElement(a.Fragment,null,a.createElement("p",null,"\ud83d\udcbf Hey developer \ud83d\udc4b"),a.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",a.createElement("code",{style:n},"ErrorBoundary")," or"," ",a.createElement("code",{style:n},"errorElement")," prop on your route.")),a.createElement(a.Fragment,null,a.createElement("h2",null,"Unexpected Application Error!"),a.createElement("h3",{style:{fontStyle:"italic"}},t),s?a.createElement("pre",{style:r},s):null,i)}var pe=a.createElement(he,null),be=class extends a.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return void 0!==this.state.error?a.createElement(re.Provider,{value:this.props.routeContext},a.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ge(e){let{routeContext:t,match:s,children:l}=e,r=a.useContext($);return r&&r.static&&r.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=s.route.id),a.createElement(re.Provider,{value:t},l)}function fe(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(null==e){if(!s)return null;if(s.errors)e=s.matches;else{if(0!==t.length||s.initialized||!(s.matches.length>0))return null;e=s.matches}}let r=e,n=null===s||void 0===s?void 0:s.errors;if(null!=n){let e=r.findIndex(e=>e.route.id&&void 0!==(null===n||void 0===n?void 0:n[e.route.id]));p(e>=0,"Could not find a matching route for errors on route IDs: ".concat(Object.keys(n).join(","))),r=r.slice(0,Math.min(r.length,e+1))}let i=!1,o=-1;if(s)for(let a=0;a<r.length;a++){let e=r[a];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(o=a),e.route.id){let{loaderData:t,errors:a}=s,l=e.route.loader&&!t.hasOwnProperty(e.route.id)&&(!a||void 0===a[e.route.id]);if(e.route.lazy||l){i=!0,r=o>=0?r.slice(0,o+1):[r[0]];break}}}return r.reduceRight((e,d,c)=>{let u,m=!1,x=null,h=null;s&&(u=n&&d.route.id?n[d.route.id]:void 0,x=d.route.errorElement||pe,i&&(o<0&&0===c?(Ce("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),m=!0,h=null):o===c&&(m=!0,h=d.route.hydrateFallbackElement||null)));let p=t.concat(r.slice(0,c+1)),b=()=>{let t;return t=u?x:m?h:d.route.Component?a.createElement(d.route.Component,null):d.route.element?d.route.element:e,a.createElement(ge,{match:d,routeContext:{outlet:e,matches:p,isDataRoute:null!=s},children:t})};return s&&(d.route.ErrorBoundary||d.route.errorElement||0===c)?a.createElement(be,{location:s.location,revalidation:s.revalidation,component:x,error:u,children:b(),routeContext:{outlet:null,matches:p,isDataRoute:!0},unstable_onError:l}):b()},null)}function ye(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function ve(e){let t=a.useContext($);return p(t,ye(e)),t}function je(e){let t=a.useContext(Z);return p(t,ye(e)),t}function we(e){let t=function(e){let t=a.useContext(re);return p(t,ye(e)),t}(e),s=t.matches[t.matches.length-1];return p(s.route.id,"".concat(e,' can only be used on routes that contain a unique "id"')),s.route.id}function Ne(){var e;let t=a.useContext(ne),s=je("useRouteError"),l=we("useRouteError");return void 0!==t?t:null===(e=s.errors)||void 0===e?void 0:e[l]}var Se={};function Ce(e,t,s){t||Se[e]||(Se[e]=!0,b(!1,s))}var ke={};function Pe(e,t){e||ke[t]||(ke[t]=!0,console.warn(t))}a.memo(function(e){let{routes:t,future:s,state:a,unstable_onError:l}=e;return xe(t,void 0,a,l,s)});function Ae(e){let{to:t,replace:s,state:l,relative:r}=e;p(ie(),"<Navigate> may be used only in the context of a <Router> component.");let{static:n}=a.useContext(ae);b(!n,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=a.useContext(re),{pathname:o}=oe(),d=ue(),c=W(t,U(i),o,"path"===r),u=JSON.stringify(c);return a.useEffect(()=>{d(JSON.parse(u),{replace:s,state:l,relative:r})},[d,u,r,s,l]),null}function Ie(e){p(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function De(e){let{basename:t="/",children:s=null,location:l,navigationType:r="POP",navigator:n,static:i=!1}=e;p(!ie(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),d=a.useMemo(()=>({basename:o,navigator:n,static:i,future:{}}),[o,n,i]);"string"===typeof l&&(l=v(l));let{pathname:c="/",search:u="",hash:m="",state:x=null,key:h="default"}=l,g=a.useMemo(()=>{let e=B(c,o);return null==e?null:{location:{pathname:e,search:u,hash:m,state:x,key:h},navigationType:r}},[o,c,u,m,x,h,r]);return b(null!=g,'<Router basename="'.concat(o,'"> is not able to match the URL "').concat(c).concat(u).concat(m,"\" because it does not start with the basename, so the <Router> won't render anything.")),null==g?null:a.createElement(ae.Provider,{value:d},a.createElement(le.Provider,{children:s,value:g}))}function Te(e){let{children:t,location:s}=e;return xe(_e(t),s)}a.Component;function _e(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],s=[];return a.Children.forEach(e,(e,l)=>{if(!a.isValidElement(e))return;let r=[...t,l];if(e.type===a.Fragment)return void s.push.apply(s,_e(e.props.children,r));p(e.type===Ie,"[".concat("string"===typeof e.type?e.type:e.type.name,"] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>")),p(!e.props.index||!e.props.children,"An index route cannot have child routes.");let n={id:e.props.id||r.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,middleware:e.props.middleware,loader:e.props.loader,action:e.props.action,hydrateFallbackElement:e.props.hydrateFallbackElement,HydrateFallback:e.props.HydrateFallback,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:!0===e.props.hasErrorBoundary||null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(n.children=_e(e.props.children,r)),s.push(n)}),s}var Ee="get",Re="application/x-www-form-urlencoded";function Le(e){return null!=e&&"string"===typeof e.tagName}var Oe=null;var Me=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Fe(e){return null==e||Me.has(e)?e:(b(!1,'"'.concat(e,'" is not a valid `encType` for `<Form>`/`<fetcher.Form>` and will default to "').concat(Re,'"')),null)}function Be(e,t){let s,a,l,r,n;if(Le(i=e)&&"form"===i.tagName.toLowerCase()){let n=e.getAttribute("action");a=n?B(n,t):null,s=e.getAttribute("method")||Ee,l=Fe(e.getAttribute("enctype"))||Re,r=new FormData(e)}else if(function(e){return Le(e)&&"button"===e.tagName.toLowerCase()}(e)||function(e){return Le(e)&&"input"===e.tagName.toLowerCase()}(e)&&("submit"===e.type||"image"===e.type)){let n=e.form;if(null==n)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let i=e.getAttribute("formaction")||n.getAttribute("action");if(a=i?B(i,t):null,s=e.getAttribute("formmethod")||n.getAttribute("method")||Ee,l=Fe(e.getAttribute("formenctype"))||Fe(n.getAttribute("enctype"))||Re,r=new FormData(n,e),!function(){if(null===Oe)try{new FormData(document.createElement("form"),0),Oe=!1}catch(na){Oe=!0}return Oe}()){let{name:t,type:s,value:a}=e;if("image"===s){let e=t?"".concat(t,"."):"";r.append("".concat(e,"x"),"0"),r.append("".concat(e,"y"),"0")}else t&&r.append(t,a)}}else{if(Le(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Ee,a=null,l=Re,n=e}var i;return r&&"text/plain"===l&&(n=r,r=void 0),{action:a,method:s.toLowerCase(),encType:l,formData:r,body:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");"undefined"!==typeof window?window:"undefined"!==typeof globalThis&&globalThis;function qe(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}Symbol("SingleFetchRedirect");function ze(e,t,s){let a="string"===typeof e?new URL(e,"undefined"===typeof window?"server://singlefetch/":window.location.origin):e;return"/"===a.pathname?a.pathname="_root.".concat(s):t&&"/"===B(a.pathname,t)?a.pathname="".concat(t.replace(/\/$/,""),"/_root.").concat(s):a.pathname="".concat(a.pathname.replace(/\/$/,""),".").concat(s),a}async function Ue(e,t){if(e.id in t)return t[e.id];try{let s=await import(e.module);return t[e.id]=s,s}catch(s){return console.error("Error loading route module `".concat(e.module,"`, reloading page...")),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function We(e){return null!=e&&"string"===typeof e.page}function He(e){return null!=e&&(null==e.href?"preload"===e.rel&&"string"===typeof e.imageSrcSet&&"string"===typeof e.imageSizes:"string"===typeof e.rel&&"string"===typeof e.href)}function Ve(e,t,s,a,l,r){let n=(e,t)=>!s[t]||e.route.id!==s[t].route.id,i=(e,t)=>{var a;return s[t].pathname!==e.pathname||(null===(a=s[t].route.path)||void 0===a?void 0:a.endsWith("*"))&&s[t].params["*"]!==e.params["*"]};return"assets"===r?t.filter((e,t)=>n(e,t)||i(e,t)):"data"===r?t.filter((t,r)=>{let o=a.routes[t.route.id];if(!o||!o.hasLoader)return!1;if(n(t,r)||i(t,r))return!0;if(t.route.shouldRevalidate){var d;let a=t.route.shouldRevalidate({currentUrl:new URL(l.pathname+l.search+l.hash,window.origin),currentParams:(null===(d=s[0])||void 0===d?void 0:d.params)||{},nextUrl:new URL(e,window.origin),nextParams:t.params,defaultShouldRevalidate:!0});if("boolean"===typeof a)return a}return!0}):[]}function Je(e,t){let{includeHydrateFallback:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return a=e.map(e=>{let a=t.routes[e.route.id];if(!a)return[];let l=[a.module];return a.clientActionModule&&(l=l.concat(a.clientActionModule)),a.clientLoaderModule&&(l=l.concat(a.clientLoaderModule)),s&&a.hydrateFallbackModule&&(l=l.concat(a.hydrateFallbackModule)),a.imports&&(l=l.concat(a.imports)),l}).flat(1),[...new Set(a)];var a}function Ke(e,t){let s=new Set,a=new Set(t);return e.reduce((e,l)=>{if(t&&!We(l)&&"script"===l.as&&l.href&&a.has(l.href))return e;let r=JSON.stringify(function(e){let t={},s=Object.keys(e).sort();for(let a of s)t[a]=e[a];return t}(l));return s.has(r)||(s.add(r),e.push({key:r,link:l})),e},[])}function Qe(e,t){return"lazy"===e.mode&&!0===t}function Ge(){let e=a.useContext($);return qe(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ye(){let e=a.useContext(Z);return qe(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var $e=a.createContext(void 0);function Ze(){let e=a.useContext($e);return qe(e,"You must render this element inside a <HydratedRouter> element"),e}function Xe(e,t){return s=>{e&&e(s),s.defaultPrevented||t(s)}}function et(e,t,s){if(s&&!lt)return[e[0]];if(t){let s=e.findIndex(e=>void 0!==t[e.route.id]);return e.slice(0,s+1)}return e}$e.displayName="FrameworkContext";function tt(e){let{page:t}=e,s=r(e,o),{router:l}=Ge(),i=a.useMemo(()=>N(l.routes,t,l.basename),[l.routes,t,l.basename]);return i?a.createElement(at,(0,n.A)({page:t,matches:i},s)):null}function st(e){let{manifest:t,routeModules:s}=Ze(),[l,r]=a.useState([]);return a.useEffect(()=>{let a=!1;return async function(e,t,s){return Ke((await Promise.all(e.map(async e=>{let a=t.routes[e.route.id];if(a){let e=await Ue(a,s);return e.links?e.links():[]}return[]}))).flat(1).filter(He).filter(e=>"stylesheet"===e.rel||"preload"===e.rel).map(e=>"stylesheet"===e.rel?(0,n.A)((0,n.A)({},e),{},{rel:"prefetch",as:"style"}):(0,n.A)((0,n.A)({},e),{},{rel:"prefetch"})))}(e,t,s).then(e=>{a||r(e)}),()=>{a=!0}},[e,t,s]),l}function at(e){let{page:t,matches:s}=e,l=r(e,d),i=oe(),{manifest:o,routeModules:c}=Ze(),{basename:u}=Ge(),{loaderData:m,matches:x}=Ye(),h=a.useMemo(()=>Ve(t,s,x,o,i,"data"),[t,s,x,o,i]),p=a.useMemo(()=>Ve(t,s,x,o,i,"assets"),[t,s,x,o,i]),b=a.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let e=new Set,a=!1;if(s.forEach(t=>{var s;let l=o.routes[t.route.id];l&&l.hasLoader&&(!h.some(e=>e.route.id===t.route.id)&&t.route.id in m&&null!==(s=c[t.route.id])&&void 0!==s&&s.shouldRevalidate||l.hasClientLoader?a=!0:e.add(t.route.id))}),0===e.size)return[];let l=ze(t,u,"data");return a&&e.size>0&&l.searchParams.set("_routes",s.filter(t=>e.has(t.route.id)).map(e=>e.route.id).join(",")),[l.pathname+l.search]},[u,m,i,o,h,s,t,c]),g=a.useMemo(()=>Je(p,o),[p,o]),f=st(p);return a.createElement(a.Fragment,null,b.map(e=>a.createElement("link",(0,n.A)({key:e,rel:"prefetch",as:"fetch",href:e},l))),g.map(e=>a.createElement("link",(0,n.A)({key:e,rel:"modulepreload",href:e},l))),f.map(e=>{let{key:t,link:s}=e;return a.createElement("link",(0,n.A)({key:t,nonce:l.nonce},s))}))}var lt=!1;function rt(e){let{manifest:t,serverHandoffString:s,isSpaMode:l,renderMeta:o,routeDiscovery:d,ssr:c}=Ze(),{router:u,static:m,staticContext:x}=Ge(),{matches:h}=Ye(),p=a.useContext(X),b=Qe(d,c);o&&(o.didRenderScripts=!0);let g=et(h,null,l);a.useEffect(()=>{lt=!0},[]);let f=a.useMemo(()=>{var l;if(p)return null;let o=x?"window.__reactRouterContext = ".concat(s,";").concat("window.__reactRouterContext.stream = new ReadableStream({start(controller){window.__reactRouterContext.streamController = controller;}}).pipeThrough(new TextEncoderStream());"):" ",d=m?"".concat(null!==(l=t.hmr)&&void 0!==l&&l.runtime?"import ".concat(JSON.stringify(t.hmr.runtime),";"):"").concat(b?"":"import ".concat(JSON.stringify(t.url)),";\n").concat(g.map((e,s)=>{let a="route".concat(s),l=t.routes[e.route.id];qe(l,"Route ".concat(e.route.id," not found in manifest"));let{clientActionModule:r,clientLoaderModule:n,clientMiddlewareModule:i,hydrateFallbackModule:o,module:d}=l,c=[...r?[{module:r,varName:"".concat(a,"_clientAction")}]:[],...n?[{module:n,varName:"".concat(a,"_clientLoader")}]:[],...i?[{module:i,varName:"".concat(a,"_clientMiddleware")}]:[],...o?[{module:o,varName:"".concat(a,"_HydrateFallback")}]:[],{module:d,varName:"".concat(a,"_main")}];return 1===c.length?"import * as ".concat(a," from ").concat(JSON.stringify(d),";"):[c.map(e=>"import * as ".concat(e.varName,' from "').concat(e.module,'";')).join("\n"),"const ".concat(a," = {").concat(c.map(e=>"...".concat(e.varName)).join(","),"};")].join("\n")}).join("\n"),"\n  ").concat(b?"window.__reactRouterManifest = ".concat(JSON.stringify(function(e,t){let{sri:s}=e,a=r(e,i),l=new Set(t.state.matches.map(e=>e.route.id)),o=t.state.location.pathname.split("/").filter(Boolean),d=["/"];for(o.pop();o.length>0;)d.push("/".concat(o.join("/"))),o.pop();d.forEach(e=>{let s=N(t.routes,e,t.basename);s&&s.forEach(e=>l.add(e.route.id))});let c=[...l].reduce((e,t)=>Object.assign(e,{[t]:a.routes[t]}),{});return(0,n.A)((0,n.A)({},a),{},{routes:c,sri:!!s||void 0})}(t,u),null,2),";"):"","\n  window.__reactRouterRouteModules = {").concat(g.map((e,t)=>"".concat(JSON.stringify(e.route.id),":route").concat(t)).join(","),"};\n\nimport(").concat(JSON.stringify(t.entry.module),");"):" ";return a.createElement(a.Fragment,null,a.createElement("script",(0,n.A)((0,n.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:o},type:void 0})),a.createElement("script",(0,n.A)((0,n.A)({},e),{},{suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:d},type:"module",async:!0})))},[]),y=lt||p?[]:(v=t.entry.imports.concat(Je(g,t,{includeHydrateFallback:!0})),[...new Set(v)]);var v;let j="object"===typeof t.sri?t.sri:{};return Pe(!p,"The <Scripts /> element is a no-op when using RSC and can be safely removed."),lt||p?null:a.createElement(a.Fragment,null,"object"===typeof t.sri?a.createElement("script",{"rr-importmap":"",type:"importmap",suppressHydrationWarning:!0,dangerouslySetInnerHTML:{__html:JSON.stringify({integrity:j})}}):null,b?null:a.createElement("link",{rel:"modulepreload",href:t.url,crossOrigin:e.crossOrigin,integrity:j[t.url],suppressHydrationWarning:!0}),a.createElement("link",{rel:"modulepreload",href:t.entry.module,crossOrigin:e.crossOrigin,integrity:j[t.entry.module],suppressHydrationWarning:!0}),y.map(t=>a.createElement("link",{key:t,rel:"modulepreload",href:t,crossOrigin:e.crossOrigin,integrity:j[t],suppressHydrationWarning:!0})),f)}function nt(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return e=>{t.forEach(t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)})}}a.Component;function it(e){let{error:t,isOutsideRemixApp:s}=e;console.error(t);let l,r=a.createElement("script",{dangerouslySetInnerHTML:{__html:'\n        console.log(\n          "\ud83d\udcbf Hey developer \ud83d\udc4b. You can provide a way better UX than this when your app throws errors. Check out https://reactrouter.com/how-to/error-boundary for more information."\n        );\n      '}});if(Q(t))return a.createElement(ot,{title:"Unhandled Thrown Response!"},a.createElement("h1",{style:{fontSize:"24px"}},t.status," ",t.statusText),r);if(t instanceof Error)l=t;else{let e=null==t?"Unknown Error":"object"===typeof t&&"toString"in t?t.toString():JSON.stringify(t);l=new Error(e)}return a.createElement(ot,{title:"Application Error!",isOutsideRemixApp:s},a.createElement("h1",{style:{fontSize:"24px"}},"Application Error"),a.createElement("pre",{style:{padding:"2rem",background:"hsla(10, 50%, 50%, 0.1)",color:"red",overflow:"auto"}},l.stack),r)}function ot(e){var t;let{title:s,renderScripts:l,isOutsideRemixApp:r,children:n}=e,{routeModules:i}=Ze();return null!==(t=i.root)&&void 0!==t&&t.Layout&&!r?n:a.createElement("html",{lang:"en"},a.createElement("head",null,a.createElement("meta",{charSet:"utf-8"}),a.createElement("meta",{name:"viewport",content:"width=device-width,initial-scale=1,viewport-fit=cover"}),a.createElement("title",null,s)),a.createElement("body",null,a.createElement("main",{style:{fontFamily:"system-ui, sans-serif",padding:"2rem"}},n,l?a.createElement(rt,null):null)))}var dt="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement;try{dt&&(window.__reactRouterVersion="7.9.4")}catch(na){}function ct(e){let{basename:t,children:s,window:l}=e,r=a.useRef();null==r.current&&(r.current=h({window:l,v5Compat:!0}));let n=r.current,[i,o]=a.useState({action:n.action,location:n.location}),d=a.useCallback(e=>{a.startTransition(()=>o(e))},[o]);return a.useLayoutEffect(()=>n.listen(d),[n,d]),a.createElement(De,{basename:t,children:s,location:i.location,navigationType:i.action,navigator:n})}var ut=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mt=a.forwardRef(function(e,t){let s,{onClick:l,discover:i="render",prefetch:o="none",relative:d,reloadDocument:u,replace:m,state:x,target:h,to:g,preventScrollReset:f,viewTransition:v}=e,j=r(e,c),{basename:w}=a.useContext(ae),N="string"===typeof g&&ut.test(g),S=!1;if("string"===typeof g&&N&&(s=g,dt))try{let e=new URL(window.location.href),t=g.startsWith("//")?new URL(e.protocol+g):new URL(g),s=B(t.pathname,w);t.origin===e.origin&&null!=s?g=s+t.search+t.hash:S=!0}catch(na){b(!1,'<Link to="'.concat(g,'"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.'))}let C=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(ie(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:l}=a.useContext(ae),{hash:r,pathname:n,search:i}=me(e,{relative:t}),o=n;return"/"!==s&&(o="/"===n?s:H([s,n])),l.createHref({pathname:o,search:i,hash:r})}(g,{relative:d}),[k,P,A]=function(e,t){let s=a.useContext($e),[l,r]=a.useState(!1),[n,i]=a.useState(!1),{onFocus:o,onBlur:d,onMouseEnter:c,onMouseLeave:u,onTouchStart:m}=t,x=a.useRef(null);a.useEffect(()=>{if("render"===e&&i(!0),"viewport"===e){let e=new IntersectionObserver(e=>{e.forEach(e=>{i(e.isIntersecting)})},{threshold:.5});return x.current&&e.observe(x.current),()=>{e.disconnect()}}},[e]),a.useEffect(()=>{if(l){let e=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(e)}}},[l]);let h=()=>{r(!0)},p=()=>{r(!1),i(!1)};return s?"intent"!==e?[n,x,{}]:[n,x,{onFocus:Xe(o,h),onBlur:Xe(d,p),onMouseEnter:Xe(c,h),onMouseLeave:Xe(u,p),onTouchStart:Xe(m,h)}]:[!1,x,{}]}(o,j),I=function(e){let{target:t,replace:s,state:l,preventScrollReset:r,relative:n,viewTransition:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=ue(),d=oe(),c=me(e,{relative:n});return a.useCallback(a=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(a,t)){a.preventDefault();let t=void 0!==s?s:y(d)===y(c);o(e,{replace:t,state:l,preventScrollReset:r,relative:n,viewTransition:i})}},[d,o,c,s,l,t,e,r,n,i])}(g,{replace:m,state:x,target:h,preventScrollReset:f,relative:d,viewTransition:v});let D=a.createElement("a",(0,n.A)((0,n.A)((0,n.A)({},j),A),{},{href:s||C,onClick:S||u?l:function(e){l&&l(e),e.defaultPrevented||I(e)},ref:nt(t,P),target:h,"data-discover":N||"render"!==i?void 0:"true"}));return k&&!N?a.createElement(a.Fragment,null,D,a.createElement(tt,{page:C})):D});mt.displayName="Link",a.forwardRef(function(e,t){let{"aria-current":s="page",caseSensitive:l=!1,className:i="",end:o=!1,style:d,to:c,viewTransition:m,children:x}=e,h=r(e,u),b=me(c,{relative:h.relative}),g=oe(),f=a.useContext(Z),{navigator:y,basename:v}=a.useContext(ae),j=null!=f&&function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=a.useContext(ee);p(null!=s,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:l}=pt("useViewTransitionState"),r=me(e,{relative:t});if(!s.isTransitioning)return!1;let n=B(s.currentLocation.pathname,l)||s.currentLocation.pathname,i=B(s.nextLocation.pathname,l)||s.nextLocation.pathname;return null!=O(r.pathname,i)||null!=O(r.pathname,n)}(b)&&!0===m,w=y.encodeLocation?y.encodeLocation(b).pathname:b.pathname,N=g.pathname,S=f&&f.navigation&&f.navigation.location?f.navigation.location.pathname:null;l||(N=N.toLowerCase(),S=S?S.toLowerCase():null,w=w.toLowerCase()),S&&v&&(S=B(S,v)||S);const C="/"!==w&&w.endsWith("/")?w.length-1:w.length;let k,P=N===w||!o&&N.startsWith(w)&&"/"===N.charAt(C),A=null!=S&&(S===w||!o&&S.startsWith(w)&&"/"===S.charAt(w.length)),I={isActive:P,isPending:A,isTransitioning:j},D=P?s:void 0;k="function"===typeof i?i(I):[i,P?"active":null,A?"pending":null,j?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof d?d(I):d;return a.createElement(mt,(0,n.A)((0,n.A)({},h),{},{"aria-current":D,className:k,ref:t,style:T,to:c,viewTransition:m}),"function"===typeof x?x(I):x)}).displayName="NavLink";var xt=a.forwardRef((e,t)=>{let{discover:s="render",fetcherKey:l,navigate:i,reloadDocument:o,replace:d,state:c,method:u=Ee,action:x,onSubmit:h,relative:b,preventScrollReset:g,viewTransition:f}=e,v=r(e,m),j=ft(),w=function(e){let{relative:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{basename:s}=a.useContext(ae),l=a.useContext(re);p(l,"useFormAction must be used inside a RouteContext");let[r]=l.matches.slice(-1),i=(0,n.A)({},me(e||".",{relative:t})),o=oe();if(null==e){i.search=o.search;let e=new URLSearchParams(i.search),t=e.getAll("index"),s=t.some(e=>""===e);if(s){e.delete("index"),t.filter(e=>e).forEach(t=>e.append("index",t));let s=e.toString();i.search=s?"?".concat(s):""}}e&&"."!==e||!r.route.index||(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index");"/"!==s&&(i.pathname="/"===i.pathname?s:H([s,i.pathname]));return y(i)}(x,{relative:b}),N="get"===u.toLowerCase()?"get":"post",S="string"===typeof x&&ut.test(x);return a.createElement("form",(0,n.A)((0,n.A)({ref:t,method:N,action:w,onSubmit:o?h:e=>{if(h&&h(e),e.defaultPrevented)return;e.preventDefault();let t=e.nativeEvent.submitter,s=(null===t||void 0===t?void 0:t.getAttribute("formmethod"))||u;j(t||e.currentTarget,{fetcherKey:l,method:s,navigate:i,replace:d,state:c,relative:b,preventScrollReset:g,viewTransition:f})}},v),{},{"data-discover":S||"render"!==s?void 0:"true"}))});function ht(e){return"".concat(e," must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.")}function pt(e){let t=a.useContext($);return p(t,ht(e)),t}xt.displayName="Form";var bt=0,gt=()=>"__".concat(String(++bt),"__");function ft(){let{router:e}=pt("useSubmit"),{basename:t}=a.useContext(ae),s=we("useRouteId");return a.useCallback(async function(a){let l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{action:r,method:n,encType:i,formData:o,body:d}=Be(a,t);if(!1===l.navigate){let t=l.fetcherKey||gt();await e.fetch(t,s,l.action||r,{preventScrollReset:l.preventScrollReset,formData:o,body:d,formMethod:l.method||n,formEncType:l.encType||i,flushSync:l.flushSync})}else await e.navigate(l.action||r,{preventScrollReset:l.preventScrollReset,formData:o,body:d,formMethod:l.method||n,formEncType:l.encType||i,replace:l.replace,state:l.state,fromRouteId:s,flushSync:l.flushSync,viewTransition:l.viewTransition})},[e,t,s])}var yt,vt;function jt(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function wt(e,t,s){jt(e,t),t.set(e,s)}function Nt(e,t,s){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:s;throw new TypeError("Private element is not present on this object")}function St(e,t){return e.get(Nt(e,t))}function Ct(e,t,s){return e.set(Nt(e,t),s),s}var kt={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Pt=new(yt=new WeakMap,vt=new WeakMap,class{constructor(){wt(this,yt,kt),wt(this,vt,!1)}setTimeoutProvider(e){Ct(yt,this,e)}setTimeout(e,t){return St(yt,this).setTimeout(e,t)}clearTimeout(e){St(yt,this).clearTimeout(e)}setInterval(e,t){return St(yt,this).setInterval(e,t)}clearInterval(e){St(yt,this).clearInterval(e)}});var At="undefined"===typeof window||"Deno"in globalThis;function It(){}function Dt(e){return"number"===typeof e&&e>=0&&e!==1/0}function Tt(e,t){return Math.max(e+(t||0)-Date.now(),0)}function _t(e,t){return"function"===typeof e?e(t):e}function Et(e,t){return"function"===typeof e?e(t):e}function Rt(e,t){const{type:s="all",exact:a,fetchStatus:l,predicate:r,queryKey:n,stale:i}=e;if(n)if(a){if(t.queryHash!==Ot(n,t.options))return!1}else if(!Ft(t.queryKey,n))return!1;if("all"!==s){const e=t.isActive();if("active"===s&&!e)return!1;if("inactive"===s&&e)return!1}return("boolean"!==typeof i||t.isStale()===i)&&((!l||l===t.state.fetchStatus)&&!(r&&!r(t)))}function Lt(e,t){const{exact:s,status:a,predicate:l,mutationKey:r}=e;if(r){if(!t.options.mutationKey)return!1;if(s){if(Mt(t.options.mutationKey)!==Mt(r))return!1}else if(!Ft(t.options.mutationKey,r))return!1}return(!a||t.state.status===a)&&!(l&&!l(t))}function Ot(e,t){return((null===t||void 0===t?void 0:t.queryKeyHashFn)||Mt)(e)}function Mt(e){return JSON.stringify(e,(e,t)=>Wt(t)?Object.keys(t).sort().reduce((e,s)=>(e[s]=t[s],e),{}):t)}function Ft(e,t){return e===t||typeof e===typeof t&&(!(!e||!t||"object"!==typeof e||"object"!==typeof t)&&Object.keys(t).every(s=>Ft(e[s],t[s])))}var Bt=Object.prototype.hasOwnProperty;function qt(e,t){if(e===t)return e;const s=Ut(e)&&Ut(t);if(!s&&(!Wt(e)||!Wt(t)))return t;const a=(s?e:Object.keys(e)).length,l=s?t:Object.keys(t),r=l.length,n=s?new Array(r):{};let i=0;for(let o=0;o<r;o++){const r=s?o:l[o],d=e[r],c=t[r];if(d===c){n[r]=d,(s?o<a:Bt.call(e,r))&&i++;continue}if(null===d||null===c||"object"!==typeof d||"object"!==typeof c){n[r]=c;continue}const u=qt(d,c);n[r]=u,u===d&&i++}return a===r&&i===a?e:n}function zt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const s in e)if(e[s]!==t[s])return!1;return!0}function Ut(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Wt(e){if(!Ht(e))return!1;const t=e.constructor;if(void 0===t)return!0;const s=t.prototype;return!!Ht(s)&&(!!s.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function Ht(e){return"[object Object]"===Object.prototype.toString.call(e)}function Vt(e,t,s){return"function"===typeof s.structuralSharing?s.structuralSharing(e,t):!1!==s.structuralSharing?qt(e,t):t}function Jt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=[...e,t];return s&&a.length>s?a.slice(1):a}function Kt(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const a=[t,...e];return s&&a.length>s?a.slice(0,-1):a}var Qt=Symbol();function Gt(e,t){return!e.queryFn&&null!==t&&void 0!==t&&t.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==Qt?e.queryFn:()=>Promise.reject(new Error("Missing queryFn: '".concat(e.queryHash,"'")))}function Yt(e,t){return"function"===typeof e?e(...t):!!e}function $t(e,t){jt(e,t),t.add(e)}var Zt=function(e){setTimeout(e,0)};var Xt,es,ts,ss,as,ls,rs=function(){let e=[],t=0,s=e=>{e()},a=e=>{e()},l=Zt;const r=a=>{t?e.push(a):l(()=>{s(a)})};return{batch:r=>{let n;t++;try{n=r()}finally{t--,t||(()=>{const t=e;e=[],t.length&&l(()=>{a(()=>{t.forEach(e=>{s(e)})})})})()}return n},batchCalls:e=>function(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];r(()=>{e(...s)})},schedule:r,setNotifyFunction:e=>{s=e},setBatchNotifyFunction:e=>{a=e},setScheduler:e=>{l=e}}}(),ns=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},is=new(Xt=new WeakMap,es=new WeakMap,ts=new WeakMap,class extends ns{constructor(){super(),wt(this,Xt,void 0),wt(this,es,void 0),wt(this,ts,void 0),Ct(ts,this,e=>{if(!At&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}})}onSubscribe(){St(es,this)||this.setEventListener(St(ts,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=St(es,this))||void 0===e||e.call(this),Ct(es,this,void 0))}setEventListener(e){var t;Ct(ts,this,e),null===(t=St(es,this))||void 0===t||t.call(this),Ct(es,this,e(e=>{"boolean"===typeof e?this.setFocused(e):this.onFocus()}))}setFocused(e){St(Xt,this)!==e&&(Ct(Xt,this,e),this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){var e;return"boolean"===typeof St(Xt,this)?St(Xt,this):"hidden"!==(null===(e=globalThis.document)||void 0===e?void 0:e.visibilityState)}}),os=new(ss=new WeakMap,as=new WeakMap,ls=new WeakMap,class extends ns{constructor(){super(),wt(this,ss,!0),wt(this,as,void 0),wt(this,ls,void 0),Ct(ls,this,e=>{if(!At&&window.addEventListener){const t=()=>e(!0),s=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",s)}}})}onSubscribe(){St(as,this)||this.setEventListener(St(ls,this))}onUnsubscribe(){var e;this.hasListeners()||(null===(e=St(as,this))||void 0===e||e.call(this),Ct(as,this,void 0))}setEventListener(e){var t;Ct(ls,this,e),null===(t=St(as,this))||void 0===t||t.call(this),Ct(as,this,e(this.setOnline.bind(this)))}setOnline(e){St(ss,this)!==e&&(Ct(ss,this,e),this.listeners.forEach(t=>{t(e)}))}isOnline(){return St(ss,this)}});function ds(){let e,t;const s=new Promise((s,a)=>{e=s,t=a});function a(e){Object.assign(s,e),delete s.resolve,delete s.reject}return s.status="pending",s.catch(()=>{}),s.resolve=t=>{a({status:"fulfilled",value:t}),e(t)},s.reject=e=>{a({status:"rejected",reason:e}),t(e)},s}function cs(e){return Math.min(1e3*2**e,3e4)}function us(e){return"online"!==(null!==e&&void 0!==e?e:"online")||os.isOnline()}var ms,xs=class extends Error{constructor(e){super("CancelledError"),this.revert=null===e||void 0===e?void 0:e.revert,this.silent=null===e||void 0===e?void 0:e.silent}};function hs(e){let t,s=!1,a=0;const l=ds(),r=()=>"pending"!==l.status,n=()=>is.isFocused()&&("always"===e.networkMode||os.isOnline())&&e.canRun(),i=()=>us(e.networkMode)&&e.canRun(),o=e=>{var s;r()||(null===(s=t)||void 0===s||s(),l.resolve(e))},d=e=>{var s;r()||(null===(s=t)||void 0===s||s(),l.reject(e))},c=()=>new Promise(s=>{var a;t=e=>{(r()||n())&&s(e)},null===(a=e.onPause)||void 0===a||a.call(e)}).then(()=>{var s;(t=void 0,r())||(null===(s=e.onContinue)||void 0===s||s.call(e))}),u=()=>{if(r())return;let t;const l=0===a?e.initialPromise:void 0;try{t=null!==l&&void 0!==l?l:e.fn()}catch(i){t=Promise.reject(i)}Promise.resolve(t).then(o).catch(t=>{var l,i,o;if(r())return;const m=null!==(l=e.retry)&&void 0!==l?l:At?0:3,x=null!==(i=e.retryDelay)&&void 0!==i?i:cs,h="function"===typeof x?x(a,t):x,p=!0===m||"number"===typeof m&&a<m||"function"===typeof m&&m(a,t);var b;!s&&p?(a++,null===(o=e.onFail)||void 0===o||o.call(e,a,t),(b=h,new Promise(e=>{Pt.setTimeout(e,b)})).then(()=>n()?void 0:c()).then(()=>{s?d(t):u()})):d(t)})};return{promise:l,status:()=>l.status,cancel:t=>{if(!r()){var s;const a=new xs(t);d(a),null===(s=e.onCancel)||void 0===s||s.call(e,a)}},continue:()=>{var e;return null===(e=t)||void 0===e||e(),l},cancelRetry:()=>{s=!0},continueRetry:()=>{s=!1},canStart:i,start:()=>(i()?u():c().then(u),l)}}var ps,bs,gs,fs,ys,vs,js,ws,Ns,Ss=(ms=new WeakMap,class{constructor(){wt(this,ms,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Dt(this.gcTime)&&Ct(ms,this,Pt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,null!==e&&void 0!==e?e:At?1/0:3e5)}clearGcTimeout(){St(ms,this)&&(Pt.clearTimeout(St(ms,this)),Ct(ms,this,void 0))}}),Cs=(ps=new WeakMap,bs=new WeakMap,gs=new WeakMap,fs=new WeakMap,ys=new WeakMap,vs=new WeakMap,js=new WeakMap,ws=new WeakSet,class extends Ss{constructor(e){var t;super(),$t(this,ws),wt(this,ps,void 0),wt(this,bs,void 0),wt(this,gs,void 0),wt(this,fs,void 0),wt(this,ys,void 0),wt(this,vs,void 0),wt(this,js,void 0),Ct(js,this,!1),Ct(vs,this,e.defaultOptions),this.setOptions(e.options),this.observers=[],Ct(fs,this,e.client),Ct(gs,this,St(fs,this).getQueryCache()),this.queryKey=e.queryKey,this.queryHash=e.queryHash,Ct(ps,this,Is(this.options)),this.state=null!==(t=e.state)&&void 0!==t?t:St(ps,this),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var e;return null===(e=St(ys,this))||void 0===e?void 0:e.promise}setOptions(e){if(this.options=(0,n.A)((0,n.A)({},St(vs,this)),e),this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Is(this.options);void 0!==e.data&&(this.setState(As(e.data,e.dataUpdatedAt)),Ct(ps,this,e))}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||St(gs,this).remove(this)}setData(e,t){const s=Vt(this.state.data,e,this.options);return Nt(ws,this,ks).call(this,{data:s,type:"success",dataUpdatedAt:null===t||void 0===t?void 0:t.updatedAt,manual:null===t||void 0===t?void 0:t.manual}),s}setState(e,t){Nt(ws,this,ks).call(this,{type:"setState",state:e,setStateOptions:t})}cancel(e){var t,s;const a=null===(t=St(ys,this))||void 0===t?void 0:t.promise;return null===(s=St(ys,this))||void 0===s||s.cancel(e),a?a.then(It).catch(It):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(St(ps,this))}isActive(){return this.observers.some(e=>!1!==Et(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Qt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===_t(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!Tt(this.state.dataUpdatedAt,e))}onFocus(){var e;const t=this.observers.find(e=>e.shouldFetchOnWindowFocus());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=St(ys,this))||void 0===e||e.continue()}onOnline(){var e;const t=this.observers.find(e=>e.shouldFetchOnReconnect());null===t||void 0===t||t.refetch({cancelRefetch:!1}),null===(e=St(ys,this))||void 0===e||e.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),St(gs,this).notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(St(ys,this)&&(St(js,this)?St(ys,this).cancel({revert:!0}):St(ys,this).cancelRetry()),this.scheduleGc()),St(gs,this).notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Nt(ws,this,ks).call(this,{type:"invalidate"})}async fetch(e,t){var s,a,l;if("idle"!==this.state.fetchStatus&&"rejected"!==(null===(s=St(ys,this))||void 0===s?void 0:s.status()))if(void 0!==this.state.data&&null!==t&&void 0!==t&&t.cancelRefetch)this.cancel({silent:!0});else if(St(ys,this))return St(ys,this).continueRetry(),St(ys,this).promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const r=new AbortController,i=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(Ct(js,this,!0),r.signal)})},o=()=>{const e=Gt(this.options,t),s=(()=>{const e={client:St(fs,this),queryKey:this.queryKey,meta:this.meta};return i(e),e})();return Ct(js,this,!1),this.options.persister?this.options.persister(e,s,this):e(s)},d=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:St(fs,this),state:this.state,fetchFn:o};return i(e),e})();var c;(null===(a=this.options.behavior)||void 0===a||a.onFetch(d,this),Ct(bs,this,this.state),"idle"===this.state.fetchStatus||this.state.fetchMeta!==(null===(l=d.fetchOptions)||void 0===l?void 0:l.meta))&&Nt(ws,this,ks).call(this,{type:"fetch",meta:null===(c=d.fetchOptions)||void 0===c?void 0:c.meta});Ct(ys,this,hs({initialPromise:null===t||void 0===t?void 0:t.initialPromise,fn:d.fetchFn,onCancel:e=>{e instanceof xs&&e.revert&&this.setState((0,n.A)((0,n.A)({},St(bs,this)),{},{fetchStatus:"idle"})),r.abort()},onFail:(e,t)=>{Nt(ws,this,ks).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Nt(ws,this,ks).call(this,{type:"pause"})},onContinue:()=>{Nt(ws,this,ks).call(this,{type:"continue"})},retry:d.options.retry,retryDelay:d.options.retryDelay,networkMode:d.options.networkMode,canRun:()=>!0}));try{var u,m,x,h;const e=await St(ys,this).start();if(void 0===e)throw new Error("".concat(this.queryHash," data is undefined"));return this.setData(e),null===(u=(m=St(gs,this).config).onSuccess)||void 0===u||u.call(m,e,this),null===(x=(h=St(gs,this).config).onSettled)||void 0===x||x.call(h,e,this.state.error,this),e}catch(y){var p,b,g,f;if(y instanceof xs){if(y.silent)return St(ys,this).promise;if(y.revert){if(void 0===this.state.data)throw y;return this.state.data}}throw Nt(ws,this,ks).call(this,{type:"error",error:y}),null===(p=(b=St(gs,this).config).onError)||void 0===p||p.call(b,y,this),null===(g=(f=St(gs,this).config).onSettled)||void 0===g||g.call(f,this.state.data,y,this),y}finally{this.scheduleGc()}}});function ks(e){this.state=(t=>{var s;switch(e.type){case"failed":return(0,n.A)((0,n.A)({},t),{},{fetchFailureCount:e.failureCount,fetchFailureReason:e.error});case"pause":return(0,n.A)((0,n.A)({},t),{},{fetchStatus:"paused"});case"continue":return(0,n.A)((0,n.A)({},t),{},{fetchStatus:"fetching"});case"fetch":return(0,n.A)((0,n.A)((0,n.A)({},t),Ps(t.data,this.options)),{},{fetchMeta:null!==(s=e.meta)&&void 0!==s?s:null});case"success":const a=(0,n.A)((0,n.A)((0,n.A)({},t),As(e.data,e.dataUpdatedAt)),{},{dataUpdateCount:t.dataUpdateCount+1},!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null});return Ct(bs,this,e.manual?a:void 0),a;case"error":const l=e.error;return(0,n.A)((0,n.A)({},t),{},{error:l,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:l,fetchStatus:"idle",status:"error"});case"invalidate":return(0,n.A)((0,n.A)({},t),{},{isInvalidated:!0});case"setState":return(0,n.A)((0,n.A)({},t),e.state)}})(this.state),rs.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),St(gs,this).notify({query:this,type:"updated",action:e})})}function Ps(e,t){return(0,n.A)({fetchFailureCount:0,fetchFailureReason:null,fetchStatus:us(t.networkMode)?"fetching":"paused"},void 0===e&&{error:null,status:"pending"})}function As(e,t){return{data:e,dataUpdatedAt:null!==t&&void 0!==t?t:Date.now(),error:null,isInvalidated:!1,status:"success"}}function Is(e){const t="function"===typeof e.initialData?e.initialData():e.initialData,s=void 0!==t,a=s?"function"===typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:s?null!==a&&void 0!==a?a:Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Ds,Ts,_s,Es,Rs,Ls,Os,Ms,Fs=(Ns=new WeakMap,class extends ns{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),wt(this,Ns,void 0),this.config=e,Ct(Ns,this,new Map)}build(e,t,s){var a;const l=t.queryKey,r=null!==(a=t.queryHash)&&void 0!==a?a:Ot(l,t);let n=this.get(r);return n||(n=new Cs({client:e,queryKey:l,queryHash:r,options:e.defaultQueryOptions(t),state:s,defaultOptions:e.getQueryDefaults(l)}),this.add(n)),n}add(e){St(Ns,this).has(e.queryHash)||(St(Ns,this).set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=St(Ns,this).get(e.queryHash);t&&(e.destroy(),t===e&&St(Ns,this).delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){rs.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return St(Ns,this).get(e)}getAll(){return[...St(Ns,this).values()]}find(e){const t=(0,n.A)({exact:!0},e);return this.getAll().find(e=>Rt(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>Rt(e,t)):t}notify(e){rs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){rs.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){rs.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}}),Bs=(Ds=new WeakMap,Ts=new WeakMap,_s=new WeakMap,Es=new WeakMap,Rs=new WeakSet,class extends Ss{constructor(e){super(),$t(this,Rs),wt(this,Ds,void 0),wt(this,Ts,void 0),wt(this,_s,void 0),wt(this,Es,void 0),Ct(Ds,this,e.client),this.mutationId=e.mutationId,Ct(_s,this,e.mutationCache),Ct(Ts,this,[]),this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){St(Ts,this).includes(e)||(St(Ts,this).push(e),this.clearGcTimeout(),St(_s,this).notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){Ct(Ts,this,St(Ts,this).filter(t=>t!==e)),this.scheduleGc(),St(_s,this).notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){St(Ts,this).length||("pending"===this.state.status?this.scheduleGc():St(_s,this).remove(this))}continue(){var e,t;return null!==(e=null===(t=St(Es,this))||void 0===t?void 0:t.continue())&&void 0!==e?e:this.execute(this.state.variables)}async execute(e){var t;const s=()=>{Nt(Rs,this,qs).call(this,{type:"continue"})},a={client:St(Ds,this),meta:this.options.meta,mutationKey:this.options.mutationKey};Ct(Es,this,hs({fn:()=>this.options.mutationFn?this.options.mutationFn(e,a):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{Nt(Rs,this,qs).call(this,{type:"failed",failureCount:e,error:t})},onPause:()=>{Nt(Rs,this,qs).call(this,{type:"pause"})},onContinue:s,retry:null!==(t=this.options.retry)&&void 0!==t?t:0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>St(_s,this).canRun(this)}));const l="pending"===this.state.status,r=!St(Es,this).canStart();try{var n,i,o,d,c,u,m,x;if(l)s();else{var h,p,b,g;Nt(Rs,this,qs).call(this,{type:"pending",variables:e,isPaused:r}),await(null===(h=(p=St(_s,this).config).onMutate)||void 0===h?void 0:h.call(p,e,this,a));const t=await(null===(b=(g=this.options).onMutate)||void 0===b?void 0:b.call(g,e,a));t!==this.state.context&&Nt(Rs,this,qs).call(this,{type:"pending",context:t,variables:e,isPaused:r})}const t=await St(Es,this).start();return await(null===(n=(i=St(_s,this).config).onSuccess)||void 0===n?void 0:n.call(i,t,e,this.state.context,this,a)),await(null===(o=(d=this.options).onSuccess)||void 0===o?void 0:o.call(d,t,e,this.state.context,a)),await(null===(c=(u=St(_s,this).config).onSettled)||void 0===c?void 0:c.call(u,t,null,this.state.variables,this.state.context,this,a)),await(null===(m=(x=this.options).onSettled)||void 0===m?void 0:m.call(x,t,null,e,this.state.context,a)),Nt(Rs,this,qs).call(this,{type:"success",data:t}),t}catch(k){try{var f,y,v,j,w,N,S,C;throw await(null===(f=(y=St(_s,this).config).onError)||void 0===f?void 0:f.call(y,k,e,this.state.context,this,a)),await(null===(v=(j=this.options).onError)||void 0===v?void 0:v.call(j,k,e,this.state.context,a)),await(null===(w=(N=St(_s,this).config).onSettled)||void 0===w?void 0:w.call(N,void 0,k,this.state.variables,this.state.context,this,a)),await(null===(S=(C=this.options).onSettled)||void 0===S?void 0:S.call(C,void 0,k,e,this.state.context,a)),k}finally{Nt(Rs,this,qs).call(this,{type:"error",error:k})}}finally{St(_s,this).runNext(this)}}});function qs(e){this.state=(t=>{switch(e.type){case"failed":return(0,n.A)((0,n.A)({},t),{},{failureCount:e.failureCount,failureReason:e.error});case"pause":return(0,n.A)((0,n.A)({},t),{},{isPaused:!0});case"continue":return(0,n.A)((0,n.A)({},t),{},{isPaused:!1});case"pending":return(0,n.A)((0,n.A)({},t),{},{context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()});case"success":return(0,n.A)((0,n.A)({},t),{},{data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1});case"error":return(0,n.A)((0,n.A)({},t),{},{data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"})}})(this.state),rs.batch(()=>{St(Ts,this).forEach(t=>{t.onMutationUpdate(e)}),St(_s,this).notify({mutation:this,type:"updated",action:e})})}var zs,Us,Ws,Hs,Vs,Js,Ks,Qs,Gs=(Ls=new WeakMap,Os=new WeakMap,Ms=new WeakMap,class extends ns{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(),wt(this,Ls,void 0),wt(this,Os,void 0),wt(this,Ms,void 0),this.config=e,Ct(Ls,this,new Set),Ct(Os,this,new Map),Ct(Ms,this,0)}build(e,t,s){var a;const l=new Bs({client:e,mutationCache:this,mutationId:Ct(Ms,this,(a=St(Ms,this),++a)),options:e.defaultMutationOptions(t),state:s});return this.add(l),l}add(e){St(Ls,this).add(e);const t=Ys(e);if("string"===typeof t){const s=St(Os,this).get(t);s?s.push(e):St(Os,this).set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(St(Ls,this).delete(e)){const t=Ys(e);if("string"===typeof t){const s=St(Os,this).get(t);if(s)if(s.length>1){const t=s.indexOf(e);-1!==t&&s.splice(t,1)}else s[0]===e&&St(Os,this).delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ys(e);if("string"===typeof t){const s=St(Os,this).get(t),a=null===s||void 0===s?void 0:s.find(e=>"pending"===e.state.status);return!a||a===e}return!0}runNext(e){const t=Ys(e);if("string"===typeof t){var s,a;const l=null===(s=St(Os,this).get(t))||void 0===s?void 0:s.find(t=>t!==e&&t.state.isPaused);return null!==(a=null===l||void 0===l?void 0:l.continue())&&void 0!==a?a:Promise.resolve()}return Promise.resolve()}clear(){rs.batch(()=>{St(Ls,this).forEach(e=>{this.notify({type:"removed",mutation:e})}),St(Ls,this).clear(),St(Os,this).clear()})}getAll(){return Array.from(St(Ls,this))}find(e){const t=(0,n.A)({exact:!0},e);return this.getAll().find(e=>Lt(t,e))}findAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.getAll().filter(t=>Lt(e,t))}notify(e){rs.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return rs.batch(()=>Promise.all(e.map(e=>e.continue().catch(It))))}});function Ys(e){var t;return null===(t=e.options.scope)||void 0===t?void 0:t.id}function $s(e){return{onFetch:(t,s)=>{var a,l,r;const n=t.options,i=null===(a=t.fetchOptions)||void 0===a||null===(a=a.meta)||void 0===a||null===(a=a.fetchMore)||void 0===a?void 0:a.direction,o=(null===(l=t.state.data)||void 0===l?void 0:l.pages)||[],d=(null===(r=t.state.data)||void 0===r?void 0:r.pageParams)||[];let c={pages:[],pageParams:[]},u=0;const m=async()=>{let s=!1;const a=Gt(t.options,t.fetchOptions),l=async(e,l,r)=>{if(s)return Promise.reject();if(null==l&&e.pages.length)return Promise.resolve(e);const n=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:l,direction:r?"backward":"forward",meta:t.options.meta};var a;return a=e,Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(t.signal.aborted?s=!0:t.signal.addEventListener("abort",()=>{s=!0}),t.signal)}),e})(),i=await a(n),{maxPages:o}=t.options,d=r?Kt:Jt;return{pages:d(e.pages,i,o),pageParams:d(e.pageParams,l,o)}};if(i&&o.length){const e="backward"===i,t={pages:o,pageParams:d},s=(e?Xs:Zs)(n,t);c=await l(t,s,e)}else{const t=null!==e&&void 0!==e?e:o.length;do{var r;const e=0===u?null!==(r=d[0])&&void 0!==r?r:n.initialPageParam:Zs(n,c);if(u>0&&null==e)break;c=await l(c,e),u++}while(u<t)}return c};t.options.persister?t.fetchFn=()=>{var e,a;return null===(e=(a=t.options).persister)||void 0===e?void 0:e.call(a,m,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},s)}:t.fetchFn=m}}}function Zs(e,t){let{pages:s,pageParams:a}=t;const l=s.length-1;return s.length>0?e.getNextPageParam(s[l],s,a[l],a):void 0}function Xs(e,t){var s;let{pages:a,pageParams:l}=t;return a.length>0?null===(s=e.getPreviousPageParam)||void 0===s?void 0:s.call(e,a[0],a,l[0],l):void 0}var ea=(zs=new WeakMap,Us=new WeakMap,Ws=new WeakMap,Hs=new WeakMap,Vs=new WeakMap,Js=new WeakMap,Ks=new WeakMap,Qs=new WeakMap,class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wt(this,zs,void 0),wt(this,Us,void 0),wt(this,Ws,void 0),wt(this,Hs,void 0),wt(this,Vs,void 0),wt(this,Js,void 0),wt(this,Ks,void 0),wt(this,Qs,void 0),Ct(zs,this,e.queryCache||new Fs),Ct(Us,this,e.mutationCache||new Gs),Ct(Ws,this,e.defaultOptions||{}),Ct(Hs,this,new Map),Ct(Vs,this,new Map),Ct(Js,this,0)}mount(){var e;Ct(Js,this,(e=St(Js,this),e++,e)),1===St(Js,this)&&(Ct(Ks,this,is.subscribe(async e=>{e&&(await this.resumePausedMutations(),St(zs,this).onFocus())})),Ct(Qs,this,os.subscribe(async e=>{e&&(await this.resumePausedMutations(),St(zs,this).onOnline())})))}unmount(){var e,t,s;Ct(Js,this,(e=St(Js,this),e--,e)),0===St(Js,this)&&(null===(t=St(Ks,this))||void 0===t||t.call(this),Ct(Ks,this,void 0),null===(s=St(Qs,this))||void 0===s||s.call(this),Ct(Qs,this,void 0))}isFetching(e){return St(zs,this).findAll((0,n.A)((0,n.A)({},e),{},{fetchStatus:"fetching"})).length}isMutating(e){return St(Us,this).findAll((0,n.A)((0,n.A)({},e),{},{status:"pending"})).length}getQueryData(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=St(zs,this).get(s.queryHash))||void 0===t?void 0:t.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),s=St(zs,this).build(this,t),a=s.state.data;return void 0===a?this.fetchQuery(e):(e.revalidateIfStale&&s.isStaleByTime(_t(t.staleTime,s))&&this.prefetchQuery(t),Promise.resolve(a))}getQueriesData(e){return St(zs,this).findAll(e).map(e=>{let{queryKey:t,state:s}=e;return[t,s.data]})}setQueryData(e,t,s){const a=this.defaultQueryOptions({queryKey:e}),l=St(zs,this).get(a.queryHash),r=function(e,t){return"function"===typeof e?e(t):e}(t,null===l||void 0===l?void 0:l.state.data);if(void 0!==r)return St(zs,this).build(this,a).setData(r,(0,n.A)((0,n.A)({},s),{},{manual:!0}))}setQueriesData(e,t,s){return rs.batch(()=>St(zs,this).findAll(e).map(e=>{let{queryKey:a}=e;return[a,this.setQueryData(a,t,s)]}))}getQueryState(e){var t;const s=this.defaultQueryOptions({queryKey:e});return null===(t=St(zs,this).get(s.queryHash))||void 0===t?void 0:t.state}removeQueries(e){const t=St(zs,this);rs.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const s=St(zs,this);return rs.batch(()=>(s.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries((0,n.A)({type:"active"},e),t)))}cancelQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const s=(0,n.A)({revert:!0},t),a=rs.batch(()=>St(zs,this).findAll(e).map(e=>e.cancel(s)));return Promise.all(a).then(It).catch(It)}invalidateQueries(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return rs.batch(()=>{var s,a;return St(zs,this).findAll(e).forEach(e=>{e.invalidate()}),"none"===(null===e||void 0===e?void 0:e.refetchType)?Promise.resolve():this.refetchQueries((0,n.A)((0,n.A)({},e),{},{type:null!==(s=null!==(a=null===e||void 0===e?void 0:e.refetchType)&&void 0!==a?a:null===e||void 0===e?void 0:e.type)&&void 0!==s?s:"active"}),t)})}refetchQueries(e){var t;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const a=(0,n.A)((0,n.A)({},s),{},{cancelRefetch:null===(t=s.cancelRefetch)||void 0===t||t}),l=rs.batch(()=>St(zs,this).findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,a);return a.throwOnError||(t=t.catch(It)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(l).then(It)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const s=St(zs,this).build(this,t);return s.isStaleByTime(_t(t.staleTime,s))?s.fetch(t):Promise.resolve(s.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(It).catch(It)}fetchInfiniteQuery(e){return e.behavior=$s(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(It).catch(It)}ensureInfiniteQueryData(e){return e.behavior=$s(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return os.isOnline()?St(Us,this).resumePausedMutations():Promise.resolve()}getQueryCache(){return St(zs,this)}getMutationCache(){return St(Us,this)}getDefaultOptions(){return St(Ws,this)}setDefaultOptions(e){Ct(Ws,this,e)}setQueryDefaults(e,t){St(Hs,this).set(Mt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...St(Hs,this).values()],s={};return t.forEach(t=>{Ft(e,t.queryKey)&&Object.assign(s,t.defaultOptions)}),s}setMutationDefaults(e,t){St(Vs,this).set(Mt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...St(Vs,this).values()],s={};return t.forEach(t=>{Ft(e,t.mutationKey)&&Object.assign(s,t.defaultOptions)}),s}defaultQueryOptions(e){if(e._defaulted)return e;const t=(0,n.A)((0,n.A)((0,n.A)((0,n.A)({},St(Ws,this).queries),this.getQueryDefaults(e.queryKey)),e),{},{_defaulted:!0});return t.queryHash||(t.queryHash=Ot(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Qt&&(t.enabled=!1),t}defaultMutationOptions(e){return null!==e&&void 0!==e&&e._defaulted?e:(0,n.A)((0,n.A)((0,n.A)((0,n.A)({},St(Ws,this).mutations),(null===e||void 0===e?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey)),e),{},{_defaulted:!0})}clear(){St(zs,this).clear(),St(Us,this).clear()}}),ta=s(579),sa=a.createContext(void 0),aa=e=>{const t=a.useContext(sa);if(e)return e;if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},la=e=>{let{client:t,children:s}=e;return a.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),(0,ta.jsx)(sa.Provider,{value:t,children:s})};function ra(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let na={data:""},ia=e=>{if("object"==typeof window){let t=(e?e.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return t.nonce=window.__nonce__,t.parentNode||(e||document.head).appendChild(t),t.firstChild}return e||na},oa=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,da=/\/\*[^]*?\*\/|  +/g,ca=/\n+/g,ua=(e,t)=>{let s="",a="",l="";for(let r in e){let n=e[r];"@"==r[0]?"i"==r[1]?s=r+" "+n+";":a+="f"==r[1]?ua(n,r):r+"{"+ua(n,"k"==r[1]?"":t)+"}":"object"==typeof n?a+=ua(n,t?t.replace(/([^,])+/g,e=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):r):null!=n&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),l+=ua.p?ua.p(r,n):r+":"+n+";")}return s+(t&&l?t+"{"+l+"}":l)+a},ma={},xa=e=>{if("object"==typeof e){let t="";for(let s in e)t+=s+xa(e[s]);return t}return e},ha=(e,t,s,a,l)=>{let r=xa(e),n=ma[r]||(ma[r]=(e=>{let t=0,s=11;for(;t<e.length;)s=101*s+e.charCodeAt(t++)>>>0;return"go"+s})(r));if(!ma[n]){let t=r!==e?e:(e=>{let t,s,a=[{}];for(;t=oa.exec(e.replace(da,""));)t[4]?a.shift():t[3]?(s=t[3].replace(ca," ").trim(),a.unshift(a[0][s]=a[0][s]||{})):a[0][t[1]]=t[2].replace(ca," ").trim();return a[0]})(e);ma[n]=ua(l?{["@keyframes "+n]:t}:t,s?"":"."+n)}let i=s&&ma.g?ma.g:null;return s&&(ma.g=ma[n]),((e,t,s,a)=>{a?t.data=t.data.replace(a,e):-1===t.data.indexOf(e)&&(t.data=s?e+t.data:t.data+e)})(ma[n],t,a,i),n};function pa(e){let t=this||{},s=e.call?e(t.p):e;return ha(s.unshift?s.raw?((e,t,s)=>e.reduce((e,a,l)=>{let r=t[l];if(r&&r.call){let e=r(s),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;r=t?"."+t:e&&"object"==typeof e?e.props?"":ua(e,""):!1===e?"":e}return e+a+(null==r?"":r)},""))(s,[].slice.call(arguments,1),t.p):s.reduce((e,s)=>Object.assign(e,s&&s.call?s(t.p):s),{}):s,ia(t.target),t.g,t.o,t.k)}pa.bind({g:1});let ba,ga,fa,ya=pa.bind({k:1});function va(e,t){let s=this||{};return function(){let a=arguments;function l(r,n){let i=Object.assign({},r),o=i.className||l.className;s.p=Object.assign({theme:ga&&ga()},i),s.o=/ *go\d+/.test(o),i.className=pa.apply(s,a)+(o?" "+o:""),t&&(i.ref=n);let d=e;return e[0]&&(d=i.as||e,delete i.as),fa&&d[0]&&fa(i),ba(d,i)}return t?t(l):l}}var ja,wa,Na,Sa,Ca,ka,Pa,Aa,Ia,Da,Ta,_a,Ea,Ra,La,Oa,Ma=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,Fa=(()=>{let e=0;return()=>(++e).toString()})(),Ba=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),qa="default",za=(e,t)=>{let{toastLimit:s}=e.settings;switch(t.type){case 0:return(0,n.A)((0,n.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,s)});case 1:return(0,n.A)((0,n.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,n.A)((0,n.A)({},e),t.toast):e)});case 2:let{toast:a}=t;return za(e,{type:e.toasts.find(e=>e.id===a.id)?1:0,toast:a});case 3:let{toastId:l}=t;return(0,n.A)((0,n.A)({},e),{},{toasts:e.toasts.map(e=>e.id===l||void 0===l?(0,n.A)((0,n.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,n.A)((0,n.A)({},e),{},{toasts:[]}):(0,n.A)((0,n.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,n.A)((0,n.A)({},e),{},{pausedAt:t.time});case 6:let r=t.time-(e.pausedAt||0);return(0,n.A)((0,n.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,n.A)((0,n.A)({},e),{},{pauseDuration:e.pauseDuration+r}))})}},Ua=[],Wa={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},Ha={},Va=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qa;Ha[t]=za(Ha[t]||Wa,e),Ua.forEach(e=>{let[s,a]=e;s===t&&a(Ha[t])})},Ja=e=>Object.keys(Ha).forEach(t=>Va(e,t)),Ka=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qa;return t=>{Va(t,e)}},Qa={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},Ga=e=>(t,s)=>{let a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",s=arguments.length>2?arguments[2]:void 0;return(0,n.A)((0,n.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},s),{},{id:(null==s?void 0:s.id)||Fa()})}(t,e,s);return Ka(a.toasterId||(e=>Object.keys(Ha).find(t=>Ha[t].toasts.some(t=>t.id===e)))(a.id))({type:2,toast:a}),a.id},Ya=(e,t)=>Ga("blank")(e,t);Ya.error=Ga("error"),Ya.success=Ga("success"),Ya.loading=Ga("loading"),Ya.custom=Ga("custom"),Ya.dismiss=(e,t)=>{let s={type:3,toastId:e};t?Ka(t)(s):Ja(s)},Ya.dismissAll=e=>Ya.dismiss(void 0,e),Ya.remove=(e,t)=>{let s={type:4,toastId:e};t?Ka(t)(s):Ja(s)},Ya.removeAll=e=>Ya.remove(void 0,e),Ya.promise=(e,t,s)=>{let a=Ya.loading(t.loading,(0,n.A)((0,n.A)({},s),null==s?void 0:s.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let l=t.success?Ma(t.success,e):void 0;return l?Ya.success(l,(0,n.A)((0,n.A)({id:a},s),null==s?void 0:s.success)):Ya.dismiss(a),e}).catch(e=>{let l=t.error?Ma(t.error,e):void 0;l?Ya.error(l,(0,n.A)((0,n.A)({id:a},s),null==s?void 0:s.error)):Ya.dismiss(a)}),e};var $a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:s,pausedAt:l}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:qa,[s,l]=(0,a.useState)(Ha[t]||Wa),r=(0,a.useRef)(Ha[t]);(0,a.useEffect)(()=>(r.current!==Ha[t]&&l(Ha[t]),Ua.push([t,l]),()=>{let e=Ua.findIndex(e=>{let[s]=e;return s===t});e>-1&&Ua.splice(e,1)}),[t]);let i=s.toasts.map(t=>{var s,a,l;return(0,n.A)((0,n.A)((0,n.A)((0,n.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(s=e[t.type])?void 0:s.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(a=e[t.type])?void 0:a.duration)||(null==e?void 0:e.duration)||Qa[t.type],style:(0,n.A)((0,n.A)((0,n.A)({},e.style),null==(l=e[t.type])?void 0:l.style),t.style)})});return(0,n.A)((0,n.A)({},s),{},{toasts:i})}(e,t),r=(0,a.useRef)(new Map).current,i=(0,a.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(r.has(e))return;let s=setTimeout(()=>{r.delete(e),o({type:4,toastId:e})},t);r.set(e,s)},[]);(0,a.useEffect)(()=>{if(l)return;let e=Date.now(),a=s.map(s=>{if(s.duration===1/0)return;let a=(s.duration||0)+s.pauseDuration-(e-s.createdAt);if(!(a<0))return setTimeout(()=>Ya.dismiss(s.id,t),a);s.visible&&Ya.dismiss(s.id)});return()=>{a.forEach(e=>e&&clearTimeout(e))}},[s,l,t]);let o=(0,a.useCallback)(Ka(t),[t]),d=(0,a.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,a.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),u=(0,a.useCallback)(()=>{l&&o({type:6,time:Date.now()})},[l,o]),m=(0,a.useCallback)((e,t)=>{let{reverseOrder:a=!1,gutter:l=8,defaultPosition:r}=t||{},n=s.filter(t=>(t.position||r)===(e.position||r)&&t.height),i=n.findIndex(t=>t.id===e.id),o=n.filter((e,t)=>t<i&&e.visible).length;return n.filter(e=>e.visible).slice(...a?[o+1]:[0,o]).reduce((e,t)=>e+(t.height||0)+l,0)},[s]);return(0,a.useEffect)(()=>{s.forEach(e=>{if(e.dismissed)i(e.id,e.removeDelay);else{let t=r.get(e.id);t&&(clearTimeout(t),r.delete(e.id))}})},[s,i]),{toasts:s,handlers:{updateHeight:c,startPause:d,endPause:u,calculateOffset:m}}},Za=ya(ja||(ja=ra(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),Xa=ya(wa||(wa=ra(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),el=ya(Na||(Na=ra(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),tl=va("div")(Sa||(Sa=ra(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",Za,Xa,e=>e.secondary||"#fff",el),sl=ya(Ca||(Ca=ra(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),al=va("div")(ka||(ka=ra(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",sl),ll=ya(Pa||(Pa=ra(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),rl=ya(Aa||(Aa=ra(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),nl=va("div")(Ia||(Ia=ra(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",ll,rl,e=>e.secondary||"#fff"),il=va("div")(Da||(Da=ra(["\n  position: absolute;\n"]))),ol=va("div")(Ta||(Ta=ra(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),dl=ya(_a||(_a=ra(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),cl=va("div")(Ea||(Ea=ra(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),dl),ul=e=>{let{toast:t}=e,{icon:s,type:l,iconTheme:r}=t;return void 0!==s?"string"==typeof s?a.createElement(cl,null,s):s:"blank"===l?null:a.createElement(ol,null,a.createElement(al,(0,n.A)({},r)),"loading"!==l&&a.createElement(il,null,"error"===l?a.createElement(tl,(0,n.A)({},r)):a.createElement(nl,(0,n.A)({},r))))},ml=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),xl=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),hl=va("div")(Ra||(Ra=ra(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),pl=va("div")(La||(La=ra(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),bl=a.memo(e=>{let{toast:t,position:s,style:l,children:r}=e,i=t.height?((e,t)=>{let s=e.includes("top")?1:-1,[a,l]=Ba()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[ml(s),xl(s)];return{animation:t?"".concat(ya(a)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(ya(l)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||s||"top-center",t.visible):{opacity:0},o=a.createElement(ul,{toast:t}),d=a.createElement(pl,(0,n.A)({},t.ariaProps),Ma(t.message,t));return a.createElement(hl,{className:t.className,style:(0,n.A)((0,n.A)((0,n.A)({},i),l),t.style)},"function"==typeof r?r({icon:o,message:d}):a.createElement(a.Fragment,null,o,d))});!function(e,t,s,a){ua.p=t,ba=e,ga=s,fa=a}(a.createElement);var gl=e=>{let{id:t,className:s,style:l,onHeightUpdate:r,children:n}=e,i=a.useCallback(e=>{if(e){let s=()=>{let s=e.getBoundingClientRect().height;r(t,s)};s(),new MutationObserver(s).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,r]);return a.createElement("div",{ref:i,className:s,style:l},n)},fl=pa(Oa||(Oa=ra(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),yl=e=>{let{reverseOrder:t,position:s="top-center",toastOptions:l,gutter:r,children:i,toasterId:o,containerStyle:d,containerClassName:c}=e,{toasts:u,handlers:m}=$a(l,o);return a.createElement("div",{"data-rht-toaster":o||"",style:(0,n.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},d),className:c,onMouseEnter:m.startPause,onMouseLeave:m.endPause},u.map(e=>{let l=e.position||s,o=((e,t)=>{let s=e.includes("top"),a=s?{top:0}:{bottom:0},l=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,n.A)((0,n.A)({left:0,right:0,display:"flex",position:"absolute",transition:Ba()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(s?1:-1),"px)")},a),l)})(l,m.calculateOffset(e,{reverseOrder:t,gutter:r,defaultPosition:s}));return a.createElement(gl,{id:e.id,key:e.id,onHeightUpdate:m.updateHeight,className:e.visible?fl:"",style:o},"custom"===e.type?Ma(e.message,e):i?i(e):a.createElement(bl,{toast:e,position:l}))}))},vl=Ya,jl=s(980);const wl={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",ADMIN:"/admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},Nl=e=>{let{children:t,requiredRole:s}=e;const a=jl.R2.isAuthenticated(),l=jl.R2.getCurrentUser(),r=oe();if(!a)return"MASTER_ADMIN"===s?(0,ta.jsx)(Ae,{to:"/master-admin/signin",state:{from:r},replace:!0}):"SUPER_ADMIN"===s?(0,ta.jsx)(Ae,{to:"/super-admin/signin",state:{from:r},replace:!0}):(0,ta.jsx)(Ae,{to:"/login",state:{from:r},replace:!0});if(s){if(!((null===l||void 0===l?void 0:l.isMasterAdmin)&&"MASTER_ADMIN"===s||(null===l||void 0===l?void 0:l.role)===s)){const e=(e=>{if(null!==e&&void 0!==e&&e.isMasterAdmin)return"/master-admin";const t=localStorage.getItem("user"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=JSON.parse(localStorage.getItem("adminuser")||"{}"),l=JSON.parse(localStorage.getItem("masteradminuser")||"{}");let r=null===e||void 0===e?void 0:e.role;r||(s.userId||"SUPER_ADMIN"===s.role?r="SUPER_ADMIN":a.userId||"ADMIN"===a.role?r="ADMIN":l.userId||"MASTER_ADMIN"===l.role?r="MASTER_ADMIN":t&&(r=JSON.parse(t).role));if(!r){const e=jl.R2.getCurrentUser();r=null===e||void 0===e?void 0:e.role}return r&&wl[r]?wl[r]:"/login"})(l);return console.warn("Access denied. Required: ".concat(s,", Current: ").concat(null===l||void 0===l?void 0:l.role,". Redirecting to ").concat(e)),(0,ta.jsx)(Ae,{to:e,replace:!0})}}return t};function Sl(){const e=ue();return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center p-4",children:(0,ta.jsxs)("div",{className:"text-center max-w-md",children:[(0,ta.jsx)("div",{className:"text-9xl font-bold text-red-500 mb-4",children:"404"}),(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-4",children:"Page Not Found"}),(0,ta.jsx)("p",{className:"text-gray-400 mb-6",children:"The page you're looking for doesn't exist or you don't have permission to access it."}),(0,ta.jsx)("button",{onClick:()=>e("/"),className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium transition-colors",children:"Go Back Home"})]})})}var Cl,kl,Pl,Al,Il,Dl,Tl,_l,El,Rl,Ll,Ol,Ml,Fl,Bl,ql,zl=(Cl=new WeakMap,kl=new WeakMap,Pl=new WeakMap,Al=new WeakMap,Il=new WeakMap,Dl=new WeakMap,Tl=new WeakMap,_l=new WeakMap,El=new WeakMap,Rl=new WeakMap,Ll=new WeakMap,Ol=new WeakMap,Ml=new WeakMap,Fl=new WeakMap,Bl=new WeakMap,ql=new WeakSet,class extends ns{constructor(e,t){super(),$t(this,ql),wt(this,Cl,void 0),wt(this,kl,void 0),wt(this,Pl,void 0),wt(this,Al,void 0),wt(this,Il,void 0),wt(this,Dl,void 0),wt(this,Tl,void 0),wt(this,_l,void 0),wt(this,El,void 0),wt(this,Rl,void 0),wt(this,Ll,void 0),wt(this,Ol,void 0),wt(this,Ml,void 0),wt(this,Fl,void 0),wt(this,Bl,new Set),this.options=t,Ct(Cl,this,e),Ct(_l,this,null),Ct(Tl,this,ds()),this.bindMethods(),this.setOptions(t)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(St(kl,this).addObserver(this),$l(St(kl,this),this.options)?Nt(ql,this,Ul).call(this):this.updateResult(),Nt(ql,this,Jl).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Zl(St(kl,this),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Zl(St(kl,this),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Nt(ql,this,Kl).call(this),Nt(ql,this,Ql).call(this),St(kl,this).removeObserver(this)}setOptions(e){const t=this.options,s=St(kl,this);if(this.options=St(Cl,this).defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!==typeof this.options.enabled&&"function"!==typeof this.options.enabled&&"boolean"!==typeof Et(this.options.enabled,St(kl,this)))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Nt(ql,this,Gl).call(this),St(kl,this).setOptions(this.options),t._defaulted&&!zt(this.options,t)&&St(Cl,this).getQueryCache().notify({type:"observerOptionsUpdated",query:St(kl,this),observer:this});const a=this.hasListeners();a&&Xl(St(kl,this),s,this.options,t)&&Nt(ql,this,Ul).call(this),this.updateResult(),!a||St(kl,this)===s&&Et(this.options.enabled,St(kl,this))===Et(t.enabled,St(kl,this))&&_t(this.options.staleTime,St(kl,this))===_t(t.staleTime,St(kl,this))||Nt(ql,this,Wl).call(this);const l=Nt(ql,this,Hl).call(this);!a||St(kl,this)===s&&Et(this.options.enabled,St(kl,this))===Et(t.enabled,St(kl,this))&&l===St(Fl,this)||Nt(ql,this,Vl).call(this,l)}getOptimisticResult(e){const t=St(Cl,this).getQueryCache().build(St(Cl,this),e),s=this.createResult(t,e);return function(e,t){if(!zt(e.getCurrentResult(),t))return!0;return!1}(this,s)&&(Ct(Al,this,s),Ct(Dl,this,this.options),Ct(Il,this,St(kl,this).state)),s}getCurrentResult(){return St(Al,this)}trackResult(e,t){return new Proxy(e,{get:(e,s)=>(this.trackProp(s),null===t||void 0===t||t(s),"promise"===s&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==St(Tl,this).status||St(Tl,this).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,s))})}trackProp(e){St(Bl,this).add(e)}getCurrentQuery(){return St(kl,this)}refetch(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(e),e));return this.fetch((0,n.A)({},t))}fetchOptimistic(e){const t=St(Cl,this).defaultQueryOptions(e),s=St(Cl,this).getQueryCache().build(St(Cl,this),t);return s.fetch().then(()=>this.createResult(s,t))}fetch(e){var t;return Nt(ql,this,Ul).call(this,(0,n.A)((0,n.A)({},e),{},{cancelRefetch:null===(t=e.cancelRefetch)||void 0===t||t})).then(()=>(this.updateResult(),St(Al,this)))}createResult(e,t){const s=St(kl,this),a=this.options,l=St(Al,this),r=St(Il,this),i=St(Dl,this),o=e!==s?e.state:St(Pl,this),{state:d}=e;let c,u=(0,n.A)({},d),m=!1;if(t._optimisticResults){const l=this.hasListeners(),r=!l&&$l(e,t),i=l&&Xl(e,s,t,a);(r||i)&&(u=(0,n.A)((0,n.A)({},u),Ps(d.data,e.options))),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:x,errorUpdatedAt:h,status:p}=u;c=u.data;let b=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===p){let e;var g;if(null!==l&&void 0!==l&&l.isPlaceholderData&&t.placeholderData===(null===i||void 0===i?void 0:i.placeholderData))e=l.data,b=!0;else e="function"===typeof t.placeholderData?t.placeholderData(null===(g=St(Ll,this))||void 0===g?void 0:g.state.data,St(Ll,this)):t.placeholderData;void 0!==e&&(p="success",c=Vt(null===l||void 0===l?void 0:l.data,e,t),m=!0)}if(t.select&&void 0!==c&&!b)if(l&&c===(null===r||void 0===r?void 0:r.data)&&t.select===St(El,this))c=St(Rl,this);else try{Ct(El,this,t.select),c=t.select(c),c=Vt(null===l||void 0===l?void 0:l.data,c,t),Ct(Rl,this,c),Ct(_l,this,null)}catch(S){Ct(_l,this,S)}St(_l,this)&&(x=St(_l,this),c=St(Rl,this),h=Date.now(),p="error");const f="fetching"===u.fetchStatus,y="pending"===p,v="error"===p,j=y&&f,w=void 0!==c,N={status:p,fetchStatus:u.fetchStatus,isPending:y,isSuccess:"success"===p,isError:v,isInitialLoading:j,isLoading:j,data:c,dataUpdatedAt:u.dataUpdatedAt,error:x,errorUpdatedAt:h,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:f,isRefetching:f&&!y,isLoadingError:v&&!w,isPaused:"paused"===u.fetchStatus,isPlaceholderData:m,isRefetchError:v&&w,isStale:er(e,t),refetch:this.refetch,promise:St(Tl,this),isEnabled:!1!==Et(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===N.status?e.reject(N.error):void 0!==N.data&&e.resolve(N.data)},a=()=>{const e=Ct(Tl,this,N.promise=ds());t(e)},l=St(Tl,this);switch(l.status){case"pending":e.queryHash===s.queryHash&&t(l);break;case"fulfilled":"error"!==N.status&&N.data===l.value||a();break;case"rejected":"error"===N.status&&N.error===l.reason||a()}}return N}updateResult(){const e=St(Al,this),t=this.createResult(St(kl,this),this.options);if(Ct(Il,this,St(kl,this).state),Ct(Dl,this,this.options),void 0!==St(Il,this).data&&Ct(Ll,this,St(kl,this)),zt(t,e))return;Ct(Al,this,t);Nt(ql,this,Yl).call(this,{listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,s="function"===typeof t?t():t;if("all"===s||!s&&!St(Bl,this).size)return!0;const a=new Set(null!==s&&void 0!==s?s:St(Bl,this));return this.options.throwOnError&&a.add("error"),Object.keys(St(Al,this)).some(t=>{const s=t;return St(Al,this)[s]!==e[s]&&a.has(s)})})()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Nt(ql,this,Jl).call(this)}});function Ul(e){Nt(ql,this,Gl).call(this);let t=St(kl,this).fetch(this.options,e);return null!==e&&void 0!==e&&e.throwOnError||(t=t.catch(It)),t}function Wl(){Nt(ql,this,Kl).call(this);const e=_t(this.options.staleTime,St(kl,this));if(At||St(Al,this).isStale||!Dt(e))return;const t=Tt(St(Al,this).dataUpdatedAt,e)+1;Ct(Ol,this,Pt.setTimeout(()=>{St(Al,this).isStale||this.updateResult()},t))}function Hl(){var e;return null!==(e="function"===typeof this.options.refetchInterval?this.options.refetchInterval(St(kl,this)):this.options.refetchInterval)&&void 0!==e&&e}function Vl(e){Nt(ql,this,Ql).call(this),Ct(Fl,this,e),!At&&!1!==Et(this.options.enabled,St(kl,this))&&Dt(St(Fl,this))&&0!==St(Fl,this)&&Ct(Ml,this,Pt.setInterval(()=>{(this.options.refetchIntervalInBackground||is.isFocused())&&Nt(ql,this,Ul).call(this)},St(Fl,this)))}function Jl(){Nt(ql,this,Wl).call(this),Nt(ql,this,Vl).call(this,Nt(ql,this,Hl).call(this))}function Kl(){St(Ol,this)&&(Pt.clearTimeout(St(Ol,this)),Ct(Ol,this,void 0))}function Ql(){St(Ml,this)&&(Pt.clearInterval(St(Ml,this)),Ct(Ml,this,void 0))}function Gl(){const e=St(Cl,this).getQueryCache().build(St(Cl,this),this.options);if(e===St(kl,this))return;const t=St(kl,this);Ct(kl,this,e),Ct(Pl,this,e.state),this.hasListeners()&&(null===t||void 0===t||t.removeObserver(this),e.addObserver(this))}function Yl(e){rs.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(St(Al,this))}),St(Cl,this).getQueryCache().notify({query:St(kl,this),type:"observerResultsUpdated"})})}function $l(e,t){return function(e,t){return!1!==Et(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Zl(e,t,t.refetchOnMount)}function Zl(e,t,s){if(!1!==Et(t.enabled,e)&&"static"!==_t(t.staleTime,e)){const a="function"===typeof s?s(e):s;return"always"===a||!1!==a&&er(e,t)}return!1}function Xl(e,t,s,a){return(e!==t||!1===Et(a.enabled,e))&&(!s.suspense||"error"!==e.state.status)&&er(e,s)}function er(e,t){return!1!==Et(t.enabled,e)&&e.isStaleByTime(_t(t.staleTime,e))}function tr(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var sr,ar,lr,rr,nr,ir=a.createContext(tr()),or=a.createContext(!1),dr=(or.Provider,(e,t,s)=>t.fetchOptimistic(e).catch(()=>{s.clearReset()}));function cr(e,t,s){var l,r,n,i;const o=a.useContext(or),d=a.useContext(ir),c=aa(s),u=c.defaultQueryOptions(e);null===(l=c.getDefaultOptions().queries)||void 0===l||null===(r=l._experimental_beforeQuery)||void 0===r||r.call(l,u),u._optimisticResults=o?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,s=e=>"static"===e?e:Math.max(null!==e&&void 0!==e?e:t,t),a=e.staleTime;e.staleTime="function"===typeof a?function(){return s(a(...arguments))}:s(a),"number"===typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(u),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(u,d),(e=>{a.useEffect(()=>{e.clearReset()},[e])})(d);const m=!c.getQueryCache().get(u.queryHash),[x]=a.useState(()=>new t(c,u)),h=x.getOptimisticResult(u),p=!o&&!1!==e.subscribed;if(a.useSyncExternalStore(a.useCallback(e=>{const t=p?x.subscribe(rs.batchCalls(e)):It;return x.updateResult(),t},[x,p]),()=>x.getCurrentResult(),()=>x.getCurrentResult()),a.useEffect(()=>{x.setOptions(u)},[u,x]),((e,t)=>(null===e||void 0===e?void 0:e.suspense)&&t.isPending)(u,h))throw dr(u,x,d);if((e=>{let{result:t,errorResetBoundary:s,throwOnError:a,query:l,suspense:r}=e;return t.isError&&!s.isReset()&&!t.isFetching&&l&&(r&&void 0===t.data||Yt(a,[t.error,l]))})({result:h,errorResetBoundary:d,throwOnError:u.throwOnError,query:c.getQueryCache().get(u.queryHash),suspense:u.suspense}))throw h.error;if(null===(n=c.getDefaultOptions().queries)||void 0===n||null===(i=n._experimental_afterQuery)||void 0===i||i.call(n,u,h),u.experimental_prefetchInRender&&!At&&((e,t)=>e.isLoading&&e.isFetching&&!t)(h,o)){var b;const e=m?dr(u,x,d):null===(b=c.getQueryCache().get(u.queryHash))||void 0===b?void 0:b.promise;null===e||void 0===e||e.catch(It).finally(()=>{x.updateResult()})}return u.notifyOnChangeProps?h:x.trackResult(h)}function ur(e,t){return cr(e,zl,t)}var mr=(sr=new WeakMap,ar=new WeakMap,lr=new WeakMap,rr=new WeakMap,nr=new WeakSet,class extends ns{constructor(e,t){super(),$t(this,nr),wt(this,sr,void 0),wt(this,ar,void 0),wt(this,lr,void 0),wt(this,rr,void 0),Ct(sr,this,e),this.setOptions(t),this.bindMethods(),Nt(nr,this,xr).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){var t;const s=this.options;this.options=St(sr,this).defaultMutationOptions(e),zt(this.options,s)||St(sr,this).getMutationCache().notify({type:"observerOptionsUpdated",mutation:St(lr,this),observer:this}),null!==s&&void 0!==s&&s.mutationKey&&this.options.mutationKey&&Mt(s.mutationKey)!==Mt(this.options.mutationKey)?this.reset():"pending"===(null===(t=St(lr,this))||void 0===t?void 0:t.state.status)&&St(lr,this).setOptions(this.options)}onUnsubscribe(){var e;this.hasListeners()||(null===(e=St(lr,this))||void 0===e||e.removeObserver(this))}onMutationUpdate(e){Nt(nr,this,xr).call(this),Nt(nr,this,hr).call(this,e)}getCurrentResult(){return St(ar,this)}reset(){var e;null===(e=St(lr,this))||void 0===e||e.removeObserver(this),Ct(lr,this,void 0),Nt(nr,this,xr).call(this),Nt(nr,this,hr).call(this)}mutate(e,t){var s;return Ct(rr,this,t),null===(s=St(lr,this))||void 0===s||s.removeObserver(this),Ct(lr,this,St(sr,this).getMutationCache().build(St(sr,this),this.options)),St(lr,this).addObserver(this),St(lr,this).execute(e)}});function xr(){var e,t;const s=null!==(e=null===(t=St(lr,this))||void 0===t?void 0:t.state)&&void 0!==e?e:{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0};Ct(ar,this,(0,n.A)((0,n.A)({},s),{},{isPending:"pending"===s.status,isSuccess:"success"===s.status,isError:"error"===s.status,isIdle:"idle"===s.status,mutate:this.mutate,reset:this.reset}))}function hr(e){rs.batch(()=>{if(St(rr,this)&&this.hasListeners()){const d=St(ar,this).variables,c=St(ar,this).context,u={client:St(sr,this),meta:this.options.meta,mutationKey:this.options.mutationKey};var t,s,a,l;if("success"===(null===e||void 0===e?void 0:e.type))null===(t=(s=St(rr,this)).onSuccess)||void 0===t||t.call(s,e.data,d,c,u),null===(a=(l=St(rr,this)).onSettled)||void 0===a||a.call(l,e.data,null,d,c,u);else if("error"===(null===e||void 0===e?void 0:e.type)){var r,n,i,o;null===(r=(n=St(rr,this)).onError)||void 0===r||r.call(n,e.error,d,c,u),null===(i=(o=St(rr,this)).onSettled)||void 0===i||i.call(o,void 0,e.error,d,c,u)}}this.listeners.forEach(e=>{e(St(ar,this))})})}function pr(e,t){const s=aa(t),[l]=a.useState(()=>new mr(s,e));a.useEffect(()=>{l.setOptions(e)},[l,e]);const r=a.useSyncExternalStore(a.useCallback(e=>l.subscribe(rs.batchCalls(e)),[l]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),i=a.useCallback((e,t)=>{l.mutate(e,t).catch(It)},[l]);if(r.error&&Yt(l.options.throwOnError,[r.error]))throw r.error;return(0,n.A)((0,n.A)({},r),{},{mutate:i,mutateAsync:r.mutate})}var br=s(950);const gr=["Dashboard","Notifications","Player Management","Tables & Waitlist","Rake Collection","Push Notifications","Tournaments","Chat"];function fr(e){let{activeItem:t,setActiveItem:s,menuItems:l=gr,onSignOut:r=null,clubInfo:i=null}=e;const[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(window.innerWidth<1024),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=(null===i||void 0===i?void 0:i.rummyEnabled)||!1?[...l,"Rummy"]:l,g=localStorage.getItem("clubId"),{data:f}=ur({queryKey:["unreadNotificationCount",g,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(g,"staff"),enabled:!!g,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const{data:y}=ur({queryKey:["club",g],queryFn:()=>jl.Od.getClub(g),enabled:!!g}),v=JSON.parse(localStorage.getItem("user")||"{}"),j=v.email||"manager@pokerroom.com",w=v.displayName||"Manager",N=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[c&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-yellow-500 to-green-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>d(!o),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&o&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>d(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-yellow-500/20 via-green-600/30 to-emerald-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(c?o?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-400 via-green-300 to-teal-400 drop-shadow-lg mb-6",children:"Manager Portal"}),(0,ta.jsxs)("div",{onClick:()=>x(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-yellow-400 to-green-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"M"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:w}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:j})]})]}),m&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>x(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),j?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?vl.error("Password must be at least 8 characters"):N.mutate({email:j,currentPassword:h.currentPassword,newPassword:h.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:N.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),y&&y.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:y.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:b.map((e,a)=>(0,ta.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-yellow-400 to-yellow-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-yellow-400/20 hover:to-green-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===f||void 0===f?void 0:f.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f.unreadCount>9?"9+":f.unreadCount})]})},a))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function yr(e){let{selectedClubId:t,playersData:s,playersLoading:l,pendingPlayers:r,pendingLoading:i,suspendedPlayers:o=[],suspendedLoading:d=!1,onRefresh:c}=e;const[u,m]=(0,a.useState)("all"),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)("All"),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(1),[j,w]=(0,a.useState)(1),[N,S]=(0,a.useState)(1),C=10,[k,P]=(0,a.useState)({name:"",email:"",phoneNumber:"",referralCode:"",panCard:"",aadhaarFile:null,panCardFile:null,initialBalance:0}),[A,I]=(0,a.useState)(null),[D,T]=(0,a.useState)(!1),[_,E]=(0,a.useState)(null),[R,L]=(0,a.useState)(!1),[O,M]=(0,a.useState)(null),[F,B]=(0,a.useState)(!1),[q,z]=(0,a.useState)(null),[U,W]=(0,a.useState)({type:"temporary",reason:"",duration:""}),H=aa(),{data:V,isLoading:J}=ur({queryKey:["playerDetails",t,null===O||void 0===O?void 0:O.id],queryFn:async()=>{if(!O||!t)return null;const e=await jl.Dv.getPlayer(t,O.id);let s=[];try{const e=await fetch("".concat("http://localhost:3333/api","/player-documents/my"),{headers:{"x-player-id":O.id,"x-club-id":t}});if(e.ok){const t=await e.json();s=t.documents||[]}}catch(l){console.error("Error fetching documents:",l)}const a=e.kycDocuments||O.kycDocuments||[];if(Array.isArray(a)&&a.length>0){const e=new Set(s.map(e=>e.url));a.forEach(t=>{t.url&&!e.has(t.url)&&s.push(t)})}return(0,n.A)((0,n.A)({},e),{},{documents:s})},enabled:!!O&&!!t&&R}),K=pr({mutationFn:async e=>{let{playerId:s,file:a,documentType:l}=e;const r=new FormData;r.append("file",a),r.append("type",l),r.append("name",a.name);const n=await fetch("".concat("http://localhost:3333/api","/player-documents/upload"),{method:"POST",headers:{"x-player-id":s,"x-club-id":t},body:r});if(!n.ok){const e=await n.json();throw new Error(e.message||"Failed to upload document")}return n.json()}}),Q=pr({mutationFn:async e=>{const s=await jl.Dv.createPlayer(t,e),a=[];return k.aadhaarFile&&a.push(K.mutateAsync({playerId:s.id,file:k.aadhaarFile,documentType:"government_id"})),k.panCardFile&&a.push(K.mutateAsync({playerId:s.id,file:k.panCardFile,documentType:"pan_card"})),a.length>0&&await Promise.all(a),s},onSuccess:e=>{E({player:{name:e.name,email:e.email,tempPassword:e.tempPassword}}),T(!0),P({name:"",email:"",phoneNumber:"",referralCode:"",panCard:"",aadhaarFile:null,panCardFile:null,initialBalance:0}),H.invalidateQueries(["clubPlayers",t])},onError:e=>{vl.error(e.message||"Failed to create player")}}),G=pr({mutationFn:e=>{let{playerId:s,notes:a}=e;return jl.Dv.approvePlayer(t,s,a)},onSuccess:()=>{vl.success("Player approved successfully!"),I(null),c()},onError:e=>{vl.error(e.message||"Failed to approve player")}}),Y=pr({mutationFn:e=>{let{playerId:s,reason:a}=e;return jl.Dv.rejectPlayer(t,s,a)},onSuccess:()=>{vl.success("Player rejected"),I(null),c()},onError:e=>{vl.error(e.message||"Failed to reject player")}}),$=pr({mutationFn:async e=>{let{playerId:s,suspensionType:a,reason:l,duration:r}=e;const n={type:a,reason:l};return"temporary"===a&&r&&(n.duration="".concat(r," days")),await jl.Dv.suspendPlayer(t,s,n)},onSuccess:()=>{vl.success("Player suspended successfully"),B(!1),z(null),W({type:"temporary",reason:"",duration:""}),c(),H.invalidateQueries(["clubPlayers",t]),H.invalidateQueries(["suspendedPlayers",t])},onError:e=>{vl.error(e.message||"Failed to suspend player")}}),Z=pr({mutationFn:async e=>await jl.Dv.unsuspendPlayer(t,e),onSuccess:()=>{vl.success("Player unsuspended successfully"),c(),H.invalidateQueries(["clubPlayers",t]),H.invalidateQueries(["suspendedPlayers",t])},onError:e=>{vl.error(e.message||"Failed to unsuspend player")}}),{data:X=[],isLoading:ee}=ur({queryKey:["fieldUpdateRequests",t],queryFn:async()=>[],enabled:!!t&&"field-updates"===u}),te=pr({mutationFn:async e=>{let{requestId:t,approved:s,notes:a}=e;return{success:!0}},onSuccess:()=>{vl.success("Field update request processed"),H.invalidateQueries(["fieldUpdateRequests",t])},onError:e=>{vl.error(e.message||"Failed to process field update request")}}),se=((null===s||void 0===s?void 0:s.players)||[]).filter(e=>{var t,s,a;const l=!x||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(x.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(x.toLowerCase()))||(null===(a=e.playerId)||void 0===a?void 0:a.toLowerCase().includes(x.toLowerCase())),r="All"===p||e.status===p;return l&&r}),ae=Math.ceil(se.length/C),le=(y-1)*C,re=le+C,ne=se.slice(le,re),ie=Math.ceil(r.length/C),oe=(j-1)*C,de=oe+C,ce=r.slice(oe,de),ue=Math.ceil(X.length/C),me=(N-1)*C,xe=me+C,he=X.slice(me,xe);(0,a.useEffect)(()=>{v(1)},[x,p]);return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Player Management"}),(0,ta.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"all",label:"All Players"},{id:"create",label:"Create Players"},{id:"approval",label:"Player Approval"},{id:"field-updates",label:"Player Fields Update Approval"}].map(e=>(0,ta.jsx)("button",{onClick:()=>{return t=e.id,m(t),v(1),w(1),void S(1);var t},className:"px-6 py-3 font-semibold transition-all ".concat(u===e.id?"bg-gradient-to-r from-red-400 to-purple-600 text-white border-b-2 border-purple-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,ta.jsxs)("div",{className:"mt-6",children:["all"===u&&(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 flex gap-4",children:[(0,ta.jsx)("input",{type:"text",placeholder:"Search by name, email, or ID...",value:x,onChange:e=>h(e.target.value),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500"}),(0,ta.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",children:[(0,ta.jsx)("option",{value:"All",children:"All Status"}),(0,ta.jsx)("option",{value:"Active",children:"Active"}),(0,ta.jsx)("option",{value:"Pending",children:"Pending"}),(0,ta.jsx)("option",{value:"Suspended",children:"Suspended"})]})]}),l?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading players..."})]}):(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,ta.jsxs)("span",{children:["Showing ",le+1,"-",Math.min(re,se.length)," of ",se.length," players"]})}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"ID"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Balance"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Registered"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===ne.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"9",className:"px-6 py-8 text-center text-gray-400",children:"No players found"})}):ne.map(e=>(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium cursor-pointer",onClick:()=>{M(e),L(!0)},children:e.name}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.playerId||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.phoneNumber||"-"}),(0,ta.jsxs)("td",{className:"px-6 py-4 text-gray-400",children:["\u20b9",e.balance||0]}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Active"===e.status?"bg-emerald-600/20 text-emerald-400":"Pending"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-red-600/20 text-red-400"),children:e.status})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("approved"===e.kycStatus||"verified"===e.kycStatus?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"),children:e.kycStatus||"pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("div",{className:"flex gap-2",children:"Suspended"===e.status?(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("Are you sure you want to unsuspend ".concat(e.name,"?"))&&Z.mutate(e.id)},disabled:Z.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors disabled:opacity-50",children:"Unsuspend"}):(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e),B(!0)},className:"bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",children:"Suspend"})})})]},e.id))})]}),ae>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",y," of ",ae]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>v(e=>Math.max(1,e-1)),disabled:1===y,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>v(e=>Math.min(ae,e+1)),disabled:y===ae,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})]}),"create"===u&&(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create New Player"}),!t&&(0,ta.jsx)("div",{className:"mb-6 p-4 bg-yellow-900/30 border border-yellow-500/50 rounded-lg",children:(0,ta.jsx)("p",{className:"text-yellow-400 font-semibold",children:"\u26a0\ufe0f Please select a club from the sidebar dropdown to create a player"})}),(0,ta.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!t)return void vl.error("Please select a club first");if(k.panCard&&k.panCard.trim()){if(!/^[A-Z]{5}[0-9]{4}[A-Z]{1}$/.test(k.panCard.trim()))return void vl.error("PAN card must be in format: ABCDE1234F (5 letters, 4 digits, 1 letter)")}if(!k.aadhaarFile)return void vl.error("Please upload Aadhaar document");if(!k.panCardFile)return void vl.error("Please upload PAN card document");const s=5242880;if(k.aadhaarFile.size>s)return void vl.error("Aadhaar document must be less than 5MB");if(k.panCardFile.size>s)return void vl.error("PAN card document must be less than 5MB");const a=["image/jpeg","image/jpg","image/png","application/pdf"];if(!a.includes(k.aadhaarFile.type))return void vl.error("Aadhaar document must be JPG, PNG, or PDF");if(!a.includes(k.panCardFile.type))return void vl.error("PAN card document must be JPG, PNG, or PDF");const l={name:k.name,email:k.email,phoneNumber:k.phoneNumber,affiliateCode:k.referralCode||void 0,panCard:k.panCard||void 0,initialBalance:k.initialBalance||0};Q.mutate(l)},className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Player Name *"}),(0,ta.jsx)("input",{type:"text",value:k.name,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email *"}),(0,ta.jsx)("input",{type:"email",value:k.email,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{email:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Phone Number *"}),(0,ta.jsx)("input",{type:"tel",value:k.phoneNumber,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{phoneNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Referral Code (Optional)"}),(0,ta.jsx)("input",{type:"text",value:k.referralCode||"",onChange:e=>P((0,n.A)((0,n.A)({},k),{},{referralCode:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Referral code"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Card Number"}),(0,ta.jsx)("input",{type:"text",value:k.panCard,onChange:e=>{const t=e.target.value.toUpperCase();t.length<=10&&/^[A-Z0-9]*$/.test(t)&&P((0,n.A)((0,n.A)({},k),{},{panCard:t}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white font-mono",placeholder:"ABCDE1234F",maxLength:10}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Format: 5 letters, 4 digits, 1 letter (e.g., ABCDE1234F)"})]}),(0,ta.jsxs)("div",{className:"col-span-2",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Aadhaar Document *"}),(0,ta.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&P((0,n.A)((0,n.A)({},k),{},{aadhaarFile:s}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500",required:!0}),k.aadhaarFile&&(0,ta.jsxs)("p",{className:"text-xs text-emerald-400 mt-1",children:["\u2713 ",k.aadhaarFile.name]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload Aadhaar card (JPG, PNG, or PDF, max 5MB)"})]}),(0,ta.jsxs)("div",{className:"col-span-2",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"PAN Card Document *"}),(0,ta.jsx)("input",{type:"file",accept:"image/jpeg,image/jpg,image/png,application/pdf",onChange:e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];s&&P((0,n.A)((0,n.A)({},k),{},{panCardFile:s}))},className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500",required:!0}),k.panCardFile&&(0,ta.jsxs)("p",{className:"text-xs text-emerald-400 mt-1",children:["\u2713 ",k.panCardFile.name]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Upload PAN card document (JPG, PNG, or PDF, max 5MB)"})]}),(0,ta.jsxs)("div",{className:"col-span-2",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Initial Balance (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:k.initialBalance,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{initialBalance:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsx)("div",{className:"flex gap-4 mt-6",children:(0,ta.jsx)("button",{type:"submit",disabled:Q.isLoading||K.isLoading||!t,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:Q.isLoading||K.isLoading?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),(0,ta.jsx)("span",{children:"Creating Player & Uploading Documents..."})]}):t?"Create Player":"Select a Club First"})})]})]}),"approval"===u&&(0,ta.jsx)("div",{className:"space-y-6",children:i?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading pending players..."})]}):0===r.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 border border-slate-700 text-center",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\u2705"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No pending approvals"})]}):(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Player Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Registration Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Document"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===ce.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-400",children:"No pending players found"})}):ce.map(e=>(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.phoneNumber||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.registrationDate||e.createdAt).toLocaleDateString()}),(0,ta.jsx)("td",{className:"px-6 py-4",children:e.kycDocumentUrl?(0,ta.jsx)("a",{href:e.kycDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:"View Document"}):(0,ta.jsx)("span",{className:"text-gray-500",children:"No document"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:"Pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>{I(e),G.mutate({playerId:e.id,notes:"Approved by Super Admin"})},disabled:G.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Approve"}),(0,ta.jsx)("button",{onClick:()=>{const t=prompt("Enter rejection reason:");t&&Y.mutate({playerId:e.id,reason:t})},disabled:Y.isLoading,className:"bg-red-600 hover:bg-red-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Reject"})]})})]},e.id))})]}),ie>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",j," of ",ie]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>w(e=>Math.max(1,e-1)),disabled:1===j,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>w(e=>Math.min(ie,e+1)),disabled:j===ie,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})}),"field-updates"===u&&(0,ta.jsxs)("div",{className:"space-y-6",children:[ee?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading field update requests..."})]}):0===X.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 border border-slate-700 text-center",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcdd"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No pending field update requests"})]}):(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,ta.jsxs)("span",{children:["Showing ",me+1,"-",Math.min(xe,X.length)," of ",X.length," field update requests"]})}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Player Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Fields Updated"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Requested Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===he.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-400",children:"No field update requests found"})}):he.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.playerName}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("div",{className:"space-y-1",children:null===(t=e.fields)||void 0===t?void 0:t.map((e,t)=>(0,ta.jsxs)("div",{className:"text-sm",children:[(0,ta.jsxs)("span",{className:"text-gray-400",children:[e.fieldName,":"]})," ",(0,ta.jsx)("span",{className:"text-gray-500 line-through",children:e.currentValue||"N/A"})," \u2192 ",(0,ta.jsx)("span",{className:"text-emerald-400",children:e.requestedValue})]},t))})}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.requestedDate||e.createdAt).toLocaleDateString()}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status||"Pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>{te.mutate({requestId:e.id,approved:!0,notes:"Approved by Super Admin"})},disabled:te.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Approve"}),(0,ta.jsx)("button",{onClick:()=>{const t=prompt("Enter rejection reason:");t&&te.mutate({requestId:e.id,approved:!1,notes:t})},disabled:te.isLoading,className:"bg-red-600 hover:bg-red-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Reject"})]})})]},e.id)})})]}),ue>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",N," of ",ue]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>S(e=>Math.max(1,e-1)),disabled:1===N,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>S(e=>Math.min(ue,e+1)),disabled:N===ue,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]}),"suspend"===u&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Player Suspension Management"}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,ta.jsxs)("div",{className:"text-center py-8",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:"\ud83d\udca1 To suspend a player:"}),(0,ta.jsx)("p",{className:"text-gray-300",children:'Go to the "All Players" tab and click the "Suspend" button next to any player.'})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400",children:d?"Loading...":"Showing ".concat(o.length," suspended players")}),d?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading suspended players..."})]}):0===o.length?(0,ta.jsx)("div",{className:"p-12 text-center",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No suspended players"})}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"p-4 text-sm text-gray-400",children:["Showing ",Math.min((suspendPage-1)*C+1,o.length)," - ",Math.min(suspendPage*C,o.length)," of ",o.length," suspended players"]}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Suspended Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Reason"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:o.slice((suspendPage-1)*C,suspendPage*C).map(e=>(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:e.suspendedAt?new Date(e.suspendedAt).toLocaleDateString():"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:e.suspensionReason||e.reason||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("button",{onClick:()=>{window.confirm("Are you sure you want to unsuspend ".concat(e.name,"?"))&&jl.Dv.unsuspendPlayer(t,e.id).then(()=>{vl.success("Player unsuspended successfully"),c()}).catch(e=>{vl.error(e.message||"Failed to unsuspend player")})},className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"Unsuspend"})})]},e.id))})]}),Math.ceil(o.length/C)>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",suspendPage," of ",Math.ceil(o.length/C)]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>setSuspendPage(e=>Math.max(1,e-1)),disabled:1===suspendPage,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>setSuspendPage(e=>Math.min(Math.ceil(o.length/C),e+1)),disabled:suspendPage>=Math.ceil(o.length/C),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})]})]})]})]}),D&&_&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-500 rounded-full mb-4",children:(0,ta.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"\ud83c\udf89 Player Created!"}),(0,ta.jsx)("p",{className:"text-emerald-400 text-sm",children:"Save these credentials securely!"})]}),(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-emerald-500/30",children:[(0,ta.jsxs)("h3",{className:"text-emerald-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Player Login Credentials"]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",_.player.name]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",_.player.email]}),(0,ta.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,ta.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:_.player.tempPassword}),(0,ta.jsx)("p",{className:"text-yellow-300 text-xs mt-1",children:"Player must reset password on first login"})]})]})]})}),(0,ta.jsx)("button",{onClick:()=>{T(!1),E(null),m("all")},className:"w-full mt-6 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Got it! Close"})]})}),R&&O&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-purple-500 shadow-2xl my-8",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Player Details"}),(0,ta.jsx)("button",{onClick:()=>{L(!1),M(null)},className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),J?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading player details..."})]}):V?(0,ta.jsxs)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,ta.jsxs)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Basic Information"]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Name"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:V.name||O.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Email"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:V.email||O.email})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Phone Number"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:V.phoneNumber||O.phoneNumber||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Player ID"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:V.playerId||O.playerId||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"PAN Card"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:V.panCard||O.panCard||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Status"}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded text-xs font-semibold ".concat("Active"===(V.status||O.status)?"bg-emerald-600/20 text-emerald-400":"Pending"===(V.status||O.status)?"bg-yellow-600/20 text-yellow-400":"bg-red-600/20 text-red-400"),children:V.status||O.status})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"KYC Status"}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded text-xs font-semibold ".concat("approved"===(V.kycStatus||O.kycStatus)||"verified"===(V.kycStatus||O.kycStatus)?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"),children:V.kycStatus||O.kycStatus||"pending"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Registration Date"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:new Date(V.createdAt||O.createdAt).toLocaleDateString()})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Balance"}),(0,ta.jsxs)("p",{className:"text-white font-medium",children:["\u20b9",V.balance||O.balance||0]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,ta.jsxs)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),"KYC Documents"]}),V.documents&&V.documents.length>0?(0,ta.jsx)("div",{className:"space-y-6",children:V.documents.map((e,t)=>{const s=(e=>{if(!e)return"Unknown";const t=e.toLowerCase();return"government_id"===t||"aadhaar"===t||"aadhar"===t?"Aadhaar Card":"pan_card"===t||"pan"===t?"PAN Card":e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")})(e.type||e.documentType),a=s.includes("Aadhaar");return(0,ta.jsxs)("div",{className:"bg-slate-700/70 rounded-xl p-6 border-2 ".concat(a?"border-blue-500/50 shadow-lg shadow-blue-500/10":"border-purple-500/50 shadow-lg shadow-purple-500/10"),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("div",{className:"flex items-center gap-3 mb-3",children:(0,ta.jsx)("span",{className:"px-4 py-2 rounded-lg text-sm font-bold ".concat(a?"bg-blue-600/30 text-blue-300 border border-blue-500/50":"bg-purple-600/30 text-purple-300 border border-purple-500/50"),children:s})}),(0,ta.jsx)("p",{className:"text-white font-semibold text-lg mb-2",children:e.name||e.fileName||"Document ".concat(t+1)}),e.uploadedAt&&(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["\ud83d\udcc5 Uploaded: ",new Date(e.uploadedAt).toLocaleDateString()]})]}),(0,ta.jsx)("div",{className:"flex gap-2",children:e.url&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-md",children:[(0,ta.jsxs)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Preview"]}),(0,ta.jsxs)("a",{href:e.url,download:!0,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-2 shadow-md",children:[(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})}),"Download"]})]})})]}),e.url&&(0,ta.jsx)("div",{className:"mt-3",children:e.url.match(/\.(jpg|jpeg|png|gif)$/i)?(0,ta.jsx)("img",{src:e.url,alt:e.name||"Document",className:"max-w-full h-auto rounded-lg border border-slate-600 max-h-64",onError:e=>{e.target.style.display="none"}}):e.url.match(/\.pdf$/i)?(0,ta.jsx)("iframe",{src:e.url,className:"w-full h-64 rounded-lg border border-slate-600",title:e.name||"PDF Document"}):(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 text-center",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Preview not available for this file type"}),(0,ta.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Click Preview or Download to view"})]})})]},e.id||t)})}):(0,ta.jsx)("div",{className:"text-center py-8",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No KYC documents uploaded yet"})})]})]}):(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-red-400",children:"Failed to load player details"})}),(0,ta.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ta.jsx)("button",{onClick:()=>{L(!1),M(null)},className:"bg-purple-600 hover:bg-purple-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Close"})})]})}),F&&q&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-red-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Suspend Player"}),(0,ta.jsx)("button",{onClick:()=>{B(!1),z(null),W({type:"temporary",reason:"",duration:""})},className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-red-500/30",children:[(0,ta.jsxs)("p",{className:"text-white font-medium mb-1",children:["Player: ",(0,ta.jsx)("span",{className:"text-red-400",children:q.name})]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Email: ",q.email]})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),U.reason&&U.reason.trim()?$.mutate({playerId:q.id,suspensionType:U.type,reason:U.reason.trim(),duration:"temporary"===U.type&&U.duration?U.duration:void 0}):vl.error("Please provide a reason for suspension")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Suspension Type *"}),(0,ta.jsxs)("select",{value:U.type,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{type:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:!0,children:[(0,ta.jsx)("option",{value:"temporary",children:"Temporary"}),(0,ta.jsx)("option",{value:"permanent",children:"Permanent"})]})]}),"temporary"===U.type&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Duration (days) *"}),(0,ta.jsx)("input",{type:"number",min:"1",value:U.duration,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{duration:e.target.value})),placeholder:"Enter number of days",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:"temporary"===U.type})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason for Suspension *"}),(0,ta.jsx)("textarea",{value:U.reason,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{reason:e.target.value})),placeholder:"Enter detailed reason for suspending this player...",rows:4,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{B(!1),z(null),W({type:"temporary",reason:"",duration:""})},className:"flex-1 bg-slate-700 hover:bg-slate-600 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:$.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:$.isLoading?(0,ta.jsxs)("span",{className:"flex items-center justify-center",children:[(0,ta.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ta.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ta.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Suspending..."]}):"Suspend Player"})]})]})]})]})})]})}function vr(e){let{clubId:t}=e;const s=aa(),[l,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),{data:c=[],isLoading:u,refetch:m}=ur({queryKey:["buyOutRequests",t],queryFn:()=>jl.Od.getBuyOutRequests(t),enabled:!!t,refetchInterval:5e3}),x=pr({mutationFn:e=>{let{requestId:s,amount:a}=e;return jl.Od.approveBuyOutRequest(t,s,{amount:a})},onSuccess:()=>{vl.success("Buy-out request approved and balance updated!"),s.invalidateQueries(["buyOutRequests",t]),r(null)},onError:e=>{vl.error(e.message||"Failed to approve buy-out request")}}),h=pr({mutationFn:e=>{let{requestId:s,reason:a}=e;return jl.Od.rejectBuyOutRequest(t,s,{reason:a})},onSuccess:()=>{vl.success("Buy-out request rejected!"),s.invalidateQueries(["buyOutRequests",t]),r(null),i(!1),d("")},onError:e=>{vl.error(e.message||"Failed to reject buy-out request")}}),p=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},b=c.filter(e=>"pending"===e.status);return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Table Buy-Out Requests"}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:[b.length," pending request",1!==b.length?"s":""]})]}),u?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading buy-out requests..."}):0===b.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending buy-out requests"}):(0,ta.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold text-white",children:e.playerName}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Table ",e.tableNumber]}),e.seatNumber&&(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Seat ",e.seatNumber]})]}),(0,ta.jsxs)("div",{className:"text-xl font-bold text-green-400 mb-2",children:["\u20b9",Number(e.requestedAmount||e.currentTableBalance||0).toLocaleString("en-IN")]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Call time started: ",p(e.callTimeStartedAt)]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Requested at: ",p(e.requestedAt)]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Approve buy-out request for ".concat(e.playerName,"? Amount: \u20b9").concat(Number(e.requestedAmount||e.currentTableBalance||0).toLocaleString("en-IN")))&&x.mutate({requestId:e.id,amount:e.requestedAmount||e.currentTableBalance||0})})(e),disabled:x.isPending,className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:x.isPending?"Processing...":"Approve"}),(0,ta.jsx)("button",{onClick:()=>(e=>{r(e),i(!0)})(e),disabled:h.isPending,className:"bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:"Reject"})]})]})},e.id))})]}),n&&l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 max-w-md w-full mx-4",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold mb-4 text-white",children:"Reject Buy-Out Request"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["Reject buy-out request for ",(0,ta.jsx)("strong",{children:l.playerName}),"?"]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for Rejection ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Enter reason for rejection...",rows:"4",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{o.trim()?h.mutate({requestId:l.id,reason:o}):vl.error("Please provide a reason for rejection")},disabled:h.isPending||!o.trim(),className:"flex-1 bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:h.isPending?"Rejecting...":"Reject Request"}),(0,ta.jsx)("button",{onClick:()=>{i(!1),r(null),d("")},className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors",children:"Cancel"})]})]})})]})}function jr(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("live-tables"),{data:r,isLoading:n}=(aa(),ur({queryKey:["tables",t],queryFn:()=>jl.rj.getTables(t),enabled:!!t})),{data:i,isLoading:o}=ur({queryKey:["waitlist",t],queryFn:()=>jl.IX.getWaitlist(t),enabled:!!t}),d=r||[],c=i||[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),!t&&(0,ta.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100 flex items-center gap-3",children:[(0,ta.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.3 2.647-1.3 3.412 0l7 12a1.5 1.5 0 01-1.302 2.25H2.847a1.5 1.5 0 01-1.302-2.25l7-12zM9 13a1 1 0 112 0v2a1 1 0 11-2 0v-2zm0-6a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z",clipRule:"evenodd"})}),(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club from the sidebar dropdown to manage tables."})]}),(0,ta.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"live-tables",label:"Live Tables"},{id:"table-management",label:"Table Management"},{id:"table-buy-in",label:"Table Buy-In"},{id:"table-buy-out",label:"Table Buy-Out"}].map(e=>(0,ta.jsx)("button",{onClick:()=>l(e.id),className:"px-6 py-3 font-semibold transition-all ".concat(s===e.id?"bg-gradient-to-r from-blue-600 to-indigo-700 text-white border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,ta.jsxs)("div",{className:"mt-6",children:["live-tables"===s&&(0,ta.jsx)(wr,{selectedClubId:t,tables:d,tablesLoading:n}),"table-management"===s&&(0,ta.jsx)(Cr,{selectedClubId:t,tables:d,tablesLoading:n}),"table-buy-in"===s&&(0,ta.jsx)(kr,{selectedClubId:t,tables:d,waitlist:c,waitlistLoading:o}),"table-buy-out"===s&&(0,ta.jsx)(Pr,{selectedClubId:t,tables:d})]})]})}function wr(e){let{selectedClubId:t,tables:s,tablesLoading:l}=e;const[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)({minPlayTime:30,callTime:5,cashOutWindow:10,sessionTimeout:120}),[x,h]=(0,a.useState)("Active"),p=s.filter(e=>("AVAILABLE"===e.status||"OCCUPIED"===e.status)&&"RUMMY"!==e.tableType),b=e=>{if(!e.notes)return null;const t=e.notes.match(/Dealer:.*?\(([^)]+)\)/i);return t?t[1]:null},g=e=>{var t,s,a,l,r,n,i,d;c(e),o(!0);const u=e.notes?e.notes.split("|").map(e=>e.trim()):[],x=(null===(t=u[3])||void 0===t||null===(s=t.match(/\d+/))||void 0===s?void 0:s[0])||"30",p=(null===(a=u[4])||void 0===a||null===(l=a.match(/\d+/))||void 0===l?void 0:l[0])||"5",b=(null===(r=u[5])||void 0===r||null===(n=r.match(/\d+/))||void 0===n?void 0:n[0])||"10",g=(null===(i=u[6])||void 0===i||null===(d=i.match(/\d+/))||void 0===d?void 0:d[0])||"120";m({minPlayTime:parseInt(x),callTime:parseInt(p),cashOutWindow:parseInt(b),sessionTimeout:parseInt(g)}),h("OCCUPIED"===e.status?"Active":"Paused")};return(0,ta.jsxs)("div",{className:"space-y-6",children:[i&&d&&(0,ta.jsx)(Nr,{table:d,tables:p,sessionParams:u,setSessionParams:m,sessionStatus:x,setSessionStatus:h,clubId:t,onClose:()=>{o(!1),c(null)},onSelectTable:e=>{c(e),g(e)}}),!i&&(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - Hologram View"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Manage live tables, seat players, and handle buy-ins using table hologram."})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",p.length]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",p.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),l?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tables..."})]}):0===p.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Create and activate tables in Table Management"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all cursor-pointer",onClick:()=>n(e),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,ta.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]}),b(e)&&(0,ta.jsxs)("div",{className:"flex justify-between text-sm pt-1 border-t border-slate-600",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"\ud83d\udc64 Dealer:"}),(0,ta.jsx)("span",{className:"text-purple-400 font-semibold",children:b(e)})]})]}),(0,ta.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"w-full mt-4 bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83c\udfaf"}),(0,ta.jsx)("span",{children:"View Table Hologram"})]}),(0,ta.jsxs)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"w-full mt-2 bg-gradient-to-r from-purple-600 to-pink-700 hover:from-purple-500 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\u2699\ufe0f"}),(0,ta.jsx)("span",{children:"Edit Session Control"})]})]},e.id))})]}),r&&(0,ta.jsx)(Sr,{table:r,onClose:()=>n(null),clubId:t})]})}function Nr(e){let{table:t,tables:s,sessionParams:l,setSessionParams:r,sessionStatus:i,setSessionStatus:o,clubId:d,onClose:c,onSelectTable:u}=e;const m=aa(),[x,h]=(0,a.useState)(d);(0,a.useEffect)(()=>{d&&h(d)},[d]);const p=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.pauseSession(x,t.id)},onSuccess:()=>{o("Paused"),vl.success("Session paused successfully"),m.invalidateQueries(["tables",x])},onError:e=>{vl.error(e.message||"Failed to pause session")}}),b=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.resumeSession(x,t.id)},onSuccess:()=>{o("Active"),vl.success("Session resumed successfully"),m.invalidateQueries(["tables",x])},onError:e=>{vl.error(e.message||"Failed to resume session")}}),g=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.endSession(x,t.id)},onSuccess:()=>{vl.success("Session ended successfully"),m.invalidateQueries(["tables",x]),c()},onError:e=>{vl.error(e.message||"Failed to end session")}}),f=pr({mutationFn:async e=>{if(!x)throw new Error("Club ID not found");return await jl.rj.updateSessionParams(x,t.id,e)},onSuccess:e=>{vl.success("Session parameters updated successfully"),m.invalidateQueries(["tables",x]),e.sessionParams&&r(e.sessionParams)},onError:e=>{vl.error(e.message||"Failed to update session parameters")}}),y=(e,t)=>{const s={[e]:parseInt(t)};f.mutate(s)},v=e=>{const t=e.notes?e.notes.split("|").map(e=>e.trim()):[];return t[1]||e.tableType};return(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-blue-900/50 via-purple-900/50 to-indigo-900/50 rounded-2xl p-8 border-2 border-blue-500/30 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Table Session Control"}),(0,ta.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Table Sessions"}),(0,ta.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,ta.jsx)("div",{onClick:()=>u(e),className:"p-4 rounded-lg cursor-pointer transition-all ".concat(e.id===t.id?"bg-blue-600/30 border-2 border-blue-500":"bg-slate-700/50 border border-slate-600 hover:bg-slate-700"),children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"font-semibold text-white",children:["Table ",e.tableNumber," - ",v(e).split(" | ")[0]]}),(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:v(e)})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"OCCUPIED"===e.status?"Active":"Paused"})]})},e.id))}),(0,ta.jsxs)("div",{className:"mt-6 p-4 bg-blue-600/20 border border-blue-500/30 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-blue-300 mb-2",children:["Selected: Table ",t.tableNumber," - ",v(t).split(" | ")[0]]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Game:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:v(t)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:(e=>{var t;const s=e.notes?e.notes.split("|").map(e=>e.trim()):[];return(null===(t=s[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"\u20b9".concat(e.minBuyIn||0,"/\u20b9").concat(e.maxBuyIn||0)})(t)})]})]}),(0,ta.jsxs)("div",{className:"text-sm mt-2",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Players:"}),(0,ta.jsxs)("span",{className:"text-white ml-2",children:[t.currentSeats||0,"/",t.maxSeats]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Session Actions"}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:"Current Status"}),(0,ta.jsx)("div",{className:"text-4xl font-bold ".concat("Active"===i?"text-green-400":"text-yellow-400"),children:i})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("button",{onClick:()=>{"Active"===i?p.mutate():b.mutate()},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"Active"===i?"\u23f8":"\u25b6"}),(0,ta.jsx)("span",{children:"Active"===i?"Pause Session":"Resume Session"})]}),(0,ta.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to end this session? This action cannot be undone.")&&g.mutate()},className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\u2b1b"}),(0,ta.jsx)("span",{children:"End Session"})]})]}),(0,ta.jsx)("div",{className:"mt-6 p-4 bg-slate-700/50 rounded-lg",children:(0,ta.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"Session parameters can be modified on the right panel."})})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Timing & Parameters"}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"MIN PLAY TIME"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.minPlayTime,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{minPlayTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,ta.jsx)("button",{onClick:()=>y("minPlayTime",l.minPlayTime),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.minPlayTime," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CALL TIME"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.callTime,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{callTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,ta.jsx)("button",{onClick:()=>y("callTime",l.callTime),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.callTime," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CASH-OUT WINDOW"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.cashOutWindow,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{cashOutWindow:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,ta.jsx)("button",{onClick:()=>y("cashOutWindow",l.cashOutWindow),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.cashOutWindow," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"SESSION TIMEOUT"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.sessionTimeout,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{sessionTimeout:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,ta.jsx)("button",{onClick:()=>y("sessionTimeout",l.sessionTimeout),className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.sessionTimeout," mins"]})]})]})]})]})]})}function Sr(e){var t,s,l,r,n,i,o,d,c;let{table:u,onClose:m,clubId:x}=e;const h=aa(),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)("00:00:00"),y=(()=>{if(!u.notes)return null;const e=u.notes.match(/Dealer:\s*([a-f0-9-]{36})\s*\(([^)]+)\)/i);return e?{id:e[1],name:e[2]}:null})(),v=pr({mutationFn:async()=>{if(!u||!y)return;const e=(u.notes||"").replace(/\s*\|\s*Dealer:.*$/i,"").trim();return jl.rj.updateTable(x,u.id,{notes:e})},onSuccess:()=>{vl.success("Dealer unassigned successfully"),h.invalidateQueries(["tables",x]),h.invalidateQueries(["staff",x]),h.invalidateQueries(["all-tables",x]),h.invalidateQueries(["rummy-tables",x]),m()},onError:e=>{vl.error(e.message||"Failed to unassign dealer")}});(0,a.useEffect)(()=>{x&&(async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("userId"),s=localStorage.getItem("tenantId"),a=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:3333/api"}.REACT_APP_API_URL||"http://localhost:3333/api","/clubs/").concat(x),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"x-user-id":t||"","x-tenant-id":s||"","x-club-id":x}});if(a.ok){const e=await a.json();console.log("Club data fetched:",e),b(e)}else console.error("Failed to fetch club data:",a.status,await a.text())}catch(e){console.error("Error fetching club data:",e)}})()},[x]),(0,a.useEffect)(()=>{var e,t;if(!u)return void f("00:00:00");if("AVAILABLE"===u.status||"PAUSED"===u.status){var s;const e=null===(s=u.notes)||void 0===s?void 0:s.match(/Paused Elapsed: (\d+)/);if(e){const t=parseInt(e[1],10);if(!isNaN(t)&&t>=0){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;f("".concat(String(e).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0")))}else f("00:00:00")}else f("00:00:00");return}if("OCCUPIED"!==u.status)return void f("00:00:00");const a=null===(e=u.notes)||void 0===e?void 0:e.match(/Session Started: ([^|]+)/),l=null===(t=u.notes)||void 0===t?void 0:t.match(/Paused Elapsed: (\d+)/);if(!a||!a[1])return console.warn("No session start time found in notes:",u.notes),void f("00:00:00");const r=a[1].trim(),n=new Date(r);if(isNaN(n.getTime()))return console.error("Invalid session start time:",r,"Full notes:",u.notes),void f("00:00:00");const i=l?parseInt(l[1],10):0;(isNaN(i)||i<0)&&console.warn("Invalid paused elapsed time, using 0:",null===l||void 0===l?void 0:l[1]);const o=()=>{const e=(new Date).getTime()-n.getTime();if(isNaN(e))return void f("00:00:00");const t=Math.floor(e/1e3)+i;if(isNaN(t)||t<0)return void f("00:00:00");const s=Math.floor(t/3600),a=Math.floor(t%3600/60),l=t%60;f("".concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0")))};o();const d=setInterval(o,1e3);return()=>clearInterval(d)},[u]);const j=Array.from({length:u.maxSeats},(e,t)=>t+1),w=[],N=u.notes?u.notes.split("|").map(e=>e.trim()):[],S=(null===p||void 0===p?void 0:p.logoUrl)||null;console.log("Club logo URL:",S,"Club data:",p);const C=(null===(t=u.notes)||void 0===t||null===(s=t.match(/Game Type: ([^|]+)/))||void 0===s||null===(l=s[1])||void 0===l?void 0:l.trim())||N[1]||u.tableType,k=(null===(r=u.notes)||void 0===r||null===(n=r.match(/Stakes: ([^|]+)/))||void 0===n||null===(i=n[1])||void 0===i?void 0:i.trim())||(null===(o=N[2])||void 0===o?void 0:o.replace("Stakes:","").trim())||"\u20b9".concat(u.minBuyIn||0,"/\u20b9").concat(u.maxBuyIn||0),P=null===(d=u.notes)||void 0===d?void 0:d.match(/Table Value: \u20b9?([\d,]+)/),A=P?parseInt(P[1].replace(/,/g,"")):(u.currentSeats||0)*((u.minBuyIn+u.maxBuyIn)/2||25e3);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-blue-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h2",{className:"text-3xl font-bold text-white",children:["Table ",u.tableNumber," - ",C]}),(0,ta.jsxs)("p",{className:"text-gray-400",children:["Stakes: ",k]})]}),(0,ta.jsx)("button",{onClick:m,className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsx)("div",{className:"mb-6 flex justify-center",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-yellow-600 to-orange-600 px-6 py-3 rounded-2xl shadow-xl border-2 border-yellow-400",children:[(0,ta.jsx)("div",{className:"text-xs text-yellow-100 text-center mb-1",children:"TABLE VALUE"}),(0,ta.jsxs)("div",{className:"text-3xl font-bold text-white text-center",children:["\u20b9",A.toLocaleString()]})]})}),(0,ta.jsxs)("div",{className:"relative w-full aspect-[4/3] bg-gradient-to-br from-green-800 to-green-900 rounded-[50%] border-8 border-yellow-600 shadow-2xl flex items-center justify-center",children:[(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ta.jsx)("div",{className:"bg-white rounded-full p-2 shadow-lg flex items-center justify-center w-24 h-24",children:S?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("img",{src:S,alt:"Club Logo",className:"w-20 h-20 object-contain",onError:e=>{console.error("Failed to load club logo:",S),e.target.style.display="none";const t=e.target.parentElement.querySelector(".logo-fallback");t&&(t.style.display="flex")}}),(0,ta.jsx)("div",{className:"logo-fallback text-3xl font-bold text-gray-800 hidden items-center justify-center w-full h-full",children:"\u2660\ufe0f\u2665\ufe0f"})]}):(0,ta.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:"\u2660\ufe0f\u2665\ufe0f"})})}),(0,ta.jsxs)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center",children:[y&&(0,ta.jsxs)("div",{className:"mb-2 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-2",children:[(0,ta.jsxs)("span",{children:["\ud83d\udc64 ",y.name]}),(0,ta.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm('Are you sure you want to unassign dealer "'.concat(y.name,'" from this table?'))&&v.mutate()},disabled:v.isLoading,className:"hover:bg-purple-700 rounded-full p-0.5 transition-colors disabled:opacity-50",title:"Unassign Dealer",children:(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsx)("div",{className:"bg-yellow-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:"D"})]}),j.map(e=>{const t=(360/u.maxSeats*(e-1)-90)*(Math.PI/180),s=50+40*Math.cos(t),a=50+35*Math.sin(t),l=w.includes(e);return(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(s,"%"),top:"".concat(a,"%")},children:[(0,ta.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center font-bold text-lg transition-all cursor-pointer ".concat(l?"bg-blue-600 text-white border-2 border-blue-400":"bg-slate-700 text-gray-400 border-2 border-slate-600 hover:border-blue-500"),children:l?"P"+e:e}),(0,ta.jsxs)("div",{className:"text-center text-xs text-white mt-1",children:["Seat ",e]})]},e)})]}),(0,ta.jsxs)("div",{className:"mt-6 grid grid-cols-4 gap-4 bg-slate-800 p-4 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Players"}),(0,ta.jsxs)("div",{className:"text-white font-bold text-xl",children:[u.currentSeats||0,"/",u.maxSeats]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Table Value"}),(0,ta.jsxs)("div",{className:"text-yellow-400 font-bold text-xl",children:["\u20b9",A.toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Buy-In Range"}),(0,ta.jsxs)("div",{className:"text-white font-bold text-lg",children:["\u20b9",(u.minBuyIn||0).toLocaleString()," - \u20b9",(u.maxBuyIn||0).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("div",{className:"font-bold text-xl ".concat("OCCUPIED"===u.status?"text-green-400":"AVAILABLE"===u.status?"text-yellow-400":"text-gray-400"),children:"OCCUPIED"===u.status?"Active":"AVAILABLE"===u.status?"Waiting":u.status})]})]}),("OCCUPIED"===u.status||"AVAILABLE"===u.status&&(null===(c=u.notes)||void 0===c?void 0:c.includes("Paused Elapsed")))&&(0,ta.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-blue-600 to-purple-600 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-blue-100 text-sm mb-1",children:"SESSION RUNNING TIME"}),(0,ta.jsx)("div",{className:"text-white font-bold text-3xl font-mono",children:g})]}),(0,ta.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ta.jsx)("button",{onClick:m,className:"bg-blue-600 hover:bg-blue-500 px-6 py-3 rounded-lg font-bold text-white transition-colors",children:"Close"})})]})})}function Cr(e){let{selectedClubId:t,tables:s,tablesLoading:l}=e;const[r,i]=(0,a.useState)("all"),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),m=s.filter(e=>"RUMMY"!==e.tableType),[x,h]=(0,a.useState)({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),[p,b]=(0,a.useState)(null),g=aa(),[f,y]=(0,a.useState)("30"),{data:v,isLoading:j}=ur({queryKey:["staff",t],queryFn:()=>jl.staffAPI.getStaff(t),enabled:!!t}),w=(null===v||void 0===v?void 0:v.filter(e=>"Dealer"===e.role&&"Active"===e.status))||[],N=(new Date).toISOString().split("T")[0],{data:S}=ur({queryKey:["dealersOnLeave",t,N],queryFn:()=>jl.iw.getDealers(t,N),enabled:!!t}),{data:C}=ur({queryKey:["availableDealersForToday",t,N],queryFn:()=>jl.iw.getAvailableDealersForDate(t,N),enabled:!!t}),k=(null===S||void 0===S?void 0:S.dealers)||[],P=new Set(w.filter(e=>!k.find(t=>t.id===e.id)).map(e=>e.id)),A=new Set(s.filter(e=>("OCCUPIED"===e.status||"RESERVED"===e.status)&&e.notes).map(e=>{var t;const s=null===(t=e.notes)||void 0===t?void 0:t.match(/Dealer:\s*([a-f0-9-]{36})/i);return s?s[1]:null}).filter(Boolean)),I=((null===C||void 0===C?void 0:C.dealers)||[]).filter(e=>!A.has(e.id)),D=w.filter(e=>!A.has(e.id)&&!P.has(e.id)),T=pr({mutationFn:async e=>{let{tableId:s,dealerId:a}=e;const l=m.find(e=>e.id===s),r=w.find(e=>e.id===a);if(!l||!r)throw new Error("Table or dealer not found");const n=(l.notes||"").replace(/\s*\|\s*Dealer:.*$/i,""),i="".concat(n," | Dealer: ").concat(r.id," (").concat(r.name,")").trim();return jl.rj.updateTable(t,s,{notes:i})},onSuccess:()=>{vl.success("Dealer assigned successfully"),d(""),u(""),g.invalidateQueries(["tables",t]),g.invalidateQueries(["staff",t]),g.invalidateQueries(["all-tables",t]),g.invalidateQueries(["rummy-tables",t])},onError:e=>{vl.error(e.message||"Failed to assign dealer")}}),_=pr({mutationFn:e=>jl.rj.createTable(t,e),onSuccess:()=>{vl.success("Table created successfully"),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),i("all"),g.invalidateQueries(["tables",t])},onError:e=>{vl.error(e.message||"Failed to create table")}}),E=pr({mutationFn:e=>{let{tableId:s,data:a}=e;return jl.rj.updateTable(t,s,a)},onSuccess:()=>{vl.success("Table updated successfully"),b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),i("all"),g.invalidateQueries(["tables",t])},onError:e=>{vl.error(e.message||"Failed to update table")}}),R=pr({mutationFn:e=>jl.rj.deleteTable(t,e),onSuccess:()=>{vl.success("Table deleted successfully"),g.invalidateQueries(["tables",t])},onError:e=>{vl.error(e.message||"Failed to delete table")}}),L=pr({mutationFn:e=>jl.rj.resumeSession(t,e),onSuccess:()=>{vl.success("Session started successfully"),g.invalidateQueries(["tables",t])},onError:e=>{vl.error(e.message||"Failed to start session")}});return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Table Management"}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 pb-4 mb-6",children:[(0,ta.jsx)("button",{onClick:()=>i("all"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("all"===r?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"All Tables"}),(0,ta.jsx)("button",{onClick:()=>{i("add"),b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30")},className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("add"===r?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Add New Table"})]}),"all"===r&&(0,ta.jsx)("div",{className:"space-y-4",children:l?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tables..."})]}):0===m.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No regular tables created yet"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:'Click "Add New Table" to create your first table (Rummy tables are managed separately)'})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("AVAILABLE"===e.status?"bg-green-600/20 text-green-400":"OCCUPIED"===e.status?"bg-blue-600/20 text-blue-400":"RESERVED"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-gray-600/20 text-gray-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Max Seats:"}),(0,ta.jsx)("span",{className:"text-white font-medium",children:e.maxSeats})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Current Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:["AVAILABLE"===e.status||"CLOSED"===e.status?(0,ta.jsxs)("button",{onClick:()=>L.mutate(e.id),disabled:L.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[(0,ta.jsx)("span",{children:"\u25b6"}),(0,ta.jsx)("span",{children:"Start Session"})]}):null,(0,ta.jsx)("button",{onClick:()=>(e=>{var t,s,a,l,r,n,o,d,c,u,m,x;b(e);const p=e.notes?e.notes.split("|").map(e=>e.trim()):[],g=p[0]||"Table ".concat(e.tableNumber),f=p[1]||"Texas Hold'em",v=(null===(t=p[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"",j=(null===(s=p[3])||void 0===s||null===(a=s.match(/\d+/))||void 0===a?void 0:a[0])||"30",w=(null===(l=p[4])||void 0===l||null===(r=l.match(/\d+/))||void 0===r?void 0:r[0])||"5",N=(null===(n=p[5])||void 0===n||null===(o=n.match(/\d+/))||void 0===o?void 0:o[0])||"10",S=(null===(d=p[6])||void 0===d||null===(c=d.match(/\d+/))||void 0===c?void 0:c[0])||"120";h({tableName:g,tableNumber:(null===(u=e.tableNumber)||void 0===u?void 0:u.toString())||"",gameType:f,customGameType:"",maxSeats:e.maxSeats||8,stakes:v,minPlayTime:j,callTime:parseInt(w),cashOutWindow:parseInt(N),sessionTimeout:parseInt(S),tableType:e.tableType||"CASH",minBuyIn:(null===(m=e.minBuyIn)||void 0===m?void 0:m.toString())||"",maxBuyIn:(null===(x=e.maxBuyIn)||void 0===x?void 0:x.toString())||"",notes:e.notes||""});const C=new Set(["30","45","60","90","120","150","180"]);y(C.has(j)?j:"custom"),i("add")})(e),className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete Table ".concat(e.tableNumber,"?"))&&R.mutate(e.id)})(e),disabled:R.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]},e.id))})}),"add"===r&&(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold mb-6",children:p?"Edit Table":"Create New Table"}),(0,ta.jsxs)("form",{onSubmit:p?e=>{if(e.preventDefault(),!p)return;const t="custom"===f?Math.max(30,parseInt(x.minPlayTime)||30):Math.max(30,parseInt(f)||30);E.mutate({tableId:p.id,data:{tableType:x.tableType,maxSeats:parseInt(x.maxSeats),minBuyIn:x.minBuyIn?parseFloat(x.minBuyIn):null,maxBuyIn:x.maxBuyIn?parseFloat(x.maxBuyIn):null,notes:x.notes||"".concat(x.tableName||"Table "+x.tableNumber," | ").concat("Custom"===x.gameType?x.customGameType:x.gameType," | Stakes: ").concat(x.stakes," | Min Play: ").concat(t,"m | Call: ").concat(x.callTime,"m | Cash-out: ").concat(x.cashOutWindow,"m | Timeout: ").concat(x.sessionTimeout,"m")}})}:e=>{if(e.preventDefault(),!t)return void vl.error("Please select a club first");if(!x.tableNumber)return void vl.error("Table number is required");const s="custom"===f?Math.max(30,parseInt(x.minPlayTime)||30):Math.max(30,parseInt(f)||30);_.mutate({tableNumber:parseInt(x.tableNumber),tableType:x.tableType,maxSeats:parseInt(x.maxSeats),minBuyIn:x.minBuyIn?parseFloat(x.minBuyIn):null,maxBuyIn:x.maxBuyIn?parseFloat(x.maxBuyIn):null,notes:x.notes||"".concat(x.tableName||"Table "+x.tableNumber," | ").concat("Custom"===x.gameType?x.customGameType:x.gameType," | Stakes: ").concat(x.stakes," | Min Play: ").concat(s,"m | Call: ").concat(x.callTime,"m | Cash-out: ").concat(x.cashOutWindow,"m | Timeout: ").concat(x.sessionTimeout,"m")})},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Name"}),(0,ta.jsx)("input",{type:"text",value:x.tableName,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{tableName:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"Table 1",disabled:!t})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Game Type"}),(0,ta.jsxs)("select",{value:x.gameType,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{gameType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,ta.jsx)("option",{value:"Texas Hold'em",children:"Texas Hold'em"}),(0,ta.jsx)("option",{value:"Omaha",children:"Omaha"}),(0,ta.jsx)("option",{value:"Seven Card Stud",children:"Seven Card Stud"}),(0,ta.jsx)("option",{value:"Razz",children:"Razz"}),(0,ta.jsx)("option",{value:"Custom",children:"Custom"})]})]}),"Custom"===x.gameType&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Custom Game Type"}),(0,ta.jsx)("input",{type:"text",value:x.customGameType,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{customGameType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"Enter custom game type",disabled:!t})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Number *"}),(0,ta.jsx)("input",{type:"number",value:x.tableNumber,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{tableNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",required:!0,disabled:!t,min:"1",placeholder:"1"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Players"}),(0,ta.jsx)("input",{type:"number",value:x.maxSeats,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{maxSeats:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"2",max:"10",placeholder:"8"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Blind Levels / Stakes"}),(0,ta.jsx)("input",{type:"text",value:x.stakes,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{stakes:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",placeholder:"\u20b925/\u20b950",disabled:!t})]}),(0,ta.jsxs)("div",{className:"border-t border-slate-600 pt-4 mt-4",children:[(0,ta.jsx)("h4",{className:"text-white text-sm font-semibold mb-3",children:"Session Parameters"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-xs mb-1",children:"Min Play Time (minutes)"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("select",{value:f,onChange:e=>{const t=e.target.value;y(t),"custom"!==t?h((0,n.A)((0,n.A)({},x),{},{minPlayTime:t})):(!x.minPlayTime||parseInt(x.minPlayTime)<30)&&h((0,n.A)((0,n.A)({},x),{},{minPlayTime:"30"}))},className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,ta.jsx)("option",{value:"30",children:"30 minutes"}),(0,ta.jsx)("option",{value:"45",children:"45 minutes"}),(0,ta.jsx)("option",{value:"60",children:"60 minutes"}),(0,ta.jsx)("option",{value:"90",children:"90 minutes"}),(0,ta.jsx)("option",{value:"120",children:"120 minutes"}),(0,ta.jsx)("option",{value:"150",children:"150 minutes"}),(0,ta.jsx)("option",{value:"180",children:"180 minutes"}),(0,ta.jsx)("option",{value:"custom",children:"Custom..."})]}),"custom"===f&&(0,ta.jsx)("input",{type:"number",min:30,value:x.minPlayTime,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{minPlayTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"Enter minutes (min 30)",disabled:!t})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-xs mb-1",children:"Call Time (minutes)"}),(0,ta.jsx)("input",{type:"number",value:x.callTime,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{callTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"5",disabled:!t})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-xs mb-1",children:"Cash-out Window (minutes)"}),(0,ta.jsx)("input",{type:"number",value:x.cashOutWindow,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{cashOutWindow:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"10",disabled:!t})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-xs mb-1",children:"Session Timeout (minutes)"}),(0,ta.jsx)("input",{type:"number",value:x.sessionTimeout,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{sessionTimeout:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white text-sm",placeholder:"120",disabled:!t})]})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 border-t border-slate-600 pt-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Min Buy-In (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:x.minBuyIn,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{minBuyIn:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"0",step:"0.01",placeholder:"1000.00"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Max Buy-In (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:x.maxBuyIn,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{maxBuyIn:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,min:"0",step:"0.01",placeholder:"10000.00"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Table Type (Backend)"}),(0,ta.jsxs)("select",{value:x.tableType,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{tableType:e.target.value})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",disabled:!t,children:[(0,ta.jsx)("option",{value:"CASH",children:"Cash Game"}),(0,ta.jsx)("option",{value:"TOURNAMENT",children:"Tournament"}),(0,ta.jsx)("option",{value:"HIGH_STAKES",children:"High Stakes"}),(0,ta.jsx)("option",{value:"PRIVATE",children:"Private"})]})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,ta.jsx)("button",{type:"submit",disabled:_.isLoading||E.isLoading||!t,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:_.isLoading||E.isLoading?(0,ta.jsxs)("span",{className:"flex items-center justify-center",children:[(0,ta.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ta.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ta.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),p?"Updating...":"Creating..."]}):p?"Update Table":"Create Table"}),p&&(0,ta.jsx)("button",{type:"button",onClick:()=>{b(null),h({tableName:"",tableNumber:"",gameType:"Texas Hold'em",customGameType:"",maxSeats:8,stakes:"",minPlayTime:"30",callTime:5,cashOutWindow:10,sessionTimeout:120,tableType:"CASH",minBuyIn:"",maxBuyIn:"",notes:""}),y("30"),i("all")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg font-semibold transition-all",children:"Cancel"})]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Dealer Assignment"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,ta.jsxs)("select",{value:o,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t,children:[(0,ta.jsx)("option",{value:"",children:"-- Select Table --"}),m.map(e=>(0,ta.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber," - ",e.tableType," (",e.status,")"]},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Assign Dealer"}),(0,ta.jsxs)("select",{value:c,onChange:e=>u(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t||j,children:[(0,ta.jsx)("option",{value:"",children:"-- Select Dealer --"}),j?(0,ta.jsx)("option",{disabled:!0,children:"Loading dealers..."}):0===I.length?(0,ta.jsx)("option",{disabled:!0,children:w.length>0?"No dealers available (all assigned, on leave, or no shift today)":"No active dealers found"}):I.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.employeeId||"No ID",")"]},e.id))]})]})]}),(0,ta.jsx)("button",{onClick:()=>{o&&c?T.mutate({tableId:o,dealerId:c}):vl.error("Please select both table and dealer")},disabled:!o||!c||T.isLoading||!t,className:"mt-4 bg-purple-600 hover:bg-purple-500 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T.isLoading?"Assigning...":"Assign Dealer"}),0===w.length&&!j&&t&&(0,ta.jsx)("p",{className:"mt-2 text-sm text-yellow-400",children:"\u26a0\ufe0f No active dealers found. Please create dealer staff members first."}),0===D.length&&w.length>0&&!j&&(0,ta.jsx)("p",{className:"mt-2 text-sm text-amber-400",children:"\u2139\ufe0f All dealers are currently assigned to active tables. Free up a dealer by ending a table session."})]})]})}function kr(e){let{selectedClubId:t,tables:s,waitlist:a,waitlistLoading:l}=e;return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Waitlist Management"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Current Waitlist"}),l?(0,ta.jsxs)("div",{className:"text-center py-8",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-2"}),(0,ta.jsx)("p",{className:"text-sm",children:"Loading..."})]}):0===a.length?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players in waitlist"}):(0,ta.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-600 p-4 rounded-lg",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:e.playerName}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Position: ",e.priority||"N/A"]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Table Type: ",e.tableType||"Any"]})]}),(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status})]}),(0,ta.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,ta.jsx)("button",{className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"\ud83c\udfaf View Table"}),(0,ta.jsx)("button",{className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"Remove"})]})]},e.id))})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seat Allocation"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Player"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Player --"}),a.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.playerName},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,ta.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Seat Number"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Seat --"}),[1,2,3,4,5,6,7,8,9].map(e=>(0,ta.jsxs)("option",{value:e,children:["Seat ",e]},e))]})]}),(0,ta.jsx)("button",{className:"w-full bg-purple-600 hover:bg-purple-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Assign Seat"})]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Player Call & Reorder"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Call Players"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsx)("button",{className:"w-full bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call Next Player"}),(0,ta.jsx)("button",{className:"w-full bg-blue-600 hover:bg-blue-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call All Players"}),(0,ta.jsx)("button",{className:"w-full bg-yellow-600 hover:bg-yellow-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Send SMS Notification"})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reorder Waitlist"}),(0,ta.jsx)("div",{className:"space-y-2",children:0===a.length?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No players to reorder"}):a.map((e,t)=>(0,ta.jsxs)("div",{className:"bg-slate-600 p-3 rounded flex justify-between items-center",children:[(0,ta.jsxs)("span",{className:"text-white",children:[t+1,". ",e.playerName]}),(0,ta.jsxs)("div",{className:"flex gap-1",children:[(0,ta.jsx)("button",{disabled:0===t,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2191"}),(0,ta.jsx)("button",{disabled:t===a.length-1,className:"bg-blue-600 hover:bg-blue-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2193"})]})]},e.id))})]})]})]})]})}function Pr(e){let{selectedClubId:t,tables:s}=e;const[l,r]=(0,a.useState)("process-buyout");return(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-orange-600/30 via-red-500/20 to-rose-700/30 rounded-xl p-6 border border-orange-800/40",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Table Buy-Out"}),(0,ta.jsx)("p",{className:"text-gray-300 text-sm mb-6",children:"Manage player buy-out requests and process manual buy-outs."}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-orange-800/40 pb-4 mb-6",children:[(0,ta.jsx)("button",{onClick:()=>r("process-buyout"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("process-buyout"===l?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Process Buy-Out"}),(0,ta.jsx)("button",{onClick:()=>r("player-requests"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("player-requests"===l?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Player Requests"})]}),"process-buyout"===l&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Process Buy-Out"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Seated Player"}),(0,ta.jsx)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:(0,ta.jsx)("option",{value:"",children:"-- Select Player --"})})]}),(0,ta.jsx)("div",{className:"p-4 bg-blue-500/20 rounded-lg border border-blue-400/30",children:(0,ta.jsxs)("div",{className:"text-sm text-white space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Player:"}),(0,ta.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Table:"}),(0,ta.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Current Table Balance:"}),(0,ta.jsx)("span",{className:"font-semibold text-emerald-300",children:"0 chips"})]})]})}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason (Optional)"}),(0,ta.jsx)("textarea",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Enter reason for buy-out (optional)..."})]}),(0,ta.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Approve Buy-Out"})]})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buy-Out Information"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold mb-2",children:"How Buy-Out Works:"}),(0,ta.jsxs)("ul",{className:"text-sm text-gray-300 space-y-2 list-disc list-inside",children:[(0,ta.jsx)("li",{children:"Select a player who is currently seated at a table"}),(0,ta.jsx)("li",{children:"Their table chip balance will be moved to their available balance"}),(0,ta.jsx)("li",{children:"Player will be removed from the table (seat becomes available)"}),(0,ta.jsx)("li",{children:"Player can then convert chips to real money at the cashier counter"})]})]}),(0,ta.jsxs)("div",{className:"p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[(0,ta.jsx)("h4",{className:"text-yellow-300 font-semibold mb-2",children:"\u26a0\ufe0f Important Notes:"}),(0,ta.jsxs)("ul",{className:"text-sm text-yellow-200 space-y-1 list-disc list-inside",children:[(0,ta.jsx)("li",{children:"Buy-out approval is permanent and cannot be undone"}),(0,ta.jsx)("li",{children:"Table balance will be immediately transferred to player's available balance"}),(0,ta.jsx)("li",{children:"Player must go to cashier to convert chips to real money"})]})]}),(0,ta.jsx)("div",{className:"p-4 bg-green-500/20 rounded-lg border border-green-400/30",children:(0,ta.jsxs)("div",{className:"text-sm text-green-300",children:[(0,ta.jsx)("div",{className:"font-semibold mb-1",children:"Currently Seated Players:"}),(0,ta.jsx)("div",{className:"text-green-200",children:"0 player(s) at tables"})]})})]})]})]}),"player-requests"===l&&(0,ta.jsx)(vr,{clubId:t})]})})}const Ar="all_players",Ir="new_signups",Dr="vip_players",Tr="tables_players",_r="waitlist_players",Er="custom_group",Rr="all_staff",Lr="staff_admin",Or="staff_manager",Mr="staff_cashier",Fr="staff_dealer",Br="staff_hr",qr="staff_fnb",zr="staff_gre",Ur="staff_custom",Wr=e=>{if(!e)return e;const t=e.lastIndexOf("."),s=-1!==t?e.substring(0,t):e,a=-1!==t?e.substring(t):"";return s.normalize("NFD").replace(/[\u0300-\u036f]/g,"").replace(/[^\w\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").replace(/^-+|-+$/g,"").toLowerCase()+a};function Hr(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)("player"),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)({title:"",details:"",targetType:Ar,imageFile:null,imageUrl:"",videoFile:null,videoUrl:"",customPlayerIds:[],customStaffIds:[],scheduledAt:"",isActive:!0}),{data:b=[],isLoading:g}=ur({queryKey:["pushNotifications",t,l],queryFn:()=>jl.Dv.getPushNotifications(t,l),enabled:!!t}),{data:f=[]}=ur({queryKey:["allPlayersForGroup",t],queryFn:async()=>{if(!t)return[];const e=[];let s=1;let a=!0;for(;a;)try{const l=(await jl.Dv.getPlayers(t,{limit:50,page:s})).players||[];if(!l||0===l.length){a=!1;break}const r=l.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...r),l.length<50?a=!1:(s++,s>20&&(a=!1))}catch(l){console.error("Error fetching players page ".concat(s,":"),l),a=!1}return e},enabled:!!t&&h.targetType===Er}),{data:y=[]}=ur({queryKey:["allStaffForGroup",t],queryFn:async()=>{if(!t)return[];return(await jl.Dv.getStaff(t)||[]).filter(e=>"Active"===e.status&&"AFFILIATE"!==e.role)},enabled:!!t&&h.targetType===Ur}),v=pr({mutationFn:async e=>{let s=e.imageUrl,a=e.videoUrl;if(e.imageFile)try{const a=Wr(e.imageFile.name),{signedUrl:l,publicUrl:r}=await jl.Dv.createPushNotificationUploadUrl(t,a,!1);await jl.Dv.uploadToSignedUrl(l,e.imageFile),s=r}catch(r){return console.error("Failed to upload image:",r),void vl.error("Failed to upload image: "+(r.message||"Unknown error"))}if(e.videoFile)try{const s=Wr(e.videoFile.name),{signedUrl:l,publicUrl:r}=await jl.Dv.createPushNotificationUploadUrl(t,s,!0);await jl.Dv.uploadToSignedUrl(l,e.videoFile),a=r}catch(r){return console.error("Failed to upload video:",r),void vl.error("Failed to upload video: "+(r.message||"Unknown error"))}return await jl.Dv.createPushNotification(t,{title:e.title,details:e.details,imageUrl:s||void 0,videoUrl:a||void 0,targetType:e.targetType,customPlayerIds:e.targetType===Er?e.customPlayerIds:void 0,customStaffIds:e.targetType===Ur?e.customStaffIds:void 0,notificationType:l,scheduledAt:e.scheduledAt||void 0,isActive:e.isActive})},onSuccess:()=>{vl.success("Push notification created successfully!"),s.invalidateQueries(["pushNotifications",t]),i(!1),N()},onError:e=>{vl.error(e.message||"Failed to create notification")}}),j=pr({mutationFn:async e=>await jl.Dv.sendPushNotification(t,e),onSuccess:e=>{vl.success("Notification sent to ".concat(e.recipientCount," recipient(s)!")),s.invalidateQueries(["pushNotifications",t])},onError:e=>{vl.error(e.message||"Failed to send notification")}}),w=pr({mutationFn:async e=>await jl.Dv.deletePushNotification(t,e),onSuccess:()=>{vl.success("Notification deleted successfully!"),s.invalidateQueries(["pushNotifications",t])},onError:e=>{vl.error(e.message||"Failed to delete notification")}}),N=()=>{p({title:"",details:"",targetType:"player"===l?Ar:Rr,imageFile:null,imageUrl:"",videoFile:null,videoUrl:"",customPlayerIds:[],customStaffIds:[],scheduledAt:"",isActive:!0})};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Push Notifications & Offers"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Create and manage push notifications for players and staff"})]}),(0,ta.jsx)("button",{onClick:()=>{N(),i(!0)},className:"px-6 py-3 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"+ Create Notification"})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-gray-700",children:[(0,ta.jsx)("button",{onClick:()=>{r("player"),N()},className:"px-6 py-3 font-semibold transition-colors ".concat("player"===l?"text-white border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-white"),children:"Player Notifications"}),(0,ta.jsx)("button",{onClick:()=>{r("staff"),N()},className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===l?"text-white border-b-2 border-purple-500 bg-purple-500/10":"text-gray-400 hover:text-white"),children:"Staff Notifications"})]}),g?(0,ta.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading notifications..."}):0===b.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsxs)("p",{className:"text-gray-400 text-lg mb-4",children:["No ",l," notifications yet"]}),(0,ta.jsx)("button",{onClick:()=>{N(),i(!0)},className:"px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors",children:"Create Your First Notification"})]}):(0,ta.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-6 border border-slate-700 hover:border-blue-500 transition-all",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),e.details&&(0,ta.jsx)("p",{className:"text-gray-300 mb-3",children:e.details}),(0,ta.jsxs)("div",{className:"flex flex-wrap gap-2 mb-3",children:[(0,ta.jsxs)("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm font-semibold rounded",children:[e.targetType===Ar&&"All Players",e.targetType===Ir&&"New Signups",e.targetType===Dr&&"VIP Players",e.targetType===Tr&&"Tables Players",e.targetType===_r&&"Waitlist Players",e.targetType===Er&&"Custom Group",e.targetType===Rr&&"All Staff",e.targetType===Lr&&"Admin Staff",e.targetType===Or&&"Manager Staff",e.targetType===Mr&&"Cashier Staff",e.targetType===Fr&&"Dealer Staff",e.targetType===Br&&"HR Staff",e.targetType===qr&&"F&B Staff",e.targetType===zr&&"GRE Staff",e.targetType===Ur&&"Custom Staff Group"]}),(0,ta.jsx)("span",{className:"px-3 py-1 text-sm font-semibold rounded ".concat(e.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"),children:e.isActive?"Active":"Inactive"}),e.sentAt&&(0,ta.jsxs)("span",{className:"px-3 py-1 bg-purple-600 text-white text-sm font-semibold rounded",children:["Sent ",new Date(e.sentAt).toLocaleDateString()]})]}),(e.imageUrl||e.videoUrl)&&(0,ta.jsxs)("div",{className:"mt-3",children:[e.imageUrl&&(0,ta.jsx)("img",{src:e.imageUrl,alt:e.title,className:"max-w-xs rounded-lg"}),e.videoUrl&&(0,ta.jsx)("video",{src:e.videoUrl,controls:!0,className:"max-w-xs rounded-lg mt-2"})]})]}),(0,ta.jsxs)("div",{className:"ml-4 flex flex-col gap-2",children:[!e.sentAt&&(0,ta.jsxs)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to send "'.concat(s,'" to all recipients?'))&&j.mutate(t));var t,s},disabled:j.isPending,className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50 flex items-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udce4"})," Send"]}),(0,ta.jsx)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&w.mutate(t));var t,s},disabled:w.isPending,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Delete"})]})]})},e.id))}),n&&(0,ta.jsx)(Vr,{title:"Create Push Notification",form:h,setForm:p,onSubmit:e=>{e.preventDefault(),h.title.trim()?h.targetType!==Er||0!==h.customPlayerIds.length?h.targetType!==Ur||0!==h.customStaffIds.length?v.mutate(h):vl.error("Please select at least one staff member for custom group"):vl.error("Please select at least one player for custom group"):vl.error("Title is required")},onClose:()=>{i(!1),N()},isLoading:v.isPending,activeTab:l,allPlayers:f,allStaff:y,showCustomGroupModal:m,setShowCustomGroupModal:x})]})}function Vr(e){let{title:t,form:s,setForm:a,onSubmit:l,onClose:r,isLoading:i,activeTab:o,allPlayers:d,allStaff:c,showCustomGroupModal:u,setShowCustomGroupModal:m}=e;return(0,ta.jsxs)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full my-8 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t}),(0,ta.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Title ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"text",value:s.title,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{title:e.target.value})),placeholder:"e.g., Special Weekend Offer!",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Details"}),(0,ta.jsx)("textarea",{value:s.details,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{details:e.target.value})),placeholder:"Enter notification details...",rows:4,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Target Audience ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("select",{value:s.targetType,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{targetType:e.target.value,customPlayerIds:[],customStaffIds:[]})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:"player"===o?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("option",{value:Ar,children:"All Players"}),(0,ta.jsx)("option",{value:Ir,children:"New Sign-up Players"}),(0,ta.jsx)("option",{value:Dr,children:"VIP Players"}),(0,ta.jsx)("option",{value:Tr,children:"Tables Players"}),(0,ta.jsx)("option",{value:_r,children:"Waitlist Players"}),(0,ta.jsx)("option",{value:Er,children:"Custom Group"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("option",{value:Rr,children:"All Staff"}),(0,ta.jsx)("option",{value:Lr,children:"Admin Staff"}),(0,ta.jsx)("option",{value:Or,children:"Manager Staff"}),(0,ta.jsx)("option",{value:Mr,children:"Cashier Staff"}),(0,ta.jsx)("option",{value:Fr,children:"Dealer Staff"}),(0,ta.jsx)("option",{value:Br,children:"HR Staff"}),(0,ta.jsx)("option",{value:qr,children:"F&B Staff"}),(0,ta.jsx)("option",{value:zr,children:"GRE Staff"}),(0,ta.jsx)("option",{value:Ur,children:"Custom Staff Group"})]})}),s.targetType===Er&&(0,ta.jsx)("button",{type:"button",onClick:()=>m(!0),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:s.customPlayerIds.length>0?"Selected ".concat(s.customPlayerIds.length," players"):"Select Players"}),s.targetType===Ur&&(0,ta.jsx)("button",{type:"button",onClick:()=>m(!0),className:"mt-2 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold transition-colors",children:s.customStaffIds.length>0?"Selected ".concat(s.customStaffIds.length," staff members"):"Select Staff Members"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Image (Optional)"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,ta.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:e=>{var t;const l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){if(l.size>10485760)return void vl.error("Image must be less than 10MB");a((0,n.A)((0,n.A)({},s),{},{imageFile:l,imageUrl:""}))}}}),s.imageFile?"\u2713 File Selected":"Choose Image"]}),(0,ta.jsx)("input",{type:"url",value:s.imageUrl,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{imageUrl:e.target.value,imageFile:null})),placeholder:"Or paste image URL",disabled:!!s.imageFile,className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),s.imageFile&&(0,ta.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.imageFile.name," (",(s.imageFile.size/1024).toFixed(1)," KB)"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Video (Optional)"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,ta.jsx)("input",{type:"file",accept:"video/*",className:"hidden",onChange:e=>{var t;const l=null===(t=e.target.files)||void 0===t?void 0:t[0];if(l){if(l.size>104857600)return void vl.error("Video must be less than 100MB");a((0,n.A)((0,n.A)({},s),{},{videoFile:l,videoUrl:""}))}}}),s.videoFile?"\u2713 File Selected":"Choose Video"]}),(0,ta.jsx)("input",{type:"url",value:s.videoUrl,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{videoUrl:e.target.value,videoFile:null})),placeholder:"Or paste video URL",disabled:!!s.videoFile,className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50"})]}),s.videoFile&&(0,ta.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.videoFile.name," (",(s.videoFile.size/1048576).toFixed(1)," MB)"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Schedule (Optional)"}),(0,ta.jsx)("input",{type:"datetime-local",value:s.scheduledAt,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{scheduledAt:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("p",{className:"text-gray-500 text-xs mt-1",children:"Leave empty to send immediately"})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("input",{type:"checkbox",id:"isActive",checked:s.isActive,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{isActive:e.target.checked})),className:"w-5 h-5 text-blue-600 bg-slate-700 border-gray-600 rounded focus:ring-blue-500"}),(0,ta.jsx)("label",{htmlFor:"isActive",className:"text-gray-300 font-semibold",children:"Notification is Active"})]}),(0,ta.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:i?"Creating...":"Create Notification"}),(0,ta.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]}),u&&s.targetType===Er&&(0,ta.jsx)(Jr,{allPlayers:d,selectedPlayerIds:s.customPlayerIds,onSelect:e=>{a((0,n.A)((0,n.A)({},s),{},{customPlayerIds:e})),m(!1)},onClose:()=>m(!1)}),u&&s.targetType===Ur&&(0,ta.jsx)(Kr,{allStaff:c,selectedStaffIds:s.customStaffIds,onSelect:e=>{a((0,n.A)((0,n.A)({},s),{},{customStaffIds:e})),m(!1)},onClose:()=>m(!1)})]})}function Jr(e){let{allPlayers:t,selectedPlayerIds:s,onSelect:l,onClose:r}=e;const[n,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(new Set(s)),c=t.filter(e=>{if(!n)return!0;const t=n.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phoneNumber&&e.phoneNumber.includes(n)||e.playerId&&e.playerId.toLowerCase().includes(t)}),u=e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),d(t)};return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Select Players for Custom Group"}),(0,ta.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by name, email, or ID...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,ta.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:c.map(e=>(0,ta.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer",onClick:()=>u(e.id),children:[(0,ta.jsx)("input",{type:"checkbox",checked:o.has(e.id),onChange:()=>u(e.id),className:"w-5 h-5 text-purple-600"}),(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:e.email})]})]},e.id))}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsxs)("button",{onClick:()=>l(Array.from(o)),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-colors",children:["Select ",o.size," Players"]}),(0,ta.jsx)("button",{onClick:r,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})})}function Kr(e){let{allStaff:t,selectedStaffIds:s,onSelect:l,onClose:r}=e;const[n,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(new Set(s)),c=t.filter(e=>{if(!n)return!0;const t=n.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.employeeId&&e.employeeId.toLowerCase().includes(t)||e.role&&e.role.toLowerCase().includes(t)}),u=e=>{const t=new Set(o);t.has(e)?t.delete(e):t.add(e),d(t)};return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-3xl w-full max-h-[80vh] overflow-y-auto border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Select Staff Members for Custom Group"}),(0,ta.jsx)("input",{type:"text",value:n,onChange:e=>i(e.target.value),placeholder:"Search by name, email, employee ID, or role...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mb-4 focus:outline-none focus:ring-2 focus:ring-purple-500"}),(0,ta.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto mb-4",children:c.map(e=>(0,ta.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer",onClick:()=>u(e.id),children:[(0,ta.jsx)("input",{type:"checkbox",checked:o.has(e.id),onChange:()=>u(e.id),className:"w-5 h-5 text-purple-600"}),(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:[e.email," \u2022 ",e.role]})]})]},e.id))}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsxs)("button",{onClick:()=>l(Array.from(o)),className:"flex-1 bg-purple-600 hover:bg-purple-700 text-white font-bold py-3 rounded-lg transition-colors",children:["Select ",o.size," Staff Members"]}),(0,ta.jsx)("button",{onClick:r,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})})}function Qr(e){var t,s;let{selectedClubId:l}=e;const r=aa(),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[y,v]=(0,a.useState)("details"),[j,w]=(0,a.useState)(null),N=["No Limit Hold'em","Pot Limit Omaha","Pot Limit Omaha Hi-Lo","Limit Hold'em","Seven Card Stud","Seven Card Stud Hi-Lo","Custom"],S=["Standard","Turbo","Super Turbo","Deep Stack","Hyper Turbo","Custom"],C=["Every 4 levels","Every 6 levels","Every 8 levels","No breaks","Custom"],k=["Top 10%","Top 15%","Top 20%","Top 25%","Winner takes all","Custom"],P=["Random","Table Balance","Manual","Custom"],A=["Standard (pause on breaks)","No Pause","Pause on All-in","Custom"],[I,D]=(0,a.useState)({name:"",tournament_type:"No Limit Hold'em",buy_in:"",entry_fee:"",starting_chips:"",blind_structure:"Standard",number_of_levels:15,minutes_per_level:15,break_structure:"Every 4 levels",break_duration:10,late_registration:60,payout_structure:"Top 15%",seat_draw_method:"Random",clock_pause_rules:"Standard (pause on breaks)",allow_rebuys:!1,allow_addon:!1,allow_reentry:!1,bounty_amount:"",max_players:100,start_time:"",custom_tournament_type:"",custom_blind_structure:"",custom_break_structure:"",custom_payout_structure:"",custom_seat_draw_method:"",custom_clock_pause_rules:""}),[T,_]=(0,a.useState)([]);(0,a.useEffect)(()=>{(async()=>{if(l)try{const e=await jl.Od.getClub(l);w((null===e||void 0===e?void 0:e.logoUrl)||null)}catch(e){console.error("Error fetching club logo:",e)}})()},[l]);const{data:E,isLoading:R}=ur({queryKey:["tournaments",l],queryFn:()=>jl.Re.getTournaments(l),enabled:!!l}),{data:L,isLoading:O}=ur({queryKey:["tournament-details",l,null===p||void 0===p?void 0:p.id],queryFn:()=>jl.Re.getTournamentById(l,p.id),enabled:!!l&&!!p&&u}),{data:M,isLoading:F}=ur({queryKey:["tournament-players",l,null===p||void 0===p?void 0:p.id],queryFn:()=>jl.Re.getTournamentPlayers(l,p.id),enabled:!!l&&!!p&&u}),{data:B}=ur({queryKey:["tournament-winners",l,null===p||void 0===p?void 0:p.id],queryFn:()=>jl.Re.getTournamentWinners(l,p.id),enabled:!!l&&!!p&&"completed"===p.status}),q=pr({mutationFn:e=>jl.Re.createTournament(l,e),onSuccess:()=>{vl.success("Tournament created successfully!"),r.invalidateQueries(["tournaments",l]),o(!1),V()},onError:e=>{vl.error(e.message||"Failed to create tournament")}}),z=pr({mutationFn:e=>jl.Re.startTournament(l,e),onSuccess:()=>{vl.success("Tournament started successfully!"),r.invalidateQueries(["tournaments",l])},onError:e=>{vl.error(e.message||"Failed to start tournament")}}),U=pr({mutationFn:e=>{let{tournamentId:t,winners:s}=e;return jl.Re.endTournament(l,t,{winners:s})},onSuccess:()=>{vl.success("Tournament ended and winners updated successfully!"),r.invalidateQueries(["tournaments",l]),h(!1),m(!1),_([])},onError:e=>{vl.error(e.message||"Failed to end tournament")}}),W=pr({mutationFn:e=>{let{tournamentId:t,data:s}=e;return jl.Re.updateTournament(l,t,s)},onSuccess:()=>{vl.success("Tournament updated successfully!"),r.invalidateQueries(["tournaments",l]),c(!1),f(null),V()},onError:e=>{vl.error(e.message||"Failed to update tournament")}}),H=pr({mutationFn:e=>jl.Re.deleteTournament(l,e),onSuccess:()=>{vl.success("Tournament deleted successfully!"),r.invalidateQueries(["tournaments",l])},onError:e=>{vl.error(e.message||"Failed to delete tournament")}}),V=()=>{D({name:"",tournament_type:"No Limit Hold'em",buy_in:"",entry_fee:"",starting_chips:"",blind_structure:"Standard",number_of_levels:15,minutes_per_level:15,break_structure:"Every 4 levels",break_duration:10,late_registration:60,payout_structure:"Top 15%",seat_draw_method:"Random",clock_pause_rules:"Standard (pause on breaks)",allow_rebuys:!1,allow_addon:!1,allow_reentry:!1,bounty_amount:"",max_players:100,start_time:"",custom_tournament_type:"",custom_blind_structure:"",custom_break_structure:"",custom_payout_structure:"",custom_seat_draw_method:"",custom_clock_pause_rules:""})},J=e=>{window.confirm("Are you sure you want to start this tournament?")&&z.mutate(e)},K=e=>{var t,s,a,l,r,n,i;f(e);let o={};if(e.structure&&"string"===typeof e.structure)try{o=JSON.parse(e.structure)}catch(na){o={}}else e.structure&&(o=e.structure);D({name:e.name||"",tournament_type:o.tournament_type||e.tournament_type||"No Limit Hold'em",buy_in:(null===(t=e.buy_in)||void 0===t?void 0:t.toString())||"",entry_fee:(null===(s=e.entry_fee)||void 0===s?void 0:s.toString())||(null===(a=o.entry_fee)||void 0===a?void 0:a.toString())||"",starting_chips:(null===(l=e.starting_chips)||void 0===l?void 0:l.toString())||(null===(r=o.starting_chips)||void 0===r?void 0:r.toString())||"",blind_structure:o.blind_structure||e.blind_structure||"Standard",number_of_levels:o.number_of_levels||e.number_of_levels||15,minutes_per_level:o.minutes_per_level||e.minutes_per_level||15,break_structure:o.break_structure||e.break_structure||"Every 4 levels",break_duration:o.break_duration||e.break_duration||10,late_registration:o.late_registration||e.late_registration||60,payout_structure:o.payout_structure||e.payout_structure||"Top 15%",seat_draw_method:o.seat_draw_method||e.seat_draw_method||"Random",clock_pause_rules:o.clock_pause_rules||e.clock_pause_rules||"Standard (pause on breaks)",allow_rebuys:o.allow_rebuys||e.allow_rebuys||!1,allow_addon:o.allow_addon||e.allow_addon||!1,allow_reentry:o.allow_reentry||e.allow_reentry||!1,bounty_amount:(null===(n=e.bounty_amount)||void 0===n?void 0:n.toString())||(null===(i=o.bounty_amount)||void 0===i?void 0:i.toString())||"",max_players:e.max_players||100,start_time:e.start_time?new Date(e.start_time).toISOString().slice(0,16):"",custom_tournament_type:e.custom_tournament_type||"",custom_blind_structure:e.custom_blind_structure||"",custom_break_structure:e.custom_break_structure||"",custom_payout_structure:e.custom_payout_structure||"",custom_seat_draw_method:e.custom_seat_draw_method||"",custom_clock_pause_rules:e.custom_clock_pause_rules||""}),c(!0)},Q=(e,t,s)=>{const a=[...T];a[e][t]=s,_(a)},G=E||[],Y=(null===M||void 0===M?void 0:M.players)||[],$=(null===B||void 0===B?void 0:B.winners)||[],Z=e=>{switch(e){case"scheduled":return"bg-blue-500/20 text-blue-300 border-blue-500";case"active":return"bg-green-500/20 text-green-300 border-green-500";case"completed":return"bg-gray-500/20 text-gray-300 border-gray-500";default:return"bg-slate-500/20 text-slate-300 border-slate-500"}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Tournament Management"}),(0,ta.jsx)("button",{onClick:()=>o(!0),className:"bg-gradient-to-r from-yellow-500 to-orange-600 hover:from-yellow-400 hover:to-orange-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all",children:"\u2795 Create Tournament"})]}),R?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tournaments..."})]}):0===G.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Tournaments Yet"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Create your first tournament to get started"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:G.map(e=>{var t;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-emerald-600 transition-all",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.name}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(Z(e.status)),children:null===(t=e.status)||void 0===t?void 0:t.toUpperCase()})]}),(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,ta.jsx)("p",{className:"text-white font-mono",children:e.tournament_id})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Type"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:e.tournament_type})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Buy-in"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",e.buy_in]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Starting Chips"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:e.starting_chips})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Players"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:[e.registered_players||0," / ",e.max_players]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>{b(e),m(!0),v("details")},className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View Details"}),"scheduled"===e.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:()=>K(e),className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>J(e.id),className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Start"})]}),"active"===e.status&&(0,ta.jsx)("button",{onClick:()=>{b(e),h(!0)},className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"End Tournament"}),"completed"===e.status&&(0,ta.jsx)("button",{onClick:()=>{b(e),m(!0),v("details")},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View Winners"}),"scheduled"===e.status&&(0,ta.jsx)("button",{onClick:()=>{return t=e.id,s=e.name,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&H.mutate(t));var t,s},className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Delete"})]})]},e.id)})}),i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New Tournament"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Basic Information"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Monday Night Hold'em",value:I.name,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{name:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Type *"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.tournament_type,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{tournament_type:e.target.value})),children:N.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.tournament_type&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Tournament Type"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom type",value:I.custom_tournament_type,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_tournament_type:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Buy-in (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"1000",value:I.buy_in,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{buy_in:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Entry Fee (\u20b9)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"100",value:I.entry_fee,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{entry_fee:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Starting Chips *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"10000",value:I.starting_chips,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{starting_chips:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.start_time,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{start_time:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Max Players"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"100",value:I.max_players,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{max_players:e.target.value}))})]})]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Tournament Rules"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Blind Structure *"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.blind_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{blind_structure:e.target.value})),children:S.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.blind_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Blind Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:I.custom_blind_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_blind_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Number of Levels"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"15",value:I.number_of_levels,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{number_of_levels:parseInt(e.target.value)||15}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Minutes per Level"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"15",value:I.minutes_per_level,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{minutes_per_level:parseInt(e.target.value)||15}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Structure"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.break_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{break_structure:e.target.value})),children:C.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.break_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Break Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:I.custom_break_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_break_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"10",value:I.break_duration,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{break_duration:parseInt(e.target.value)||10}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Late Registration (minutes)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"60",value:I.late_registration,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{late_registration:parseInt(e.target.value)||60}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Payout Structure"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.payout_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{payout_structure:e.target.value})),children:k.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.payout_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Payout Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom structure",value:I.custom_payout_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_payout_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Seat Draw Method"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.seat_draw_method,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{seat_draw_method:e.target.value})),children:P.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.seat_draw_method&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Seat Draw Method"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom method",value:I.custom_seat_draw_method,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_seat_draw_method:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Clock Pause Rules"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",value:I.clock_pause_rules,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{clock_pause_rules:e.target.value})),children:A.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.clock_pause_rules&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Clock Pause Rules"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"Enter custom rules",value:I.custom_clock_pause_rules,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_clock_pause_rules:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Rebuy, Add-on & Re-entry Options"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:I.allow_rebuys,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_rebuys:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Rebuys"})]}),(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:I.allow_addon,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_addon:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Add-on"})]}),(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-emerald-500 focus:ring-emerald-500",checked:I.allow_reentry,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_reentry:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Re-entry"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bounty Amount (\u20b9) - Leave blank for regular tournament"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500",placeholder:"0",value:I.bounty_amount,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{bounty_amount:e.target.value}))}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"If set, this becomes a knockout/bounty tournament"})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{if(!I.name||!I.buy_in||!I.starting_chips)return void vl.error("Please fill in all required fields");const e={name:I.name,tournament_type:I.tournament_type,buy_in:parseFloat(I.buy_in)||0,entry_fee:I.entry_fee?parseFloat(I.entry_fee):void 0,starting_chips:parseInt(I.starting_chips)||0,blind_structure:I.blind_structure,number_of_levels:parseInt(I.number_of_levels)||15,minutes_per_level:parseInt(I.minutes_per_level)||15,break_structure:I.break_structure,break_duration:parseInt(I.break_duration)||10,late_registration:parseInt(I.late_registration)||60,payout_structure:I.payout_structure,seat_draw_method:I.seat_draw_method,clock_pause_rules:I.clock_pause_rules,allow_rebuys:Boolean(I.allow_rebuys),allow_addon:Boolean(I.allow_addon),allow_reentry:Boolean(I.allow_reentry),bounty_amount:I.bounty_amount?parseFloat(I.bounty_amount):void 0,max_players:parseInt(I.max_players)||100,start_time:I.start_time||void 0,custom_tournament_type:I.custom_tournament_type||void 0,custom_blind_structure:I.custom_blind_structure||void 0,custom_break_structure:I.custom_break_structure||void 0,custom_payout_structure:I.custom_payout_structure||void 0,custom_seat_draw_method:I.custom_seat_draw_method||void 0,custom_clock_pause_rules:I.custom_clock_pause_rules||void 0};q.mutate(e)},disabled:q.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:q.isLoading?"Creating...":"Create Tournament"}),(0,ta.jsx)("button",{onClick:()=>{o(!1),V()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),d&&g&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["Edit Tournament: ",g.name]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Basic Information"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Monday Night Hold'em",value:I.name,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{name:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tournament Type *"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.tournament_type,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{tournament_type:e.target.value})),children:N.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.tournament_type&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Tournament Type"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom type",value:I.custom_tournament_type,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_tournament_type:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Buy-in (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"1000",value:I.buy_in,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{buy_in:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Entry Fee (\u20b9)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"100",value:I.entry_fee,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{entry_fee:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Starting Chips *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"10000",value:I.starting_chips,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{starting_chips:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.start_time,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{start_time:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Max Players"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"100",value:I.max_players,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{max_players:e.target.value}))})]})]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Tournament Rules"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Blind Structure *"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.blind_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{blind_structure:e.target.value})),children:S.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.blind_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Blind Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:I.custom_blind_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_blind_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Number of Levels"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"15",value:I.number_of_levels,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{number_of_levels:parseInt(e.target.value)||15}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Minutes per Level"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"15",value:I.minutes_per_level,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{minutes_per_level:parseInt(e.target.value)||15}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Structure"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.break_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{break_structure:e.target.value})),children:C.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.break_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Break Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:I.custom_break_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_break_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Break Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"10",value:I.break_duration,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{break_duration:parseInt(e.target.value)||10}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Late Registration (minutes)"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"60",value:I.late_registration,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{late_registration:parseInt(e.target.value)||60}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Payout Structure"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.payout_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{payout_structure:e.target.value})),children:k.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.payout_structure&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Payout Structure"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom structure",value:I.custom_payout_structure,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_payout_structure:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Seat Draw Method"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.seat_draw_method,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{seat_draw_method:e.target.value})),children:P.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.seat_draw_method&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Seat Draw Method"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom method",value:I.custom_seat_draw_method,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_seat_draw_method:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Clock Pause Rules"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:I.clock_pause_rules,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{clock_pause_rules:e.target.value})),children:A.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.clock_pause_rules&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Clock Pause Rules"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Enter custom rules",value:I.custom_clock_pause_rules,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_clock_pause_rules:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"col-span-2 space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white border-b border-white/20 pb-2",children:"Rebuy, Add-on & Re-entry Options"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:I.allow_rebuys,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_rebuys:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Rebuys"})]}),(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:I.allow_addon,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_addon:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Add-on"})]}),(0,ta.jsxs)("label",{className:"flex items-center space-x-3 text-white cursor-pointer",children:[(0,ta.jsx)("input",{type:"checkbox",className:"w-5 h-5 rounded bg-slate-700 border-slate-600 text-purple-500 focus:ring-purple-500",checked:I.allow_reentry,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{allow_reentry:e.target.checked}))}),(0,ta.jsx)("span",{children:"Allow Re-entry"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bounty Amount (\u20b9) - Leave blank for regular tournament"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"0",value:I.bounty_amount,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{bounty_amount:e.target.value}))}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"If set, this becomes a knockout/bounty tournament"})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{if(!I.name||!I.buy_in||!I.starting_chips)return void vl.error("Please fill in all required fields");const e={name:I.name,tournament_type:I.tournament_type,buy_in:parseFloat(I.buy_in)||0,entry_fee:I.entry_fee?parseFloat(I.entry_fee):void 0,starting_chips:parseInt(I.starting_chips)||0,blind_structure:I.blind_structure,number_of_levels:parseInt(I.number_of_levels)||15,minutes_per_level:parseInt(I.minutes_per_level)||15,break_structure:I.break_structure,break_duration:parseInt(I.break_duration)||10,late_registration:parseInt(I.late_registration)||60,payout_structure:I.payout_structure,seat_draw_method:I.seat_draw_method,clock_pause_rules:I.clock_pause_rules,allow_rebuys:Boolean(I.allow_rebuys),allow_addon:Boolean(I.allow_addon),allow_reentry:Boolean(I.allow_reentry),bounty_amount:I.bounty_amount?parseFloat(I.bounty_amount):void 0,max_players:parseInt(I.max_players)||100,start_time:I.start_time||void 0,custom_tournament_type:I.custom_tournament_type||void 0,custom_blind_structure:I.custom_blind_structure||void 0,custom_break_structure:I.custom_break_structure||void 0,custom_payout_structure:I.custom_payout_structure||void 0,custom_seat_draw_method:I.custom_seat_draw_method||void 0,custom_clock_pause_rules:I.custom_clock_pause_rules||void 0};W.mutate({tournamentId:g.id,data:e})},disabled:W.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:W.isLoading?"Updating...":"Update Tournament"}),(0,ta.jsx)("button",{onClick:()=>{c(!1),f(null),V()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),u&&p&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-6xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:p.name}),(0,ta.jsx)("button",{onClick:()=>{m(!1),b(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>v("details"),className:"px-4 py-2 font-semibold transition-colors ".concat("details"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Details"}),(0,ta.jsxs)("button",{onClick:()=>v("players"),className:"px-4 py-2 font-semibold transition-colors ".concat("players"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Players (",Y.length,")"]}),"completed"===p.status&&(0,ta.jsxs)("button",{onClick:()=>v("winners"),className:"px-4 py-2 font-semibold transition-colors ".concat("winners"===y?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Winners (",$.length,")"]})]}),"details"===y&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"relative w-full bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,ta.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-emerald-600 via-green-500 to-emerald-500 border-2 border-emerald-400/80 px-6 py-3 rounded-lg text-center shadow-xl",children:[(0,ta.jsx)("div",{className:"text-emerald-200 text-xs font-semibold uppercase tracking-wider",children:"Prize Pool"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",(p.prize_pool||p.buy_in*(Y.length||p.registered_players||0)).toLocaleString()]})]})}),(0,ta.jsx)("div",{className:"relative aspect-[1/1] max-w-md mx-auto mt-16 mb-8",children:(0,ta.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-emerald-600 via-green-500 to-emerald-600 p-3 shadow-2xl",children:(0,ta.jsxs)("div",{className:"absolute inset-3 rounded-full bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:p.max_players||9},(e,t)=>{const s=t+1,a=360/(p.max_players||9)*t-90,l=50+38*Math.cos(a*Math.PI/180),r=50+38*Math.sin(a*Math.PI/180);return(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:{left:"".concat(l,"%"),top:"".concat(r,"%")},children:[(0,ta.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-slate-500 bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg",children:(0,ta.jsx)("span",{className:"text-slate-400 text-xs font-bold",children:s})}),(0,ta.jsx)("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:(0,ta.jsxs)("div",{className:"text-xs text-slate-300 font-medium",children:["Seat ",s]})})]},s)}),(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ta.jsx)("div",{className:"text-center",children:(0,ta.jsxs)("div",{className:"w-32 h-32 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:[j?(0,ta.jsx)("img",{src:j,alt:"Club Logo",className:"w-full h-full object-contain rounded-full p-2",onError:e=>{e.target.style.display="none";const t=e.target.nextElementSibling;t&&(t.style.display="flex")}}):null,(0,ta.jsx)("div",{className:"text-4xl font-bold text-white/30 hidden items-center justify-center w-full h-full",children:"\ud83c\udfc6"})]})})})]})})}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Type"}),(0,ta.jsx)("div",{className:"text-white font-semibold text-sm",children:p.tournament_type||"Tournament"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Buy-In"}),(0,ta.jsxs)("div",{className:"text-white font-semibold text-sm",children:["\u20b9",p.buy_in]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Players"}),(0,ta.jsxs)("div",{className:"text-white font-semibold text-sm",children:[Y.length||p.registered_players||0,"/",p.max_players]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Status"}),(0,ta.jsx)("div",{className:"text-white font-semibold text-sm",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("active"===p.status?"bg-green-500/20 text-green-300":"completed"===p.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:p.status})})]})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,ta.jsx)("p",{className:"text-white font-mono",children:(null===(t=p.id)||void 0===t?void 0:t.substring(0,8))||"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Starting Chips"}),(0,ta.jsx)("p",{className:"text-white",children:null===(s=p.starting_chips)||void 0===s?void 0:s.toLocaleString()})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Entry Fee"}),(0,ta.jsxs)("p",{className:"text-white",children:["\u20b9",p.entry_fee||0]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Blind Structure"}),(0,ta.jsx)("p",{className:"text-white",children:p.blind_structure})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Levels"}),(0,ta.jsx)("p",{className:"text-white",children:p.number_of_levels})]})]}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Minutes per Level"}),(0,ta.jsxs)("p",{className:"text-white",children:[p.minutes_per_level," minutes"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Break Structure"}),(0,ta.jsx)("p",{className:"text-white",children:p.break_structure})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Break Duration"}),(0,ta.jsxs)("p",{className:"text-white",children:[p.break_duration||"N/A"," minutes"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Payout Structure"}),(0,ta.jsx)("p",{className:"text-white",children:p.payout_structure})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Late Registration"}),(0,ta.jsxs)("p",{className:"text-white",children:[p.late_registration," minutes"]})]})]})]}),(0,ta.jsxs)("div",{className:"mt-6 flex gap-4 pt-4 border-t border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>{m(!1),b(null)},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Close"}),"scheduled"===p.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:()=>{m(!1),K(p)},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg",children:"Edit Tournament"}),(0,ta.jsx)("button",{onClick:()=>J(p.id),disabled:z.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:"Start Tournament"})]}),"active"===p.status&&(0,ta.jsx)("button",{onClick:()=>h(!0),className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg",children:"End Tournament"})]})]}),"players"===y&&(0,ta.jsx)("div",{className:"space-y-4",children:F?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading players..."})]}):0===Y.length?(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No players registered yet"})}):(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Mobile"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Registered At"}),"completed"===p.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize"})]})]})}),(0,ta.jsx)("tbody",{children:Y.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.email}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.mobile}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.registered_at?new Date(e.registered_at).toLocaleString():"-"}),"completed"===p.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.finishing_position||"-"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.prize_amount?"\u20b9".concat(e.prize_amount):"-"})]})]},e.id))})]})})}),"winners"===y&&"completed"===p.status&&(0,ta.jsx)("div",{className:"space-y-4",children:0===$.length?(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,ta.jsx)("tbody",{children:$.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 px-4",children:(0,ta.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.email}),(0,ta.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount]})]},e.id))})]})})})]})}),x&&p&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["End Tournament: ",p.name]}),(0,ta.jsx)("p",{className:"text-gray-300 mb-4",children:"Enter the winners and their prize amounts. Player balances will be automatically updated."}),(0,ta.jsx)("div",{className:"space-y-4 mb-6",children:T.map((e,t)=>(0,ta.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-center",children:[(0,ta.jsx)("div",{className:"col-span-1",children:(0,ta.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,ta.jsx)("div",{className:"col-span-5",children:(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:e.player_id,onChange:e=>Q(t,"player_id",e.target.value),children:[(0,ta.jsx)("option",{value:"",children:"Select Player"}),Y.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.player_id,")"]},e.id))]})}),(0,ta.jsx)("div",{className:"col-span-2",children:(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Position",value:e.finishing_position,onChange:e=>Q(t,"finishing_position",parseInt(e.target.value))})}),(0,ta.jsx)("div",{className:"col-span-3",children:(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Prize Amount",value:e.prize_amount,onChange:e=>Q(t,"prize_amount",parseFloat(e.target.value))})}),(0,ta.jsx)("div",{className:"col-span-1",children:(0,ta.jsx)("button",{onClick:()=>(e=>{_(T.filter((t,s)=>s!==e))})(t),className:"w-full bg-red-600 hover:bg-red-500 text-white px-3 py-2 rounded-lg transition-colors",children:"\xd7"})})]},t))}),(0,ta.jsx)("button",{onClick:()=>{_([...T,{player_id:"",finishing_position:T.length+1,prize_amount:""}])},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors mb-6",children:"+ Add Winner"}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{if(0===T.length)return void vl.error("Please add at least one winner");const e=T.every(e=>e.player_id&&e.finishing_position&&e.prize_amount);e?U.mutate({tournamentId:p.id,winners:T}):vl.error("Please fill in all winner details")},disabled:U.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:U.isLoading?"Ending Tournament...":"End Tournament & Update Balances"}),(0,ta.jsx)("button",{onClick:()=>{h(!1),_([])},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}var Gr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Yr=a.createContext&&a.createContext(Gr),$r=["attr","size","title"];function Zr(e,t){if(null==e)return{};var s,a,l=function(e,t){if(null==e)return{};var s={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){if(t.indexOf(a)>=0)continue;s[a]=e[a]}return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)s=r[a],t.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(l[s]=e[s])}return l}function Xr(){return Xr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},Xr.apply(this,arguments)}function en(e,t){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),s.push.apply(s,a)}return s}function tn(e){for(var t=1;t<arguments.length;t++){var s=null!=arguments[t]?arguments[t]:{};t%2?en(Object(s),!0).forEach(function(t){sn(e,t,s[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):en(Object(s)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(s,t))})}return e}function sn(e,t,s){return t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var a=s.call(e,t||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t),t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}function an(e){return e&&e.map((e,t)=>a.createElement(e.tag,tn({key:t},e.attr),an(e.child)))}function ln(e){return t=>a.createElement(rn,Xr({attr:tn({},e.attr)},t),an(e.child))}function rn(e){var t=t=>{var s,{attr:l,size:r,title:n}=e,i=Zr(e,$r),o=r||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),a.createElement("svg",Xr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,i,{className:s,style:tn(tn({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),n&&a.createElement("title",null,n),e.children)};return void 0!==Yr?a.createElement(Yr.Consumer,null,e=>t(e)):t(Gr)}function nn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M0 464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V192H0v272zm320-196c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM192 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12h-40c-6.6 0-12-5.4-12-12v-40zM64 268c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zm0 128c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM400 64h-48V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H160V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48H48C21.5 64 0 85.5 0 112v48h448v-48c0-26.5-21.5-48-48-48z"},child:[]}]})(e)}function on(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"},child:[]}]})(e)}function dn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M504 256c0 136.967-111.033 248-248 248S8 392.967 8 256 119.033 8 256 8s248 111.033 248 248zM227.314 387.314l184-184c6.248-6.248 6.248-16.379 0-22.627l-22.627-22.627c-6.248-6.249-16.379-6.249-22.628 0L216 308.118l-70.059-70.059c-6.248-6.248-16.379-6.248-22.628 0l-22.627 22.627c-6.248 6.248-6.248 16.379 0 22.627l104 104c6.249 6.249 16.379 6.249 22.628.001z"},child:[]}]})(e)}function cn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M0 405.3V448c0 35.3 86 64 192 64s192-28.7 192-64v-42.7C342.7 434.4 267.2 448 192 448S41.3 434.4 0 405.3zM320 128c106 0 192-28.7 192-64S426 0 320 0 128 28.7 128 64s86 64 192 64zM0 300.4V352c0 35.3 86 64 192 64s192-28.7 192-64v-51.6c-41.3 34-116.9 51.6-192 51.6S41.3 334.4 0 300.4zm416 11c57.3-11.1 96-31.7 96-55.4v-42.7c-23.2 16.4-57.3 27.6-96 34.5v63.6zM192 160C86 160 0 195.8 0 240s86 80 192 80 192-35.8 192-80-86-80-192-80zm219.3 56.3c60-10.8 100.7-32 100.7-56.3v-42.7c-35.5 25.1-96.5 38.6-160.7 41.8 29.5 14.3 51.2 33.5 60 57.2z"},child:[]}]})(e)}function un(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M416 192c0-88.4-93.1-160-208-160S0 103.6 0 192c0 34.3 14.1 65.9 38 92-13.4 30.2-35.5 54.2-35.8 54.5-2.2 2.3-2.8 5.7-1.5 8.7S4.8 352 8 352c36.6 0 66.9-12.3 88.7-25 32.2 15.7 70.3 25 111.3 25 114.9 0 208-71.6 208-160zm122 220c23.9-26 38-57.7 38-92 0-66.9-53.5-124.2-129.3-148.1.9 6.6 1.3 13.3 1.3 20.1 0 105.9-107.7 192-240 192-10.8 0-21.3-.8-31.7-1.9C207.8 439.6 281.8 480 368 480c41 0 79.1-9.2 111.3-25 21.8 12.7 52.1 25 88.7 25 3.2 0 6.1-1.9 7.3-4.8 1.3-2.9.7-6.3-1.5-8.7-.3-.3-22.4-24.2-35.8-54.5z"},child:[]}]})(e)}function mn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function xn(e){return ln({tag:"svg",attr:{viewBox:"0 0 288 512"},child:[{tag:"path",attr:{d:"M209.2 233.4l-108-31.6C88.7 198.2 80 186.5 80 173.5c0-16.3 13.2-29.5 29.5-29.5h66.3c12.2 0 24.2 3.7 34.2 10.5 6.1 4.1 14.3 3.1 19.5-2l34.8-34c7.1-6.9 6.1-18.4-1.8-24.5C238 74.8 207.4 64.1 176 64V16c0-8.8-7.2-16-16-16h-32c-8.8 0-16 7.2-16 16v48h-2.5C45.8 64-5.4 118.7.5 183.6c4.2 46.1 39.4 83.6 83.8 96.6l102.5 30c12.5 3.7 21.2 15.3 21.2 28.3 0 16.3-13.2 29.5-29.5 29.5h-66.3C100 368 88 364.3 78 357.5c-6.1-4.1-14.3-3.1-19.5 2l-34.8 34c-7.1 6.9-6.1 18.4 1.8 24.5 24.5 19.2 55.1 29.9 86.5 30v48c0 8.8 7.2 16 16 16h32c8.8 0 16-7.2 16-16v-48.2c46.6-.9 90.3-28.6 105.7-72.7 21.5-61.6-14.6-124.8-72.5-141.7z"},child:[]}]})(e)}function hn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M216 0h80c13.3 0 24 10.7 24 24v168h87.7c17.8 0 26.7 21.5 14.1 34.1L269.7 378.3c-7.5 7.5-19.8 7.5-27.3 0L90.1 226.1c-12.6-12.6-3.7-34.1 14.1-34.1H192V24c0-13.3 10.7-24 24-24zm296 376v112c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V376c0-13.3 10.7-24 24-24h146.7l49 49c20.1 20.1 52.5 20.1 72.6 0l49-49H488c13.3 0 24 10.7 24 24zm-124 88c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20zm64 0c0-11-9-20-20-20s-20 9-20 20 9 20 20 20 20-9 20-20z"},child:[]}]})(e)}function pn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function bn(e){return ln({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M569.517 440.013C587.975 472.007 564.806 512 527.94 512H48.054c-36.937 0-59.999-40.055-41.577-71.987L246.423 23.985c18.467-32.009 64.72-31.951 83.154 0l239.94 416.028zM288 354c-25.405 0-46 20.595-46 46s20.595 46 46 46 46-20.595 46-46-20.595-46-46-46zm-43.673-165.346l7.418 136c.347 6.364 5.609 11.346 11.982 11.346h48.546c6.373 0 11.635-4.982 11.982-11.346l7.418-136c.375-6.874-5.098-12.654-11.982-12.654h-63.383c-6.884 0-12.356 5.78-11.981 12.654z"},child:[]}]})(e)}function gn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M224 136V0H24C10.7 0 0 10.7 0 24v464c0 13.3 10.7 24 24 24h336c13.3 0 24-10.7 24-24V160H248c-13.2 0-24-10.8-24-24zm60.1 106.5L224 336l60.1 93.5c5.1 8-.6 18.5-10.1 18.5h-34.9c-4.4 0-8.5-2.4-10.6-6.3C208.9 405.5 192 373 192 373c-6.4 14.8-10 20-36.6 68.8-2.1 3.9-6.1 6.3-10.5 6.3H110c-9.5 0-15.2-10.5-10.1-18.5l60.3-93.5-60.3-93.5c-5.2-8 .6-18.5 10.1-18.5h34.8c4.4 0 8.5 2.4 10.6 6.3 26.1 48.8 20 33.6 36.6 68.5 0 0 6.1-11.7 36.6-68.5 2.1-3.9 6.2-6.3 10.6-6.3H274c9.5-.1 15.2 10.4 10.1 18.4zM384 121.9v6.1H256V0h6.1c6.4 0 12.5 2.5 17 7l97.9 98c4.5 4.5 7 10.6 7 16.9z"},child:[]}]})(e)}function fn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M181.9 256.1c-5-16-4.9-46.9-2-46.9 8.4 0 7.6 36.9 2 46.9zm-1.7 47.2c-7.7 20.2-17.3 43.3-28.4 62.7 18.3-7 39-17.2 62.9-21.9-12.7-9.6-24.9-23.4-34.5-40.8zM86.1 428.1c0 .8 13.2-5.4 34.9-40.2-6.7 6.3-29.1 24.5-34.9 40.2zM248 160h136v328c0 13.3-10.7 24-24 24H24c-13.3 0-24-10.7-24-24V24C0 10.7 10.7 0 24 0h200v136c0 13.2 10.8 24 24 24zm-8 171.8c-20-12.2-33.3-29-42.7-53.8 4.5-18.5 11.6-46.6 6.2-64.2-4.7-29.4-42.4-26.5-47.8-6.8-5 18.3-.4 44.1 8.1 77-11.6 27.6-28.7 64.6-40.8 85.8-.1 0-.1.1-.2.1-27.1 13.9-73.6 44.5-54.5 68 5.6 6.9 16 10 21.5 10 17.9 0 35.7-18 61.1-61.8 25.8-8.5 54.1-19.1 79-23.2 21.7 11.8 47.1 19.5 64 19.5 29.2 0 31.2-32 19.7-43.4-13.9-13.6-54.3-9.7-73.6-7.2zM377 105L279 7c-4.5-4.5-10.6-7-17-7h-6v128h128v-6.1c0-6.3-2.5-12.4-7-16.9zm-74.1 255.3c4.1-2.7-2.5-11.9-42.8-9 37.1 15.8 42.8 9 42.8 9z"},child:[]}]})(e)}function yn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function vn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M32 448c0 17.7 14.3 32 32 32h160V320H32v128zm256 32h160c17.7 0 32-14.3 32-32V320H288v160zm192-320h-42.1c6.2-12.1 10.1-25.5 10.1-40 0-48.5-39.5-88-88-88-41.6 0-68.5 21.3-103 68.3-34.5-47-61.4-68.3-103-68.3-48.5 0-88 39.5-88 88 0 14.5 3.8 27.9 10.1 40H32c-17.7 0-32 14.3-32 32v80c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16v-80c0-17.7-14.3-32-32-32zm-326.1 0c-22.1 0-40-17.9-40-40s17.9-40 40-40c19.9 0 34.6 3.3 86.1 80h-86.1zm206.1 0h-86.1c51.4-76.5 65.7-80 86.1-80 22.1 0 40 17.9 40 40s-17.9 40-40 40z"},child:[]}]})(e)}function jn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 224h-24v-72C376 68.2 307.8 0 224 0S72 68.2 72 152v72H48c-26.5 0-48 21.5-48 48v192c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V272c0-26.5-21.5-48-48-48zm-104 0H152v-72c0-39.7 32.3-72 72-72s72 32.3 72 72v72z"},child:[]}]})(e)}function wn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"},child:[]}]})(e)}function Nn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function Sn(e){return ln({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M358.4 3.2L320 48 265.6 3.2a15.9 15.9 0 0 0-19.2 0L192 48 137.6 3.2a15.9 15.9 0 0 0-19.2 0L64 48 25.6 3.2C15-4.7 0 2.8 0 16v480c0 13.2 15 20.7 25.6 12.8L64 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L192 464l54.4 44.8a15.9 15.9 0 0 0 19.2 0L320 464l38.4 44.8c10.5 7.9 25.6.4 25.6-12.8V16c0-13.2-15-20.7-25.6-12.8zM320 360c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16zm0-96c0 4.4-3.6 8-8 8H72c-4.4 0-8-3.6-8-8v-16c0-4.4 3.6-8 8-8h240c4.4 0 8 3.6 8 8v16z"},child:[]}]})(e)}function Cn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"},child:[]}]})(e)}function kn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M464 32H48C21.49 32 0 53.49 0 80v352c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V80c0-26.51-21.49-48-48-48zM224 416H64v-96h160v96zm0-160H64v-96h160v96zm224 160H288v-96h160v96zm0-160H288v-96h160v96z"},child:[]}]})(e)}function Pn(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm121.6 313.1c4.7 4.7 4.7 12.3 0 17L338 377.6c-4.7 4.7-12.3 4.7-17 0L256 312l-65.1 65.6c-4.7 4.7-12.3 4.7-17 0L134.4 338c-4.7-4.7-4.7-12.3 0-17l65.6-65-65.6-65.1c-4.7-4.7-4.7-12.3 0-17l39.6-39.6c4.7-4.7 12.3-4.7 17 0l65 65.7 65.1-65.6c4.7-4.7 12.3-4.7 17 0l39.6 39.6c4.7 4.7 4.7 12.3 0 17L312 256l65.6 65.1z"},child:[]}]})(e)}function An(e){return ln({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function In(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M32 464a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128H32zm272-256a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zm-96 0a16 16 0 0 1 32 0v224a16 16 0 0 1-32 0zM432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16z"},child:[]}]})(e)}function Dn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"},child:[]}]})(e)}function Tn(e){return ln({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function _n(e){return ln({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M507.73 109.1c-2.24-9.03-13.54-12.09-20.12-5.51l-74.36 74.36-67.88-11.31-11.31-67.88 74.36-74.36c6.62-6.62 3.43-17.9-5.66-20.16-47.38-11.74-99.55.91-136.58 37.93-39.64 39.64-50.55 97.1-34.05 147.2L18.74 402.76c-24.99 24.99-24.99 65.51 0 90.5 24.99 24.99 65.51 24.99 90.5 0l213.21-213.21c50.12 16.71 107.47 5.68 147.37-34.22 37.07-37.07 49.7-89.32 37.91-136.73zM64 472c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function En(e){let{clubId:t,hidePlayerChat:s=!1}=e;const[l,r]=(0,a.useState)("staff");return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,ta.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-lg mb-6",children:[(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,ta.jsx)(un,{className:"text-4xl"}),s?"Staff Chat":"Player & Staff Support Chat"]}),(0,ta.jsx)("p",{className:"text-white/80 mt-2",children:s?"Communicate with staff members in real-time":"Communicate with staff members and respond to player queries in real-time"})]}),!s&&(0,ta.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ta.jsxs)("button",{onClick:()=>r("staff"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ".concat("staff"===l?"bg-gradient-to-r from-blue-600 to-cyan-600 text-white shadow-lg scale-105":"bg-slate-700 text-white/70 hover:bg-slate-600"),children:[(0,ta.jsx)(Tn,{}),"Staff Chat"]}),(0,ta.jsxs)("button",{onClick:()=>r("player"),className:"flex items-center gap-2 px-6 py-3 rounded-lg font-semibold transition-all ".concat("player"===l?"bg-gradient-to-r from-orange-600 to-pink-600 text-white shadow-lg scale-105":"bg-slate-700 text-white/70 hover:bg-slate-600"),children:[(0,ta.jsx)(un,{}),"Player Chat"]})]}),"staff"===l&&(0,ta.jsx)(Rn,{clubId:t}),!s&&"player"===l&&(0,ta.jsx)(Ln,{clubId:t})]})})}function Rn(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(1),[u,m]=(0,a.useState)(1),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)(""),[g,f]=(0,a.useState)(!1);(0,a.useEffect)(()=>{y();const e=setInterval(y,5e3);return()=>clearInterval(e)},[t,d,x,p]);const y=async()=>{try{o(!0);const e=await jl.h2.getStaffChatSessions(t,{page:d,limit:10,search:x,role:p});l(e.sessions),m(e.totalPages)}catch(e){console.error("Error loading staff chat sessions:",e)}finally{o(!1)}};return(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,ta.jsxs)("div",{className:"lg:col-span-1 bg-slate-800 rounded-lg p-4 overflow-hidden flex flex-col",children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ta.jsx)("h2",{className:"text-xl font-semibold text-white",children:"Conversations"}),(0,ta.jsxs)("button",{onClick:()=>f(!0),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 text-sm",children:[(0,ta.jsx)(Nn,{})," New Chat"]})]}),(0,ta.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)(Cn,{className:"absolute left-3 top-3 text-gray-400"}),(0,ta.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:e=>{h(e.target.value),c(1)},className:"w-full pl-10 pr-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("select",{value:p,onChange:e=>{b(e.target.value),c(1)},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"All Roles"}),(0,ta.jsx)("option",{value:"SUPER_ADMIN",children:"Super Admin"}),(0,ta.jsx)("option",{value:"ADMIN",children:"Admin"}),(0,ta.jsx)("option",{value:"MANAGER",children:"Manager"}),(0,ta.jsx)("option",{value:"HR",children:"HR"}),(0,ta.jsx)("option",{value:"GRE",children:"GRE"}),(0,ta.jsx)("option",{value:"CASHIER",children:"Cashier"}),(0,ta.jsx)("option",{value:"AFFILIATE",children:"Affiliate"}),(0,ta.jsx)("option",{value:"FNB",children:"FNB"})]})]}),(0,ta.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-0",style:{maxHeight:"calc(100vh - 450px)",scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:i&&0===s.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading chats..."}):0===s.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"No conversations yet"}):s.map(e=>{var t,s,a,l;return(0,ta.jsxs)("div",{onClick:()=>n(e),className:"p-3 rounded-lg cursor-pointer transition-all ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-blue-600":"bg-slate-700 hover:bg-slate-600"),children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white font-bold",children:(null===(t=e.otherStaff)||void 0===t||null===(s=t.name)||void 0===s?void 0:s[0])||"?"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:null===(a=e.otherStaff)||void 0===a?void 0:a.name}),(0,ta.jsx)("div",{className:"text-white/60 text-sm",children:null===(l=e.otherStaff)||void 0===l?void 0:l.role})]})]}),e.unreadCount>0&&(0,ta.jsx)("div",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),e.subject&&(0,ta.jsx)("div",{className:"text-white/70 text-sm mt-1 truncate",children:e.subject})]},e.id)})}),u>1&&(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-white text-sm",children:["Page ",d," of ",u]}),(0,ta.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:d===u,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Next"})]})]}),(0,ta.jsx)("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:r?(0,ta.jsx)(On,{clubId:t,session:r,onClose:()=>n(null),onDelete:()=>{n(null),y()}}):(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-8 h-full flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-center text-white/60",children:[(0,ta.jsx)(un,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,ta.jsx)("p",{className:"text-xl",children:"Select a staff chat to start messaging"})]})})}),g&&(0,ta.jsx)(Mn,{clubId:t,existingSessions:s,onClose:()=>f(!1),onSuccess:e=>{f(!1),n(e),y()}})]})}function Ln(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(1),[u,m]=(0,a.useState)(1),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)("");(0,a.useEffect)(()=>{g();const e=setInterval(g,5e3);return()=>clearInterval(e)},[t,d,x,p]);const g=async()=>{try{o(!0);const e=await jl.h2.getPlayerChatSessions(t,{page:d,limit:10,search:x,status:p});l(e.sessions),m(e.totalPages)}catch(e){console.error("Error loading player chat sessions:",e)}finally{o(!1)}};return(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,ta.jsxs)("div",{className:"lg:col-span-1 bg-slate-800 rounded-lg p-4 overflow-hidden flex flex-col",children:[(0,ta.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Player Support Tickets"}),(0,ta.jsxs)("div",{className:"space-y-3 mb-4",children:[(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)(Cn,{className:"absolute left-3 top-3 text-gray-400"}),(0,ta.jsx)("input",{type:"text",placeholder:"Search by name or email...",value:x,onChange:e=>{h(e.target.value),c(1)},className:"w-full pl-10 pr-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("select",{value:p,onChange:e=>{b(e.target.value),c(1)},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"open",children:"Open"}),(0,ta.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,ta.jsx)("option",{value:"resolved",children:"Resolved"}),(0,ta.jsx)("option",{value:"closed",children:"Closed"})]})]}),(0,ta.jsx)("div",{className:"flex-1 overflow-y-auto space-y-2 min-h-0",style:{maxHeight:"calc(100vh - 450px)",scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:i&&0===s.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading tickets..."}):0===s.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"No support tickets yet"}):s.map(e=>{var t,s,a;return(0,ta.jsxs)("div",{onClick:()=>n(e),className:"p-3 rounded-lg cursor-pointer transition-all ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-orange-600":"bg-slate-700 hover:bg-slate-600"),children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold",children:(null===(t=e.player)||void 0===t||null===(s=t.name)||void 0===s?void 0:s[0])||"?"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:null===(a=e.player)||void 0===a?void 0:a.name}),(0,ta.jsx)("div",{className:"text-white/60 text-sm flex items-center gap-2",children:(0,ta.jsx)(Fn,{status:e.status})})]})]}),e.unreadCount>0&&(0,ta.jsx)("div",{className:"bg-red-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),(0,ta.jsx)("div",{className:"text-white/80 text-sm mt-1 font-medium",children:e.subject}),e.lastMessage&&(0,ta.jsx)("div",{className:"text-white/60 text-xs mt-1 truncate",children:e.lastMessage})]},e.id)})}),u>1&&(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4 pt-4 border-t border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-white text-sm",children:["Page ",d," of ",u]}),(0,ta.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:d===u,className:"text-white px-3 py-1 bg-slate-700 rounded disabled:opacity-50",children:"Next"})]})]}),(0,ta.jsx)("div",{className:"lg:col-span-2 flex flex-col min-h-0",children:r?(0,ta.jsx)(On,{clubId:t,session:r,onClose:()=>n(null),isPlayerChat:!0,onStatusChange:e=>(async(e,s)=>{try{await jl.h2.updateChatSession(t,e,{status:s}),g()}catch(a){alert("Failed to update status")}})(r.id,e)}):(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-8 h-full flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-center text-white/60",children:[(0,ta.jsx)(un,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,ta.jsx)("p",{className:"text-xl",children:"Select a player chat to start messaging"})]})})})]})}function On(e){let{clubId:t,session:s,onClose:l,isPlayerChat:r,onStatusChange:n,onDelete:i}=e;const[o,d]=(0,a.useState)([]),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),f=(0,a.useRef)(null);(0,a.useEffect)(()=>{y();const e=setInterval(y,5e3);return()=>clearInterval(e)},[s.id]),(0,a.useEffect)(()=>{j()},[o]);const y=async()=>{try{x(!0);const e=await jl.h2.getSessionMessages(t,s.id);d(e.messages)}catch(e){console.error("Error loading messages:",e)}finally{x(!1)}},v=e=>{const t=new Date(e);return new Date(t.getTime()+198e5).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})},j=()=>{var e;null===(e=f.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},w=()=>{var e,t;return r?(null===(e=s.player)||void 0===e?void 0:e.name)||"Player":(null===(t=s.otherStaff)||void 0===t?void 0:t.name)||"Staff Member"};return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg flex flex-col h-full min-h-0 max-h-full overflow-hidden",children:[(0,ta.jsxs)("div",{className:"p-4 border-b border-slate-700 flex items-center justify-between flex-shrink-0",children:[(0,ta.jsx)("div",{children:(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r ".concat(r?"from-orange-500 to-pink-500":"from-blue-500 to-purple-500"," rounded-full flex items-center justify-center text-white font-bold"),children:w()[0]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:w()}),r&&s.subject&&(0,ta.jsx)("div",{className:"text-white/60 text-sm",children:s.subject})]})]})}),(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[r&&(0,ta.jsxs)("select",{value:s.status,onChange:e=>n(e.target.value),className:"px-3 py-1 bg-slate-700 text-white rounded-lg text-sm",children:[(0,ta.jsx)("option",{value:"open",children:"Open"}),(0,ta.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,ta.jsx)("option",{value:"resolved",children:"Resolved"}),(0,ta.jsx)("option",{value:"closed",children:"Closed"})]}),!r&&(0,ta.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure you want to delete this chat? It will only be removed from your side."))try{g(!0),await jl.h2.archiveChatSession(t,s.id),i&&i(),l()}catch(e){alert("Failed to delete chat: "+(e.message||"Unknown error"))}finally{g(!1)}},disabled:b,className:"px-3 py-1 bg-red-600 hover:bg-red-500 text-white rounded-lg text-sm disabled:opacity-50",title:"Delete chat (only from your side)",children:b?"Deleting...":"Delete"}),(0,ta.jsx)("button",{onClick:l,className:"text-white/60 hover:text-white",children:(0,ta.jsx)(An,{className:"text-xl"})})]})]}),(0,ta.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 min-h-0 flex-shrink",style:{scrollBehavior:"smooth",scrollbarWidth:"thin",scrollbarColor:"#475569 #1e293b"},children:[m&&0===o.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"Loading messages..."}):0===o.length?(0,ta.jsx)("div",{className:"text-white/60 text-center py-8",children:"No messages yet. Start the conversation!"}):o.map(e=>{var t;let a=!1;if(r)a="staff"===e.senderType;else{var l,n,i,o,d,c,u;const t=null===(l=jl.R2.getCurrentUser().email)||void 0===l?void 0:l.toLowerCase(),r=null===(n=e.senderStaff)||void 0===n||null===(i=n.email)||void 0===i?void 0:i.toLowerCase();a=t&&(r===t||s.staffInitiator&&(null===(o=e.senderStaff)||void 0===o?void 0:o.id)===s.staffInitiator.id&&(null===(d=s.staffInitiator.email)||void 0===d?void 0:d.toLowerCase())===t||s.staffRecipient&&(null===(c=e.senderStaff)||void 0===c?void 0:c.id)===s.staffRecipient.id&&(null===(u=s.staffRecipient.email)||void 0===u?void 0:u.toLowerCase())===t)}return(0,ta.jsx)("div",{className:"flex ".concat(a?"justify-end":"justify-start"),children:(0,ta.jsxs)("div",{className:"max-w-[70%] ".concat(a?"bg-blue-600":"bg-green-600"," rounded-lg p-3"),children:[(0,ta.jsxs)("div",{className:"text-white/80 text-xs mb-1",children:[e.senderName,r&&"staff"===e.senderType&&(null===(t=e.senderStaff)||void 0===t?void 0:t.role)&&(0,ta.jsxs)("span",{className:"text-white/60 ml-1",children:["(",e.senderStaff.role,")"]})]}),(0,ta.jsx)("div",{className:"text-white",children:e.message}),(0,ta.jsx)("div",{className:"text-white/50 text-xs mt-1",children:v(e.createdAt)})]})},e.id)}),(0,ta.jsx)("div",{ref:f})]}),(0,ta.jsx)("form",{onSubmit:async e=>{if(e.preventDefault(),c.trim()&&!h)try{p(!0),await jl.h2.sendMessage(t,s.id,c.trim()),u(""),y()}catch(a){alert("Failed to send message")}finally{p(!1)}},className:"p-4 border-t border-slate-700 flex-shrink-0",children:(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),placeholder:"Type your message...",className:"flex-1 px-4 py-3 bg-slate-700 text-white rounded-lg",disabled:h}),(0,ta.jsxs)("button",{type:"submit",disabled:!c.trim()||h,className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50 flex items-center gap-2",children:[(0,ta.jsx)(wn,{}),h?"Sending...":"Send"]})]})})]})}function Mn(e){let{clubId:t,existingSessions:s=[],onClose:l,onSuccess:r}=e;const[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1);(0,a.useEffect)(()=>{t&&g()},[t]);const g=async()=>{try{h(!0);const e=await jl.h2.getChatableUsers(t),a=(null===e||void 0===e?void 0:e.users)||e||[],l=Array.isArray(a)?a.filter(e=>"Active"===e.status||!e.status||"active"===e.status):[],r=[],i=new Set,d=new Set;s.forEach(e=>{var t,s,a,l;null!==(t=e.staffInitiator)&&void 0!==t&&t.id&&d.add(e.staffInitiator.id),null!==(s=e.staffRecipient)&&void 0!==s&&s.id&&d.add(e.staffRecipient.id),null!==(a=e.staffInitiator)&&void 0!==a&&a.email&&d.add(e.staffInitiator.email.toLowerCase()),null!==(l=e.staffRecipient)&&void 0!==l&&l.email&&d.add(e.staffRecipient.email.toLowerCase())}),l.forEach(e=>{var t;const s=null===(t=e.email)||void 0===t?void 0:t.toLowerCase();if(s&&!i.has(s)){const t=e.chatId||e.id;if(!(d.has(t)||d.has(s))){i.add(s);let a=e.role||e.customRoleName||"Staff";"SUPER_ADMIN"===a?a="Super Admin":"ADMIN"===a?a="Admin":"MANAGER"===a?a="Manager":"HR"===a?a="HR":"GRE"===a?a="GRE":"CASHIER"===a?a="Cashier":"FNB"===a?a="FNB":"STAFF"===a?a="Staff":"DEALER"===a?a="Dealer":"AFFILIATE"===a&&(a="Affiliate"),r.push((0,n.A)((0,n.A)({},e),{},{chatId:t,name:e.name||e.displayName||e.email,role:a}))}}}),o(r)}catch(e){console.error("Error loading staff members:",e),alert("Failed to load staff members: "+(e.message||"Unknown error")),o([])}finally{h(!1)}};return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Start New Chat"}),(0,ta.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),d)try{b(!0);const e=await jl.h2.createStaffChatSession(t,d,u||void 0);r(e.session)}catch(s){alert("Failed to create chat session")}finally{b(!1)}else alert("Please select a staff member")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Select Staff Member *"}),x?(0,ta.jsx)("div",{className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg text-center",children:"Loading staff members..."}):(0,ta.jsxs)("select",{value:d,onChange:e=>c(e.target.value),required:!0,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",disabled:x||0===i.length,children:[(0,ta.jsx)("option",{value:"",children:0===i.length?"No staff members available":"Choose staff member..."}),i.map(e=>(0,ta.jsxs)("option",{value:e.chatId||e.id,children:[e.name||e.displayName," - ",e.role]},e.chatId||e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Subject (Optional)"}),(0,ta.jsx)("input",{type:"text",value:u,onChange:e=>m(e.target.value),placeholder:"What is this chat about?",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"submit",disabled:p||!d,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:p?"Creating...":"Start Chat"}),(0,ta.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Fn(e){let{status:t}=e;return(0,ta.jsx)("span",{className:"".concat({open:"bg-yellow-600",in_progress:"bg-blue-600",resolved:"bg-green-600",closed:"bg-gray-600"}[t]||"bg-gray-600"," text-white text-xs px-2 py-1 rounded-full"),children:{open:"Open",in_progress:"In Progress",resolved:"Resolved",closed:"Closed"}[t]||t})}function Bn(e){var t,s;let{clubId:l}=e;const r=aa(),[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""}),[x,h]=(0,a.useState)({startDate:"",endDate:"",tableId:"",page:1,limit:10}),{data:p=[],isLoading:b}=ur({queryKey:["activeTablesForRake",l],queryFn:()=>jl.Od.getActiveTablesForRakeCollection(l),enabled:!!l}),{data:g,isLoading:f}=ur({queryKey:["rakeCollections",l,x],queryFn:()=>jl.Od.getRakeCollections(l,x),enabled:!!l}),{data:y,isLoading:v}=ur({queryKey:["rakeCollectionStats",l,x.startDate,x.endDate],queryFn:()=>jl.Od.getRakeCollectionStats(l,x.startDate||void 0,x.endDate||void 0),enabled:!!l}),j=pr({mutationFn:e=>jl.Od.createRakeCollection(l,e),onSuccess:()=>{vl.success("Rake collection saved successfully!"),c(!1),m({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""}),o(null),r.invalidateQueries(["rakeCollections",l]),r.invalidateQueries(["rakeCollectionStats",l])},onError:e=>{vl.error(e.message||"Failed to save rake collection")}}),w=()=>{m({sessionDate:(new Date).toISOString().split("T")[0],chipDenomination:"",totalRakeAmount:"",notes:""})},N=e=>{if(!e)return"";return new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"})},S=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6 text-white",children:"Collect Rake from Table"}),b?(0,ta.jsx)("div",{className:"text-gray-400",children:"Loading tables..."}):0===p.length?(0,ta.jsx)("div",{className:"text-gray-400",children:"No active tables available"}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6",children:p.map(e=>(0,ta.jsxs)("div",{onClick:()=>(e=>{o(e),m((0,n.A)((0,n.A)({},u),{},{chipDenomination:"\u20b925, \u20b950, \u20b9100, \u20b9500"})),c(!0)})(e),className:"bg-slate-700 hover:bg-slate-600 rounded-lg p-4 cursor-pointer transition-colors border border-slate-600",children:[(0,ta.jsxs)("div",{className:"text-lg font-semibold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:e.tableType}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400 mt-1",children:[e.currentSeats,"/",e.maxSeats," seats"]})]},e.id))}),d&&i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("h3",{className:"text-xl font-bold mb-4 text-white",children:["Collect Rake - Table ",i.tableNumber]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i&&j.mutate({tableId:i.id,sessionDate:u.sessionDate,chipDenomination:u.chipDenomination,totalRakeAmount:parseFloat(u.totalRakeAmount),notes:u.notes})},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Table ID ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"text",value:"Table ".concat(i.tableNumber),disabled:!0,className:"w-full bg-slate-700 text-gray-300 rounded-lg px-4 py-2 border border-slate-600"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Session Date ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"date",value:u.sessionDate,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{sessionDate:e.target.value})),required:!0,className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Chip Denomination"}),(0,ta.jsx)("input",{type:"text",value:u.chipDenomination,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{chipDenomination:e.target.value})),placeholder:"\u20b925, \u20b950, \u20b9100, \u20b9500",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Total Rake Amount (\u20b9) ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",step:"0.01",min:"0",value:u.totalRakeAmount,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{totalRakeAmount:e.target.value})),required:!0,placeholder:"\u20b90.00",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,ta.jsx)("textarea",{value:u.notes,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{notes:e.target.value})),placeholder:"Additional notes about the rake collection...",rows:"4",className:"w-full bg-slate-700 text-white rounded-lg px-4 py-2 border border-slate-600"})]}),(0,ta.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:j.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors disabled:opacity-50",children:j.isPending?"Saving...":"Collect Rake"}),(0,ta.jsx)("button",{type:"button",onClick:w,className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-slate-500",children:"Clear Form"}),(0,ta.jsx)("button",{type:"button",onClick:()=>{c(!1),o(null),w()},className:"flex-1 bg-slate-600 hover:bg-slate-500 text-white font-semibold py-2 px-4 rounded-lg transition-colors border border-slate-500",children:"Cancel"})]})]})]})})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Rake Collection History"}),(0,ta.jsxs)("div",{className:"flex gap-3 flex-wrap",children:[(0,ta.jsx)("input",{type:"date",value:x.startDate,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{startDate:e.target.value,page:1})),placeholder:"Start Date",className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm"}),(0,ta.jsx)("input",{type:"date",value:x.endDate,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{endDate:e.target.value,page:1})),placeholder:"End Date",className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm"}),(0,ta.jsxs)("select",{value:x.tableId,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{tableId:e.target.value,page:1})),className:"bg-slate-700 text-white rounded-lg px-3 py-2 border border-slate-600 text-sm",children:[(0,ta.jsx)("option",{value:"",children:"All Tables"}),p.map(e=>(0,ta.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]}),(0,ta.jsxs)("button",{onClick:()=>{var e;const t=null===g||void 0===g||null===(e=g.collections)||void 0===e?void 0:e.map(e=>({"Table ID":e.tableNumber,"Session Date":N(e.sessionDate),"Rake Amount":e.totalRakeAmount,"Chip Denomination":e.chipDenomination||"",Notes:e.notes||"","Collected By":e.collectedByName||"","Collected At":S(e.collectedAt)})),s=[Object.keys(t[0]||{}).join(","),...t.map(e=>Object.values(e).map(e=>'"'.concat(e,'"')).join(","))].join("\n"),a=new Blob([s],{type:"text/csv"}),l=window.URL.createObjectURL(a),r=document.createElement("a");r.href=l,r.download="rake-collections-".concat((new Date).toISOString().split("T")[0],".csv"),r.click()},className:"bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export CSV"]})]})]}),v?(0,ta.jsx)("div",{className:"text-gray-400 mb-6",children:"Loading stats..."}):y&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:"Total Entries"}),(0,ta.jsx)("div",{className:"text-2xl font-bold text-white mt-1",children:y.totalEntries})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:"Total Collected"}),(0,ta.jsxs)("div",{className:"text-2xl font-bold text-green-400 mt-1",children:["\u20b9",y.totalCollected.toLocaleString("en-IN")]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:"Avg Collection Per Table"}),(0,ta.jsxs)("div",{className:"text-2xl font-bold text-white mt-1",children:["\u20b9",y.avgPerTable.toLocaleString("en-IN")]})]})]}),f?(0,ta.jsx)("div",{className:"text-gray-400",children:"Loading history..."}):0===(null===g||void 0===g||null===(t=g.collections)||void 0===t?void 0:t.length)?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No rake collections found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400 mb-4",children:["Showing ",(x.page-1)*x.limit+1," to ",Math.min(x.page*x.limit,(null===g||void 0===g?void 0:g.total)||0)," of ",(null===g||void 0===g?void 0:g.total)||0," entries"]}),(0,ta.jsx)("div",{className:"space-y-4",children:null===g||void 0===g||null===(s=g.collections)||void 0===s?void 0:s.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-lg p-4 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-4 mb-2",children:[(0,ta.jsxs)("div",{className:"text-lg font-semibold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Session Date: ",N(e.sessionDate)]})]}),(0,ta.jsxs)("div",{className:"text-xl font-bold text-green-400 mb-2",children:["\u20b9",Number(e.totalRakeAmount).toLocaleString("en-IN")]}),e.notes&&(0,ta.jsxs)("div",{className:"text-sm text-gray-300 mb-2",children:["Notes: ",e.notes]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Chip Denomination: ",e.chipDenomination||"N/A"]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400 mt-1",children:["Collected by: ",e.collectedByName||"N/A"," \u2022 ",S(e.collectedAt)]})]}),(0,ta.jsxs)("div",{className:"bg-green-600 text-white px-3 py-1 rounded-lg text-sm font-semibold flex items-center gap-1",children:[(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Collected"]})]})},e.id))}),g&&g.totalPages>1&&(0,ta.jsxs)("div",{className:"flex justify-center gap-2 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>h((0,n.A)((0,n.A)({},x),{},{page:x.page-1})),disabled:1===x.page,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsxs)("div",{className:"bg-slate-700 text-white px-4 py-2 rounded-lg",children:["Page ",x.page," of ",g.totalPages]}),(0,ta.jsx)("button",{onClick:()=>h((0,n.A)((0,n.A)({},x),{},{page:x.page+1})),disabled:x.page>=g.totalPages,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})}function qn(e){var t;let{selectedClubId:s}=e;const l=aa(),[r,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[b,g]=(0,a.useState)(null),[f,y]=(0,a.useState)("details"),v=["Points Rummy","Pool Rummy (101 Points)","Pool Rummy (201 Points)","Deals Rummy","Custom"],[j,w]=(0,a.useState)({name:"",rummy_variant:"Points Rummy",custom_variant:"",entry_fee:"",prize_pool:"",number_of_deals:1,points_per_deal:0,drop_points:20,max_points:80,min_players:2,max_players:6,start_time:"",deal_duration:5,break_duration:5,payout_structure:"Winner takes all",allow_reentry:!1,late_registration:60}),[N,S]=(0,a.useState)([]),[C,k]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(s)try{const e=await jl.Od.getClub(s);k((null===e||void 0===e?void 0:e.logoUrl)||null)}catch(e){console.error("Error fetching club logo:",e)}})()},[s]);const{data:P,isLoading:A}=ur({queryKey:["rummy-tournaments",s],queryFn:()=>jl.Re.getTournaments(s),enabled:!!s,select:e=>(Array.isArray(e)?e:(null===e||void 0===e?void 0:e.tournaments)||[]).filter(e=>e&&e.rummy_variant&&null!==e.rummy_variant&&""!==e.rummy_variant)}),{data:I,isLoading:D}=ur({queryKey:["rummy-tournament-details",s,null===h||void 0===h?void 0:h.id],queryFn:()=>jl.Re.getTournamentById(s,h.id),enabled:!!s&&!!h&&c}),{data:T,isLoading:_}=ur({queryKey:["rummy-tournament-players",s,null===h||void 0===h?void 0:h.id],queryFn:async()=>{const e=await jl.Re.getTournamentPlayers(s,h.id);return(null===e||void 0===e?void 0:e.players)||e||[]},enabled:!!s&&!!h&&(c||m)}),{data:E}=ur({queryKey:["rummy-tournament-winners",s,null===h||void 0===h?void 0:h.id],queryFn:async()=>{const e=await jl.Re.getTournamentWinners(s,h.id);return(null===e||void 0===e?void 0:e.winners)||e||[]},enabled:!!s&&!!h&&"completed"===h.status&&c});(0,a.useEffect)(()=>{E&&E.length>0&&"completed"===(null===h||void 0===h?void 0:h.status)&&S(E.map(e=>({player_id:e.player_id||e.id,finishing_position:e.finishing_position,prize_amount:e.prize_amount||0,name:e.name,email:e.email})))},[E,null===h||void 0===h?void 0:h.status]);const R=pr({mutationFn:e=>jl.Re.createTournament(s,{name:e.name,tournament_type:"Rummy - ".concat("Custom"===e.rummy_variant?e.custom_variant:e.rummy_variant),buy_in:parseFloat(e.entry_fee)||0,entry_fee:parseFloat(e.entry_fee)||0,starting_chips:0,blind_structure:"N/A",max_players:parseInt(e.max_players)||6,start_time:e.start_time||null,payout_structure:e.payout_structure||"Winner takes all",allow_reentry:e.allow_reentry||!1,late_registration:parseInt(e.late_registration)||60,break_duration:parseInt(e.break_duration)||5,rummy_variant:"Custom"===e.rummy_variant?e.custom_variant:e.rummy_variant,number_of_deals:parseInt(e.number_of_deals)||null,points_per_deal:parseInt(e.points_per_deal)||null,drop_points:parseInt(e.drop_points)||null,max_points:parseInt(e.max_points)||null,deal_duration:parseInt(e.deal_duration)||null,prize_pool:parseFloat(e.prize_pool)||null,min_players:parseInt(e.min_players)||2}),onSuccess:()=>{vl.success("Rummy tournament created successfully!"),l.invalidateQueries(["rummy-tournaments",s]),i(!1),B()},onError:e=>{vl.error(e.message||"Failed to create rummy tournament")}}),L=pr({mutationFn:e=>{let{tournamentId:t,data:a}=e;return jl.Re.updateTournament(s,t,{name:a.name,tournament_type:"Rummy - ".concat("Custom"===a.rummy_variant?a.custom_variant:a.rummy_variant),buy_in:parseFloat(a.entry_fee)||0,entry_fee:parseFloat(a.entry_fee)||0,max_players:parseInt(a.max_players)||6,start_time:a.start_time||null,payout_structure:a.payout_structure||"Winner takes all",allow_reentry:a.allow_reentry||!1,late_registration:parseInt(a.late_registration)||60,break_duration:parseInt(a.break_duration)||5,rummy_variant:"Custom"===a.rummy_variant?a.custom_variant:a.rummy_variant,number_of_deals:parseInt(a.number_of_deals)||null,points_per_deal:parseInt(a.points_per_deal)||null,drop_points:parseInt(a.drop_points)||null,max_points:parseInt(a.max_points)||null,deal_duration:parseInt(a.deal_duration)||null,prize_pool:parseFloat(a.prize_pool)||null,min_players:parseInt(a.min_players)||2})},onSuccess:()=>{vl.success("Rummy tournament updated successfully!"),l.invalidateQueries(["rummy-tournaments",s]),u(!1),p(null)},onError:e=>{vl.error(e.message||"Failed to update rummy tournament")}}),O=pr({mutationFn:e=>jl.Re.startTournament(s,e),onSuccess:()=>{vl.success("Rummy tournament started!"),l.invalidateQueries(["rummy-tournaments",s])},onError:e=>{vl.error(e.message||"Failed to start tournament")}}),M=pr({mutationFn:e=>jl.Re.endTournament(s,h.id,e),onSuccess:()=>{vl.success("Rummy tournament ended successfully!"),l.invalidateQueries(["rummy-tournaments",s]),l.invalidateQueries(["rummy-tournament-winners",s,h.id]),x(!1),l.invalidateQueries(["rummy-tournament-details",s,h.id]),setTimeout(()=>{l.invalidateQueries(["rummy-tournaments",s])},500)},onError:e=>{vl.error(e.message||"Failed to end tournament")}}),F=pr({mutationFn:e=>jl.Re.deleteTournament(s,e),onSuccess:()=>{vl.success("Rummy tournament deleted successfully!"),l.invalidateQueries(["rummy-tournaments",s])},onError:e=>{vl.error(e.message||"Failed to delete tournament")}}),B=()=>{w({name:"",rummy_variant:"Points Rummy",custom_variant:"",entry_fee:"",prize_pool:"",number_of_deals:1,points_per_deal:0,drop_points:20,max_points:80,min_players:2,max_players:6,start_time:"",deal_duration:5,break_duration:5,payout_structure:"Winner takes all",allow_reentry:!1,late_registration:60})},q=e=>{window.confirm("Are you sure you want to start this rummy tournament?")&&O.mutate(e)},z=e=>{var t,s,a,l,r,n;g(e),w({name:e.name||"",rummy_variant:e.rummy_variant||"Points Rummy",custom_variant:e.custom_variant||"",entry_fee:(null===(t=e.entry_fee)||void 0===t?void 0:t.toString())||(null===(s=e.buy_in)||void 0===s?void 0:s.toString())||"",prize_pool:(null===(a=e.prize_pool)||void 0===a?void 0:a.toString())||"",number_of_deals:e.number_of_deals||1,points_per_deal:(null===(l=e.points_per_deal)||void 0===l?void 0:l.toString())||"0",drop_points:(null===(r=e.drop_points)||void 0===r?void 0:r.toString())||"20",max_points:(null===(n=e.max_points)||void 0===n?void 0:n.toString())||"80",min_players:e.min_players||2,max_players:e.max_players||6,start_time:e.start_time?new Date(e.start_time).toISOString().slice(0,16):"",deal_duration:e.deal_duration||5,break_duration:e.break_duration||5,payout_structure:e.payout_structure||"Winner takes all",allow_reentry:e.allow_reentry||!1,late_registration:e.late_registration||60}),d(!0)},U=(e,t,s)=>{const a=[...N];a[e][t]=s,S(a)},W=Array.isArray(P)?P:(null===P||void 0===P?void 0:P.tournaments)||[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Rummy Tournaments"}),(0,ta.jsx)("button",{onClick:()=>i(!0),className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg font-medium",children:"+ Create Rummy Tournament"})]}),A?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===W.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 border border-slate-700 text-center",children:[(0,ta.jsx)("p",{className:"text-gray-400 mb-4",children:"No rummy tournaments found"}),(0,ta.jsx)("button",{onClick:()=>i(!0),className:"bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg",children:"Create First Rummy Tournament"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:W.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-emerald-500 transition-colors",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"completed"===e.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2 text-sm text-gray-400",children:[(0,ta.jsxs)("p",{children:["Variant: ",e.tournament_type||e.rummy_variant||"N/A"]}),(0,ta.jsxs)("p",{children:["Entry Fee: \u20b9",e.entry_fee||e.buy_in||"0"]}),(0,ta.jsxs)("p",{children:["Max Players: ",e.max_players||"N/A"]}),e.start_time&&(0,ta.jsxs)("p",{children:["Start: ",new Date(e.start_time).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"mt-4 flex gap-2",children:[(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),p(e),u(!0),y("details")},className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm",children:"View Details"}),"scheduled"===e.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),z(e)},className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded text-sm",children:"Edit"}),(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),q(e.id)},className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded text-sm",children:"Start"}),(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),window.confirm("Delete this tournament?")&&F.mutate(e.id)},className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded text-sm",children:"Delete"})]})]})]},e.id))}),r&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>i(!1),children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Create Rummy Tournament"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tournament Name *"}),(0,ta.jsx)("input",{type:"text",value:j.name,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"e.g., Weekend Rummy Championship"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,ta.jsx)("select",{value:j.rummy_variant,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:v.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===j.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant Name"}),(0,ta.jsx)("input",{type:"text",value:j.custom_variant,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Enter custom variant name"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",value:j.entry_fee,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"0",min:"0"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prize Pool (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:j.prize_pool,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{prize_pool:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"0",min:"0"})]})]}),(j.rummy_variant.includes("Points")||"Custom"===j.rummy_variant)&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,ta.jsx)("input",{type:"number",value:j.drop_points,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,ta.jsx)("input",{type:"number",value:j.max_points,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Per Deal"}),(0,ta.jsx)("input",{type:"number",value:j.points_per_deal,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{points_per_deal:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),"Deals Rummy"===j.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,ta.jsx)("input",{type:"number",value:j.number_of_deals,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,ta.jsx)("input",{type:"number",value:j.min_players,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players"}),(0,ta.jsx)("input",{type:"number",value:j.max_players,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.deal_duration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.break_duration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{break_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),(0,ta.jsx)("input",{type:"datetime-local",value:j.start_time,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{start_time:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Structure"}),(0,ta.jsxs)("select",{value:j.payout_structure,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{payout_structure:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"Winner takes all",children:"Winner takes all"}),(0,ta.jsx)("option",{value:"Top 2",children:"Top 2"}),(0,ta.jsx)("option",{value:"Top 3",children:"Top 3"}),(0,ta.jsx)("option",{value:"Top 50%",children:"Top 50%"})]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("input",{type:"checkbox",id:"allow_reentry",checked:j.allow_reentry,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{allow_reentry:e.target.checked})),className:"w-4 h-4"}),(0,ta.jsx)("label",{htmlFor:"allow_reentry",className:"text-sm text-gray-300",children:"Allow Re-entry"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Late Registration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.late_registration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{late_registration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{i(!1),B()},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Cancel"}),(0,ta.jsx)("button",{onClick:()=>{j.name&&j.entry_fee?R.mutate(j):vl.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:R.isLoading?"Creating...":"Create Tournament"})]})]})}),o&&b&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",onClick:()=>{d(!1),g(null),B()},children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-purple-700",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Edit Rummy Tournament: ",b.name]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tournament Name *"}),(0,ta.jsx)("input",{type:"text",value:j.name,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,ta.jsx)("select",{value:j.rummy_variant,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:v.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===j.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant"}),(0,ta.jsx)("input",{type:"text",value:j.custom_variant,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",value:j.entry_fee,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prize Pool (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:j.prize_pool,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{prize_pool:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,ta.jsx)("input",{type:"number",value:j.min_players,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players"}),(0,ta.jsx)("input",{type:"number",value:j.max_players,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2"})]})]}),"Points Rummy"===j.rummy_variant&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Per Deal"}),(0,ta.jsx)("input",{type:"number",value:j.points_per_deal,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{points_per_deal:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,ta.jsx)("input",{type:"number",value:j.drop_points,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,ta.jsx)("input",{type:"number",value:j.max_points,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]})]}),"Deals Rummy"===j.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,ta.jsx)("input",{type:"number",value:j.number_of_deals,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.deal_duration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Break Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.break_duration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{break_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Time"}),(0,ta.jsx)("input",{type:"datetime-local",value:j.start_time,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{start_time:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Payout Structure"}),(0,ta.jsxs)("select",{value:j.payout_structure,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{payout_structure:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"Winner takes all",children:"Winner takes all"}),(0,ta.jsx)("option",{value:"Top 2",children:"Top 2"}),(0,ta.jsx)("option",{value:"Top 3",children:"Top 3"}),(0,ta.jsx)("option",{value:"Top 50%",children:"Top 50%"})]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("input",{type:"checkbox",id:"edit_allow_reentry",checked:j.allow_reentry,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{allow_reentry:e.target.checked})),className:"w-4 h-4"}),(0,ta.jsx)("label",{htmlFor:"edit_allow_reentry",className:"text-sm text-gray-300",children:"Allow Re-entry"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Late Registration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:j.late_registration,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{late_registration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{d(!1),g(null),B()},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Cancel"}),(0,ta.jsx)("button",{onClick:()=>{if(!j.name||!j.entry_fee)return void vl.error("Please fill in all required fields");const e={name:j.name,tournament_type:"Rummy - ".concat("Custom"===j.rummy_variant?j.custom_variant:j.rummy_variant),buy_in:parseFloat(j.entry_fee)||0,entry_fee:parseFloat(j.entry_fee)||0,max_players:parseInt(j.max_players)||6,min_players:parseInt(j.min_players)||2,start_time:j.start_time||void 0,prize_pool:j.prize_pool?parseFloat(j.prize_pool):void 0,payout_structure:j.payout_structure||"Winner takes all",allow_reentry:Boolean(j.allow_reentry),late_registration:parseInt(j.late_registration)||60,rummy_variant:j.rummy_variant,custom_variant:"Custom"===j.rummy_variant?j.custom_variant:void 0,number_of_deals:parseInt(j.number_of_deals)||1,points_per_deal:parseFloat(j.points_per_deal)||0,drop_points:parseFloat(j.drop_points)||20,max_points:parseFloat(j.max_points)||80,deal_duration:parseInt(j.deal_duration)||5,break_duration:parseInt(j.break_duration)||5};L.mutate({tournamentId:b.id,data:e})},disabled:L.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg disabled:opacity-50",children:L.isLoading?"Updating...":"Update Tournament"})]})]})}),c&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-6xl w-full border border-emerald-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:h.name}),(0,ta.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>y("details"),className:"px-4 py-2 font-semibold transition-colors ".concat("details"===f?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Details"}),"completed"!==h.status&&(0,ta.jsxs)("button",{onClick:()=>y("players"),className:"px-4 py-2 font-semibold transition-colors ".concat("players"===f?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Players (",(null===T||void 0===T?void 0:T.length)||0,")"]})]}),"details"===f&&"completed"===h.status?(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Tournament Winners"}),0===N.length?(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,ta.jsx)("tbody",{children:N.map((e,t)=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 px-4",children:(0,ta.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.name||"N/A"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,ta.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount?parseFloat(e.prize_amount).toLocaleString():"0"]})]},t))})]})})]}):"details"===f&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"relative w-full bg-gradient-to-br from-slate-900 to-slate-800 rounded-xl p-8 border border-slate-700",children:[(0,ta.jsx)("div",{className:"absolute top-4 left-1/2 transform -translate-x-1/2 z-10",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-yellow-600 via-amber-500 to-orange-500 border-2 border-yellow-400/80 px-6 py-3 rounded-lg text-center shadow-xl",children:[(0,ta.jsx)("div",{className:"text-yellow-200 text-xs font-semibold uppercase tracking-wider",children:"Prize Pool"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",h.prize_pool?parseFloat(h.prize_pool).toLocaleString():"0"]})]})}),(0,ta.jsx)("div",{className:"relative aspect-[1/1] max-w-md mx-auto mt-16 mb-8",children:(0,ta.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-br from-amber-600 via-yellow-500 to-amber-600 p-3 shadow-2xl",children:(0,ta.jsxs)("div",{className:"absolute inset-3 rounded-full bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:h.max_players||6},(e,t)=>{const s=t+1,a=360/(h.max_players||6)*t-90,l=50+38*Math.cos(a*Math.PI/180),r=50+38*Math.sin(a*Math.PI/180);return(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-20",style:{left:"".concat(l,"%"),top:"".concat(r,"%")},children:[(0,ta.jsx)("div",{className:"w-12 h-12 rounded-full border-2 border-slate-500 bg-gradient-to-br from-slate-700 to-slate-800 flex items-center justify-center shadow-lg",children:(0,ta.jsx)("span",{className:"text-slate-400 text-xs font-bold",children:s})}),(0,ta.jsx)("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 text-center",children:(0,ta.jsxs)("div",{className:"text-xs text-slate-300 font-medium",children:["Seat ",s]})})]},s)}),(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ta.jsx)("div",{className:"text-center",children:(0,ta.jsxs)("div",{className:"w-32 h-32 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:[C?(0,ta.jsx)("img",{src:C,alt:"Club Logo",className:"w-full h-full object-contain rounded-full p-2",onError:e=>{e.target.style.display="none";const t=e.target.nextElementSibling;t&&(t.style.display="flex")}}):null,(0,ta.jsx)("div",{className:"text-4xl font-bold text-white/30 hidden items-center justify-center w-full h-full",children:"\ud83c\udfb4"})]})})})]})})}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Variant"}),(0,ta.jsx)("div",{className:"text-white font-semibold text-sm",children:h.rummy_variant||"N/A"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Entry Fee"}),(0,ta.jsxs)("div",{className:"text-white font-semibold text-sm",children:["\u20b9",h.entry_fee||h.buy_in||"0"]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Players"}),(0,ta.jsxs)("div",{className:"text-white font-semibold text-sm",children:[(null===T||void 0===T?void 0:T.length)||0,"/",h.max_players||"N/A"]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-3 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-slate-400 text-xs mb-1",children:"Status"}),(0,ta.jsx)("div",{className:"text-white font-semibold text-sm",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs ".concat("active"===h.status?"bg-green-500/20 text-green-300":"completed"===h.status?"bg-gray-500/20 text-gray-300":"bg-yellow-500/20 text-yellow-300"),children:h.status})})]})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Tournament ID"}),(0,ta.jsx)("p",{className:"text-white font-mono",children:(null===(t=h.id)||void 0===t?void 0:t.substring(0,8))||"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Start Time"}),(0,ta.jsx)("p",{className:"text-white",children:h.start_time?new Date(h.start_time).toLocaleString():"Not set"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Min Players"}),(0,ta.jsx)("p",{className:"text-white",children:h.min_players||"2"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Drop Points"}),(0,ta.jsx)("p",{className:"text-white",children:h.drop_points||"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Max Points"}),(0,ta.jsx)("p",{className:"text-white",children:h.max_points||"N/A"})]})]}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Deals"}),(0,ta.jsx)("p",{className:"text-white",children:h.number_of_deals||"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Points Per Deal"}),(0,ta.jsx)("p",{className:"text-white",children:h.points_per_deal||"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Deal Duration"}),(0,ta.jsx)("p",{className:"text-white",children:h.deal_duration?"".concat(h.deal_duration," minutes"):"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Payout Structure"}),(0,ta.jsx)("p",{className:"text-white",children:h.payout_structure||"Winner takes all"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Allow Re-entry"}),(0,ta.jsx)("p",{className:"text-white",children:h.allow_reentry?"Yes":"No"})]})]})]})]}),"players"===f&&(0,ta.jsx)("div",{className:"space-y-4",children:_?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading players..."})]}):T&&0!==T.length?(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Mobile"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Registered At"}),"completed"===h.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize"})]})]})}),(0,ta.jsx)("tbody",{children:T.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id||e.id}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.name||"N/A"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.mobile||"N/A"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.registered_at?new Date(e.registered_at).toLocaleString():"-"}),"completed"===h.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.finishing_position||"-"}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.prize_amount?"\u20b9".concat(e.prize_amount):"-"})]})]},e.id||e.player_id))})]})}):(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No players registered yet"})})}),"winners"===f&&"completed"===h.status&&(0,ta.jsx)("div",{className:"space-y-4",children:0===N.length?(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"No winners recorded"})}):(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Position"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player ID"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Name"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Email"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Prize Amount"})]})}),(0,ta.jsx)("tbody",{children:N.map((e,t)=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 px-4",children:(0,ta.jsx)("span",{className:"inline-block w-8 h-8 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white font-mono",children:e.player_id}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.name}),(0,ta.jsx)("td",{className:"py-3 px-4 text-white",children:e.email||"N/A"}),(0,ta.jsxs)("td",{className:"py-3 px-4 text-emerald-400 font-semibold",children:["\u20b9",e.prize_amount]})]},t))})]})})}),(0,ta.jsxs)("div",{className:"mt-6 flex gap-4 pt-4 border-t border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-6 py-2 rounded-lg",children:"Close"}),"scheduled"===h.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:e=>{e.stopPropagation(),u(!1),z(h)},className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-2 rounded-lg",children:"Edit Tournament"}),(0,ta.jsx)("button",{onClick:e=>{e.stopPropagation(),q(h.id)},className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg",children:"Start Tournament"})]}),"active"===h.status&&(0,ta.jsx)("button",{onClick:()=>{0===N.length&&S([{player_id:"",finishing_position:1,prize_amount:""}]),x(!0)},className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-2 rounded-lg",children:"End Tournament"})]})]})}),m&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white mb-6",children:["End Tournament: ",h.name]}),(0,ta.jsx)("p",{className:"text-gray-300 mb-4",children:"Select players and assign prize amounts. Player balances will be automatically updated."}),(0,ta.jsx)("div",{className:"space-y-4 mb-6",children:N.map((e,t)=>(0,ta.jsxs)("div",{className:"grid grid-cols-12 gap-3 items-center bg-slate-700/50 p-4 rounded-lg",children:[(0,ta.jsx)("div",{className:"col-span-1",children:(0,ta.jsx)("div",{className:"w-10 h-10 rounded-full bg-yellow-500 text-slate-900 font-bold flex items-center justify-center",children:e.finishing_position})}),(0,ta.jsx)("div",{className:"col-span-5",children:(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:e.player_id,onChange:e=>U(t,"player_id",e.target.value),children:[(0,ta.jsx)("option",{value:"",children:"Select Player"}),null===T||void 0===T?void 0:T.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.player_id,")"]},e.id))]})}),(0,ta.jsx)("div",{className:"col-span-2",children:(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Position",value:e.finishing_position,onChange:e=>U(t,"finishing_position",parseInt(e.target.value)||1),min:"1"})}),(0,ta.jsx)("div",{className:"col-span-3",children:(0,ta.jsx)("input",{type:"number",step:"0.01",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Prize Amount (\u20b9)",value:e.prize_amount,onChange:e=>U(t,"prize_amount",parseFloat(e.target.value)||0),min:"0"})}),(0,ta.jsx)("div",{className:"col-span-1",children:(0,ta.jsx)("button",{onClick:()=>(e=>{S(N.filter((t,s)=>s!==e))})(t),className:"w-full bg-red-600 hover:bg-red-500 text-white px-3 py-2 rounded-lg transition-colors",children:"\xd7"})})]},t))}),(0,ta.jsx)("button",{onClick:()=>{S([...N,{player_id:"",finishing_position:N.length+1,prize_amount:""}])},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors mb-6",children:"+ Add Winner"}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{if(0===N.length)return void vl.error("Please add at least one winner");const e=N.every(e=>e.player_id&&e.prize_amount&&e.prize_amount>0);e?M.mutate({winners:N}):vl.error("Please fill in all winner details (player and prize amount)")},disabled:M.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:M.isLoading?"Ending Tournament...":"End Tournament & Update Balances"}),(0,ta.jsx)("button",{onClick:()=>{x(!1),S([])},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function zn(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("live-tables"),{data:r,isLoading:n}=(aa(),ur({queryKey:["rummy-tables",t],queryFn:()=>jl.rj.getTables(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]})),{data:i,isLoading:o}=ur({queryKey:["waitlist",t],queryFn:()=>jl.IX.getWaitlist(t),enabled:!!t}),d=r||[],c=i||[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tables & Waitlist"}),!t&&(0,ta.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100 flex items-center gap-3",children:[(0,ta.jsx)("svg",{className:"w-6 h-6 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.3 2.647-1.3 3.412 0l7 12a1.5 1.5 0 01-1.302 2.25H2.847a1.5 1.5 0 01-1.302-2.25l7-12zM9 13a1 1 0 112 0v2a1 1 0 11-2 0v-2zm0-6a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z",clipRule:"evenodd"})}),(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club from the sidebar dropdown to manage rummy tables."})]}),(0,ta.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"live-tables",label:"Live Rummy Tables"},{id:"table-management",label:"Table Management"},{id:"table-buy-in",label:"Table Buy-In"},{id:"table-buy-out",label:"Table Buy-Out"}].map(e=>(0,ta.jsx)("button",{onClick:()=>l(e.id),className:"px-6 py-3 font-semibold transition-all ".concat(s===e.id?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,ta.jsxs)("div",{className:"mt-6",children:["live-tables"===s&&(0,ta.jsx)(Un,{selectedClubId:t,tables:d,tablesLoading:n}),"table-management"===s&&(0,ta.jsx)(Vn,{selectedClubId:t,tables:d,tablesLoading:n}),"table-buy-in"===s&&(0,ta.jsx)(Jn,{selectedClubId:t,tables:d,waitlist:c,waitlistLoading:o}),"table-buy-out"===s&&(0,ta.jsx)(Kn,{selectedClubId:t,tables:d})]})]})}function Un(e){let{selectedClubId:t,tables:s,tablesLoading:l}=e;const[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)({minPlayTime:30,callTime:5,cashOutWindow:10,sessionTimeout:120}),[x,h]=(0,a.useState)("Active"),p=s.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status),b=e=>{if(!e.notes)return null;const t=e.notes.match(/Dealer:.*?\(([^)]+)\)/i);return t?t[1]:null},g=e=>{var t,s,a,l,r,n,i,d;c(e),o(!0);const u=e.notes?e.notes.split("|").map(e=>e.trim()):[],x=(null===(t=u[3])||void 0===t||null===(s=t.match(/\d+/))||void 0===s?void 0:s[0])||"30",p=(null===(a=u[4])||void 0===a||null===(l=a.match(/\d+/))||void 0===l?void 0:l[0])||"5",b=(null===(r=u[5])||void 0===r||null===(n=r.match(/\d+/))||void 0===n?void 0:n[0])||"10",g=(null===(i=u[6])||void 0===i||null===(d=i.match(/\d+/))||void 0===d?void 0:d[0])||"120";m({minPlayTime:parseInt(x),callTime:parseInt(p),cashOutWindow:parseInt(b),sessionTimeout:parseInt(g)}),h("OCCUPIED"===e.status?"Active":"Paused")};return(0,ta.jsxs)("div",{className:"space-y-6",children:[i&&d&&(0,ta.jsx)(Wn,{table:d,tables:p,sessionParams:u,setSessionParams:m,sessionStatus:x,setSessionStatus:h,clubId:t,onClose:()=>{o(!1),c(null)},onSelectTable:e=>{c(e),g(e)}}),!i&&(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Live Rummy Tables - Hologram View"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Manage live rummy tables, seat players, and handle buy-ins using table hologram."})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",p.length]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",p.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),l?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading rummy tables..."})]}):0===p.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No active rummy tables"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:"Create and activate tables in Table Management"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:p.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-emerald-500 transition-all cursor-pointer",onClick:()=>n(e),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.rummyVariant||"RUMMY"})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-emerald-600/20 text-emerald-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,ta.jsx)("span",{className:"text-emerald-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]}),b(e)&&(0,ta.jsxs)("div",{className:"flex justify-between text-sm pt-1 border-t border-slate-600",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"\ud83d\udc64 Dealer:"}),(0,ta.jsx)("span",{className:"text-purple-400 font-semibold",children:b(e)})]})]}),(0,ta.jsxs)("button",{onClick:t=>{t.stopPropagation(),n(e)},className:"w-full mt-4 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83c\udfaf"}),(0,ta.jsx)("span",{children:"View Table Hologram"})]}),(0,ta.jsxs)("button",{onClick:t=>{t.stopPropagation(),g(e)},className:"w-full mt-2 bg-gradient-to-r from-purple-600 to-pink-700 hover:from-purple-500 hover:to-pink-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\u2699\ufe0f"}),(0,ta.jsx)("span",{children:"Edit Session Control"})]})]},e.id))})]}),r&&(0,ta.jsx)(Hn,{table:r,onClose:()=>n(null),clubId:t})]})}function Wn(e){let{table:t,tables:s,sessionParams:l,setSessionParams:r,sessionStatus:i,setSessionStatus:o,clubId:d,onClose:c,onSelectTable:u}=e;const m=aa(),[x,h]=(0,a.useState)(d);(0,a.useEffect)(()=>{d&&h(d)},[d]);const p=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.pauseSession(x,t.id)},onSuccess:()=>{o("Paused"),vl.success("Session paused successfully"),m.invalidateQueries(["rummy-tables",x])},onError:e=>{vl.error(e.message||"Failed to pause session")}}),b=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.resumeSession(x,t.id)},onSuccess:()=>{o("Active"),vl.success("Session resumed successfully"),m.invalidateQueries(["rummy-tables",x])},onError:e=>{vl.error(e.message||"Failed to resume session")}}),g=pr({mutationFn:async()=>{if(!x)throw new Error("Club ID not found");return await jl.rj.endSession(x,t.id)},onSuccess:()=>{vl.success("Session ended successfully"),m.invalidateQueries(["rummy-tables",x]),c()},onError:e=>{vl.error(e.message||"Failed to end session")}}),f=pr({mutationFn:async e=>{if(!x)throw new Error("Club ID not found");return await jl.rj.updateSessionParams(x,t.id,e)},onSuccess:e=>{vl.success("Session parameters updated successfully"),m.invalidateQueries(["rummy-tables",x]),e.sessionParams&&r(e.sessionParams)},onError:e=>{vl.error(e.message||"Failed to update session parameters")}}),y=(e,t)=>{const s={[e]:parseInt(t)};f.mutate(s)},v=e=>{var t,s;return e.rummyVariant||(null===(t=e.notes)||void 0===t||null===(s=t.split("|")[1])||void 0===s?void 0:s.trim())||"RUMMY"};return(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-emerald-900/50 via-teal-900/50 to-green-900/50 rounded-2xl p-8 border-2 border-emerald-500/30 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Rummy Table Session Control"}),(0,ta.jsx)("button",{onClick:c,className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Table Sessions"}),(0,ta.jsx)("div",{className:"space-y-3",children:s.map(e=>(0,ta.jsx)("div",{onClick:()=>u(e),className:"p-4 rounded-lg cursor-pointer transition-all ".concat(e.id===t.id?"bg-emerald-600/30 border-2 border-emerald-500":"bg-slate-700/50 border border-slate-600 hover:bg-slate-700"),children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"font-semibold text-white",children:["Table ",e.tableNumber," - ",v(e)]}),(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:e.rummyVariant||"Rummy"})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"OCCUPIED"===e.status?"Active":"Paused"})]})},e.id))}),(0,ta.jsxs)("div",{className:"mt-6 p-4 bg-emerald-600/20 border border-emerald-500/30 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-emerald-300 mb-2",children:["Selected: Table ",t.tableNumber," - ",v(t)]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Variant:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:t.rummyVariant||"Rummy"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:(e=>{var t;const s=e.notes?e.notes.split("|").map(e=>e.trim()):[];return(null===(t=s[2])||void 0===t?void 0:t.replace("Stakes:","").trim())||"\u20b9".concat(e.minBuyIn||0,"/\u20b9").concat(e.maxBuyIn||0)})(t)})]})]}),(0,ta.jsxs)("div",{className:"text-sm mt-2",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Players:"}),(0,ta.jsxs)("span",{className:"text-white ml-2",children:[t.currentSeats||0,"/",t.maxSeats]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Session Actions"}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm mb-2",children:"Current Status"}),(0,ta.jsx)("div",{className:"text-4xl font-bold ".concat("Active"===i?"text-green-400":"text-yellow-400"),children:i})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("button",{onClick:()=>{"Active"===i?p.mutate():b.mutate()},className:"w-full bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-500 hover:to-orange-500 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"Active"===i?"\u23f8":"\u25b6"}),(0,ta.jsx)("span",{children:"Active"===i?"Pause Session":"Resume Session"})]}),(0,ta.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to end this session? This action cannot be undone.")&&g.mutate()},className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-500 hover:to-red-600 text-white px-6 py-4 rounded-lg font-bold text-lg transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\u2b1b"}),(0,ta.jsx)("span",{children:"End Session"})]})]}),(0,ta.jsx)("div",{className:"mt-6 p-4 bg-slate-700/50 rounded-lg",children:(0,ta.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"Session parameters can be modified on the right panel."})})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Timing & Parameters"}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"MIN PLAY TIME"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.minPlayTime,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{minPlayTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,ta.jsx)("button",{onClick:()=>y("minPlayTime",l.minPlayTime),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.minPlayTime," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CALL TIME"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.callTime,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{callTime:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,ta.jsx)("button",{onClick:()=>y("callTime",l.callTime),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.callTime," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"CASH-OUT WINDOW"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.cashOutWindow,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{cashOutWindow:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"1"}),(0,ta.jsx)("button",{onClick:()=>y("cashOutWindow",l.cashOutWindow),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.cashOutWindow," mins"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm font-medium mb-2",children:"SESSION TIMEOUT"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"number",value:l.sessionTimeout,onChange:e=>r((0,n.A)((0,n.A)({},l),{},{sessionTimeout:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white text-lg font-semibold",min:"30"}),(0,ta.jsx)("button",{onClick:()=>y("sessionTimeout",l.sessionTimeout),className:"px-6 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white font-semibold transition-colors",children:"Set"})]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["Current: ",l.sessionTimeout," mins"]})]})]})]})]})]})}function Hn(e){var t,s,l,r;let{table:n,onClose:i,clubId:o}=e;const d=aa(),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)("00:00:00"),h=(()=>{if(!n.notes)return null;const e=n.notes.match(/Dealer:\s*([a-f0-9-]{36})\s*\(([^)]+)\)/i);return e?{id:e[1],name:e[2]}:null})(),p=pr({mutationFn:async()=>{if(!n||!h)return;const e=(n.notes||"").replace(/\s*\|\s*Dealer:.*$/i,"").trim();return jl.rj.updateTable(o,n.id,{notes:e})},onSuccess:()=>{vl.success("Dealer unassigned successfully"),d.invalidateQueries(["rummy-tables",o]),d.invalidateQueries(["all-tables",o]),i()},onError:e=>{vl.error(e.message||"Failed to unassign dealer")}});(0,a.useEffect)(()=>{o&&(async()=>{try{const e=localStorage.getItem("token"),t=localStorage.getItem("userId"),s=localStorage.getItem("tenantId"),a=await fetch("".concat({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"http://localhost:3333/api"}.REACT_APP_API_URL||"http://localhost:3333/api","/clubs/").concat(o),{headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e),"x-user-id":t||"","x-tenant-id":s||"","x-club-id":o}});if(a.ok){const e=await a.json();u(e)}}catch(e){console.error("Error fetching club data:",e)}})()},[o]),(0,a.useEffect)(()=>{var e,t;if(!n)return void x("00:00:00");if("AVAILABLE"===n.status||"PAUSED"===n.status){var s;const e=null===(s=n.notes)||void 0===s?void 0:s.match(/Paused Elapsed: (\d+)/);if(e){const t=parseInt(e[1],10);if(!isNaN(t)&&t>=0){const e=Math.floor(t/3600),s=Math.floor(t%3600/60),a=t%60;x("".concat(String(e).padStart(2,"0"),":").concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0")))}else x("00:00:00")}else x("00:00:00");return}if("OCCUPIED"!==n.status)return void x("00:00:00");const a=null===(e=n.notes)||void 0===e?void 0:e.match(/Session Started: ([^|]+)/),l=null===(t=n.notes)||void 0===t?void 0:t.match(/Paused Elapsed: (\d+)/);if(!a||!a[1])return void x("00:00:00");const r=a[1].trim(),i=new Date(r);if(isNaN(i.getTime()))return void x("00:00:00");const o=l?parseInt(l[1],10):0,d=()=>{const e=(new Date).getTime()-i.getTime();if(isNaN(e))return void x("00:00:00");const t=Math.floor(e/1e3)+o;if(isNaN(t)||t<0)return void x("00:00:00");const s=Math.floor(t/3600),a=Math.floor(t%3600/60),l=t%60;x("".concat(String(s).padStart(2,"0"),":").concat(String(a).padStart(2,"0"),":").concat(String(l).padStart(2,"0")))};d();const c=setInterval(d,1e3);return()=>clearInterval(c)},[n]);const b=Array.from({length:n.maxSeats},(e,t)=>t+1),g=[],f=(null===c||void 0===c?void 0:c.logoUrl)||null,y=n.rummyVariant||(null===(t=n.notes)||void 0===t||null===(s=t.split("|")[1])||void 0===s?void 0:s.trim())||"RUMMY",v="\u20b9".concat(n.minBuyIn||0,"/\u20b9").concat(n.maxBuyIn||0),j=null===(l=n.notes)||void 0===l?void 0:l.match(/Table Value: \u20b9?([\d,]+)/),w=j?parseInt(j[1].replace(/,/g,"")):(n.currentSeats||0)*((n.minBuyIn+n.maxBuyIn)/2||25e3);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/90 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h2",{className:"text-3xl font-bold text-white",children:["Table ",n.tableNumber," - ",y]}),(0,ta.jsxs)("p",{className:"text-gray-400",children:["Stakes: ",v]})]}),(0,ta.jsx)("button",{onClick:i,className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsx)("div",{className:"mb-6 flex justify-center",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600 to-teal-600 px-6 py-3 rounded-2xl shadow-xl border-2 border-emerald-400",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-100 text-center mb-1",children:"TABLE VALUE"}),(0,ta.jsxs)("div",{className:"text-3xl font-bold text-white text-center",children:["\u20b9",w.toLocaleString()]})]})}),(0,ta.jsxs)("div",{className:"relative w-full aspect-[4/3] bg-gradient-to-br from-green-800 to-green-900 rounded-[50%] border-8 border-emerald-600 shadow-2xl flex items-center justify-center",children:[(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ta.jsx)("div",{className:"bg-white rounded-full p-2 shadow-lg flex items-center justify-center w-24 h-24",children:f?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("img",{src:f,alt:"Club Logo",className:"w-20 h-20 object-contain",onError:e=>{console.error("Failed to load club logo:",f),e.target.style.display="none";const t=e.target.parentElement.querySelector(".logo-fallback");t&&(t.style.display="flex")}}),(0,ta.jsx)("div",{className:"logo-fallback text-3xl font-bold text-gray-800 hidden items-center justify-center w-full h-full",children:"\ud83c\udccf"})]}):(0,ta.jsx)("div",{className:"text-3xl font-bold text-gray-800",children:"\ud83c\udccf"})})}),(0,ta.jsxs)("div",{className:"absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 flex flex-col items-center",children:[h&&(0,ta.jsxs)("div",{className:"mb-2 bg-purple-600 text-white px-3 py-1 rounded-full text-sm font-bold shadow-lg flex items-center gap-2",children:[(0,ta.jsxs)("span",{children:["\ud83d\udc64 ",h.name]}),(0,ta.jsx)("button",{onClick:e=>{e.stopPropagation(),window.confirm('Are you sure you want to unassign dealer "'.concat(h.name,'" from this table?'))&&p.mutate()},disabled:p.isLoading,className:"hover:bg-purple-700 rounded-full p-0.5 transition-colors disabled:opacity-50",title:"Unassign Dealer",children:(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsx)("div",{className:"bg-emerald-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:"D"})]}),b.map(e=>{const t=(360/n.maxSeats*(e-1)-90)*(Math.PI/180),s=50+40*Math.cos(t),a=50+35*Math.sin(t),l=g.includes(e);return(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2",style:{left:"".concat(s,"%"),top:"".concat(a,"%")},children:[(0,ta.jsx)("div",{className:"w-16 h-16 rounded-full flex items-center justify-center font-bold text-lg transition-all cursor-pointer ".concat(l?"bg-emerald-600 text-white border-2 border-emerald-400":"bg-slate-700 text-gray-400 border-2 border-slate-600 hover:border-emerald-500"),children:l?"P"+e:e}),(0,ta.jsxs)("div",{className:"text-center text-xs text-white mt-1",children:["Seat ",e]})]},e)})]}),(0,ta.jsxs)("div",{className:"mt-6 grid grid-cols-4 gap-4 bg-slate-800 p-4 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Players"}),(0,ta.jsxs)("div",{className:"text-white font-bold text-xl",children:[n.currentSeats||0,"/",n.maxSeats]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Table Value"}),(0,ta.jsxs)("div",{className:"text-emerald-400 font-bold text-xl",children:["\u20b9",w.toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Buy-In Range"}),(0,ta.jsxs)("div",{className:"text-white font-bold text-lg",children:["\u20b9",(n.minBuyIn||0).toLocaleString()," - \u20b9",(n.maxBuyIn||0).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("div",{className:"font-bold text-xl ".concat("OCCUPIED"===n.status?"text-green-400":"AVAILABLE"===n.status?"text-yellow-400":"text-gray-400"),children:"OCCUPIED"===n.status?"Active":"AVAILABLE"===n.status?"Waiting":n.status})]})]}),("OCCUPIED"===n.status||"AVAILABLE"===n.status&&(null===(r=n.notes)||void 0===r?void 0:r.includes("Paused Elapsed")))&&(0,ta.jsxs)("div",{className:"mt-4 bg-gradient-to-r from-emerald-600 to-teal-600 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-emerald-100 text-sm mb-1",children:"SESSION RUNNING TIME"}),(0,ta.jsx)("div",{className:"text-white font-bold text-3xl font-mono",children:m})]}),(0,ta.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ta.jsx)("button",{onClick:i,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white transition-colors",children:"Close"})})]})})}function Vn(e){let{selectedClubId:t,tables:s,tablesLoading:l}=e;const[r,i]=(0,a.useState)("all"),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(""),b=aa(),{data:g,isLoading:f}=ur({queryKey:["staff",t],queryFn:()=>jl.staffAPI.getStaff(t),enabled:!!t}),y=(null===g||void 0===g?void 0:g.filter(e=>"Dealer"===e.role&&"Active"===e.status))||[],v=(new Date).toISOString().split("T")[0],{data:j}=ur({queryKey:["dealersOnLeave",t,v],queryFn:()=>jl.iw.getDealers(t,v),enabled:!!t}),{data:w}=ur({queryKey:["availableDealersForToday",t,v],queryFn:()=>jl.iw.getAvailableDealersForDate(t,v),enabled:!!t}),N=(null===j||void 0===j?void 0:j.dealers)||[],S=new Set(y.filter(e=>!N.find(t=>t.id===e.id)).map(e=>e.id)),{data:C}=ur({queryKey:["all-tables",t],queryFn:()=>jl.rj.getTables(t),enabled:!!t}),k=new Set((C||[]).filter(e=>("OCCUPIED"===e.status||"RESERVED"===e.status)&&e.notes).map(e=>{var t;const s=null===(t=e.notes)||void 0===t?void 0:t.match(/Dealer:\s*([a-f0-9-]{36})/i);return s?s[1]:null}).filter(Boolean)),P=((null===w||void 0===w?void 0:w.dealers)||[]).filter(e=>!k.has(e.id)),A=(y.filter(e=>!k.has(e.id)&&!S.has(e.id)),pr({mutationFn:async e=>{let{tableId:a,dealerId:l}=e;const r=s.find(e=>e.id===a),n=y.find(e=>e.id===l);if(!r||!n)throw new Error("Table or dealer not found");const i=(r.notes||"").replace(/\s*\|\s*Dealer:.*$/i,""),o="".concat(i," | Dealer: ").concat(n.id," (").concat(n.name,")").trim();return jl.rj.updateTable(t,a,{notes:o})},onSuccess:()=>{vl.success("Dealer assigned successfully"),x(""),p(""),b.invalidateQueries(["rummy-tables",t]),b.invalidateQueries(["all-tables",t]),b.invalidateQueries(["staff",t])},onError:e=>{vl.error(e.message||"Failed to assign dealer")}})),[I,D]=(0,a.useState)({tableNumber:"",tableName:"",rummy_variant:"Points Rummy",custom_variant:"",points_value:1,number_of_deals:1,drop_points:20,max_points:80,min_players:2,max_players:6,entry_fee:"",min_buy_in:"",max_buy_in:"",deal_duration:5,notes:""}),T=pr({mutationFn:e=>jl.rj.createTable(t,(0,n.A)((0,n.A)({},e),{},{tableType:"RUMMY"})),onSuccess:()=>{vl.success("Rummy table created successfully"),b.invalidateQueries(["rummy-tables",t]),d(!1),i("all"),L()},onError:e=>{vl.error(e.message||"Failed to create rummy table")}}),_=pr({mutationFn:e=>{let{tableId:s,data:a}=e;return jl.rj.updateTable(t,s,(0,n.A)((0,n.A)({},a),{},{tableType:"RUMMY"}))},onSuccess:()=>{vl.success("Rummy table updated successfully"),b.invalidateQueries(["rummy-tables",t]),d(!1),u(null),i("all"),L()},onError:e=>{vl.error(e.message||"Failed to update rummy table")}}),E=pr({mutationFn:e=>jl.rj.deleteTable(t,e),onSuccess:()=>{vl.success("Rummy table deleted successfully"),b.invalidateQueries(["rummy-tables",t])},onError:e=>{vl.error(e.message||"Failed to delete rummy table")}}),R=pr({mutationFn:e=>jl.rj.resumeSession(t,e),onSuccess:()=>{vl.success("Session started successfully"),b.invalidateQueries(["rummy-tables",t])},onError:e=>{vl.error(e.message||"Failed to start session")}}),L=()=>{D({tableNumber:"",tableName:"",rummy_variant:"Points Rummy",custom_variant:"",points_value:1,number_of_deals:1,drop_points:20,max_points:80,min_players:2,max_players:6,entry_fee:"",min_buy_in:"",max_buy_in:"",deal_duration:5,notes:""}),u(null)};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Rummy Table Management"}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 pb-4 mb-6",children:[(0,ta.jsx)("button",{onClick:()=>i("all"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("all"===r?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"All Tables"}),(0,ta.jsx)("button",{onClick:()=>{i("add"),u(null),L()},className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("add"===r?"bg-gradient-to-r from-emerald-600 to-teal-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Add New Table"})]}),"all"===r&&(0,ta.jsx)("div",{className:"space-y-4",children:l?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading rummy tables..."})]}):0===s.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tables created yet"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-2",children:'Click "Add New Table" to create your first rummy table'})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.rummyVariant||"RUMMY"})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("AVAILABLE"===e.status?"bg-green-600/20 text-green-400":"OCCUPIED"===e.status?"bg-emerald-600/20 text-emerald-400":"RESERVED"===e.status?"bg-yellow-600/20 text-yellow-400":"bg-gray-600/20 text-gray-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Max Seats:"}),(0,ta.jsx)("span",{className:"text-white font-medium",children:e.maxSeats})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Current Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:["AVAILABLE"===e.status||"CLOSED"===e.status?(0,ta.jsxs)("button",{onClick:()=>R.mutate(e.id),disabled:R.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50 flex items-center justify-center gap-1",children:[(0,ta.jsx)("span",{children:"\u25b6"}),(0,ta.jsx)("span",{children:"Start Session"})]}):null,(0,ta.jsx)("button",{onClick:()=>(e=>{var t,s,a,l,r,n;u(e),D({tableNumber:(null===(t=e.tableNumber)||void 0===t?void 0:t.toString())||"",tableName:(null===(s=e.notes)||void 0===s||null===(a=s.split("|")[0])||void 0===a?void 0:a.trim())||"",rummy_variant:e.rummyVariant||"Points Rummy",custom_variant:"",points_value:e.pointsValue||1,number_of_deals:e.numberOfDeals||1,drop_points:e.dropPoints||20,max_points:e.maxPoints||80,min_players:e.minPlayers||2,max_players:e.maxSeats||6,entry_fee:(null===(l=e.entryFee)||void 0===l?void 0:l.toString())||"",min_buy_in:(null===(r=e.minBuyIn)||void 0===r?void 0:r.toString())||"",max_buy_in:(null===(n=e.maxBuyIn)||void 0===n?void 0:n.toString())||"",deal_duration:e.dealDuration||5,notes:e.notes||""}),i("add")})(e),className:"flex-1 bg-blue-600 hover:bg-blue-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete Table ".concat(e.tableNumber,"?"))&&E.mutate(e.id)})(e),disabled:E.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Delete"})]})]},e.id))})}),"add"===r&&(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold mb-6",children:c?"Edit Rummy Table":"Create New Rummy Table"}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),t?I.tableNumber?c?_.mutate({tableId:c.id,data:{tableType:"RUMMY",maxSeats:parseInt(I.max_players),minBuyIn:I.min_buy_in?parseFloat(I.min_buy_in):null,maxBuyIn:I.max_buy_in?parseFloat(I.max_buy_in):null,notes:I.notes||"".concat(I.tableName||"Rummy Table "+I.tableNumber," | ").concat("Custom"===I.rummy_variant?I.custom_variant:I.rummy_variant," | Points: ").concat(I.points_value," | Deals: ").concat(I.number_of_deals," | Drop: ").concat(I.drop_points," | Max: ").concat(I.max_points),rummyVariant:"Custom"===I.rummy_variant?I.custom_variant:I.rummy_variant,pointsValue:parseFloat(I.points_value)||1,numberOfDeals:parseInt(I.number_of_deals)||null,dropPoints:parseInt(I.drop_points)||null,maxPoints:parseInt(I.max_points)||null,dealDuration:parseInt(I.deal_duration)||null,entryFee:I.entry_fee?parseFloat(I.entry_fee):null,minPlayers:parseInt(I.min_players)||2}}):T.mutate({tableNumber:parseInt(I.tableNumber),tableType:"RUMMY",maxSeats:parseInt(I.max_players),minBuyIn:I.min_buy_in?parseFloat(I.min_buy_in):null,maxBuyIn:I.max_buy_in?parseFloat(I.max_buy_in):null,notes:I.notes||"".concat(I.tableName||"Rummy Table "+I.tableNumber," | ").concat("Custom"===I.rummy_variant?I.custom_variant:I.rummy_variant," | Points: ").concat(I.points_value," | Deals: ").concat(I.number_of_deals," | Drop: ").concat(I.drop_points," | Max: ").concat(I.max_points),rummyVariant:"Custom"===I.rummy_variant?I.custom_variant:I.rummy_variant,pointsValue:parseFloat(I.points_value)||1,numberOfDeals:parseInt(I.number_of_deals)||null,dropPoints:parseInt(I.drop_points)||null,maxPoints:parseInt(I.max_points)||null,dealDuration:parseInt(I.deal_duration)||null,entryFee:I.entry_fee?parseFloat(I.entry_fee):null,minPlayers:parseInt(I.min_players)||2}):vl.error("Table number is required"):vl.error("Please select a club first")},className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Table Number *"}),(0,ta.jsx)("input",{type:"number",value:I.tableNumber,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{tableNumber:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"1",required:!0,disabled:!!c})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Table Name"}),(0,ta.jsx)("input",{type:"text",value:I.tableName,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{tableName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"e.g., Premium Rummy Table"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rummy Variant *"}),(0,ta.jsx)("select",{value:I.rummy_variant,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{rummy_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0,children:["Points Rummy","Pool Rummy (101 Points)","Pool Rummy (201 Points)","Deals Rummy","Custom"].map(e=>(0,ta.jsx)("option",{value:e,children:e},e))})]}),"Custom"===I.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Variant Name"}),(0,ta.jsx)("input",{type:"text",value:I.custom_variant,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{custom_variant:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Enter custom variant name"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Points Value (per \u20b9)"}),(0,ta.jsx)("input",{type:"number",value:I.points_value,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{points_value:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0.1",step:"0.1"})]}),(I.rummy_variant.includes("Points")||"Custom"===I.rummy_variant)&&(0,ta.jsx)(ta.Fragment,{children:(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Drop Points"}),(0,ta.jsx)("input",{type:"number",value:I.drop_points,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{drop_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Points"}),(0,ta.jsx)("input",{type:"number",value:I.max_points,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{max_points:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]})}),"Deals Rummy"===I.rummy_variant&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Number of Deals"}),(0,ta.jsx)("input",{type:"number",value:I.number_of_deals,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{number_of_deals:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Players"}),(0,ta.jsx)("input",{type:"number",value:I.min_players,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{min_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Players *"}),(0,ta.jsx)("input",{type:"number",value:I.max_players,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{max_players:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"2",max:"6",required:!0})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Entry Fee (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:I.entry_fee,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{entry_fee:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Min Buy-in (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:I.min_buy_in,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{min_buy_in:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Max Buy-in (\u20b9)"}),(0,ta.jsx)("input",{type:"number",value:I.max_buy_in,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{max_buy_in:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"0"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Deal Duration (minutes)"}),(0,ta.jsx)("input",{type:"number",value:I.deal_duration,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{deal_duration:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",min:"1"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Notes"}),(0,ta.jsx)("textarea",{value:I.notes,onChange:e=>D((0,n.A)((0,n.A)({},I),{},{notes:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Additional notes about this table..."})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mt-6",children:[(0,ta.jsx)("button",{type:"submit",disabled:T.isLoading||_.isLoading||!t,className:"flex-1 bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white py-3 rounded-lg font-semibold disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:T.isLoading||_.isLoading?(0,ta.jsxs)("span",{className:"flex items-center justify-center",children:[(0,ta.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ta.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ta.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),c?"Updating...":"Creating..."]}):c?"Update Table":"Create Table"}),c&&(0,ta.jsx)("button",{type:"button",onClick:()=>{u(null),L(),i("all")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white py-3 rounded-lg font-semibold transition-all",children:"Cancel"})]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold mb-4",children:"Dealer Assignment"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,ta.jsxs)("select",{value:m,onChange:e=>x(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t,children:[(0,ta.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,ta.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber," - ",e.rummyVariant||"Rummy"," (",e.status,")"]},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Assign Dealer"}),(0,ta.jsxs)("select",{value:h,onChange:e=>p(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",disabled:!t||f,children:[(0,ta.jsx)("option",{value:"",children:"-- Select Dealer --"}),f?(0,ta.jsx)("option",{disabled:!0,children:"Loading dealers..."}):0===P.length?(0,ta.jsx)("option",{disabled:!0,children:y.length>0?"No dealers available (all assigned, on leave, or no shift today)":"No active dealers found"}):P.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.employeeId||"No ID",")"]},e.id))]})]})]}),(0,ta.jsx)("button",{onClick:()=>{m&&h?A.mutate({tableId:m,dealerId:h}):vl.error("Please select both table and dealer")},disabled:!m||!h||A.isLoading||!t,className:"mt-4 bg-purple-600 hover:bg-purple-500 px-6 py-2 rounded-lg font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:A.isLoading?"Assigning...":"Assign Dealer"}),0===y.length&&!f&&t&&(0,ta.jsx)("p",{className:"mt-2 text-sm text-yellow-400",children:"\u26a0\ufe0f No active dealers found. Please create dealer staff members first."}),0===P.length&&y.length>0&&!f&&(0,ta.jsx)("p",{className:"mt-2 text-sm text-amber-400",children:"\u2139\ufe0f No dealers available. They may be assigned, on leave, or don't have a shift today."})]})]})}function Jn(e){let{selectedClubId:t,tables:s,waitlist:a,waitlistLoading:l}=e;return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Waitlist Management"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Current Waitlist"}),l?(0,ta.jsxs)("div",{className:"text-center py-8",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-emerald-500 mx-auto mb-2"}),(0,ta.jsx)("p",{className:"text-sm",children:"Loading..."})]}):0===a.length?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No players in waitlist"}):(0,ta.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-600 p-4 rounded-lg",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:e.playerName}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Position: ",e.priority||"N/A"]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Table Type: ",e.tableType||"Any"]})]}),(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status})]}),(0,ta.jsxs)("div",{className:"flex gap-2 mt-3",children:[(0,ta.jsx)("button",{className:"flex-1 bg-emerald-600 hover:bg-emerald-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"\ud83c\udfaf View Table"}),(0,ta.jsx)("button",{className:"flex-1 bg-red-600 hover:bg-red-500 px-3 py-1.5 rounded text-sm font-medium transition-colors",children:"Remove"})]})]},e.id))})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Seat Allocation"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Player"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Player --"}),a.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.playerName},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Table"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Table --"}),s.map(e=>(0,ta.jsxs)("option",{value:e.id,children:["Table ",e.tableNumber]},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Seat Number"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Seat --"}),[1,2,3,4,5,6].map(e=>(0,ta.jsxs)("option",{value:e,children:["Seat ",e]},e))]})]}),(0,ta.jsx)("button",{className:"w-full bg-purple-600 hover:bg-purple-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Assign Seat"})]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Player Call & Reorder"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Call Players"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsx)("button",{className:"w-full bg-green-600 hover:bg-green-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call Next Player"}),(0,ta.jsx)("button",{className:"w-full bg-emerald-600 hover:bg-emerald-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Call All Players"}),(0,ta.jsx)("button",{className:"w-full bg-yellow-600 hover:bg-yellow-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Send SMS Notification"})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Reorder Waitlist"}),(0,ta.jsx)("div",{className:"space-y-2",children:0===a.length?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400 text-sm",children:"No players to reorder"}):a.map((e,t)=>(0,ta.jsxs)("div",{className:"bg-slate-600 p-3 rounded flex justify-between items-center",children:[(0,ta.jsxs)("span",{className:"text-white",children:[t+1,". ",e.playerName]}),(0,ta.jsxs)("div",{className:"flex gap-1",children:[(0,ta.jsx)("button",{disabled:0===t,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2191"}),(0,ta.jsx)("button",{disabled:t===a.length-1,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white px-2 py-1 rounded text-xs transition-colors",children:"\u2193"})]})]},e.id))})]})]})]})]})}function Kn(e){let{selectedClubId:t,tables:s}=e;const[l,r]=(0,a.useState)("process-buyout");return(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-orange-600/30 via-red-500/20 to-rose-700/30 rounded-xl p-6 border border-orange-800/40",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Rummy Table Buy-Out"}),(0,ta.jsx)("p",{className:"text-gray-300 text-sm mb-6",children:"Manage player buy-out requests and process manual buy-outs for rummy tables."}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-orange-800/40 pb-4 mb-6",children:[(0,ta.jsx)("button",{onClick:()=>r("process-buyout"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("process-buyout"===l?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Process Buy-Out"}),(0,ta.jsx)("button",{onClick:()=>r("player-requests"),className:"px-5 py-2 rounded-t-lg font-semibold transition-all ".concat("player-requests"===l?"bg-gradient-to-r from-orange-600 to-red-700 text-white shadow-lg":"bg-slate-700 text-gray-400 hover:bg-slate-600"),children:"Player Requests"})]}),"process-buyout"===l&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Process Buy-Out"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Select Seated Player"}),(0,ta.jsx)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",children:(0,ta.jsx)("option",{value:"",children:"-- Select Player --"})})]}),(0,ta.jsx)("div",{className:"p-4 bg-emerald-500/20 rounded-lg border border-emerald-400/30",children:(0,ta.jsxs)("div",{className:"text-sm text-white space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Player:"}),(0,ta.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Table:"}),(0,ta.jsx)("span",{className:"font-semibold",children:"-"})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Current Table Balance:"}),(0,ta.jsx)("span",{className:"font-semibold text-emerald-300",children:"0 chips"})]})]})}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Reason (Optional)"}),(0,ta.jsx)("textarea",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",rows:"3",placeholder:"Enter reason for buy-out (optional)..."})]}),(0,ta.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 px-4 py-3 rounded-lg font-semibold transition-colors",children:"Approve Buy-Out"})]})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-5 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Buy-Out Information"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"p-4 bg-white/5 rounded-lg border border-white/10",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold mb-2",children:"How Buy-Out Works:"}),(0,ta.jsxs)("ul",{className:"text-sm text-gray-300 space-y-2 list-disc list-inside",children:[(0,ta.jsx)("li",{children:"Select a player who is currently seated at a rummy table"}),(0,ta.jsx)("li",{children:"Their table chip balance will be moved to their available balance"}),(0,ta.jsx)("li",{children:"Player will be removed from the table (seat becomes available)"}),(0,ta.jsx)("li",{children:"Player can then convert chips to real money at the cashier counter"})]})]}),(0,ta.jsxs)("div",{className:"p-4 bg-yellow-500/20 rounded-lg border border-yellow-400/30",children:[(0,ta.jsx)("h4",{className:"text-yellow-300 font-semibold mb-2",children:"\u26a0\ufe0f Important Notes:"}),(0,ta.jsxs)("ul",{className:"text-sm text-yellow-200 space-y-1 list-disc list-inside",children:[(0,ta.jsx)("li",{children:"Buy-out approval is permanent and cannot be undone"}),(0,ta.jsx)("li",{children:"Table balance will be immediately transferred to player's available balance"}),(0,ta.jsx)("li",{children:"Player must go to cashier to convert chips to real money"})]})]}),(0,ta.jsx)("div",{className:"p-4 bg-green-500/20 rounded-lg border border-green-400/30",children:(0,ta.jsxs)("div",{className:"text-sm text-green-300",children:[(0,ta.jsx)("div",{className:"font-semibold mb-1",children:"Currently Seated Players:"}),(0,ta.jsx)("div",{className:"text-green-200",children:"0 player(s) at rummy tables"})]})})]})]})]}),"player-requests"===l&&(0,ta.jsx)(vr,{clubId:t})]})})}function Qn(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("tournaments");return t?(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Management"})}),(0,ta.jsxs)("div",{className:"flex gap-4 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("tournaments"),className:"px-6 py-3 font-medium transition-colors ".concat("tournaments"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Rummy Tournaments"}),(0,ta.jsx)("button",{onClick:()=>l("tables"),className:"px-6 py-3 font-medium transition-colors ".concat("tables"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Rummy Tables"})]}),(0,ta.jsxs)("div",{className:"mt-6",children:["tournaments"===s&&(0,ta.jsx)(qn,{selectedClubId:t}),"tables"===s&&(0,ta.jsx)(zn,{selectedClubId:t})]})]}):(0,ta.jsxs)("div",{className:"text-white",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Rummy Management"}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,ta.jsx)("p",{className:"text-gray-400",children:"Please select a club to manage Rummy tournaments and tables."})})]})}const Gn=198e5,Yn=e=>{if(!e)return null;const t="string"===typeof e?new Date(e):e;return new Date(t.getTime()+Gn)},$n=e=>{if(!e)return"";const t=Yn(e),s=String(t.getDate()).padStart(2,"0"),a=String(t.getMonth()+1).padStart(2,"0"),l=t.getFullYear();return"".concat(s,"/").concat(a,"/").concat(l)},Zn=e=>{if(!e)return"";const t=Yn(e);return"".concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()]," ").concat(t.getFullYear())},Xn=()=>Yn(new Date);function ei(e){let{selectedClubId:t,recipientType:s="staff"}=e;const l=aa(),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(1),{data:d,isLoading:c}=ur({queryKey:["notificationInbox",t,s],queryFn:()=>jl.Dv.getNotificationInbox(t,s),enabled:!!t,refetchInterval:3e4}),u=(null===d||void 0===d?void 0:d.notifications)||[],m=(null===d||void 0===d||d.total,[...u].sort((e,t)=>e.isRead!==t.isRead?e.isRead?1:-1:new Date(t.sentAt||t.createdAt)-new Date(e.sentAt||e.createdAt))),x=Math.ceil(m.length/10),h=10*(i-1),p=m.slice(h,h+10),b=pr({mutationFn:e=>jl.Dv.markNotificationAsRead(t,e,s),onSuccess:()=>{l.invalidateQueries(["notificationInbox",t,s]),l.invalidateQueries(["unreadNotificationCount",t,s])}}),g=pr({mutationFn:()=>jl.Dv.markAllNotificationsAsRead(t,s),onSuccess:()=>{vl.success("All notifications marked as read"),l.invalidateQueries(["notificationInbox",t,s]),l.invalidateQueries(["unreadNotificationCount",t,s])},onError:e=>{vl.error(e.message||"Failed to mark all as read")}}),f=pr({mutationFn:e=>jl.Dv.deletePushNotification(t,e),onSuccess:()=>{vl.success("Notification deleted"),n(null),l.invalidateQueries(["notificationInbox",t,s]),l.invalidateQueries(["unreadNotificationCount",t,s]),l.invalidateQueries(["pushNotifications",t])},onError:e=>{vl.error(e.message||"Failed to delete notification")}}),y=e=>{n(e),e.isRead||b.mutate(e.id)},v=u.filter(e=>!e.isRead).length,j=e=>{e.isRead&&window.confirm('Delete "'.concat(e.title,'"?'))?f.mutate(e.id):e.isRead||vl.error("Please read the notification before deleting")};return(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"\ud83d\udcec Notifications"}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm mt-1",children:[v>0?"".concat(v," unread \u2022 "):"",m.length," total"]})]}),v>0&&(0,ta.jsx)("button",{onClick:()=>g.mutate(),disabled:g.isPending,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Mark All as Read"})]}),c?(0,ta.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading notifications..."}):0===m.length?(0,ta.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-lg border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udced"}),(0,ta.jsx)("p",{className:"text-gray-400 text-lg",children:"No notifications yet"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"space-y-3",children:p.map(e=>(0,ta.jsx)("div",{onClick:()=>y(e),className:"p-4 rounded-lg border cursor-pointer transition-all ".concat(e.isRead?"bg-slate-800 border-slate-700 hover:border-slate-600":"bg-blue-900/20 border-blue-600 hover:border-blue-500"),children:(0,ta.jsxs)("div",{className:"flex items-start gap-3",children:[!e.isRead&&(0,ta.jsx)("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2 flex-shrink-0"}),(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white mb-1",children:e.title}),e.details&&(0,ta.jsx)("p",{className:"text-gray-300 text-sm mb-2 line-clamp-2",children:e.details}),(0,ta.jsxs)("div",{className:"flex items-center gap-3 text-xs text-gray-400",children:[(0,ta.jsx)("span",{children:new Date(e.sentAt||e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})}),e.isRead&&e.readAt&&(0,ta.jsxs)("span",{className:"text-green-400",children:["\u2713 Read on"," ",Zn(e.readAt)]})]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),y(e)},className:"px-3 py-1 bg-blue-600 hover:bg-blue-700 text-white text-sm rounded transition-colors",children:"View"}),e.isRead&&(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),j(e)},disabled:f.isPending,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors disabled:opacity-50",children:"Delete"})]})]})},e.id))}),x>1&&(0,ta.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>o(e=>Math.max(1,e-1)),disabled:1===i,className:"px-4 py-2 bg-slate-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("div",{className:"flex items-center gap-2",children:Array.from({length:x},(e,t)=>t+1).map(e=>(0,ta.jsx)("button",{onClick:()=>o(e),className:"w-10 h-10 rounded-lg font-semibold transition-colors ".concat(e===i?"bg-blue-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:e},e))}),(0,ta.jsx)("button",{onClick:()=>o(e=>Math.min(x,e+1)),disabled:i===x,className:"px-4 py-2 bg-slate-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]}),r&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",onClick:()=>n(null),children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-slate-700",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:r.title}),(0,ta.jsx)("button",{onClick:()=>n(null),className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),r.details&&(0,ta.jsx)("p",{className:"text-gray-300 mb-4 whitespace-pre-wrap",children:r.details}),r.imageUrl&&(0,ta.jsx)("img",{src:r.imageUrl,alt:r.title,className:"w-full rounded-lg mb-4"}),r.videoUrl&&(0,ta.jsx)("video",{src:r.videoUrl,controls:!0,className:"w-full rounded-lg mb-4"}),(0,ta.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-400 pt-4 border-t border-slate-700",children:[(0,ta.jsxs)("span",{children:["Sent on"," ",new Date(r.sentAt||r.createdAt).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"})]}),r.isRead&&r.readAt&&(0,ta.jsxs)("span",{className:"text-green-400",children:["\u2713 Read on"," ",$n(r.readAt)]})]}),r.isRead&&(0,ta.jsx)("button",{onClick:()=>j(r),disabled:f.isPending,className:"w-full mt-4 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg font-semibold transition-colors disabled:opacity-50",children:f.isPending?"Deleting...":"Delete Notification"})]})})]})}function ti(){var e,t,s,l,r,i,o,d,c;const u=ue(),m=aa(),[x,h]=(0,a.useState)("Dashboard"),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[y,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=localStorage.getItem("clubId");e?b(e):u("/login")},[u]);const{data:N,isLoading:S}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p});(0,a.useEffect)(()=>{N&&f(N)},[N]),(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=jl.R2.getCurrentUser();if(!e.id)return void u("/login");const s="MANAGER"===e.role||"MANAGER"===(null===t||void 0===t?void 0:t.role),a="SUPER_ADMIN"===e.role||"SUPER_ADMIN"===(null===t||void 0===t?void 0:t.role),l="ADMIN"===e.role||"ADMIN"===(null===t||void 0===t?void 0:t.role),r=e.isMasterAdmin||(null===t||void 0===t?void 0:t.isMasterAdmin);if(!s&&!a&&!l&&!r){const s=(null===t||void 0===t?void 0:t.role)||e.role,a={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",ADMIN:"/admin",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},l=s&&a[s]?a[s]:"/login";return void u(l,{replace:!0})}e.mustResetPassword&&v(!0)},[u]);const{data:C,isLoading:k}=ur({queryKey:["clubRevenue",p],queryFn:()=>jl.Od.getClubRevenue(p),enabled:!!p,refetchInterval:3e4}),{data:P,isLoading:A}=ur({queryKey:["clubPlayers",p],queryFn:()=>jl.bS.getPlayers(p,{limit:100}),enabled:!!p}),{data:I=[],isLoading:D}=ur({queryKey:["pendingPlayers",p],queryFn:()=>jl.bS.getPendingApprovalPlayers(p),enabled:!!p}),{data:T=[],isLoading:_}=ur({queryKey:["suspendedPlayers",p],queryFn:()=>jl.bS.getSuspendedPlayers(p),enabled:!!p}),E=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),R=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),v(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),L=y&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}").email;t?j.currentPassword&&j.newPassword&&j.confirmPassword?j.newPassword===j.confirmPassword?j.newPassword.length<8?vl.error("Password must be at least 8 characters"):R.mutate({email:t,currentPassword:j.currentPassword,newPassword:j.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:j.currentPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:j.newPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:j.confirmPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:R.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:R.isLoading?"Resetting...":"Reset Password"})]})]})});return S||!p?(0,ta.jsxs)(ta.Fragment,{children:[L,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-white text-center",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]}):(0,ta.jsxs)(ta.Fragment,{children:[L,(0,ta.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,ta.jsx)(fr,{activeItem:x,setActiveItem:h,onSignOut:()=>{localStorage.clear(),u("/login")},clubInfo:g||N}),(0,ta.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===x&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===g||void 0===g?void 0:g.name)||(null===N||void 0===N?void 0:N.name)||"Loading..."]})}),k?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading revenue data..."})]}):(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(e=C.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(t=C.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:E((null===C||void 0===C||null===(s=C.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(l=C.currentDay)||void 0===l?void 0:l.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(r=C.currentDay)||void 0===r?void 0:r.rake)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(i=C.previousDay)||void 0===i?void 0:i.rake)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(o=C.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(d=C.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,ta.jsx)("span",{className:"text-white font-semibold",children:A?"...":(null===P||void 0===P||null===(c=P.players)||void 0===c?void 0:c.length)||0})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,ta.jsx)("span",{className:"text-yellow-400 font-semibold",children:D?"...":I.length})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,ta.jsx)("span",{className:"text-red-400 font-semibold",children:_?"...":T.length})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,ta.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",D?"...":I.length,")"]}),(0,ta.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",_?"...":T.length,")"]})]})]})]})]}),"Player Management"===x&&(0,ta.jsx)(yr,{selectedClubId:p,playersData:P,playersLoading:A,pendingPlayers:I,pendingLoading:D,suspendedPlayers:T,suspendedLoading:_,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,ta.jsx)(jr,{selectedClubId:p}),"Rake Collection"===x&&(0,ta.jsx)(Bn,{clubId:p}),"Push Notifications"===x&&(0,ta.jsx)(Hr,{selectedClubId:p}),"Tournaments"===x&&(0,ta.jsx)(Qr,{selectedClubId:p}),"Chat"===x&&p&&(0,ta.jsx)(En,{clubId:p}),"Rummy"===x&&p&&(0,ta.jsx)(Qn,{selectedClubId:p}),"Notifications"===x&&p&&(0,ta.jsx)(ei,{selectedClubId:p,recipientType:"staff"}),!["Dashboard","Player Management","Tables & Waitlist","Rake Collection","Push Notifications","Tournaments","Chat","Rummy","Notifications"].includes(x)&&(0,ta.jsx)("div",{className:"text-white",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]})}function si(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ur({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:g}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=f.email||"gre@pokerroom.com",v=f.displayName||"GRE",j=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[d&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-blue-500 to-indigo-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!i),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-blue-500/20 via-indigo-600/30 to-purple-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?i?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 via-indigo-300 to-purple-400 drop-shadow-lg mb-6",children:"GRE Portal"}),(0,ta.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-400 to-indigo-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"G"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:v}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:y})]})]}),u&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?vl.error("Password must be at least 8 characters"):j.mutate({email:y,currentPassword:x.currentPassword,newPassword:x.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:j.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:j.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),g&&g.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:g.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:l.map((e,a)=>(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-blue-400 to-indigo-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-blue-400/20 hover:to-indigo-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount})]})},a))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function ai(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).map(e=>"string"===typeof e?e:"object"===typeof e&&null!==e?Object.entries(e).filter(e=>{let[t,s]=e;return Boolean(s)}).map(e=>{let[t]=e;return t}).join(" "):"").join(" ").replace(/\s+/g," ").trim()}const li=["className","variant","size","asChild","children"],ri=a.forwardRef((e,t)=>{let{className:s,variant:l="default",size:i="default",asChild:o=!1,children:d}=e,c=r(e,li);const u=((e,t,s)=>{const a={default:"bg-blue-600 text-white hover:bg-blue-700",destructive:"bg-red-600 text-white hover:bg-red-700",outline:"border border-gray-300 bg-transparent hover:bg-gray-100 text-gray-900",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300",ghost:"hover:bg-gray-100 text-gray-900",link:"text-blue-600 underline-offset-4 hover:underline"},l={default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"};return ai("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",a[e]||a.default,l[t]||l.default,s)})(l,i,s);return o&&a.isValidElement(d)?a.cloneElement(d,(0,n.A)({className:ai(u,d.props.className),ref:t},c)):(0,ta.jsx)("button",(0,n.A)((0,n.A)({className:u,ref:t},c),{},{children:d}))});ri.displayName="Button";const ni=["className"],ii=["className"],oi=["className"],di=["className"],ci=["className"],ui=["className"],mi=a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,ni);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("rounded-lg border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 shadow-sm",s)},a))});mi.displayName="Card";a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,ii);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("flex flex-col space-y-1.5 p-6",s)},a))}).displayName="CardHeader";a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,oi);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("text-2xl font-semibold leading-none tracking-tight",s)},a))}).displayName="CardTitle";a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,di);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("text-sm text-gray-500 dark:text-gray-400",s)},a))}).displayName="CardDescription";const xi=a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,ci);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("p-6 pt-0",s)},a))});xi.displayName="CardContent";a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,ui);return(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("flex items-center p-6 pt-0",s)},a))}).displayName="CardFooter";const hi=["asChild","children"],pi=["className"],bi=["className","children"],gi=["className"],fi=["className"],yi=["className"],vi=e=>{let{className:t}=e;return(0,ta.jsxs)("svg",{className:t,width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,ta.jsx)("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),(0,ta.jsx)("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})},ji=a.createContext({open:!1,onOpenChange:()=>{}}),wi=e=>{let{open:t,onOpenChange:s,children:l}=e;const[r,n]=a.useState(t||!1);a.useEffect(()=>{n(t||!1)},[t]);return(0,ta.jsx)(ji.Provider,{value:{open:r,onOpenChange:e=>{n(e),s&&s(e)}},children:l})},Ni=e=>{let{children:t}=e;return(0,ta.jsx)(ta.Fragment,{children:t})},Si=e=>{let{asChild:t,children:s}=e,l=r(e,hi);const{onOpenChange:i}=a.useContext(ji);return t&&a.isValidElement(s)?a.cloneElement(s,(0,n.A)({onClick:e=>{i(!1),s.props.onClick&&s.props.onClick(e)}},l)):(0,ta.jsx)("button",(0,n.A)((0,n.A)({onClick:()=>i(!1)},l),{},{children:s}))},Ci=a.forwardRef((e,t)=>{let{className:s}=e,l=r(e,pi);const{open:i,onOpenChange:o}=a.useContext(ji);return i?(0,ta.jsx)("div",(0,n.A)({ref:t,className:ai("fixed inset-0 z-50 bg-black/80 animate-in fade-in-0",s),onClick:()=>o(!1)},l)):null});Ci.displayName="DialogOverlay";const ki=a.forwardRef((e,t)=>{let{className:s,children:l}=e,i=r(e,bi);const{open:o,onOpenChange:d}=a.useContext(ji);return a.useEffect(()=>{const e=e=>{"Escape"===e.key&&o&&d(!1)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[o,d]),o?(0,ta.jsxs)(Ni,{children:[(0,ta.jsx)(Ci,{}),(0,ta.jsxs)("div",(0,n.A)((0,n.A)({ref:t,className:ai("fixed left-[50%] top-[50%] z-50 grid w-[95vw] max-w-lg max-h-[90vh] translate-x-[-50%] translate-y-[-50%] gap-4 border bg-white dark:bg-gray-800 text-gray-900 dark:text-gray-100 p-6 sm:p-8 shadow-lg duration-200 rounded-lg overflow-y-auto animate-in fade-in-0 zoom-in-95",s),onClick:e=>e.stopPropagation()},i),{},{children:[l,(0,ta.jsxs)(Si,{className:"absolute right-4 top-4 sm:right-6 sm:top-6 rounded-full bg-white/10 hover:bg-white/20 p-2 transition-all duration-200 hover:scale-110 focus:outline-none focus:ring-2 focus:ring-white/50 focus:ring-offset-2 focus:ring-offset-transparent disabled:pointer-events-none z-10 backdrop-blur-sm border border-white/20",children:[(0,ta.jsx)(vi,{className:"h-5 w-5 text-white drop-shadow-lg"}),(0,ta.jsx)("span",{className:"sr-only",children:"Close"})]})]}))]}):null});ki.displayName="DialogContent";const Pi=e=>{let{className:t}=e,s=r(e,gi);return(0,ta.jsx)("div",(0,n.A)({className:ai("flex flex-col space-y-2 text-center sm:text-left pr-16 sm:pr-20 pb-4",t)},s))};Pi.displayName="DialogHeader";const Ai=a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,fi);return(0,ta.jsx)("h2",(0,n.A)({ref:t,className:ai("text-lg font-semibold leading-none tracking-tight",s)},a))});Ai.displayName="DialogTitle";const Ii=a.forwardRef((e,t)=>{let{className:s}=e,a=r(e,yi);return(0,ta.jsx)("p",(0,n.A)({ref:t,className:ai("text-sm text-gray-500 dark:text-gray-400",s)},a))});Ii.displayName="DialogDescription";const Di=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"\u2190"})},Ti=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"\ud83d\udc65"})},_i=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"\ud83d\udd50"})},Ei=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"\u20b9"})},Ri=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"+"})},Li=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"+"})},Oi=e=>{let{className:t}=e;return(0,ta.jsx)("span",{className:t,children:"\xd7"})},Mi=()=>null;function Fi(e){var t;let{tableId:s,onNavigate:l,onClose:r,isManagerMode:n=!1,isViewOnly:i=!1,selectedPlayerForSeating:o=null,occupiedSeats:d={},onSeatAssign:c=null,tables:u=null}=e;const m=s?String(s):"1",x=l||(e=>{console.log("Navigate to:",e)}),[h,p]=(0,a.useState)(null),[b,g]=(0,a.useState)(!1),{toast:f}={toast:e=>{let{title:t,description:s,variant:a}=e;console.log("Toast [".concat(a||"info","]: ").concat(t," - ").concat(s)),alert("".concat(t,": ").concat(s))}},y=u||[{id:"1",name:"Main Table",gameType:"Texas Hold'em",stakes:"\u20b91000.00/10000.00",maxPlayers:6,status:"active"},{id:"2",name:"VIP Table",gameType:"Texas Hold'em",stakes:"\u20b95000.00/50000.00",maxPlayers:9,status:"active"},{id:"3",name:"High Stakes",gameType:"Texas Hold'em",stakes:"\u20b910000.00/100000.00",maxPlayers:6,status:"active"}],v=Array.isArray(y)?y:[],{user:j}={user:{id:null}},w={isInActiveGame:!1,activeGameInfo:null,seatedSessionFallback:null},N=v.find(e=>String(e.id)===String(m)),S=n&&d[m]||[],C=[],k=Array.isArray(C)?C:[],P=n?S.map((e,t)=>({seatNumber:e,player:{firstName:"Player",lastName:String(e)},session_buy_in_amount:0})):[],A=Array.isArray(P)?P:[],I={pot:"50000"},D=k.some(e=>e.tableId===m),T=k.find(e=>e.tableId===m),_=!n&&w.isInActiveGame&&(null===(t=w.activeGameInfo)||void 0===t?void 0:t.tableId)===m,E=w.activeGameInfo||w.seatedSessionFallback,R=e=>{i||(n&&c&&o?(c({playerId:o.id||o.playerId,playerName:o.playerName||o.name,tableId:parseInt(m),seatNumber:e}),f({title:"Seat Assigned!",description:"".concat(o.playerName||o.name," assigned to Seat ").concat(e)}),p(null),g(!1),r&&r()):(f({title:"Joined Waitlist!",description:"You've been added to the waitlist successfully (dummy mode)"}),p(null),g(!1)))};return N?(0,ta.jsxs)("div",{className:"min-h-screen h-fit bg-gradient-to-b from-slate-900 to-slate-800 text-white",children:[(0,ta.jsxs)("div",{className:"p-4 flex justify-between",children:[(0,ta.jsxs)(ri,{variant:"ghost",onClick:()=>r?r():x("/"),className:"text-white hover:bg-white/20",children:[(0,ta.jsx)(Di,{className:"w-4 h-4 mr-2"}),"Back"]}),(0,ta.jsxs)("div",{className:"flex gap-4 w-fit flex-col",children:[(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("h1",{className:"text-2xl font-bold text-white",children:N.name}),(0,ta.jsxs)("p",{className:"text-slate-300",children:[N.gameType," \u2022 ",N.stakes]})]}),(0,ta.jsx)("div",{className:"",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-yellow-600 via-amber-500 to-orange-500 border-2 border-yellow-400/80 px-4 py-2 rounded-lg text-center shadow-xl",children:[(0,ta.jsx)("div",{className:"text-yellow-200 text-xs font-semibold",children:"Table Value"}),(0,ta.jsxs)("div",{className:"text-white text-lg font-bold",children:["\u20b9",null!==I&&void 0!==I&&I.pot?parseFloat(I.pot).toLocaleString():"0"]})]})})]}),(0,ta.jsx)("div",{className:"w-16"})," "]}),D&&T&&!_&&(0,ta.jsx)("div",{className:"mx-4 mb-4 p-4 bg-gradient-to-r from-amber-600/20 to-amber-500/20 border border-amber-500/50 rounded-lg",children:(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-amber-200 font-semibold",children:"You're on the waitlist!"}),(0,ta.jsxs)("p",{className:"text-amber-100 text-sm",children:["Waiting for seat"," ",T.seatNumber||T.preferredSeat," \u2022 Position in queue: ",T.position||"TBD"]})]}),(0,ta.jsx)("div",{className:"text-amber-300",children:(0,ta.jsx)(_i,{className:"w-5 h-5"})})]})}),!n&&_&&(null===j||void 0===j?void 0:j.id)&&(0,ta.jsx)("div",{className:"mx-4 mb-4",children:(0,ta.jsx)(Mi,{playerId:j.id.toString(),gameStatus:w})}),(0,ta.jsxs)("div",{className:"flex-1 flex flex-col items-center px-4 py-8",children:[(0,ta.jsx)("div",{className:"relative w-full max-w-4xl",children:(0,ta.jsx)("div",{className:"relative aspect-[5/3] max-w-2xl mx-auto mb-12 mt-8",children:(0,ta.jsx)("div",{className:"absolute inset-0 rounded-[50%] bg-gradient-to-br from-amber-600 via-yellow-500 to-amber-600 p-2 shadow-2xl",children:(0,ta.jsxs)("div",{className:"absolute inset-2 rounded-[50%] bg-gradient-to-br from-emerald-600 via-emerald-700 to-emerald-800 shadow-inner",children:[Array.from({length:N.maxPlayers||6},(e,t)=>{const s=t+1,a=(N.maxPlayers||6)+1,l=(t+1)*(2*Math.PI/a)-Math.PI/2,r=50+42*Math.cos(l),d=50+32*Math.sin(l),c=h===s,u=A.find(e=>e.seatNumber===s),x=n?S.includes(s):!!u,b=(null===u||void 0===u?void 0:u.session_buy_in_amount)||(null===u||void 0===u?void 0:u.sessionBuyInAmount)||0,y=!(!n||!o)&&(o.preferredSeat===s&&String(o.preferredTable)===String(m));return(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-50",style:{left:"".concat(r,"%"),top:"".concat(d,"%")},children:[(0,ta.jsx)("div",{className:"w-10 h-10 rounded-full border-2 flex items-center justify-center shadow-lg transition-all duration-300 select-none ".concat(x?"bg-gradient-to-br from-blue-600 to-blue-700 border-blue-500 cursor-not-allowed":i?"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 cursor-default":c||y?"border-emerald-400 shadow-emerald-500/50 scale-110 bg-gradient-to-br from-emerald-600 to-emerald-700 animate-pulse cursor-pointer":n?"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 hover:border-yellow-400 hover:shadow-yellow-400/50 hover:scale-105 cursor-pointer active:scale-95":"bg-gradient-to-br from-slate-700 to-slate-800 border-slate-600 hover:border-emerald-400 hover:shadow-emerald-400/50 hover:scale-105 cursor-pointer active:scale-95"),onClick:e=>{e.preventDefault(),e.stopPropagation(),i||x||(n?(e=>{if(i||!n||!o)return;S.includes(e)?f({title:"Seat Occupied",description:"Seat ".concat(e," is already occupied"),variant:"destructive"}):(p(e),g(!0))})(s):(p(s),g(!0)))},style:{pointerEvents:i?"none":"auto",touchAction:"manipulation"},title:i?"Seat ".concat(s," (View Only)"):n&&y?"Preferred seat for ".concat(o.playerName||o.name):"Seat ".concat(s),children:x&&null!==u&&void 0!==u&&u.player?(0,ta.jsxs)("span",{className:"text-white text-xs font-bold",children:[u.player.firstName.charAt(0),u.player.lastName.charAt(0)]}):i?(0,ta.jsx)("span",{className:"text-slate-400 text-xs",children:"\u25cb"}):(0,ta.jsx)(Li,{className:"w-3 h-3 text-emerald-400 font-bold transition-transform duration-300 ".concat(c?"rotate-45 scale-110":"hover:rotate-90 hover:scale-110")})}),(0,ta.jsxs)("div",{className:"absolute -bottom-8 left-1/2 transform -translate-x-1/2 text-center transition-colors ".concat(x?"text-blue-400":c||y?"text-emerald-400":"text-slate-300"),children:[(0,ta.jsx)("div",{className:"text-xs font-medium",children:x&&null!==u&&void 0!==u&&u.player?u.player.firstName:"Seat ".concat(s)}),y&&(0,ta.jsx)("div",{className:"text-[9px] text-yellow-400 bg-yellow-900/50 px-1 rounded mt-1 font-semibold",children:"\u2b50 Preferred"}),x&&b>0&&(0,ta.jsxs)("div",{className:"text-[10px] text-slate-400 bg-slate-800/80 px-1 rounded mt-1",children:["\u20b9",b.toLocaleString()]})]})]},s)}),(0,ta.jsxs)("div",{className:"absolute transform -translate-x-1/2 -translate-y-1/2 z-40",style:{left:"50%",top:"8%"},children:[(0,ta.jsx)("div",{className:"w-7 h-7 bg-gradient-to-br from-yellow-600 to-yellow-700 rounded-full border-2 border-yellow-500 flex items-center justify-center shadow-xl",children:(0,ta.jsx)("span",{className:"text-xs font-bold text-white",children:"D"})}),(0,ta.jsx)("div",{className:"absolute -bottom-4 left-1/2 transform -translate-x-1/2 text-xs text-yellow-400 font-medium whitespace-nowrap",children:"Dealer"})]}),(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center",children:(0,ta.jsx)("div",{className:"text-center",children:(0,ta.jsx)("div",{className:"w-24 h-24 bg-white/10 rounded-full border-2 border-white/20 flex items-center justify-center shadow-xl backdrop-blur-sm overflow-hidden",children:(0,ta.jsx)("img",{src:"https://img.freepik.com/free-vector/flat-design-culture-logo-template_23-2149845368.jpg?semt=ais_hybrid&w=740&q=80",alt:"Table Logo",className:"w-full h-full object-contain rounded-full"})})})})]})})})}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-8 w-full max-w-4xl",children:[(0,ta.jsx)(mi,{className:"bg-slate-800 border-slate-700",children:(0,ta.jsxs)(xi,{className:"p-4 text-center",children:[(0,ta.jsx)(Ti,{className:"w-8 h-8 text-blue-400 mx-auto mb-2"}),(0,ta.jsx)("div",{className:"text-slate-400 text-sm",children:"Players"}),(0,ta.jsxs)("div",{className:"text-white text-xl font-bold",children:[A.length||0,"/",(null===N||void 0===N?void 0:N.maxPlayers)||6]})]})}),(0,ta.jsx)(mi,{className:"bg-slate-800 border-slate-700",children:(0,ta.jsxs)(xi,{className:"p-4 text-center",children:[(0,ta.jsx)(Ei,{className:"w-8 h-8 text-emerald-400 mx-auto mb-2"}),(0,ta.jsx)("div",{className:"text-slate-400 text-sm",children:"Buy-in Range"}),(0,ta.jsx)("div",{className:"text-white text-lg font-bold",children:(null===N||void 0===N?void 0:N.stakes)||"N/A"})]})}),(0,ta.jsx)(mi,{className:"bg-slate-800 border-slate-700",children:(0,ta.jsxs)(xi,{className:"p-4 text-center",children:[(0,ta.jsx)(_i,{className:"w-8 h-8 text-purple-400 mx-auto mb-2"}),(0,ta.jsx)("div",{className:"text-slate-400 text-sm",children:"Blinds"}),(0,ta.jsx)("div",{className:"text-white text-lg font-bold",children:"\u20b910/\u20b920"})]})}),(0,ta.jsx)(mi,{className:"bg-slate-800 border-slate-700",children:(0,ta.jsxs)(xi,{className:"p-4 text-center",children:[(0,ta.jsx)(_i,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),(0,ta.jsx)("div",{className:"text-slate-400 text-sm",children:"Status"}),(0,ta.jsx)("div",{className:"text-white text-lg font-bold",children:"Waiting"})]})})]}),!n&&_&&E&&(0,ta.jsx)("div",{className:"mt-8 w-full max-w-4xl",children:(0,ta.jsx)(mi,{className:"bg-gradient-to-r from-blue-800 to-blue-900 border-blue-600",children:(0,ta.jsxs)(xi,{className:"p-6",children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ta.jsx)("div",{className:"w-3 h-3 bg-green-400 rounded-full animate-pulse"}),(0,ta.jsxs)("h3",{className:"text-xl font-bold text-blue-200",children:["You are seated at Seat ",E.seatNumber]})]}),(0,ta.jsx)("div",{className:"text-blue-300 text-sm",children:"Seated at Table"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ta.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ta.jsx)(Ei,{className:"w-5 h-5 text-emerald-400"}),(0,ta.jsx)("span",{className:"text-blue-200 font-semibold",children:"Session Buy-in"})]}),(0,ta.jsxs)("div",{className:"text-2xl font-bold text-white",children:["\u20b9",(E.buyInAmount||5e3).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ta.jsx)(_i,{className:"w-5 h-5 text-yellow-400"}),(0,ta.jsx)("span",{className:"text-blue-200 font-semibold",children:"Call Time"})]}),(0,ta.jsx)("div",{className:"text-lg font-bold text-white",children:(0,ta.jsx)("div",{className:"text-green-400",children:"Available"})})]}),(0,ta.jsxs)("div",{className:"bg-blue-900/50 rounded-lg p-4 border border-blue-700",children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ta.jsx)(Di,{className:"w-5 h-5 text-purple-400"}),(0,ta.jsx)("span",{className:"text-blue-200 font-semibold",children:"Cash Out"})]}),(0,ta.jsx)("div",{className:"text-lg font-bold text-white",children:(0,ta.jsx)("div",{className:"text-slate-400",children:"Pending"})})]})]})]})})}),!_&&(0,ta.jsx)("div",{className:"mt-8 text-center",children:h?(0,ta.jsx)("div",{className:"space-y-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 border rounded-lg p-4 max-w-md mx-auto ".concat(n?"border-yellow-500/50":"border-emerald-500/50"),children:[(0,ta.jsx)("h3",{className:"font-semibold mb-2 ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assign Seat ".concat(h):"Seat ".concat(h," Selected")}),n&&o?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("p",{className:"text-slate-300 text-sm mb-2",children:["Assign"," ",(0,ta.jsx)("span",{className:"font-semibold text-white",children:o.playerName||o.name})," ","to Seat ",h]}),(0,ta.jsxs)("p",{className:"text-slate-400 text-xs mb-4",children:["Table: ",null===N||void 0===N?void 0:N.name]})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("p",{className:"text-slate-300 text-sm mb-2",children:["Reserve this seat position for ",null===N||void 0===N?void 0:N.name]}),(0,ta.jsx)("p",{className:"text-slate-400 text-xs mb-4",children:"Note: Multiple players can reserve the same seat. Staff will assign final seating."})]}),(0,ta.jsxs)("div",{className:"flex gap-3 justify-center",children:[(0,ta.jsxs)(ri,{onClick:()=>{R(h)},className:"shadow-lg transition-all duration-300 ".concat(n?"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white hover:shadow-yellow-500/25":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white hover:shadow-emerald-500/25"),children:[(0,ta.jsx)(Ri,{className:"w-4 h-4 mr-2"}),n?"Assign Seat ".concat(h):"Reserve Seat ".concat(h)]}),(0,ta.jsx)(ri,{onClick:()=>p(null),variant:"outline",className:"border-slate-600 text-slate-300 hover:bg-slate-700",children:"Cancel"})]})]})}):(0,ta.jsxs)("div",{className:"bg-slate-800/50 border border-slate-700 rounded-lg p-4 max-w-md mx-auto",children:[(0,ta.jsx)("p",{className:"text-slate-300 text-sm",children:n&&o?"Click on any available seat to assign ".concat(o.playerName||o.name):"Click on any seat to reserve your preferred position"}),(0,ta.jsx)("p",{className:"text-slate-400 text-xs mt-2",children:n?"Seats highlighted in yellow are preferred seats for this player":"Staff will manage final table assignments"})]})}),(0,ta.jsxs)("div",{className:"mt-8 text-center text-slate-400",children:[(0,ta.jsx)("p",{className:"text-sm",children:"This is a local offline poker game managed by casino staff."}),(0,ta.jsx)("p",{className:"text-xs mt-2",children:"Players are seated by super admin, admin, or manager only."})]})]}),(0,ta.jsx)(wi,{open:b,onOpenChange:g,children:(0,ta.jsxs)(ki,{className:"bg-slate-800 border-slate-700 text-white",children:[(0,ta.jsxs)(Pi,{children:[(0,ta.jsx)(Ai,{className:"text-xl ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assign Seat":"Join Table Waitlist"}),(0,ta.jsx)(Ii,{className:"text-slate-300",children:n?"Confirm seat assignment for ".concat((null===o||void 0===o?void 0:o.playerName)||(null===o||void 0===o?void 0:o.name)||"player"):"Confirm your seat reservation for ".concat(null===N||void 0===N?void 0:N.name)})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-700",children:[(0,ta.jsx)("h4",{className:"font-semibold mb-2 ".concat(n?"text-yellow-400":"text-emerald-400"),children:n?"Assignment Information":"Table Information"}),(0,ta.jsxs)("div",{className:"text-sm space-y-1 text-slate-300",children:[n&&o&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{children:["\u2022 Player:"," ",(0,ta.jsx)("span",{className:"text-white font-semibold",children:o.playerName||o.name})]}),(0,ta.jsxs)("div",{children:["\u2022 Player ID:"," ",o.playerId||o.id]}),o.preferredSeat&&(0,ta.jsxs)("div",{children:["\u2022 Preferred Seat:"," ",o.preferredSeat===h?(0,ta.jsxs)("span",{className:"text-yellow-400 font-semibold",children:["\u2713 Seat ",h," (Matches preference)"]}):(0,ta.jsxs)("span",{className:"text-gray-400",children:["Seat ",o.preferredSeat]})]})]}),(0,ta.jsxs)("div",{children:["\u2022 Table: ",null===N||void 0===N?void 0:N.name]}),(0,ta.jsxs)("div",{children:["\u2022 Game: ",null===N||void 0===N?void 0:N.gameType]}),(0,ta.jsxs)("div",{children:["\u2022 Stakes: ",null===N||void 0===N?void 0:N.stakes]}),(0,ta.jsxs)("div",{children:["\u2022 Selected Seat:"," ",(0,ta.jsx)("span",{className:"text-white font-semibold",children:h})]})]})]}),!n&&(0,ta.jsx)("div",{className:"bg-amber-900/20 border border-amber-600/50 rounded-lg p-3",children:(0,ta.jsxs)("p",{className:"text-amber-200 text-sm",children:[(0,ta.jsx)("strong",{children:"Note:"})," You will be added to the waitlist for this table. Staff will assign seating when a spot becomes available."]})}),(0,ta.jsxs)("div",{className:"flex gap-3 justify-end",children:[(0,ta.jsxs)(ri,{variant:"outline",onClick:()=>{g(!1),p(null)},className:"border-slate-600 bg-slate-800 text-slate-300 hover:bg-slate-700 hover:text-white hover:border-slate-500",children:[(0,ta.jsx)(Oi,{className:"w-4 h-4 mr-2"}),"Cancel"]}),(0,ta.jsxs)(ri,{onClick:()=>{h&&R(h)},className:n?"bg-gradient-to-r from-yellow-600 to-yellow-700 hover:from-yellow-700 hover:to-yellow-800 text-white":"bg-gradient-to-r from-emerald-600 to-emerald-700 hover:from-emerald-700 hover:to-emerald-800 text-white",children:[(0,ta.jsx)(Ri,{className:"w-4 h-4 mr-2"}),n?"Assign Seat ".concat(h):"Confirm Seat ".concat(h)]})]})]})]})})]}):(0,ta.jsx)("div",{className:"min-h-screen bg-slate-900 text-white p-4 flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Table not found"}),(0,ta.jsx)(ri,{onClick:()=>r?r():x("/"),children:"Back to Dashboard"})]})})}const Bi=[{value:"Super Admin",label:"Super Admin"},{value:"Admin",label:"Admin"},{value:"Manager",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE"},{value:"Cashier",label:"Cashier"},{value:"Dealer",label:"Dealer"},{value:"FNB",label:"FNB"},{value:"Staff",label:"Staff"}],qi={Pending:"bg-yellow-500/20 text-yellow-400 border-yellow-500/50",Approved:"bg-green-500/20 text-green-400 border-green-500/50",Rejected:"bg-red-500/20 text-red-400 border-red-500/50",Cancelled:"bg-gray-500/20 text-gray-400 border-gray-500/50"};function zi(e){let{clubId:t}=e;const s=aa(),l=JSON.parse(localStorage.getItem("user")||"{}").role||localStorage.getItem("userRole")||"",r="SUPER_ADMIN"===l||"Super Admin"===l,i="ADMIN"===l||"Admin"===l,o="HR"===l,d=r||i||o,c=r||i||o,u=!r,[m,x]=(0,a.useState)(c?"policies":u?"my-leaves":"policies");(0,a.useEffect)(()=>{r&&"my-leaves"===m&&x("policies")},[r,m]);const[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[S,C]=(0,a.useState)(""),[k,P]=(0,a.useState)({role:"",leavesPerYear:0}),[A,I]=(0,a.useState)({startDate:"",endDate:"",reason:""}),{data:D=[],isLoading:T,refetch:_}=ur({queryKey:["leavePolicies",t],queryFn:()=>jl.ie.getLeavePolicies(t),enabled:!!t&&c}),[E,R]=(0,a.useState)({status:"",startDate:"",endDate:"",page:1,limit:10}),{data:L,isLoading:O,refetch:M}=ur({queryKey:["myLeaveApplications",t,E],queryFn:()=>jl.ie.getMyLeaveApplications(t,E),enabled:!!t&&u}),F=(null===L||void 0===L?void 0:L.applications)||[],B=(null===L||void 0===L?void 0:L.totalPages)||0,q=(null===L||void 0===L?void 0:L.page)||1,z=(null===L||void 0===L?void 0:L.total)||0,{data:U,isLoading:W,refetch:H}=ur({queryKey:["leaveBalance",t],queryFn:()=>jl.ie.getLeaveBalance(t),enabled:!!t&&u}),[V,J]=(0,a.useState)({status:"",role:"",startDate:"",endDate:"",search:"",page:1,limit:10}),{data:K,isLoading:Q,refetch:G}=ur({queryKey:["leaveApplicationsForApproval",t,V],queryFn:()=>jl.ie.getLeaveApplicationsForApproval(t,V),enabled:!!t&&d}),Y=(null===K||void 0===K?void 0:K.applications)||[],$=(null===K||void 0===K?void 0:K.totalPages)||0,Z=(null===K||void 0===K?void 0:K.page)||1,X=(null===K||void 0===K?void 0:K.total)||0,{data:ee=[],isLoading:te}=ur({queryKey:["pendingLeaveApplications",t],queryFn:()=>jl.ie.getPendingLeaveApplications(t),enabled:!!t&&d}),se=pr({mutationFn:e=>jl.ie.createLeavePolicy(t,e),onSuccess:()=>{vl.success("Leave policy created successfully"),p(!1),P({role:"",leavesPerYear:0}),s.invalidateQueries(["leavePolicies",t])},onError:e=>{vl.error(e.message||"Failed to create leave policy")}}),ae=pr({mutationFn:e=>{let{role:s,data:a}=e;return jl.ie.updateLeavePolicy(t,s,a)},onSuccess:()=>{vl.success("Leave policy updated successfully"),p(!1),j(null),P({role:"",leavesPerYear:0}),s.invalidateQueries(["leavePolicies",t])},onError:e=>{vl.error(e.message||"Failed to update leave policy")}}),le=pr({mutationFn:e=>jl.ie.deleteLeavePolicy(t,e),onSuccess:()=>{vl.success("Leave policy deleted successfully"),s.invalidateQueries(["leavePolicies",t])},onError:e=>{vl.error(e.message||"Failed to delete leave policy")}}),re=pr({mutationFn:e=>jl.ie.createLeaveApplication(t,e),onSuccess:()=>{vl.success("Leave application submitted successfully"),g(!1),I({startDate:"",endDate:"",reason:""}),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t]),s.invalidateQueries(["pendingLeaveApplications",t])},onError:e=>{vl.error(e.message||"Failed to submit leave application")}}),ne=pr({mutationFn:e=>jl.ie.approveLeaveApplication(t,e),onSuccess:()=>{vl.success("Leave application approved"),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t]),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t])},onError:e=>{vl.error(e.message||"Failed to approve leave")}}),ie=pr({mutationFn:e=>{let{applicationId:s,reason:a}=e;return jl.ie.rejectLeaveApplication(t,s,a)},onSuccess:()=>{vl.success("Leave application rejected"),y(!1),C(""),N(null),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t]),s.invalidateQueries(["myLeaveApplications",t])},onError:e=>{vl.error(e.message||"Failed to reject leave")}}),oe=pr({mutationFn:e=>jl.ie.cancelLeaveApplication(t,e),onSuccess:()=>{vl.success("Leave application cancelled successfully"),s.invalidateQueries(["myLeaveApplications",t]),s.invalidateQueries(["leaveBalance",t]),s.invalidateQueries(["pendingLeaveApplications",t]),s.invalidateQueries(["leaveApplicationsForApproval",t])},onError:e=>{vl.error(e.message||"Failed to cancel leave")}}),de=e=>e?$n(e):"";return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:(0,ta.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ta.jsx)("h1",{className:"text-4xl font-bold text-white mb-8",children:"Leave Management"}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-slate-700",children:[c&&(0,ta.jsx)("button",{onClick:()=>x("policies"),className:"px-6 py-3 font-semibold transition-colors ".concat("policies"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Leave Policies"}),d&&(0,ta.jsxs)("button",{onClick:()=>x("approve"),className:"px-6 py-3 font-semibold transition-colors relative ".concat("approve"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:["Approve Leaves",ee.length>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full px-2 py-1",children:ee.length})]}),u&&(0,ta.jsx)("button",{onClick:()=>x("my-leaves"),className:"px-6 py-3 font-semibold transition-colors ".concat("my-leaves"===m?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"My Leaves"})]}),"policies"===m&&c&&(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Leave Policies"}),(0,ta.jsxs)("button",{onClick:()=>{j(null),P({role:"",leavesPerYear:0}),p(!0)},className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,ta.jsx)(Nn,{})," Create Policy"]})]}),T?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading policies..."})]}):0===D.length?(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,ta.jsx)("p",{children:"No leave policies configured yet."}),(0,ta.jsx)("p",{className:"text-sm mt-2",children:'Click "Create Policy" to get started.'})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:D.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.role}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{j(e),P({role:e.role,leavesPerYear:e.leavesPerYear}),p(!0)})(e),className:"text-blue-400 hover:text-blue-300",children:(0,ta.jsx)(pn,{})}),(0,ta.jsx)("button",{onClick:()=>{window.confirm("Delete leave policy for ".concat(e.role,"?"))&&le.mutate(e.role)},className:"text-red-400 hover:text-red-300",children:(0,ta.jsx)(Dn,{})})]})]}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:e.leavesPerYear}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"leaves per year"})]},e.id))})]}),"approve"===m&&d&&(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Leave Applications"}),(0,ta.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6 space-y-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,ta.jsxs)("select",{value:V.status,onChange:e=>J((0,n.A)((0,n.A)({},V),{},{status:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"Pending",children:"Pending"}),(0,ta.jsx)("option",{value:"Approved",children:"Approved"}),(0,ta.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,ta.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,ta.jsxs)("select",{value:V.role,onChange:e=>J((0,n.A)((0,n.A)({},V),{},{role:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"All Roles"}),Bi.filter(e=>"Affiliate"!==e.value).map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search (Name/Email)"}),(0,ta.jsx)("input",{type:"text",value:V.search,onChange:e=>J((0,n.A)((0,n.A)({},V),{},{search:e.target.value,page:1})),placeholder:"Search by name or email...",className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:V.startDate,onChange:e=>J((0,n.A)((0,n.A)({},V),{},{startDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:V.endDate,onChange:e=>J((0,n.A)((0,n.A)({},V),{},{endDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,ta.jsx)("div",{className:"flex items-end",children:(0,ta.jsx)("button",{onClick:()=>J({status:"",role:"",startDate:"",endDate:"",search:"",page:1,limit:10}),className:"w-full bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Clear Filters"})})]})}),(0,ta.jsxs)("div",{className:"mb-4 text-sm text-gray-400",children:["Showing ",Y.length," of ",X," leave application(s)"]}),Q?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading applications..."})]}):0===Y.length?(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,ta.jsx)(dn,{className:"text-5xl mx-auto mb-4 opacity-50"}),(0,ta.jsx)("p",{children:"No leave applications found"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"space-y-4 mb-6",children:Y.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white",children:e.staff.name}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.staff.role})]}),(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat(qi[e.status]),children:e.status})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Start Date"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:de(e.startDate)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"End Date"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:de(e.endDate)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Number of Days"}),(0,ta.jsxs)("p",{className:"text-white font-medium",children:[e.numberOfDays," days"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Applied On"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:de(e.createdAt)})]})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),(0,ta.jsx)("p",{className:"text-white bg-slate-800/50 rounded p-3",children:e.reason})]}),"Pending"===e.status&&(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsxs)("button",{onClick:()=>ne.mutate(e.id),disabled:ne.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2 disabled:opacity-50",children:[(0,ta.jsx)(dn,{})," Approve"]}),(0,ta.jsxs)("button",{onClick:()=>(e=>{N(e),C(""),y(!0)})(e),className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg flex items-center justify-center gap-2",children:[(0,ta.jsx)(Pn,{})," Reject"]})]}),"Approved"===e.status&&e.approvedAt&&(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Approved on ",de(e.approvedAt)]}),"Rejected"===e.status&&e.rejectedAt&&(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Rejected on ",de(e.rejectedAt),e.rejectionReason&&(0,ta.jsxs)("div",{className:"mt-2 text-red-400 bg-red-900/20 rounded p-2",children:["Reason: ",e.rejectionReason]})]}),"Cancelled"===e.status&&(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:"Cancelled by employee"})]},e.id))}),$>1&&(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-700",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",Z," of ",$]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>J((0,n.A)((0,n.A)({},V),{},{page:Z-1})),disabled:1===Z,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>J((0,n.A)((0,n.A)({},V),{},{page:Z+1})),disabled:Z>=$,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),"my-leaves"===m&&u&&(0,ta.jsxs)("div",{className:"space-y-6",children:[U&&(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-emerald-600/20 to-teal-600/20 rounded-xl p-6 border border-emerald-500/50",children:[(0,ta.jsx)("h2",{className:"text-xl font-semibold text-white mb-4",children:"Leave Balance"}),(0,ta.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Total Leaves"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:U.totalLeaves})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Used Leaves"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-yellow-400",children:U.usedLeaves})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Remaining Leaves"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:U.remainingLeaves})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"My Leave Applications"}),(0,ta.jsxs)("button",{onClick:()=>{I({startDate:"",endDate:"",reason:""}),g(!0)},className:"bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg flex items-center gap-2",children:[(0,ta.jsx)(Nn,{})," Apply for Leave"]})]}),(0,ta.jsx)("div",{className:"bg-slate-700/50 rounded-lg p-4 mb-6 space-y-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Status"}),(0,ta.jsxs)("select",{value:E.status,onChange:e=>R((0,n.A)((0,n.A)({},E),{},{status:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"Pending",children:"Pending"}),(0,ta.jsx)("option",{value:"Approved",children:"Approved"}),(0,ta.jsx)("option",{value:"Rejected",children:"Rejected"}),(0,ta.jsx)("option",{value:"Cancelled",children:"Cancelled"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:E.startDate,onChange:e=>R((0,n.A)((0,n.A)({},E),{},{startDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:E.endDate,onChange:e=>R((0,n.A)((0,n.A)({},E),{},{endDate:e.target.value,page:1})),className:"w-full px-4 py-2 bg-slate-600 border border-slate-500 rounded-lg text-white"})]}),(0,ta.jsx)("div",{className:"flex items-end",children:(0,ta.jsx)("button",{onClick:()=>R({status:"",startDate:"",endDate:"",page:1,limit:10}),className:"w-full bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Clear Filters"})})]})}),(0,ta.jsxs)("div",{className:"mb-4 text-sm text-gray-400",children:["Showing ",F.length," of ",z," leave application(s)"]}),O?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading your leaves..."})]}):0===F.length?(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,ta.jsx)(nn,{className:"text-5xl mx-auto mb-4 opacity-50"}),(0,ta.jsx)("p",{children:"No leave applications yet"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"space-y-4 mb-6",children:F.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold border ".concat(qi[e.status]),children:e.status}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.numberOfDays," days"]})]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:[de(e.startDate)," - ",de(e.endDate)]})]}),"Approved"===e.status&&e.approvedAt&&(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"Approved on"}),(0,ta.jsx)("p",{className:"text-sm text-white",children:de(e.approvedAt)})]}),"Rejected"===e.status&&e.rejectedAt&&(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"Rejected on"}),(0,ta.jsx)("p",{className:"text-sm text-white",children:de(e.rejectedAt)})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Reason"}),(0,ta.jsx)("p",{className:"text-white bg-slate-800/50 rounded p-3",children:e.reason})]}),e.rejectionReason&&(0,ta.jsxs)("div",{className:"mt-3",children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Rejection Reason"}),(0,ta.jsx)("p",{className:"text-red-400 bg-red-900/20 rounded p-3",children:e.rejectionReason})]}),"Cancelled"!==e.status&&(0,ta.jsx)("div",{className:"mt-4 flex justify-end",children:(0,ta.jsxs)("button",{onClick:()=>{window.confirm("Are you sure you want to cancel this leave application?")&&oe.mutate(e.id)},disabled:oe.isLoading,className:"bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg flex items-center gap-2 disabled:opacity-50",children:[(0,ta.jsx)(Pn,{})," Cancel Leave"]})})]},e.id))}),B>1&&(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-6 pt-6 border-t border-slate-700",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",q," of ",B]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>R((0,n.A)((0,n.A)({},E),{},{page:q-1})),disabled:1===q,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>R((0,n.A)((0,n.A)({},E),{},{page:q+1})),disabled:q>=B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:v?"Edit Leave Policy":"Create Leave Policy"}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v?ae.mutate({role:v.role,data:{leavesPerYear:k.leavesPerYear}}):se.mutate(k)},children:[(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Role"}),(0,ta.jsxs)("select",{value:k.role,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{role:e.target.value})),disabled:!!v||se.isLoading||ae.isLoading,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50",required:!0,children:[(0,ta.jsx)("option",{value:"",children:"Select Role"}),Bi.filter(e=>"Affiliate"!==e.value).map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Leaves Per Year"}),(0,ta.jsx)("input",{type:"number",min:"0",value:k.leavesPerYear,onChange:e=>P((0,n.A)((0,n.A)({},k),{},{leavesPerYear:parseInt(e.target.value)||0})),disabled:se.isLoading||ae.isLoading,className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[!(se.isLoading||ae.isLoading)&&(0,ta.jsx)("button",{type:"button",onClick:()=>{p(!1),j(null),P({role:"",leavesPerYear:0})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:se.isLoading||ae.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg disabled:opacity-50 flex items-center justify-center gap-2 ".concat(se.isLoading||ae.isLoading?"w-full":""),children:se.isLoading||ae.isLoading?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),v?"Updating...":"Creating..."]}):v?"Update":"Create"})]})]})]})}),b&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Apply for Leave"}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),re.mutate(A)},children:[(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:A.startDate,onChange:e=>I((0,n.A)((0,n.A)({},A),{},{startDate:e.target.value})),min:(new Date).toISOString().split("T")[0],className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:A.endDate,onChange:e=>I((0,n.A)((0,n.A)({},A),{},{endDate:e.target.value})),min:A.startDate||(new Date).toISOString().split("T")[0],className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Reason"}),(0,ta.jsx)("textarea",{value:A.reason,onChange:e=>I((0,n.A)((0,n.A)({},A),{},{reason:e.target.value})),rows:"4",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Please provide a reason for your leave...",required:!0,minLength:10})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{g(!1),I({startDate:"",endDate:"",reason:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:re.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Submit Application"})]})]})]})}),f&&w&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Reject Leave Application"}),(0,ta.jsxs)("p",{className:"text-gray-400 mb-4",children:["Rejecting leave application for ",(0,ta.jsx)("strong",{className:"text-white",children:w.staff.name})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),w&&ie.mutate({applicationId:w.id,reason:S})},children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Rejection Reason (Optional)"}),(0,ta.jsx)("textarea",{value:S,onChange:e=>C(e.target.value),rows:"3",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white",placeholder:"Provide a reason for rejection..."})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{y(!1),N(null),C("")},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-2 rounded-lg",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:ie.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Reject Leave"})]})]})]})})]})})}function Ui(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),{data:i,isLoading:o}=ur({queryKey:["tables",t],queryFn:()=>jl.rj.getTables(t),enabled:!!t}),d=i||[],c=d.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status);return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view live tables"}),!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view tables."})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - View Only"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"View live tables and their status."})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",c.length]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",c.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),o?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tables..."})]}):0===c.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:c.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber||e.number]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType||"Cash Game"})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats||8]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,ta.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]})]}),(0,ta.jsxs)("button",{onClick:()=>{l(e),n(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83c\udfaf"}),(0,ta.jsx)("span",{children:"View Table Hologram"})]})]},e.id))})]}),r&&s&&(0,ta.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 overflow-y-auto",children:(0,ta.jsx)(Fi,{tableId:s.id,onClose:()=>{n(!1),l(null)},isManagerMode:!0,isViewOnly:!0,tables:d})})]})}function Wi(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),{data:r,isLoading:n}=ur({queryKey:["tournaments",t],queryFn:()=>jl.Re.getTournaments(t),enabled:!!t}),i=Array.isArray(r)?r:(null===r||void 0===r?void 0:r.tournaments)||(null===r||void 0===r?void 0:r.data)||[],o=Array.isArray(i)?i:[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Tournaments"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view tournament information"}),!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view tournaments."})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Tournament List - View Only"}),n?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tournaments..."})]}):0===o.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No tournaments found"})]}):(0,ta.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Tournament"}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),e.buyIn&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,ta.jsxs)("button",{onClick:()=>l(e),className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ta.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Tournament"}),(0,ta.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),s.buyIn&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,ta.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function Hi(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),{data:r,isLoading:n}=ur({queryKey:["rummy-tournaments",t],queryFn:()=>jl.Re.getTournaments(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]}),i=r||[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tournaments"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view rummy tournament details"})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"All Rummy Tournaments"}),n?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===i.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tournaments found"})]}):(0,ta.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Rummy Tournament"}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),(0,ta.jsxs)("p",{className:"text-sm text-emerald-400",children:["Variant: ",e.rummyVariant||"Points Rummy"]}),e.buyIn&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,ta.jsxs)("button",{onClick:()=>l(e),className:"bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ta.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Rummy Tournament"}),(0,ta.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Rummy Variant"}),(0,ta.jsx)("p",{className:"text-emerald-400 font-semibold",children:s.rummyVariant||"Points Rummy"})]}),s.buyIn&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,ta.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function Vi(){const e=ue(),t=aa(),[s,l]=(0,a.useState)("Player Management"),[r,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const t=localStorage.getItem("clubId");t?i(t):e("/login")},[e]),(0,a.useEffect)(()=>{const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("greuser")||"{}");t.id||s.userId?(t.mustResetPassword||s.mustResetPassword)&&d(!0):e("/login")},[e]);const{data:m,isLoading:x}=ur({queryKey:["clubPlayers",r],queryFn:()=>jl.bS.getPlayers(r),enabled:!!r}),{data:h=[],isLoading:p}=ur({queryKey:["pendingPlayers",r],queryFn:()=>jl.bS.getPendingApprovalPlayers(r),enabled:!!r}),{data:b=[],isLoading:g}=ur({queryKey:["suspendedPlayers",r],queryFn:()=>jl.bS.getSuspendedPlayers(r),enabled:!!r}),{data:f}=ur({queryKey:["club",r],queryFn:()=>jl.Od.getClub(r),enabled:!!r}),y=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("greuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("greuser",JSON.stringify(t)),d(!1),u({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),v=o&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("greuser")||"{}"),a=t.email||s.email;a?c.currentPassword&&c.newPassword&&c.confirmPassword?c.newPassword===c.confirmPassword?c.newPassword.length<8?vl.error("Password must be at least 8 characters"):y.mutate({email:a,currentPassword:c.currentPassword,newPassword:c.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:c.currentPassword,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:c.newPassword,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:c.confirmPassword,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:y.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:y.isLoading?"Resetting...":"Reset Password"})]})]})}),j=["Player Management","Notifications","Tables & Waitlist","Tournaments","Chat","Push Notifications","Leave Management"],w=null!==f&&void 0!==f&&f.rummyEnabled?[...j,"Rummy"]:j;return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900",children:[v,(0,ta.jsx)(si,{activeItem:s,setActiveItem:l,menuItems:w,onSignOut:()=>{localStorage.clear(),e("/login")}}),(0,ta.jsx)("main",{className:"lg:pl-80 min-h-screen",children:(0,ta.jsxs)("div",{className:"p-6 space-y-6",children:["Player Management"===s&&(0,ta.jsx)(yr,{selectedClubId:r,playersData:m,playersLoading:x,pendingPlayers:h,pendingLoading:p,suspendedPlayers:b,suspendedLoading:g,onRefresh:()=>{t.invalidateQueries(["pendingPlayers",r]),t.invalidateQueries(["clubPlayers",r]),t.invalidateQueries(["suspendedPlayers",r])}}),"Tables & Waitlist"===s&&(0,ta.jsx)(Ui,{selectedClubId:r}),"Tournaments"===s&&(0,ta.jsx)(Wi,{selectedClubId:r}),"Chat"===s&&r&&(0,ta.jsx)(En,{clubId:r}),"Notifications"===s&&r&&(0,ta.jsx)(ei,{selectedClubId:r,recipientType:"staff"}),"Push Notifications"===s&&(0,ta.jsx)(Hr,{selectedClubId:r}),"Leave Management"===s&&r&&(0,ta.jsx)(zi,{clubId:r,userRole:"GRE"}),"Rummy"===s&&(0,ta.jsx)(Hi,{selectedClubId:r}),!["Player Management","Tables & Waitlist","Tournaments","Chat","Notifications","Push Notifications","Rummy"].includes(s)&&(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Welcome to GRE Portal"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Select an option from the sidebar to get started."})]})]})})]})}function Ji(e){let{role:t,roleDisplayName:s,redirectPath:l,gradientFrom:r,gradientTo:i,description:o}=e;const[d,c]=(0,a.useState)({email:"",password:""}),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!1),p=ue();(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),s="".concat(t.toLowerCase(),"user"),a=JSON.parse(localStorage.getItem(s)||"{}");if(e.id||a.userId){((e.role||a.role)===t||"MASTER_ADMIN"===t&&e.isMasterAdmin)&&p(l,{replace:!0})}},[p,t,l]);const b=e=>{c((0,n.A)((0,n.A)({},d),{},{[e.target.name]:e.target.value}))};return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"max-w-md w-full mx-4",children:[(0,ta.jsxs)("div",{className:"text-center mb-8",children:[(0,ta.jsxs)("div",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r ".concat(r," ").concat(i," drop-shadow-lg mb-4"),children:[s," Portal"]}),(0,ta.jsx)("p",{className:"text-gray-300",children:o})]}),(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-8 shadow-2xl border border-gray-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6 text-center",children:"Sign In"}),u&&(0,ta.jsx)("div",{className:"bg-red-500/20 border border-red-500/30 text-red-300 px-4 py-3 rounded-lg mb-4",children:u}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),m(""),h(!0);try{const e=await jl.R2.login(d.email,d.password),i=e.clubRoles&&e.clubRoles.length>0;if(i&&("SUPER_ADMIN"===t||"MASTER_ADMIN"===t))throw new Error("Club staff (".concat(e.clubRoles.map(e=>e.role).join(", "),") should use /login portal, not ").concat(s," portal."));let o=!1;var a;if("SUPER_ADMIN"===t)o=(null===(a=e.tenantRoles)||void 0===a?void 0:a.some(e=>"SUPER_ADMIN"===e.role))&&!i;else if("MASTER_ADMIN"===t)o=e.user.isMasterAdmin&&!i;else{var r,n;o=(null===(r=e.clubRoles)||void 0===r?void 0:r.some(e=>e.role===t))||(null===(n=e.tenantRoles)||void 0===n?void 0:n.some(e=>e.role===t))}if(!o)throw new Error("You don't have ".concat(s," access. Please use the correct portal."));const c={id:e.user.id,email:d.email,displayName:e.user.displayName,role:t,mustResetPassword:e.user.mustResetPassword||!1};localStorage.setItem("".concat(t.toLowerCase(),"user"),JSON.stringify({email:d.email,role:t,userId:e.user.id,displayName:e.user.displayName,mustResetPassword:e.user.mustResetPassword||!1})),"SUPER_ADMIN"!==t&&"ADMIN"!==t||localStorage.setItem("user",JSON.stringify(c)),p(l)}catch(i){console.error("Login error:",i),m(i.message||"Invalid email or password. Please try again.")}finally{h(!1)}},className:"space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Email Address"}),(0,ta.jsx)("input",{type:"email",name:"email",value:d.email,onChange:b,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your email",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Password"}),(0,ta.jsx)("input",{type:"password",name:"password",value:d.password,onChange:b,className:"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-emerald-400 focus:border-transparent",placeholder:"Enter your password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:x,className:"w-full bg-gradient-to-r ".concat(r," ").concat(i," hover:opacity-90 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all duration-300 transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed"),children:x?"Signing In...":"Sign In to ".concat(s," Portal")})]}),(0,ta.jsx)("div",{className:"mt-6 p-4 bg-blue-500/20 border border-blue-500/30 rounded-lg",children:(0,ta.jsxs)("p",{className:"text-blue-300 text-sm text-center",children:[(0,ta.jsx)("strong",{children:"Note:"})," Please use your registered credentials",(0,ta.jsx)("br",{}),"Contact admin if you need access"]})}),(0,ta.jsx)("div",{className:"mt-6 text-center",children:(0,ta.jsx)("button",{onClick:()=>p("/"),className:"text-emerald-400 hover:text-emerald-300 text-sm underline",children:"\u2190 Back to Home"})})]})]})})}const Ki=async function(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"documents";try{var a;const l=Date.now(),r=Math.random().toString(36).substring(2,15),n=e.name.split(".").pop(),i="".concat(s,"/").concat(t,"/").concat(l,"-").concat(r,".").concat(n),o=(null===(a=e.type)||void 0===a?void 0:a.startsWith("video/"))||!1,{signedUrl:d,publicUrl:c}=await jl.Dv.createPushNotificationUploadUrl(t,i,o);return await jl.Dv.uploadToSignedUrl(d,e),c}catch(l){throw console.error("Storage upload error:",l),new Error("Failed to upload document: ".concat(l.message||"Unknown error"))}};function Qi(e){var t;let{selectedClubId:s}=e;const l=aa(),[r,i]=(0,a.useState)(new Date),[o,d]=(0,a.useState)("week"),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),[f,y]=(0,a.useState)({staffId:"",shiftDate:"",shiftStartTime:"",shiftEndTime:"",isOffDay:!1,notes:""}),{data:v}=ur({queryKey:["dealers",s],queryFn:()=>jl.iw.getDealers(s),enabled:!!s}),{data:j}=ur({queryKey:["dealers",s,f.shiftDate],queryFn:()=>jl.iw.getDealers(s,f.shiftDate),enabled:!!s&&!!f.shiftDate}),w=()=>{const e=new Date(r),t=new Date(r);if("week"===o){const s=e.getDay(),a=e.getDate()-s+(0===s?-6:1);e.setDate(a),t.setDate(e.getDate()+6)}else e.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0);return{startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}},{data:N,isLoading:S}=ur({queryKey:["shifts",s,r,o],queryFn:()=>{const{startDate:e,endDate:t}=w();return jl.iw.getShifts(s,{startDate:e,endDate:t,role:"Dealer"})},enabled:!!s}),C=pr({mutationFn:e=>jl.iw.createShift(s,e),onSuccess:()=>{vl.success("Shift created successfully!"),l.invalidateQueries(["shifts",s]),u(!1),I()},onError:e=>{vl.error(e.message||"Failed to create shift")}}),k=pr({mutationFn:e=>{let{shiftId:t,data:a}=e;return jl.iw.updateShift(s,t,a)},onSuccess:()=>{vl.success("Shift updated successfully!"),l.invalidateQueries(["shifts",s]),x(!1),p(null)},onError:e=>{vl.error(e.message||"Failed to update shift")}}),P=pr({mutationFn:e=>jl.iw.deleteShift(s,e),onSuccess:()=>{vl.success("Shift deleted successfully!"),l.invalidateQueries(["shifts",s])},onError:e=>{vl.error(e.message||"Failed to delete shift")}}),A=pr({mutationFn:e=>jl.iw.copyShifts(s,e),onSuccess:e=>{vl.success(e.message||"Shifts copied successfully!"),l.invalidateQueries(["shifts",s]),g([])},onError:e=>{vl.error(e.message||"Failed to copy shifts")}}),I=()=>{y({staffId:"",shiftDate:"",shiftStartTime:"",shiftEndTime:"",isOffDay:!1,notes:""})},D=e=>{const t=new Date(r);"week"===o?t.setDate(t.getDate()+7*e):t.setMonth(t.getMonth()+e),i(t)},T=(null===v||void 0===v?void 0:v.dealers)||[],_=(null===N||void 0===N?void 0:N.shifts)||[],E=f.shiftDate&&null!==j&&void 0!==j&&j.dealers?j.dealers:T,R=()=>{const e=[],{startDate:t}=w(),s=new Date(t);for(let a=0;a<7;a++){const t=new Date(s);t.setDate(s.getDate()+a),e.push(t)}return e},L=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),O=e=>e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return S?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading shifts..."}):(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Shift Management"}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[b.length>0&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("button",{onClick:()=>{if(0===b.length)return void vl.error("Please select shifts to copy");const e=prompt("Enter target date (YYYY-MM-DD):");e&&(/^\d{4}-\d{2}-\d{2}$/.test(e)?A.mutate({shiftIds:b,targetDates:[e]}):vl.error("Invalid date format. Use YYYY-MM-DD"))},className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:["Copy to Date (",b.length,")"]}),(0,ta.jsxs)("button",{onClick:()=>{if(0===b.length)return void vl.error("Please select shifts to copy");const e=prompt("Copy to how many consecutive days?");if(!e||isNaN(e)||e<1)return;const t=parseInt(e),s=[],a=new Date(r);for(let l=1;l<=t;l++){const e=new Date(a);e.setDate(e.getDate()+l),s.push(e.toISOString().split("T")[0])}A.mutate({shiftIds:b,targetDates:s})},className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:["Copy to Next Days (",b.length,")"]})]}),(0,ta.jsx)("button",{onClick:()=>u(!0),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"+ Create Shift"})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 flex items-center justify-between",children:[(0,ta.jsx)("button",{onClick:()=>D(-1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"\u2190 Previous"}),(0,ta.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white",children:r.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,ta.jsx)("button",{onClick:()=>i(new Date),className:"bg-slate-700 hover:bg-slate-600 text-white px-3 py-1 rounded-lg text-sm transition-colors",children:"Today"})]}),(0,ta.jsx)("button",{onClick:()=>D(1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Next \u2192"})]}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:(0,ta.jsxs)("div",{className:"grid grid-cols-8 gap-px bg-slate-700",children:[(0,ta.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold",children:"Dealer"}),R().map(e=>(0,ta.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold text-center",children:O(e)},e.toISOString())),T.map(e=>(0,ta.jsxs)(a.Fragment,{children:[(0,ta.jsx)("div",{className:"bg-slate-800 p-3 text-white font-semibold",children:e.name}),R().map(t=>{const s=(e=>{const t=e.toISOString().split("T")[0];return _.filter(e=>new Date(e.shiftDate).toISOString().split("T")[0]===t)})(t).filter(t=>t.staffId===e.id);return(0,ta.jsx)("div",{className:"bg-slate-800 p-2 min-h-[100px]",children:s.length>0?(0,ta.jsx)("div",{className:"space-y-1",children:s.map(e=>(0,ta.jsxs)("div",{className:"rounded p-2 text-xs cursor-pointer transition-all ".concat(e.isOffDay?"bg-gray-700 text-gray-300":b.includes(e.id)?"bg-purple-600 text-white ring-2 ring-purple-400":"bg-green-900 text-green-200 hover:bg-green-800"),onClick:()=>{return t=e.id,void g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[e.isOffDay?(0,ta.jsx)("div",{className:"font-semibold",children:"OFF DAY"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"font-semibold",children:[L(e.shiftStartTime)," - ",L(e.shiftEndTime)]}),e.notes&&(0,ta.jsx)("div",{className:"text-xs mt-1 opacity-80",children:e.notes}),e.onLeave&&(0,ta.jsx)("div",{className:"text-xs mt-1 text-yellow-400 font-semibold bg-yellow-900/30 px-2 py-1 rounded",children:"\u26a0\ufe0f Dealer on leave"})]}),(0,ta.jsxs)("div",{className:"flex gap-1 mt-2",children:[(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{p(e),y({staffId:e.staffId,shiftDate:new Date(e.shiftDate).toISOString().split("T")[0],shiftStartTime:new Date(e.shiftStartTime).toISOString().slice(0,16),shiftEndTime:new Date(e.shiftEndTime).toISOString().slice(0,16),isOffDay:e.isOffDay,notes:e.notes||""}),x(!0)})(e)},className:"text-blue-300 hover:text-blue-100 text-xs",children:"Edit"}),(0,ta.jsx)("button",{onClick:t=>{t.stopPropagation(),(e=>{var t;window.confirm("Delete shift for ".concat(null===(t=e.staff)||void 0===t?void 0:t.name,"?"))&&P.mutate(e.id)})(e)},className:"text-red-300 hover:text-red-100 text-xs",children:"Del"})]})]},e.id))}):(0,ta.jsx)("div",{className:"text-gray-500 text-xs text-center pt-4",children:"No shift"})},"".concat(e.id,"-").concat(t.toISOString()))})]},e.id))]})}),0===T.length&&(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-8 text-center text-gray-400",children:[(0,ta.jsx)("p",{className:"text-lg mb-2",children:"No dealers found"}),(0,ta.jsx)("p",{className:"text-sm",children:"Create dealer staff members to start managing shifts"})]}),c&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-purple-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New Shift"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer *"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:f.staffId,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{staffId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"Select Dealer"}),E.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id)),f.shiftDate&&0===E.length&&T.length>0&&(0,ta.jsx)("option",{disabled:!0,children:"All dealers are on leave for this date"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:f.shiftDate,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftDate:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("input",{type:"checkbox",id:"isOffDay",checked:f.isOffDay,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{isOffDay:e.target.checked})),className:"w-4 h-4"}),(0,ta.jsx)("label",{htmlFor:"isOffDay",className:"text-white text-sm",children:"Mark as Off Day"})]}),!f.isOffDay&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time *"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:f.shiftStartTime,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftStartTime:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Time *"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:f.shiftEndTime,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftEndTime:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 h-20",placeholder:"Shift notes...",value:f.notes,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{notes:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{f.staffId&&f.shiftDate?f.isOffDay||f.shiftStartTime&&f.shiftEndTime?C.mutate(f):vl.error("Please provide start and end times"):vl.error("Please select a dealer and date")},disabled:C.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:C.isLoading?"Creating...":"Create Shift"}),(0,ta.jsx)("button",{onClick:()=>{u(!1),I()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),m&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-blue-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Shift"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-gray-400",value:(null===(t=h.staff)||void 0===t?void 0:t.name)||"",disabled:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:f.shiftDate,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftDate:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("input",{type:"checkbox",id:"editIsOffDay",checked:f.isOffDay,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{isOffDay:e.target.checked})),className:"w-4 h-4"}),(0,ta.jsx)("label",{htmlFor:"editIsOffDay",className:"text-white text-sm",children:"Mark as Off Day"})]}),!f.isOffDay&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Time *"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:f.shiftStartTime,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftStartTime:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Time *"}),(0,ta.jsx)("input",{type:"datetime-local",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:f.shiftEndTime,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{shiftEndTime:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 h-20",placeholder:"Shift notes...",value:f.notes,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{notes:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{h&&k.mutate({shiftId:h.id,data:f})},disabled:k.isLoading,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:k.isLoading?"Updating...":"Update Shift"}),(0,ta.jsx)("button",{onClick:()=>{x(!1),p(null),I()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}const Gi=[{value:"Super Admin",label:"Super Admin"},{value:"Admin",label:"Admin"},{value:"Manager",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE (Guest Relations Executive)"},{value:"Cashier",label:"Cashier"},{value:"Affiliate",label:"Affiliate"},{value:"Dealer",label:"Dealer"},{value:"FNB",label:"FNB"},{value:"Staff",label:"Staff (Custom Role)"}];function Yi(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)("staff"),i="HR"===JSON.parse(localStorage.getItem("user")||"{}").role,[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)(null),[v,j]=(0,a.useState)(null),[w,N]=(0,a.useState)({role:"",status:"",search:"",sortBy:"createdAt",sortOrder:"DESC"}),[S,C]=(0,a.useState)({name:"",role:"Super Admin",email:"",phone:"",employeeId:"",customRoleName:"",aadharDocumentUrl:"",panDocumentUrl:""}),[k,P]=(0,a.useState)({reason:""}),[A,I]=(0,a.useState)(!1),[D,T]=(0,a.useState)(!1),{data:_,isLoading:E}=ur({queryKey:["staff-management",t,w],queryFn:()=>jl.staffAPI.getAllStaffMembers(t,w),enabled:!!t}),R=pr({mutationFn:e=>jl.staffAPI.createStaffMember(t,e),onSuccess:e=>{vl.success("Staff member created successfully!"),e.staff.tempPasswordPlainText&&(j({password:e.staff.tempPasswordPlainText,name:e.staff.name,email:e.staff.email,role:e.staff.role,affiliateCode:e.staff.affiliateCode,isReset:!1}),p(!0)),s.invalidateQueries(["staff-management",t]),d(!1),z()},onError:e=>{vl.error(e.message||"Failed to create staff member")}}),L=pr({mutationFn:e=>{let{staffId:s,data:a}=e;return jl.staffAPI.updateStaffMember(t,s,a)},onSuccess:()=>{vl.success("Staff member updated successfully!"),s.invalidateQueries(["staff-management",t]),u(!1),y(null),z()},onError:e=>{vl.error(e.message||"Failed to update staff member")}}),O=pr({mutationFn:e=>{let{staffId:s,reason:a}=e;return jl.staffAPI.suspendStaffMember(t,s,a)},onSuccess:()=>{vl.success("Staff member suspended successfully!"),s.invalidateQueries(["staff-management",t]),x(!1),y(null),P({reason:""})},onError:e=>{vl.error(e.message||"Failed to suspend staff member")}}),M=pr({mutationFn:e=>jl.staffAPI.reactivateStaffMember(t,e),onSuccess:()=>{vl.success("Staff member reactivated successfully!"),s.invalidateQueries(["staff-management",t])},onError:e=>{vl.error(e.message||"Failed to reactivate staff member")}}),F=pr({mutationFn:e=>jl.staffAPI.deleteStaffMember(t,e),onSuccess:()=>{vl.success("Staff member deleted successfully!"),s.invalidateQueries(["staff-management",t])},onError:e=>{vl.error(e.message||"Failed to delete staff member")}}),B=pr({mutationFn:async e=>{const s=await jl.staffAPI.resetStaffPassword(t,e),a=null===_||void 0===_?void 0:_.staff.find(t=>t.id===e);return(0,n.A)((0,n.A)({},s),{},{staff:a})},onSuccess:e=>{var t,s,a,l;vl.success("Password reset successfully!"),j({password:e.tempPassword,name:null===(t=e.staff)||void 0===t?void 0:t.name,email:null===(s=e.staff)||void 0===s?void 0:s.email,role:null===(a=e.staff)||void 0===a?void 0:a.role,affiliateCode:null===(l=e.staff)||void 0===l?void 0:l.affiliateCode,isReset:!0}),p(!0)},onError:e=>{vl.error(e.message||"Failed to reset password")}}),q=async(e,s)=>{"aadhar"===s?I(!0):T(!0);try{const a=await Ki(e,t,"staff-kyc");C("aadhar"===s?(0,n.A)((0,n.A)({},S),{},{aadharDocumentUrl:a}):(0,n.A)((0,n.A)({},S),{},{panDocumentUrl:a})),vl.success("".concat("aadhar"===s?"Aadhar":"PAN"," card uploaded successfully"))}catch(a){vl.error("Failed to upload ".concat("aadhar"===s?"Aadhar":"PAN"," card"))}finally{"aadhar"===s?I(!1):T(!1)}},z=()=>{C({name:"",role:"Super Admin",email:"",phone:"",employeeId:"",customRoleName:"",aadharDocumentUrl:"",panDocumentUrl:""})},U=(null===_||void 0===_?void 0:_.staff)||[],W=e=>{switch(e){case"Active":return"bg-green-500/20 text-green-300 border-green-500";case"Suspended":return"bg-red-500/20 text-red-300 border-red-500";case"On Break":return"bg-yellow-500/20 text-yellow-300 border-yellow-500";default:return"bg-gray-500/20 text-gray-300 border-gray-500"}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Staff Management"}),"staff"===l&&(0,ta.jsx)("button",{onClick:()=>d(!0),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white px-6 py-3 rounded-lg font-semibold shadow-lg transition-all",children:"\u2795 Create Staff"})]}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>r("staff"),className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===l?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Staff Members"}),(0,ta.jsx)("button",{onClick:()=>r("shifts"),className:"px-6 py-3 font-semibold transition-colors ".concat("shifts"===l?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Shift Management"}),(0,ta.jsx)("button",{onClick:()=>r("leave"),className:"px-6 py-3 font-semibold transition-colors ".concat("leave"===l?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Leave Management"})]}),"shifts"===l&&(0,ta.jsx)(Qi,{selectedClubId:t}),"leave"===l&&t&&(0,ta.jsx)(zi,{clubId:t}),"staff"===l&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Role"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.role,onChange:e=>N((0,n.A)((0,n.A)({},w),{},{role:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Roles"}),Gi.map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Status"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.status,onChange:e=>N((0,n.A)((0,n.A)({},w),{},{status:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"Active",children:"Active"}),(0,ta.jsx)("option",{value:"Suspended",children:"Suspended"}),(0,ta.jsx)("option",{value:"On Break",children:"On Break"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Sort By"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:w.sortBy,onChange:e=>N((0,n.A)((0,n.A)({},w),{},{sortBy:e.target.value})),children:[(0,ta.jsx)("option",{value:"createdAt",children:"Date Created"}),(0,ta.jsx)("option",{value:"name",children:"Name"}),(0,ta.jsx)("option",{value:"role",children:"Role"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Name, email, phone...",value:w.search,onChange:e=>N((0,n.A)((0,n.A)({},w),{},{search:e.target.value}))})]})]})}),E?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading staff..."})]}):0===U.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udc65"}),(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Staff Members Yet"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Create your first staff member to get started"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 gap-4",children:U.map(e=>(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 hover:border-purple-600 transition-all",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(W(e.status)),children:e.status}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold bg-purple-500/20 text-purple-300 border border-purple-500",children:"Staff"===e.role&&e.customRoleName?e.customRoleName:e.role}),e.affiliateCode&&(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-mono font-semibold bg-yellow-500/20 text-yellow-300 border border-yellow-500",children:e.affiliateCode})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Email"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:e.email})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Phone"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:e.phone})]}),e.employeeId&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Employee ID"}),(0,ta.jsx)("p",{className:"text-white font-mono font-semibold",children:e.employeeId})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"Created"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:new Date(e.createdAt).toLocaleDateString()})]})]}),"Suspended"===e.status&&e.suspendedReason&&(0,ta.jsx)("div",{className:"mt-3 bg-red-900/30 border border-red-500/50 rounded-lg p-3",children:(0,ta.jsxs)("p",{className:"text-sm text-red-300",children:[(0,ta.jsx)("strong",{children:"Suspension Reason:"})," ",e.suspendedReason]})})]}),(0,ta.jsxs)("div",{className:"flex gap-2 ml-4",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{y(e),g(!0)})(e),className:"bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"View"}),!i&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:()=>(e=>{y(e),C({name:e.name,role:e.role,email:e.email,phone:e.phone,employeeId:e.employeeId||"",customRoleName:e.customRoleName||"",aadharDocumentUrl:e.aadharDocumentUrl||"",panDocumentUrl:e.panDocumentUrl||""}),u(!0)})(e),className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),"Active"===e.status&&(0,ta.jsx)("button",{onClick:()=>(e=>{y(e),x(!0)})(e),className:"bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Suspend"}),"Suspended"===e.status&&(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Reactivate ".concat(e.name,"?"))&&M.mutate(e.id)})(e),className:"bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Reactivate"}),(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Reset password for ".concat(e.name,"?"))&&B.mutate(e.id)})(e),className:"bg-yellow-600 hover:bg-yellow-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Reset Password"}),(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Are you sure you want to delete ".concat(e.name,"? This action cannot be undone."))&&F.mutate(e.id)})(e),className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Delete"})]})]})]})},e.id))}),o&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create New Staff Member"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Full Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"John Doe",value:S.name,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{name:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Role *"}),(0,ta.jsx)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:S.role,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{role:e.target.value})),children:Gi.map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),"Staff"===S.role&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Role Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"e.g., Security, Maintenance, etc.",value:S.customRoleName,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{customRoleName:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Email *"}),(0,ta.jsx)("input",{type:"email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"john@example.com",value:S.email,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{email:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Phone *"}),(0,ta.jsx)("input",{type:"tel",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"+91 1234567890",value:S.phone,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{phone:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee ID (Optional)"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"EMP001",value:S.employeeId,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{employeeId:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Aadhar Card"}),(0,ta.jsx)("input",{type:"file",accept:"image/*,application/pdf",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",onChange:e=>e.target.files[0]&&q(e.target.files[0],"aadhar"),disabled:A}),A&&(0,ta.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Uploading..."}),S.aadharDocumentUrl&&(0,ta.jsx)("p",{className:"text-sm text-green-400 mt-1",children:"\u2713 Uploaded"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"PAN Card"}),(0,ta.jsx)("input",{type:"file",accept:"image/*,application/pdf",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",onChange:e=>e.target.files[0]&&q(e.target.files[0],"pan"),disabled:D}),D&&(0,ta.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Uploading..."}),S.panDocumentUrl&&(0,ta.jsx)("p",{className:"text-sm text-green-400 mt-1",children:"\u2713 Uploaded"})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{S.name&&S.email&&S.phone?"Staff"!==S.role||S.customRoleName?R.mutate(S):vl.error("Please enter a custom role name"):vl.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-purple-600 hover:bg-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:R.isLoading?"Creating...":"Create Staff Member"}),(0,ta.jsx)("button",{onClick:()=>{d(!1),z()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),c&&f&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-blue-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Edit Staff Member"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Full Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.name,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{name:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Email *"}),(0,ta.jsx)("input",{type:"email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.email,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{email:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Phone *"}),(0,ta.jsx)("input",{type:"tel",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.phone,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{phone:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee ID"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.employeeId,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{employeeId:e.target.value}))})]})]}),"Staff"===S.role&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Role Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",value:S.customRoleName,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{customRoleName:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{S.name&&S.email&&S.phone?L.mutate({staffId:f.id,data:S}):vl.error("Please fill in all required fields")},disabled:L.isLoading,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:L.isLoading?"Updating...":"Update Staff Member"}),(0,ta.jsx)("button",{onClick:()=>{u(!1),y(null),z()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),m&&f&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-orange-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Suspend Staff Member"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["You are about to suspend ",(0,ta.jsx)("strong",{children:f.name}),". Please provide a reason:"]}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 h-32",placeholder:"Enter suspension reason (minimum 5 characters)",value:k.reason,onChange:e=>P({reason:e.target.value})}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{!k.reason||k.reason.length<5?vl.error("Please provide a reason (minimum 5 characters)"):O.mutate({staffId:f.id,reason:k.reason})},disabled:O.isLoading,className:"flex-1 bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:O.isLoading?"Suspending...":"Suspend"}),(0,ta.jsx)("button",{onClick:()=>{x(!1),y(null),P({reason:""})},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),h&&v&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:v.isReset?"Password Reset Successfully!":"Staff Member Created Successfully!"}),(0,ta.jsxs)("div",{className:"bg-green-900/30 border border-green-500/50 rounded-lg p-4 mb-4",children:[(0,ta.jsxs)("p",{className:"text-white mb-2",children:[(0,ta.jsx)("strong",{children:"Name:"})," ",v.name]}),(0,ta.jsxs)("p",{className:"text-white mb-2",children:[(0,ta.jsx)("strong",{children:"Role:"})," ",v.role]}),(0,ta.jsxs)("p",{className:"text-white mb-2",children:[(0,ta.jsx)("strong",{children:"Email:"})," ",v.email]}),v.affiliateCode&&(0,ta.jsxs)("p",{className:"text-yellow-300 mb-2 font-mono",children:[(0,ta.jsx)("strong",{children:"Affiliate Code:"})," ",v.affiliateCode]}),(0,ta.jsx)("p",{className:"text-white mb-2",children:(0,ta.jsx)("strong",{children:"Temporary Password:"})}),(0,ta.jsx)("div",{className:"bg-slate-700 rounded p-3 font-mono text-lg text-center text-green-300 select-all",children:v.password})]}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400 mb-4",children:["\u26a0\ufe0f Please save this password and share it with the staff member."," ",v.isReset?"They will be required to reset it on next login.":"They will be required to reset it on first login. This password will not be shown again."]}),(0,ta.jsx)("button",{onClick:()=>{p(!1),j(null)},className:"w-full bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"I've Saved the Password"})]})}),b&&f&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-4xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Staff Member Details"}),(0,ta.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"Basic Information"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Full Name"}),(0,ta.jsx)("p",{className:"text-white font-semibold text-lg",children:f.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Role"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:"Staff"===f.role&&f.customRoleName?f.customRoleName:f.role})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Email"}),(0,ta.jsx)("p",{className:"text-white",children:f.email})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Phone"}),(0,ta.jsx)("p",{className:"text-white",children:f.phone})]}),f.employeeId&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Employee ID"}),(0,ta.jsx)("p",{className:"text-white font-mono",children:f.employeeId})]}),f.affiliateCode&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Affiliate Code"}),(0,ta.jsx)("p",{className:"text-yellow-300 font-mono font-bold text-lg",children:f.affiliateCode})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Status"}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded-full text-sm font-semibold border ".concat(W(f.status)),children:f.status})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-1",children:"Created At"}),(0,ta.jsx)("p",{className:"text-white",children:new Date(f.createdAt).toLocaleString()})]})]}),"Suspended"===f.status&&f.suspendedReason&&(0,ta.jsxs)("div",{className:"mt-4 bg-red-900/30 border border-red-500/50 rounded-lg p-4",children:[(0,ta.jsxs)("p",{className:"text-sm text-red-300",children:[(0,ta.jsx)("strong",{children:"Suspension Reason:"})," ",f.suspendedReason]}),f.suspendedAt&&(0,ta.jsxs)("p",{className:"text-sm text-red-300 mt-2",children:[(0,ta.jsx)("strong",{children:"Suspended At:"})," ",new Date(f.suspendedAt).toLocaleString()]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"KYC Documents"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Aadhar Card"}),f.aadharDocumentUrl?(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500",children:(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"text-2xl",children:"\ud83c\udd94"}),(0,ta.jsx)("span",{className:"text-white",children:"Aadhar Card"})]}),(0,ta.jsx)("span",{className:"text-green-400 text-sm",children:"\u2713 Uploaded"})]})}),(0,ta.jsx)("a",{href:f.aadharDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"View Document"}),(0,ta.jsx)("a",{href:f.aadharDocumentUrl,download:!0,className:"block w-full bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"Download Document"})]}):(0,ta.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500 border-dashed",children:(0,ta.jsx)("p",{className:"text-gray-400 text-center",children:"No Aadhar card uploaded"})})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"PAN Card"}),f.panDocumentUrl?(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500",children:(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"text-2xl",children:"\ud83d\udcc4"}),(0,ta.jsx)("span",{className:"text-white",children:"PAN Card"})]}),(0,ta.jsx)("span",{className:"text-green-400 text-sm",children:"\u2713 Uploaded"})]})}),(0,ta.jsx)("a",{href:f.panDocumentUrl,target:"_blank",rel:"noopener noreferrer",className:"block w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"View Document"}),(0,ta.jsx)("a",{href:f.panDocumentUrl,download:!0,className:"block w-full bg-slate-600 hover:bg-slate-500 text-white px-4 py-2 rounded-lg font-semibold transition-colors text-center",children:"Download Document"})]}):(0,ta.jsx)("div",{className:"bg-slate-600 rounded-lg p-4 border border-slate-500 border-dashed",children:(0,ta.jsx)("p",{className:"text-gray-400 text-center",children:"No PAN card uploaded"})})]})]})]}),(f.aadharDocumentUrl||f.panDocumentUrl)&&(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-slate-600 pb-2",children:"Document Preview"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.aadharDocumentUrl&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"Aadhar Card Preview"}),(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-600",children:[f.aadharDocumentUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,ta.jsx)("img",{src:f.aadharDocumentUrl,alt:"Aadhar Card",className:"w-full h-auto rounded-lg max-h-64 object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}):null,(0,ta.jsxs)("div",{style:{display:"none"},className:"text-center text-gray-400 py-8",children:[(0,ta.jsx)("p",{className:"text-lg mb-2",children:"\ud83d\udcc4"}),(0,ta.jsx)("p",{children:'PDF Document - Click "View Document" to open'})]})]})]}),f.panDocumentUrl&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-sm text-gray-400 mb-2",children:"PAN Card Preview"}),(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 border border-slate-600",children:[f.panDocumentUrl.match(/\.(jpg|jpeg|png|gif|webp)$/i)?(0,ta.jsx)("img",{src:f.panDocumentUrl,alt:"PAN Card",className:"w-full h-auto rounded-lg max-h-64 object-contain",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="block"}}):null,(0,ta.jsxs)("div",{style:{display:"none"},className:"text-center text-gray-400 py-8",children:[(0,ta.jsx)("p",{className:"text-lg mb-2",children:"\ud83d\udcc4"}),(0,ta.jsx)("p",{children:'PDF Document - Click "View Document" to open'})]})]})]})]})]})]}),(0,ta.jsx)("div",{className:"mt-6 flex justify-end",children:(0,ta.jsx)("button",{onClick:()=>{g(!1),y(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Close"})})]})})]})]})}function $i(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("all"),[r,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(1),[c,u]=(0,a.useState)(1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),b=10,g=aa(),{data:f,isLoading:y}=ur({queryKey:["clubPlayers",t],queryFn:()=>jl.bS.getPlayers(t),enabled:!!t}),v=Array.isArray(f)?f:(null===f||void 0===f?void 0:f.players)||[],{data:j,isLoading:w}=ur({queryKey:["playerDetails",t,null===h||void 0===h?void 0:h.id],queryFn:async()=>{if(!h||!t)return null;const e=await jl.Od.getPlayer(t,h.id);let s=[];try{const e=await fetch("".concat("http://localhost:3333/api","/player-documents/my"),{headers:{"x-player-id":h.id,"x-club-id":t}});if(e.ok){const t=await e.json();s=t.documents||[]}}catch(l){console.error("Error fetching documents:",l)}const a=e.kycDocuments||h.kycDocuments||[];if(Array.isArray(a)&&a.length>0){const e=new Set(s.map(e=>e.url));a.forEach(t=>{t.url&&!e.has(t.url)&&s.push(t)})}return(0,n.A)((0,n.A)({},e),{},{documents:s})},enabled:!!h&&!!t&&m}),{data:N=[],isLoading:S}=ur({queryKey:["fieldUpdateRequests",t],queryFn:async()=>[],enabled:!!t&&"field-updates"===s}),C=pr({mutationFn:async e=>{let{requestId:t,approved:s,notes:a}=e;return{success:!0}},onSuccess:()=>{vl.success("Field update request processed"),g.invalidateQueries(["fieldUpdateRequests",t])},onError:e=>{vl.error(e.message||"Failed to process field update request")}}),k=v.filter(e=>{var t,s,a;return!r||(null===(t=e.name)||void 0===t?void 0:t.toLowerCase().includes(r.toLowerCase()))||(null===(s=e.email)||void 0===s?void 0:s.toLowerCase().includes(r.toLowerCase()))||(null===(a=e.playerId)||void 0===a?void 0:a.toLowerCase().includes(r.toLowerCase()))}),P=Math.ceil(k.length/b),A=(o-1)*b,I=A+b,D=k.slice(A,I),T=Math.ceil(N.length/b),_=(c-1)*b,E=_+b,R=N.slice(_,E);return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Player Management"}),(0,ta.jsx)("div",{className:"flex gap-2 border-b border-slate-700",children:[{id:"all",label:"All Players"},{id:"field-updates",label:"Player Fields Update Approval"}].map(e=>(0,ta.jsx)("button",{onClick:()=>{l(e.id),d(1),u(1)},className:"px-6 py-3 font-semibold transition-all ".concat(s===e.id?"bg-gradient-to-r from-red-400 to-purple-600 text-white border-b-2 border-purple-400":"text-gray-400 hover:text-white"),children:e.label},e.id))}),(0,ta.jsxs)("div",{className:"mt-6",children:["all"===s&&(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700",children:(0,ta.jsx)("input",{type:"text",placeholder:"Search by name, email, or ID...",value:r,onChange:e=>i(e.target.value),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500"})}),y?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading players..."})]}):(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,ta.jsxs)("span",{children:["Showing ",A+1,"-",Math.min(I,k.length)," of ",k.length," players"]})}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"ID"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Documents"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===D.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-400",children:"No players found"})}):D.map(e=>(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.name}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.playerId||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.email}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.phoneNumber||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("approved"===e.kycStatus||"verified"===e.kycStatus?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:e.kycStatus||"Pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:e.kycDocuments&&e.kycDocuments.length>0?(0,ta.jsxs)("span",{className:"text-blue-400 text-sm",children:[e.kycDocuments.length," document(s)"]}):(0,ta.jsx)("span",{className:"text-gray-500 text-sm",children:"No documents"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("button",{onClick:()=>{p(e),x(!0)},className:"bg-blue-600 hover:bg-blue-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors",children:"View Details & KYC"})})]},e.id))})]}),P>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",o," of ",P]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===o,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>d(e=>Math.min(P,e+1)),disabled:o>=P,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})]}),"field-updates"===s&&(0,ta.jsx)("div",{className:"space-y-6",children:S?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading field update requests..."})]}):0===N.length?(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 border border-slate-700 text-center",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcdd"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No pending field update requests"})]}):(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,ta.jsxs)("span",{children:["Showing ",_+1,"-",Math.min(E,N.length)," of ",N.length," field update requests"]})}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Player Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Fields Updated"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Requested Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Actions"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:0===R.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"5",className:"px-6 py-8 text-center text-gray-400",children:"No field update requests found"})}):R.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.playerName}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("div",{className:"space-y-1",children:null===(t=e.fields)||void 0===t?void 0:t.map((e,t)=>(0,ta.jsxs)("div",{className:"text-sm",children:[(0,ta.jsxs)("span",{className:"text-gray-400",children:[e.fieldName,":"]})," ",(0,ta.jsx)("span",{className:"text-gray-500 line-through",children:e.currentValue||"N/A"})," \u2192 ",(0,ta.jsx)("span",{className:"text-emerald-400",children:e.requestedValue})]},t))})}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400 text-sm",children:new Date(e.requestedDate||e.createdAt).toLocaleDateString()}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:e.status||"Pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>{C.mutate({requestId:e.id,approved:!0,notes:"Approved by HR"})},disabled:C.isLoading,className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Approve"}),(0,ta.jsx)("button",{onClick:()=>{const t=prompt("Enter rejection reason:");t&&C.mutate({requestId:e.id,approved:!1,notes:t})},disabled:C.isLoading,className:"bg-red-600 hover:bg-red-500 px-4 py-2 rounded-lg text-sm font-medium transition-colors disabled:opacity-50",children:"Reject"})]})})]},e.id)})})]}),T>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",c," of ",T]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===c,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>u(e=>Math.min(T,e+1)),disabled:c>=T,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})})]}),m&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-4xl w-full border-2 border-purple-500 shadow-2xl my-8",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white",children:"Player Details & KYC Documents"}),(0,ta.jsx)("button",{onClick:()=>{x(!1),p(null)},className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),w?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading player details..."})]}):j?(0,ta.jsxs)("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,ta.jsx)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg",children:"Basic Information"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Name"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:j.name||h.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Email"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:j.email||h.email})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Phone Number"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:j.phoneNumber||h.phoneNumber||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"Player ID"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:j.playerId||h.playerId||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"PAN Card"}),(0,ta.jsx)("p",{className:"text-white font-medium",children:j.panCard||h.panCard||"-"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-1",children:"KYC Status"}),(0,ta.jsx)("span",{className:"inline-block px-3 py-1 rounded text-xs font-semibold ".concat("approved"===(j.kycStatus||h.kycStatus)||"verified"===(j.kycStatus||h.kycStatus)?"bg-green-600/20 text-green-400":"bg-gray-600/20 text-gray-400"),children:j.kycStatus||h.kycStatus||"Pending"})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-purple-500/30",children:[(0,ta.jsx)("h3",{className:"text-purple-400 font-semibold mb-4 text-lg",children:"KYC Documents"}),j.documents&&j.documents.length>0?(0,ta.jsx)("div",{className:"grid grid-cols-2 gap-4",children:j.documents.map((e,t)=>(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-4 border border-slate-600",children:[(0,ta.jsx)("p",{className:"text-gray-300 font-medium mb-2",children:e.type||e.documentType||"Document"}),e.url&&(0,ta.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm underline",children:"View Document"}),e.uploadedAt&&(0,ta.jsxs)("p",{className:"text-gray-500 text-xs mt-1",children:["Uploaded: ",new Date(e.uploadedAt).toLocaleDateString()]})]},t))}):(0,ta.jsx)("p",{className:"text-gray-400",children:"No KYC documents available"})]})]}):null]})})]})}function Zi(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(1),[r,i]=(0,a.useState)({search:"",startDate:"",endDate:"",staffId:""}),{data:o,isLoading:d}=ur({queryKey:["salary-payments",t,s,r],queryFn:async()=>await jl.Od.getSalaryPayments(t,(0,n.A)({page:s,limit:10},r)),enabled:!!t}),c=(null===o||void 0===o?void 0:o.payments)||[],u=(null===o||void 0===o?void 0:o.totalPages)||1,m=(null===o||void 0===o?void 0:o.total)||0,x=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Salary History"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only: Salary payment history for all employees"}),!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view salary history."})}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 space-y-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsx)("input",{type:"text",placeholder:"Search by staff name...",value:r.search,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{search:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("input",{type:"date",placeholder:"Start Date",value:r.startDate,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("input",{type:"date",placeholder:"End Date",value:r.endDate,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("button",{onClick:()=>i({search:"",startDate:"",endDate:"",staffId:""}),className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg text-white transition-colors",children:"Clear Filters"})]})}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:d?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading salary history..."})]}):0===c.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcb0"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No salary payments found"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"p-4 text-sm text-gray-400 flex justify-between items-center",children:(0,ta.jsxs)("span",{children:["Showing ",10*(s-1)+1,"-",Math.min(10*s,m)," of ",m," payments"]})}),(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Staff Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Pay Period"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Base Salary"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Overtime"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Deductions"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Gross Amount"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Net Amount"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Payment Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:c.map(e=>{var t,s;return(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:(null===(t=e.staff)||void 0===t?void 0:t.name)||"N/A"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.payPeriod||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-white",children:x(e.baseSalary)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-white",children:x(e.overtimeAmount)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-red-400",children:x(e.deductions)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:x(e.grossAmount)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-green-400 font-bold",children:x(e.netAmount)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:(s=e.paymentDate,s?new Date(s).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("Processed"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:e.status||"Processed"})})]},e.id)})})]}),u>1&&(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex items-center justify-between",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Page ",s," of ",u]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>l(e=>Math.max(1,e-1)),disabled:1===s,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>l(e=>Math.min(u,e+1)),disabled:s>=u,className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white disabled:opacity-50 disabled:cursor-not-allowed hover:bg-slate-600 transition-colors",children:"Next"})]})]})]})})]})}function Xi(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(!1),r=(()=>{const e=Xn(),t=e.getFullYear(),s=String(e.getMonth()+1).padStart(2,"0"),a=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(s,"-").concat(a)})(),[i,o]=(0,a.useState)({staffId:"",loginDate:r,loginTime:"",logoutDate:r,logoutTime:"",notes:""}),d=aa(),[c,u]=(0,a.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],staffId:""}),{data:m}=ur({queryKey:["staff-list",t],queryFn:()=>jl.staffAPI.getAllStaffMembers(t,{status:"Active"}),enabled:!!t}),x=(null===m||void 0===m?void 0:m.staff)||[],{data:h=[],isLoading:p}=ur({queryKey:["attendance",t,c],queryFn:()=>jl.Od.getAttendanceRecords(t,c.startDate,c.endDate,c.staffId),enabled:!!t}),{data:b}=ur({queryKey:["attendanceStats",t,c.startDate,c.endDate],queryFn:()=>jl.Od.getAttendanceStats(t,c.startDate,c.endDate),enabled:!!t}),g=pr({mutationFn:async e=>{const s=e.loginDate&&e.loginTime?"".concat(e.loginDate,"T").concat(e.loginTime,":00"):null,a=e.logoutDate&&e.logoutTime?"".concat(e.logoutDate,"T").concat(e.logoutTime,":00"):null,l={staffId:e.staffId,date:e.loginDate,loginTime:s,logoutTime:a};return e.notes&&e.notes.trim()&&(l.notes=e.notes.trim()),await jl.Od.createAttendanceRecord(t,l)},onSuccess:()=>{vl.success("Attendance record created successfully!"),d.invalidateQueries(["attendance",t]),d.invalidateQueries(["attendanceStats",t]),l(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},onError:e=>{vl.error(e.message||"Failed to create attendance record")}}),f=e=>e?new Date(e).toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"}):"-",y=(e,t)=>{if(!e||!t)return"-";const s=new Date(e);return((new Date(t)-s)/36e5).toFixed(2)};return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Attendance Management"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Track login and logout times for all employees"})]}),(0,ta.jsx)("button",{onClick:()=>l(!0),className:"bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white px-6 py-3 rounded-lg font-semibold transition-all shadow-lg hover:shadow-xl",children:"+ Create Attendance"})]}),!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view attendance records."})}),b&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Total Records"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:b.totalRecords||0})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Active Sessions"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-blue-400",children:b.activeSessions||0})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Completed Sessions"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-green-400",children:b.completedSessions||0})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-2",children:"Avg Hours/Day"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-purple-400",children:b.avgHours||"0.00"})]})]}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsx)("input",{type:"date",placeholder:"Start Date",value:c.startDate,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("input",{type:"date",placeholder:"End Date",value:c.endDate,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("input",{type:"text",placeholder:"Search by staff name or ID...",value:c.staffId,onChange:e=>u((0,n.A)((0,n.A)({},c),{},{staffId:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("button",{onClick:()=>{const e=(new Date).toISOString().split("T")[0];u({startDate:e,endDate:e,staffId:""})},className:"px-4 py-2 bg-slate-600 hover:bg-slate-500 rounded-lg text-white transition-colors",children:"Reset to Today"})]})}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 overflow-hidden",children:p?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading attendance records..."})]}):0===h.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\u23f0"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No attendance records found"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"p-4 text-sm text-gray-400",children:["Showing ",h.length," attendance record(s)"]}),(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Staff Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Role"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Employee ID"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Login Time"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Logout Time"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Hours"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,ta.jsx)("tbody",{className:"divide-y divide-slate-700",children:h.map(e=>(0,ta.jsxs)("tr",{className:"hover:bg-slate-750",children:[(0,ta.jsx)("td",{className:"px-6 py-4 font-medium",children:e.staffName}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.staffRole||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:e.employeeId||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-gray-400",children:v(e.date)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-green-400 font-medium",children:f(e.loginTime)}),(0,ta.jsx)("td",{className:"px-6 py-4 text-red-400 font-medium",children:e.logoutTime?f(e.logoutTime):"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 text-white font-medium",children:e.totalHours?"".concat(e.totalHours," hrs"):"-"!==y(e.loginTime,e.logoutTime)?"".concat(y(e.loginTime,e.logoutTime)," hrs"):"-"}),(0,ta.jsx)("td",{className:"px-6 py-4",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("active"===e.status?"bg-blue-600/20 text-blue-400":"completed"===e.status?"bg-green-600/20 text-green-400":"bg-yellow-600/20 text-yellow-400"),children:"active"===e.status?"Active":"completed"===e.status?"Completed":"Incomplete"})})]},e.id))})]})})]})}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-2xl w-full border border-blue-600 shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Create Attendance Record"}),(0,ta.jsx)("button",{onClick:()=>{l(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!i.staffId||!i.loginDate||!i.loginTime||!i.logoutDate||!i.logoutTime)return void vl.error("Please fill in all required fields");const t=new Date("".concat(i.loginDate,"T").concat(i.loginTime));new Date("".concat(i.logoutDate,"T").concat(i.logoutTime))<=t?vl.error("Logout date & time must be after login date & time"):g.mutate(i)},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Staff Member *"}),(0,ta.jsxs)("select",{value:i.staffId,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{staffId:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,ta.jsx)("option",{value:"",children:"Select Staff Member"}),x.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," - ",e.role||"Staff"," ",e.employeeId?"(".concat(e.employeeId,")"):""]},e.id))]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Login Date & Time *"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Login Date"}),(0,ta.jsx)("input",{type:"date",value:i.loginDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{loginDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Login Time"}),(0,ta.jsx)("input",{type:"time",value:i.loginTime,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{loginTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Logout Date & Time *"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Logout Date"}),(0,ta.jsx)("input",{type:"date",value:i.logoutDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{logoutDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",min:i.loginDate,required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-xs text-gray-400 mb-1",children:"Logout Time"}),(0,ta.jsx)("input",{type:"time",value:i.logoutTime,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{logoutTime:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"\ud83d\udca1 Logout can be on a different day (e.g., login 7pm Dec 25, logout 2am Dec 26)"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Notes (Optional)"}),(0,ta.jsx)("textarea",{value:i.notes,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{notes:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",rows:"3",placeholder:"Additional notes..."})]}),(0,ta.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{l(!1);const e=(new Date).toISOString().split("T")[0];o({staffId:"",loginDate:e,loginTime:"",logoutDate:e,logoutTime:"",notes:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:g.isLoading,className:"flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 text-white font-medium py-3 rounded-lg transition-all disabled:opacity-50",children:g.isLoading?"Creating...":"Create Attendance"})]})]})]})})]});function v(e){return e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-"}}function eo(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)(null),[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),[x,h]=(0,a.useState)(!0),p=(0,a.useRef)(null);(0,a.useEffect)(()=>{t&&b()},[t]),(0,a.useEffect)(()=>{if(r){g();const e=setInterval(g,3e3);return()=>clearInterval(e)}},[r]),(0,a.useEffect)(()=>{y()},[i]);const b=async()=>{try{h(!0);const e=await jl.h2.getStaffChatSessions(t,{page:1,limit:100});l(e.sessions||[])}catch(e){console.error("Error loading sessions:",e)}finally{h(!1)}},g=async()=>{if(r)try{const e=await jl.h2.getSessionMessages(t,r.id,{page:1,limit:100});o(e.messages||[])}catch(e){console.error("Error loading messages:",e)}},f=async()=>{if(d.trim()&&r)try{await jl.h2.sendMessage(t,r.id,d),c(""),g()}catch(e){console.error("Error sending message:",e)}},y=()=>{var e;null===(e=p.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},v=s.filter(e=>{var t,s;return(null===(t=e.subject)||void 0===t?void 0:t.toLowerCase().includes(u.toLowerCase()))||(null===(s=e.recipientName)||void 0===s?void 0:s.toLowerCase().includes(u.toLowerCase()))});return(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 h-[calc(100vh-300px)]",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl border border-slate-700 flex flex-col",children:[(0,ta.jsx)("div",{className:"p-4 border-b border-slate-700",children:(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)(Cn,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),(0,ta.jsx)("input",{type:"text",placeholder:"Search sessions...",value:u,onChange:e=>m(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"})]})}),(0,ta.jsx)("div",{className:"flex-1 overflow-y-auto",children:x?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"Loading sessions..."}):0===v.length?(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No chat sessions found"}):v.map(e=>(0,ta.jsxs)("div",{onClick:()=>n(e),className:"p-4 border-b border-slate-700 cursor-pointer hover:bg-slate-700 transition-colors ".concat((null===r||void 0===r?void 0:r.id)===e.id?"bg-slate-700":""),children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ta.jsx)("h3",{className:"font-semibold text-white",children:e.subject||"No Subject"}),e.unreadCount>0&&(0,ta.jsx)("span",{className:"bg-blue-600 text-white text-xs px-2 py-1 rounded-full",children:e.unreadCount})]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.recipientName||"Unknown"}),(0,ta.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.lastMessageAt?new Date(e.lastMessageAt).toLocaleString():""})]},e.id))})]}),(0,ta.jsx)("div",{className:"lg:col-span-2 bg-slate-800 rounded-xl border border-slate-700 flex flex-col",children:r?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white",children:r.subject||"Chat"}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["With: ",r.recipientName||"Unknown"]})]}),(0,ta.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.map(e=>(0,ta.jsx)("div",{className:"flex ".concat("HR"===e.senderRole?"justify-end":"justify-start"),children:(0,ta.jsxs)("div",{className:"max-w-[70%] rounded-lg p-3 ".concat("HR"===e.senderRole?"bg-blue-600 text-white":"bg-slate-700 text-white"),children:[(0,ta.jsx)("p",{className:"text-sm",children:e.message}),(0,ta.jsx)("p",{className:"text-xs opacity-70 mt-1",children:new Date(e.createdAt).toLocaleTimeString()})]})},e.id)),(0,ta.jsx)("div",{ref:p})]}),(0,ta.jsxs)("div",{className:"p-4 border-t border-slate-700 flex gap-2",children:[(0,ta.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),onKeyPress:e=>"Enter"===e.key&&f(),placeholder:"Type a message...",className:"flex-1 px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500"}),(0,ta.jsx)("button",{onClick:f,className:"px-6 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:(0,ta.jsx)(wn,{})})]})]}):(0,ta.jsx)("div",{className:"flex-1 flex items-center justify-center text-gray-400",children:(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)(Tn,{className:"text-6xl mx-auto mb-4 opacity-50"}),(0,ta.jsx)("p",{children:"Select a chat session to view messages"})]})})})]})}function to(e){let{clubId:t}=e;return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,ta.jsxs)("div",{className:"max-w-[1600px] mx-auto",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-6 rounded-lg mb-6",children:[(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[(0,ta.jsx)(Tn,{className:"text-4xl"}),"Staff Chat"]}),(0,ta.jsx)("p",{className:"text-white/80 mt-2",children:"Communicate with staff members in real-time"})]}),(0,ta.jsx)(eo,{clubId:t})]})})}function so(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ur({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:g}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=f.email||"hr@pokerroom.com",v=f.displayName||"HR Manager",j=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[d&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-purple-500 to-pink-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!i),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-purple-500/20 via-pink-600/30 to-rose-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?i?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 via-pink-300 to-rose-400 drop-shadow-lg mb-6",children:"HR Portal"}),(0,ta.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-pink-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"HR"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:v}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:y})]})]}),u&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?vl.error("Password must be at least 8 characters"):j.mutate({email:y,currentPassword:x.currentPassword,newPassword:x.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:j.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:j.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),g&&g.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:g.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:l.map((e,a)=>(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-purple-400 to-pink-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-purple-400/20 hover:to-pink-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount})]})},a))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function ao(){const[e,t]=(0,a.useState)("Staff Management"),s=ue(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("hruser")||"{}");(e.mustResetPassword||t.mustResetPassword)&&r(!0)},[]);const d=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("hruser")||"{}");t.mustResetPassword=!1,localStorage.setItem("hruser",JSON.stringify(t)),r(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),c=l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("hruser")||"{}"),a=t.email||s.email;a?i.currentPassword&&i.newPassword&&i.confirmPassword?i.newPassword===i.confirmPassword?i.newPassword.length<8?vl.error("Password must be at least 8 characters"):d.mutate({email:a,currentPassword:i.currentPassword,newPassword:i.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:i.currentPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:i.newPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:d.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:d.isLoading?"Resetting...":"Reset Password"})]})]})}),[u,m]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("clubId");e&&m(e)},[]);const x=[{id:"S001",name:"Sarah Johnson",position:"Dealer",department:"Operations",email:"sarah.j@email.com",phone:"+91 98765 43210",startDate:"2024-01-15",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-10"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-01-10"},{type:"ID Card",status:"Verified",uploadedDate:"2024-01-15"},{type:"Medical Certificate",status:"Verified",uploadedDate:"2024-01-12"}]},{id:"S002",name:"Mike Chen",position:"Floor Manager",department:"Operations",email:"mike.c@email.com",phone:"+91 98765 43211",startDate:"2023-11-20",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2023-11-15"},{type:"Passport",status:"Verified",uploadedDate:"2023-11-15"},{type:"Experience Certificate",status:"Pending Review",uploadedDate:"2024-01-20"},{type:"ID Card",status:"Verified",uploadedDate:"2023-11-20"}]},{id:"S003",name:"Emma Davis",position:"Cashier",department:"Operations",email:"emma.d@email.com",phone:"+91 98765 43212",startDate:"2024-02-01",status:"On Leave",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-28"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-01-28"},{type:"Medical Certificate",status:"Verified",uploadedDate:"2024-02-01"},{type:"ID Card",status:"Verified",uploadedDate:"2024-02-01"}]},{id:"S004",name:"John Smith",position:"Security",department:"Security",email:"john.s@email.com",phone:"+91 98765 43213",startDate:"2023-12-10",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2023-12-05"},{type:"Driving License",status:"Verified",uploadedDate:"2023-12-05"},{type:"ID Card",status:"Verified",uploadedDate:"2023-12-10"}]},{id:"S005",name:"David Wilson",position:"Dealer",department:"Operations",email:"david.w@email.com",phone:"+91 98765 43214",startDate:"2024-01-20",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-01-18"},{type:"ID Card",status:"Verified",uploadedDate:"2024-01-20"}]},{id:"S006",name:"Lisa Brown",position:"Kitchen Staff",department:"Kitchen",email:"lisa.b@email.com",phone:"+91 98765 43215",startDate:"2024-02-05",status:"Active",documents:[{type:"PAN Card",status:"Verified",uploadedDate:"2024-02-03"},{type:"Aadhaar Card",status:"Verified",uploadedDate:"2024-02-03"},{type:"ID Card",status:"Verified",uploadedDate:"2024-02-05"}]}],[h]=(0,a.useState)((new Date).toISOString().split("T")[0]),[p,b]=(0,a.useState)(()=>x.map(e=>({staffId:e.id,staffName:e.name,position:e.position,department:e.department,date:h,loginTime:"",logoutTime:"",status:"pending"}))),[g,f]=(0,a.useState)([{id:"SR001",staffId:"S001",staffName:"Sarah Johnson",requestType:"leave",subject:"Leave Application",message:"I need to take leave on 2024-01-25 for personal reasons.",leaveStartDate:"2024-01-25",leaveEndDate:"2024-01-26",leaveType:"Personal Leave",status:"pending",submittedDate:new Date(Date.now()-1728e5).toISOString(),hrResponse:null},{id:"SR002",staffId:"S002",staffName:"Mike Chen",requestType:"chat",subject:"Need to discuss schedule",message:"Can we discuss my upcoming schedule change?",status:"in_progress",submittedDate:new Date(Date.now()-864e5).toISOString(),hrResponse:"Sure, let's schedule a meeting."},{id:"SR003",staffId:"S003",staffName:"Emma Davis",requestType:"leave",subject:"Medical Leave Request",message:"I need medical leave for upcoming surgery.",leaveStartDate:"2024-02-05",leaveEndDate:"2024-02-10",leaveType:"Medical Leave",status:"approved",submittedDate:new Date(Date.now()-432e6).toISOString(),hrResponse:"Approved. Please submit medical certificate."}]),[y,v]=(0,a.useState)("all"),[j,w]=(0,a.useState)(null),[N,S]=(0,a.useState)(""),[C,k]=(0,a.useState)("pending"),[P,A]=(0,a.useState)(null),[I,D]=(0,a.useState)(!1),[T,_]=(0,a.useState)(""),[E,R]=(0,a.useState)(null),[L,O]=(0,a.useState)(""),[M,F]=(0,a.useState)([{id:1,name:"Rahul Sharma",documentType:"PAN Card",docUrl:"#",status:"Pending",submittedDate:"2024-02-20",playerId:"P001",documentNumber:"ABCDE1234F",email:"rahul@example.com",phone:"+91 9876543210"},{id:2,name:"Priya Patel",documentType:"Aadhaar",docUrl:"#",status:"Pending",submittedDate:"2024-02-21",playerId:"P002",documentNumber:"1234 5678 9012",email:"priya@example.com",phone:"+91 9876543211"}]),[B,q]=(0,a.useState)([{id:1,name:"Amit Kumar",playerId:"P003",fields:[{field:"Phone Number",oldValue:"+91 9876543210",newValue:"+91 9123456780"},{field:"Address",oldValue:"Old Address",newValue:"New Address"}],status:"Pending",requestedDate:"2024-02-22"},{id:2,name:"Sneha Gupta",playerId:"P004",fields:[{field:"Email",oldValue:"sneha.old@test.com",newValue:"sneha.new@test.com"}],status:"Pending",requestedDate:"2024-02-23"}]),[z,U]=(0,a.useState)([{id:"P001",name:"John Doe",email:"john.doe@example.com",phone:"+91 9876543210",status:"Active",kycStatus:"Verified",registrationDate:"2024-01-15",referredBy:"Agent X",balance:5e3},{id:"P002",name:"Jane Smith",email:"jane.smith@example.com",phone:"+91 9876543211",status:"Active",kycStatus:"Pending",registrationDate:"2024-01-10",referredBy:"Agent Y",balance:2500},{id:"P003",name:"Rajesh Kumar",email:"rajesh@example.com",phone:"+91 9876543212",status:"Suspended",kycStatus:"Verified",registrationDate:"2024-01-08",referredBy:"Agent Z",balance:0},{id:"P004",name:"Priya Sharma",email:"priya@example.com",phone:"+91 9876543213",status:"Pending Approval",kycStatus:"Pending",registrationDate:"2024-01-20",referredBy:"Agent A",balance:0}]),[W,H]=(0,a.useState)([{id:1,name:"Rajesh Kumar",email:"rajesh@example.com",phone:"+91 9876543212",registrationDate:"2024-02-18",status:"Pending",referredBy:"Agent X"},{id:2,name:"Meera Singh",email:"meera@example.com",phone:"+91 9876543213",registrationDate:"2024-02-19",status:"Pending",referredBy:"Agent Y"}]),[V,J]=(0,a.useState)([{id:1,name:"Vikram Patel",email:"vikram@example.com",reason:"Suspicious Activity",suspensionDate:"2024-02-15",status:"Suspended",duration:"temporary",suspensionDays:7}]),[K,Q]=(0,a.useState)([{id:"PC001",playerId:"P001",playerName:"Alex Johnson",status:"open",lastMessage:"Need assistance with account",lastMessageTime:new Date(Date.now()-18e4).toISOString(),messages:[{id:"M1",sender:"player",senderName:"Alex Johnson",text:"Need assistance with account",timestamp:new Date(Date.now()-18e4).toISOString()}],createdAt:new Date(Date.now()-6e5).toISOString()}]),[G,Y]=(0,a.useState)([{id:"SC001",staffId:"ST001",staffName:"Sarah Johnson",staffRole:"Dealer",status:"open",lastMessage:"Need assistance with schedule",lastMessageTime:new Date(Date.now()-3e5).toISOString(),messages:[{id:"M3",sender:"staff",senderName:"Sarah Johnson",text:"Need assistance with schedule",timestamp:new Date(Date.now()-3e5).toISOString()}],createdAt:new Date(Date.now()-3e5).toISOString()}]);(0,a.useEffect)(()=>{const e=(new Date).toISOString().split("T")[0];h!==e&&b(x.map(t=>({staffId:t.id,staffName:t.name,position:t.position,department:t.department,date:e,loginTime:"",logoutTime:"",status:"pending"})))},[h]);const $="all"===y?g:g.filter(e=>e.status===y),Z=(e,t)=>{A(s=>{const a=[...s.documents];return a[e]=(0,n.A)((0,n.A)({},a[e]),{},{status:t}),(0,n.A)((0,n.A)({},s),{},{documents:a})});x.map(s=>{if(s.id===P.id){const a=[...s.documents];return a[e]=(0,n.A)((0,n.A)({},a[e]),{},{status:t}),(0,n.A)((0,n.A)({},s),{},{documents:a})}return s});alert('Document status updated to "'.concat(t,'"'))};(0,a.useEffect)(()=>{P||(D(!1),_(""),R(null),O(""))},[P]);const X=()=>{localStorage.clear(),sessionStorage.clear(),s("/hr/signin")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(so,{activeItem:e,setActiveItem:t,menuItems:["Staff Management","Notifications","Salary History","Player Management","Attendance Management","Chat"],onSignOut:X}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-pink-500 to-rose-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["HR Portal - ",e]}),(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:"Staff management, attendance, and performance"})]}),(0,ta.jsx)("button",{onClick:X,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),"Staff Management"===e&&(0,ta.jsx)(Yi,{selectedClubId:u}),"Salary History"===e&&(0,ta.jsx)(Zi,{selectedClubId:u}),"Player Management"===e&&(0,ta.jsx)($i,{selectedClubId:u}),"Attendance Management"===e&&(0,ta.jsx)(Xi,{selectedClubId:u}),"Chat"===e&&(0,ta.jsx)(to,{clubId:u}),"Notifications"===e&&u&&(0,ta.jsx)(ei,{selectedClubId:u,recipientType:"staff"}),!1,"Staff Directory"===e&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-cyan-600/30 via-blue-500/20 to-indigo-700/30 rounded-xl shadow-md border border-cyan-800/40",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Staff Directory"}),(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:x.map(e=>(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg border border-blue-400/30",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.name}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-sm ".concat("Active"===e.status?"bg-green-500/30 text-green-300":"bg-yellow-500/30 text-yellow-300"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-1",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Position: ",e.position]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Department: ",e.department]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Email: ",e.email]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Phone: ",e.phone]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Start Date: ",e.startDate]})]}),(0,ta.jsxs)("div",{className:"mt-3 flex gap-2",children:[(0,ta.jsx)("button",{className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>A(e),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded text-sm",children:"View Details"})]})]},e.id))})]}),P&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-xl shadow-2xl border border-purple-500/30 max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("div",{className:"p-6 border-b border-white/10",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Staff Details"}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Complete information for ",P.name]})]}),(0,ta.jsx)("button",{onClick:()=>A(null),className:"text-white/70 hover:text-white text-2xl font-bold",children:"\xd7"})]})}),(0,ta.jsxs)("div",{className:"p-6 space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4 border-b border-white/10 pb-2",children:"Basic Information"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Staff ID"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.id})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Full Name"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Position"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.position})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Department"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.department})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Email"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.email})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Phone"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.phone})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Start Date"}),(0,ta.jsx)("div",{className:"text-white font-medium",children:P.startDate})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("div",{children:(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs border font-medium ".concat("Active"===P.status?"bg-green-500/30 text-green-300 border-green-400/50":"bg-yellow-500/30 text-yellow-300 border-yellow-400/50"),children:P.status})})]})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between mb-4 border-b border-white/10 pb-2",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white",children:"Document Management"}),(0,ta.jsx)("button",{onClick:()=>D(!I),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:I?"Cancel Upload":"\u2795 Upload Document"})]}),I&&(0,ta.jsxs)("div",{className:"bg-white/5 p-4 rounded-lg border border-indigo-400/30 mb-4",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Upload New Document"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Document Type"}),(0,ta.jsxs)(CustomSelect,{className:"w-full",value:T,onChange:e=>_(e.target.value),children:[(0,ta.jsx)("option",{value:"",children:"Select Document Type"}),(0,ta.jsx)("option",{value:"ID Card",children:"ID Card"}),(0,ta.jsx)("option",{value:"PAN Card",children:"PAN Card"}),(0,ta.jsx)("option",{value:"Aadhaar Card",children:"Aadhaar Card"}),(0,ta.jsx)("option",{value:"Passport",children:"Passport"}),(0,ta.jsx)("option",{value:"Driving License",children:"Driving License"}),(0,ta.jsx)("option",{value:"Educational Certificate",children:"Educational Certificate"}),(0,ta.jsx)("option",{value:"Experience Certificate",children:"Experience Certificate"}),(0,ta.jsx)("option",{value:"Medical Certificate",children:"Medical Certificate"}),(0,ta.jsx)("option",{value:"Contract Document",children:"Contract Document"}),(0,ta.jsx)("option",{value:"Other",children:"Other"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Upload Document"}),(0,ta.jsxs)("div",{className:"mt-1 border-2 border-dashed border-white/30 rounded-lg p-6 text-center hover:border-indigo-400/50 transition-colors",children:[(0,ta.jsx)("input",{type:"file",id:"document-upload",className:"hidden",accept:".pdf,.jpg,.jpeg,.png",onChange:e=>{const t=e.target.files[0];t&&(R(t),O(t.name),t.size>10485760&&(alert("File size should be less than 10MB"),R(null),O(""),e.target.value=""))}}),(0,ta.jsxs)("label",{htmlFor:"document-upload",className:"cursor-pointer",children:[(0,ta.jsx)("div",{className:"text-white mb-2",children:L?"\ud83d\udcc4 ".concat(L):"Click to upload or drag and drop"}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:"PNG, JPG, PDF up to 10MB"})]})]})]}),(0,ta.jsx)("button",{onClick:()=>{if(!T||!E)return void alert("Please select document type and upload a file");const e={type:T,status:"Pending Review",uploadedDate:(new Date).toISOString().split("T")[0]};A(t=>(0,n.A)((0,n.A)({},t),{},{documents:[...t.documents||[],e]}));x.map(t=>t.id===P.id?(0,n.A)((0,n.A)({},t),{},{documents:[...t.documents||[],e]}):t);alert('Document "'.concat(T,'" uploaded successfully for ').concat(P.name)),_(""),R(null),O(""),D(!1)},className:"w-full bg-indigo-600 hover:bg-indigo-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Upload Document"})]})]}),P.documents&&P.documents.length>0?(0,ta.jsx)("div",{className:"space-y-3",children:P.documents.map((e,t)=>(0,ta.jsx)("div",{className:"bg-white/5 p-4 rounded-lg border border-white/10",children:(0,ta.jsxs)("div",{className:"flex items-start justify-between",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ta.jsx)("div",{className:"text-white font-medium",children:e.type}),(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs border font-medium ".concat("Verified"===e.status?"bg-green-500/30 text-green-300 border-green-400/50":"Pending Review"===e.status?"bg-yellow-500/30 text-yellow-300 border-yellow-400/50":"bg-red-500/30 text-red-300 border-red-400/50"),children:e.status})]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Uploaded: ",e.uploadedDate]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,ta.jsx)("button",{onClick:()=>alert("Viewing document: ".concat(e.type)),className:"bg-blue-600 hover:bg-blue-500 text-white px-3 py-1 rounded text-sm",children:"\ud83d\udc41\ufe0f View"}),(0,ta.jsx)("button",{onClick:()=>alert("Downloading document: ".concat(e.type)),className:"bg-purple-600 hover:bg-purple-500 text-white px-3 py-1 rounded text-sm",children:"\u2b07\ufe0f Download"}),"Verified"!==e.status&&(0,ta.jsx)("button",{onClick:()=>Z(t,"Verified"),className:"bg-green-600 hover:bg-green-500 text-white px-3 py-1 rounded text-sm",children:"\u2713 Verify"}),"Pending Review"===e.status&&(0,ta.jsx)("button",{onClick:()=>Z(t,"Rejected"),className:"bg-red-600 hover:bg-red-500 text-white px-3 py-1 rounded text-sm",children:"\u2717 Reject"}),"Verified"===e.status&&(0,ta.jsx)("button",{onClick:()=>Z(t,"Pending Review"),className:"bg-yellow-600 hover:bg-yellow-500 text-white px-3 py-1 rounded text-sm",children:"\u21bb Reset"})]})]})},t))}):(0,ta.jsxs)("div",{className:"text-center py-8 text-gray-400 border border-white/10 rounded-lg bg-white/5",children:[(0,ta.jsx)("div",{className:"text-4xl mb-2",children:"\ud83d\udcc4"}),(0,ta.jsx)("div",{children:"No documents uploaded yet"}),(0,ta.jsx)("div",{className:"text-sm mt-2",children:'Click "Upload Document" to add a new document'})]})]}),(0,ta.jsx)("div",{className:"flex gap-3 pt-4 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:()=>A(null),className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white px-4 py-3 rounded-lg font-semibold",children:"Close"})})]})]})})]}),"Staff Requests"===e&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-blue-600/30 via-indigo-500/20 to-purple-700/30 rounded-xl shadow-md border border-blue-800/40",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Staff Requests & Applications"}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Filter by Status"}),(0,ta.jsxs)(CustomSelect,{className:"w-full md:w-64",value:y,onChange:e=>v(e.target.value),children:[(0,ta.jsx)("option",{value:"all",children:"All Requests"}),(0,ta.jsx)("option",{value:"pending",children:"Pending"}),(0,ta.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,ta.jsx)("option",{value:"approved",children:"Approved"}),(0,ta.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,ta.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Staff Requests (",$.length,")"]}),(0,ta.jsx)("div",{className:"space-y-3 max-h-[600px] overflow-y-auto",children:$.length>0?$.map(e=>(0,ta.jsxs)("div",{onClick:()=>{w(e),S(e.hrResponse||""),k(e.status)},className:"p-4 rounded-lg border cursor-pointer transition-all ".concat((null===j||void 0===j?void 0:j.id)===e.id?"bg-gradient-to-r from-blue-500/30 to-purple-500/30 border-blue-400/50":"bg-white/5 border-white/10 hover:bg-white/10"),children:[(0,ta.jsxs)("div",{className:"flex items-start justify-between mb-2",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:e.staffName}),(0,ta.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["ID: ",e.staffId]})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("approved"===e.status?"bg-green-500/30 text-green-300":"rejected"===e.status?"bg-red-500/30 text-red-300":"in_progress"===e.status?"bg-blue-500/30 text-blue-300":"bg-yellow-500/30 text-yellow-300"),children:"approved"===e.status?"Approved":"rejected"===e.status?"Rejected":"in_progress"===e.status?"In Progress":"Pending"})]}),(0,ta.jsx)("div",{className:"text-sm text-white font-medium mb-1",children:"leave"===e.requestType?"\ud83d\udcc5 Leave Application":"\ud83d\udcac Chat Request"}),(0,ta.jsxs)("div",{className:"text-xs text-gray-300 mb-1",children:["Subject: ",e.subject]}),"leave"===e.requestType&&(0,ta.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["Leave: ",e.leaveStartDate," to ",e.leaveEndDate," (",e.leaveType,")"]}),(0,ta.jsxs)("div",{className:"text-xs text-gray-500 mt-2",children:["Submitted: ",new Date(e.submittedDate).toLocaleDateString("en-IN")]})]},e.id)):(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:["No ","all"!==y?y:""," requests found"]})})]}),(0,ta.jsx)("div",{className:"bg-white/10 p-4 rounded-lg",children:j?(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Request Details"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Staff Member"}),(0,ta.jsxs)("div",{className:"text-white font-medium",children:[j.staffName," (ID: ",j.staffId,")"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Request Type"}),(0,ta.jsx)("div",{className:"text-white",children:"leave"===j.requestType?"\ud83d\udcc5 Leave Application":"\ud83d\udcac Chat Request"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Subject"}),(0,ta.jsx)("div",{className:"text-white",children:j.subject})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Message"}),(0,ta.jsx)("div",{className:"text-white bg-white/5 p-3 rounded border border-white/10",children:j.message})]}),"leave"===j.requestType&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Leave Type"}),(0,ta.jsx)("div",{className:"text-white",children:j.leaveType})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Start Date"}),(0,ta.jsx)("div",{className:"text-white",children:j.leaveStartDate})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"End Date"}),(0,ta.jsx)("div",{className:"text-white",children:j.leaveEndDate})]})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Submitted"}),(0,ta.jsx)("div",{className:"text-white",children:new Date(j.submittedDate).toLocaleString("en-IN")})]})]})]}),j.hrResponse&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-gray-400 text-xs",children:"Previous HR Response"}),(0,ta.jsx)("div",{className:"text-white bg-blue-500/20 p-3 rounded border border-blue-400/30",children:j.hrResponse})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"HR Response"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-white/10 border border-white/20 rounded text-white placeholder-gray-400",rows:"4",placeholder:"Enter your response...",value:N,onChange:e=>S(e.target.value)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Status"}),(0,ta.jsxs)(CustomSelect,{className:"w-full",value:C,onChange:e=>k(e.target.value),children:[(0,ta.jsx)("option",{value:"pending",children:"Pending"}),(0,ta.jsx)("option",{value:"in_progress",children:"In Progress"}),(0,ta.jsx)("option",{value:"approved",children:"Approved"}),(0,ta.jsx)("option",{value:"rejected",children:"Rejected"})]})]}),(0,ta.jsx)("button",{onClick:()=>{j&&N.trim()?(f(e=>e.map(e=>e.id===j.id?(0,n.A)((0,n.A)({},e),{},{hrResponse:N.trim(),status:C}):e)),alert("Request ".concat("approved"===C?"approved":"rejected"===C?"rejected":"updated"," successfully")),w(null),S(""),k("pending")):alert("Please enter a response")},className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Submit Response"})]}):(0,ta.jsx)("div",{className:"flex items-center justify-center h-full min-h-[400px] text-gray-400",children:(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udccb"}),(0,ta.jsx)("div",{className:"text-lg",children:"Select a request to view details and respond"})]})})})]})]}),(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-purple-600/30 via-pink-500/20 to-rose-700/30 rounded-xl shadow-md border border-purple-800/40",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Request Summary"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-2xl font-bold text-yellow-300",children:g.filter(e=>"pending"===e.status).length}),(0,ta.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Pending"})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-2xl font-bold text-blue-300",children:g.filter(e=>"in_progress"===e.status).length}),(0,ta.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"In Progress"})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-2xl font-bold text-green-300",children:g.filter(e=>"approved"===e.status).length}),(0,ta.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Approved"})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg text-center",children:[(0,ta.jsx)("div",{className:"text-2xl font-bold text-red-300",children:g.filter(e=>"rejected"===e.status).length}),(0,ta.jsx)("div",{className:"text-sm text-gray-300 mt-1",children:"Rejected"})]})]})]})]}),"Performance Reviews"===e&&(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-orange-600/30 via-red-500/20 to-pink-700/30 rounded-xl shadow-md border border-orange-800/40",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Performance Reviews"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Schedule Review"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm",children:"Staff Member"}),(0,ta.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,ta.jsx)("option",{children:"Sarah Johnson - Dealer"}),(0,ta.jsx)("option",{children:"Mike Chen - Floor Manager"}),(0,ta.jsx)("option",{children:"Emma Davis - Cashier"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm",children:"Review Type"}),(0,ta.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,ta.jsx)("option",{children:"Monthly Review"}),(0,ta.jsx)("option",{children:"Quarterly Review"}),(0,ta.jsx)("option",{children:"Annual Review"}),(0,ta.jsx)("option",{children:"Probation Review"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm",children:"Review Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm",children:"Reviewer"}),(0,ta.jsxs)("select",{className:"w-full mt-1 px-3 py-2 bg-white/10 border border-white/20 rounded text-white",children:[(0,ta.jsx)("option",{children:"HR Manager"}),(0,ta.jsx)("option",{children:"Operations Manager"}),(0,ta.jsx)("option",{children:"General Manager"})]})]}),(0,ta.jsx)("button",{className:"w-full bg-orange-600 hover:bg-orange-500 text-white px-4 py-2 rounded-lg font-semibold",children:"Schedule Review"})]})]}),(0,ta.jsxs)("div",{className:"bg-white/10 p-4 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Upcoming Reviews"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:"Sarah Johnson"}),(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Monthly Review - Due: 2024-01-25"}),(0,ta.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Scheduled"})]}),(0,ta.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:"Mike Chen"}),(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Quarterly Review - Due: 2024-02-01"}),(0,ta.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Pending"})]}),(0,ta.jsxs)("div",{className:"bg-orange-500/20 p-3 rounded-lg border border-orange-400/30",children:[(0,ta.jsx)("div",{className:"font-semibold text-white",children:"Emma Davis"}),(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Probation Review - Due: 2024-02-15"}),(0,ta.jsx)("div",{className:"text-xs text-orange-300",children:"Status: Scheduled"})]})]})]})]})]})})]})})]}),c]})}const lo=["Dashboard","Notifications","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides"];function ro(e){let{activeItem:t,setActiveItem:s,menuItems:l=lo,onSignOut:r=null}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ur({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:g}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=f.email||"cashier@pokerroom.com",v=f.displayName||f.name||y.split("@")[0],j=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[d&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-green-500 to-emerald-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!i),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-green-500/20 via-emerald-600/30 to-teal-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?i?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-green-400 via-emerald-300 to-teal-400 drop-shadow-lg mb-6",children:"Cashier Portal"}),(0,ta.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-green-400 to-emerald-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"C"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:v}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:y})]})]}),u&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?vl.error("Password must be at least 8 characters"):j.mutate({email:y,currentPassword:x.currentPassword,newPassword:x.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:j.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:j.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),g&&g.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:g.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:l.map((e,a)=>(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-green-400 to-emerald-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-green-400/20 hover:to-emerald-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount})]})},a))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function no(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)(null),[d,c]=(0,a.useState)(1),[u,m]=(0,a.useState)({search:"",startDate:"",endDate:"",staffId:""}),[x,h]=(0,a.useState)({staffId:"",payPeriod:"Weekly",baseSalary:"",overtimeHours:"",overtimeAmount:"",deductions:"",periodStartDate:"",periodEndDate:"",notes:""}),{data:p}=ur({queryKey:["payroll-staff",t],queryFn:()=>jl.oA.getAllStaffForPayroll(t),enabled:!!t}),{data:b,isLoading:g}=ur({queryKey:["salary-payments",t,d,u],queryFn:()=>jl.oA.getSalaryPayments(t,(0,n.A)({page:d,limit:10},u)),enabled:!!t}),f=pr({mutationFn:e=>jl.oA.processSalary(t,e),onSuccess:()=>{vl.success("Salary processed successfully!"),s.invalidateQueries(["salary-payments",t]),r(!1),y()},onError:e=>{vl.error(e.message||"Failed to process salary")}}),y=()=>{h({staffId:"",payPeriod:"Weekly",baseSalary:"",overtimeHours:"",overtimeAmount:"",deductions:"",periodStartDate:"",periodEndDate:"",notes:""}),o(null)},v=(null===p||void 0===p?void 0:p.staff)||[],j=(null===b||void 0===b?void 0:b.payments)||[],w=(null===b||void 0===b?void 0:b.totalPages)||1,N=(null===b||void 0===b?void 0:b.total)||0;return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Employee Salary Processing"}),(0,ta.jsxs)("div",{className:"text-white",children:["Total Records: ",N]})]}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"Name or email...",value:u.search,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.startDate,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.endDate,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Employee"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:u.staffId,onChange:e=>m((0,n.A)((0,n.A)({},u),{},{staffId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Employees"}),v.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Select Employee to Process Salary"}),(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:v.map(e=>(0,ta.jsxs)("button",{onClick:()=>(e=>{o(e),h((0,n.A)((0,n.A)({},x),{},{staffId:e.id})),r(!0)})(e),className:"bg-slate-700 hover:bg-slate-600 p-4 rounded-lg text-left transition-colors",children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:e.name}),(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:e.role}),(0,ta.jsx)("div",{className:"text-xs text-gray-500 mt-1",children:e.email})]},e.id))})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Salary Payment History"}),g?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===j.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No salary payments found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Employee"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Period"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Pay Period"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Base Salary"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Overtime"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Deductions"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Net Amount"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,ta.jsx)("tbody",{children:j.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:null===(t=e.staff)||void 0===t?void 0:t.name}),(0,ta.jsxs)("td",{className:"text-white p-3 text-sm",children:[new Date(e.periodStartDate).toLocaleDateString()," -"," ",new Date(e.periodEndDate).toLocaleDateString()]}),(0,ta.jsx)("td",{className:"text-white p-3",children:e.payPeriod}),(0,ta.jsxs)("td",{className:"text-right text-white p-3",children:["\u20b9",Number(e.baseSalary).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-green-400 p-3",children:["+\u20b9",Number(e.overtimeAmount).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-red-400 p-3",children:["-\u20b9",Number(e.deductions).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-white font-semibold p-3",children:["\u20b9",Number(e.netAmount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.paymentDate).toLocaleDateString()})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(d-1)+1," to ",Math.min(10*d,N)," of ",N," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(w)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>c(t+1),className:"px-4 py-2 rounded-lg ".concat(d===t+1?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>c(e=>Math.min(w,e+1)),disabled:d===w,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-purple-900/90 to-pink-900/90 rounded-xl p-6 max-w-2xl w-full border border-purple-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Process Staff Salary"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Select Staff Member *"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.staffId,onChange:e=>{const t=null===p||void 0===p?void 0:p.staff.find(t=>t.id===e.target.value);h((0,n.A)((0,n.A)({},x),{},{staffId:e.target.value})),o(t)},children:[(0,ta.jsx)("option",{value:"",children:"Select an option"}),v.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," - ",e.role]},e.id))]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Pay Period *"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.payPeriod,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{payPeriod:e.target.value})),children:[(0,ta.jsx)("option",{value:"Weekly",children:"Weekly"}),(0,ta.jsx)("option",{value:"Bi-weekly",children:"Bi-weekly"}),(0,ta.jsx)("option",{value:"Monthly",children:"Monthly"})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Period Start Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.periodStartDate,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{periodStartDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Period End Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",value:x.periodEndDate,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{periodEndDate:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Base Salary *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.baseSalary,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{baseSalary:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Overtime Hours"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"0",value:x.overtimeHours,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{overtimeHours:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Overtime Amount"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.overtimeAmount,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{overtimeAmount:e.target.value}))})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Deductions"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500",placeholder:"\u20b90.00",value:x.deductions,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{deductions:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-purple-800/50 border border-purple-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 h-20",placeholder:"Additional notes...",value:x.notes,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{notes:e.target.value}))})]}),x.baseSalary&&(0,ta.jsxs)("div",{className:"bg-purple-800/30 border border-purple-500 rounded-lg p-4",children:[(0,ta.jsx)("h3",{className:"text-white font-semibold mb-2",children:"Calculation Summary"}),(0,ta.jsxs)("div",{className:"space-y-1 text-white",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{children:"Base Salary:"}),(0,ta.jsxs)("span",{children:["\u20b9",Number(x.baseSalary||0).toFixed(2)]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-green-400",children:[(0,ta.jsx)("span",{children:"Overtime:"}),(0,ta.jsxs)("span",{children:["+\u20b9",Number(x.overtimeAmount||0).toFixed(2)]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-red-400",children:[(0,ta.jsx)("span",{children:"Deductions:"}),(0,ta.jsxs)("span",{children:["-\u20b9",Number(x.deductions||0).toFixed(2)]})]}),(0,ta.jsxs)("div",{className:"flex justify-between font-bold text-lg border-t border-purple-500 pt-2 mt-2",children:[(0,ta.jsx)("span",{children:"Net Amount:"}),(0,ta.jsxs)("span",{children:["\u20b9",(Number(x.baseSalary||0)+Number(x.overtimeAmount||0)-Number(x.deductions||0)).toFixed(2)]})]})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{x.staffId&&x.baseSalary&&x.periodStartDate&&x.periodEndDate?f.mutate((0,n.A)((0,n.A)({},x),{},{baseSalary:Number(x.baseSalary),overtimeHours:x.overtimeHours?Number(x.overtimeHours):0,overtimeAmount:x.overtimeAmount?Number(x.overtimeAmount):0,deductions:x.deductions?Number(x.deductions):0})):vl.error("Please fill in all required fields")},disabled:f.isLoading,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:f.isLoading?"Processing...":"Process Salary"}),(0,ta.jsx)("button",{onClick:()=>{r(!1),y()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function io(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)("tips"),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(1),[p,b]=(0,a.useState)(1),[g,f]=(0,a.useState)({search:"",startDate:"",endDate:"",dealerId:""}),[y,v]=(0,a.useState)({search:"",startDate:"",endDate:"",dealerId:""}),[j,w]=(0,a.useState)({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5}),[N,S]=(0,a.useState)({dealerId:"",tipDate:(new Date).toISOString().split("T")[0],totalTips:"",notes:""}),[C,k]=(0,a.useState)({dealerId:"",cashoutDate:(new Date).toISOString().split("T")[0],amount:"",notes:""}),{data:P}=ur({queryKey:["payroll-dealers",t],queryFn:()=>jl.oA.getDealersForPayroll(t),enabled:!!t}),{data:A}=ur({queryKey:["tip-settings",t,null===u||void 0===u?void 0:u.id],queryFn:()=>jl.oA.getTipSettings(t,null===u||void 0===u?void 0:u.id),enabled:!!t&&!!u&&i});(0,a.useEffect)(()=>{null!==A&&void 0!==A&&A.settings&&w({clubHoldPercentage:Number(A.settings.clubHoldPercentage),dealerSharePercentage:Number(A.settings.dealerSharePercentage),floorManagerPercentage:Number(A.settings.floorManagerPercentage)})},[A]);const{data:I,isLoading:D}=ur({queryKey:["dealer-tips",t,x,g],queryFn:()=>jl.oA.getDealerTips(t,(0,n.A)({page:x,limit:10},g)),enabled:!!t}),{data:T,isLoading:_}=ur({queryKey:["dealer-cashouts",t,p,y],queryFn:()=>jl.oA.getDealerCashouts(t,(0,n.A)({page:p,limit:10},y)),enabled:!!t}),E=pr({mutationFn:e=>{const s={clubHoldPercentage:parseFloat(e.clubHoldPercentage)||0,dealerSharePercentage:parseFloat(e.dealerSharePercentage)||0,floorManagerPercentage:parseFloat(e.floorManagerPercentage)||0};return jl.oA.updateTipSettings(t,s,null===u||void 0===u?void 0:u.id)},onSuccess:()=>{vl.success("Tip settings updated successfully!"),s.invalidateQueries(["tip-settings",t,null===u||void 0===u?void 0:u.id])},onError:e=>{vl.error(e.message||"Failed to update tip settings")}}),R=pr({mutationFn:e=>jl.oA.processDealerTips(t,e),onSuccess:()=>{vl.success("Dealer tips processed successfully!"),s.invalidateQueries(["dealer-tips",t]),o(!1),m(null),S({dealerId:"",tipDate:(new Date).toISOString().split("T")[0],totalTips:"",notes:""}),w({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5})},onError:e=>{vl.error(e.message||"Failed to process tips")}}),L=pr({mutationFn:e=>jl.oA.processDealerCashout(t,e),onSuccess:()=>{vl.success("Dealer cashout processed successfully!"),s.invalidateQueries(["dealer-cashouts",t]),c(!1),m(null),k({dealerId:"",cashoutDate:(new Date).toISOString().split("T")[0],amount:"",notes:""})},onError:e=>{vl.error(e.message||"Failed to process cashout")}}),O=(null===P||void 0===P?void 0:P.dealers)||[],M=(null===I||void 0===I?void 0:I.tips)||[],F=(null===T||void 0===T?void 0:T.cashouts)||[],B=(null===I||void 0===I?void 0:I.totalPages)||1,q=(null===I||void 0===I?void 0:I.total)||0,z=(null===T||void 0===T?void 0:T.totalPages)||1,U=(null===T||void 0===T?void 0:T.total)||0,W=Number(j.clubHoldPercentage)+Number(j.dealerSharePercentage)+Number(j.floorManagerPercentage);return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Dealer Tips Management"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>r("tips"),className:"px-6 py-3 font-semibold transition-colors ".concat("tips"===l?"text-white border-b-2 border-cyan-500":"text-gray-400 hover:text-white"),children:"Dealer Tips %"}),(0,ta.jsx)("button",{onClick:()=>r("cashout"),className:"px-6 py-3 font-semibold transition-colors ".concat("cashout"===l?"text-white border-b-2 border-cyan-500":"text-gray-400 hover:text-white"),children:"Dealer Cash Out"})]}),"tips"===l&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Dealer to Process Their Tips"}),(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:O.map(e=>(0,ta.jsxs)("button",{onClick:()=>(e=>{m(e),S((0,n.A)((0,n.A)({},N),{},{dealerId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-cyan-900/30 to-blue-900/30 border border-cyan-700 rounded-lg p-4 hover:from-cyan-800/40 hover:to-blue-800/40 transition-all text-left",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,ta.jsx)("p",{className:"text-sm text-cyan-400 mt-1",children:e.email}),(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]})]},e.id))})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Dealer Tips History"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"Dealer name...",value:g.search,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.startDate,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.endDate,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:g.dealerId,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{dealerId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Dealers"}),O.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),D?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===M.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No tips processed yet"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Dealer"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Total Tips"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Dealer Share"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Club Hold"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Floor Manager"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Status"})]})}),(0,ta.jsx)("tbody",{children:M.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:null===(t=e.dealer)||void 0===t?void 0:t.name}),(0,ta.jsxs)("td",{className:"text-right text-white p-3",children:["\u20b9",Number(e.totalTips).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-green-400 p-3",children:["\u20b9",Number(e.dealerShareAmount).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-cyan-400 p-3",children:["\u20b9",Number(e.clubHoldAmount).toFixed(2)]}),(0,ta.jsxs)("td",{className:"text-right text-blue-400 p-3",children:["\u20b9",Number(e.floorManagerAmount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.tipDate).toLocaleDateString()}),(0,ta.jsx)("td",{className:"text-white p-3",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-green-600 rounded text-xs",children:e.status})})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(x-1)+1," to ",Math.min(10*x,q)," of"," ",q," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>h(e=>Math.max(1,e-1)),disabled:1===x,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(B)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>h(t+1),className:"px-4 py-2 rounded-lg ".concat(x===t+1?"bg-cyan-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>h(e=>Math.min(B,e+1)),disabled:x===B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),"cashout"===l&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Dealer to Process Cash Out"}),(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-60 overflow-y-auto",children:O.map(e=>(0,ta.jsxs)("button",{onClick:()=>(e=>{m(e),k((0,n.A)((0,n.A)({},C),{},{dealerId:e.id})),c(!0)})(e),className:"bg-gradient-to-r from-green-900/30 to-emerald-900/30 border border-green-700 rounded-lg p-4 hover:from-green-800/40 hover:to-emerald-800/40 transition-all text-left",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,ta.jsx)("p",{className:"text-sm text-green-400 mt-1",children:e.email}),(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]})]},e.id))})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Dealer Cashout History"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Dealer name...",value:y.search,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.startDate,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.endDate,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Dealer"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:y.dealerId,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{dealerId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Dealers"}),O.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),_?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===F.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No cashouts processed yet"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Dealer"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Notes"})]})}),(0,ta.jsx)("tbody",{children:F.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:null===(t=e.dealer)||void 0===t?void 0:t.name}),(0,ta.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.amount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.cashoutDate).toLocaleDateString()}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.notes||"-"})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(p-1)+1," to"," ",Math.min(10*p,U)," of ",U," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>b(e=>Math.max(1,e-1)),disabled:1===p,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(z)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>b(t+1),className:"px-4 py-2 rounded-lg ".concat(p===t+1?"bg-green-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>b(e=>Math.min(z,e+1)),disabled:p===z,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full border border-cyan-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Dealer Tips"}),u&&(0,ta.jsxs)("div",{className:"bg-cyan-900/30 border border-cyan-600 rounded-lg p-4 mb-4",children:[(0,ta.jsx)("div",{className:"text-xs text-cyan-400 mb-1",children:"Processing tips for:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:u.name}),(0,ta.jsx)("p",{className:"text-sm text-cyan-300 mt-1",children:u.email})]}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-cyan-900/50 to-blue-900/50 rounded-lg p-6 border border-cyan-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83c\udfaf Tip Distribution Settings"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Club Hold Percentage"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.clubHoldPercentage,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{clubHoldPercentage:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Dealer Share Percentage"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.dealerSharePercentage,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{dealerSharePercentage:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Floor Manager Share"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-cyan-800/30 border border-cyan-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:j.floorManagerPercentage,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{floorManagerPercentage:e.target.value}))})]}),(0,ta.jsxs)("div",{className:"bg-cyan-800/50 border border-cyan-600 rounded-lg p-4",children:[(0,ta.jsx)("p",{className:"text-white mb-2",children:"Current Distribution:"}),(0,ta.jsxs)("p",{className:"text-white",children:["Club: ",j.clubHoldPercentage,"% \u2022 Dealer: ",j.dealerSharePercentage,"% \u2022 Floor Manager: ",j.floorManagerPercentage,"%"]}),(0,ta.jsxs)("p",{className:"text-white font-semibold mt-2",children:["Total: ",W.toFixed(2),"%",Math.abs(W-100)>.01&&(0,ta.jsx)("span",{className:"text-red-400 ml-2",children:"\u26a0\ufe0f Must equal 100%"})]})]}),(0,ta.jsx)("button",{onClick:()=>{const e=Number(j.clubHoldPercentage)+Number(j.dealerSharePercentage)+Number(j.floorManagerPercentage);Math.abs(e-100)>.01?vl.error("Percentages must add up to 100%"):E.mutate(j)},disabled:E.isLoading,className:"w-full bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:E.isLoading?"Updating...":"Update Settings"})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700/50 rounded-lg p-6 border border-slate-600",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udcb5 Tip Processing"}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Tip Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:N.tipDate,onChange:e=>S((0,n.A)((0,n.A)({},N),{},{tipDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Total Tips (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"\u20b90.00",value:N.totalTips,onChange:e=>S((0,n.A)((0,n.A)({},N),{},{totalTips:e.target.value}))})]}),N.totalTips&&(0,ta.jsxs)("div",{className:"bg-cyan-900/30 border border-cyan-500 rounded-lg p-3",children:[(0,ta.jsx)("p",{className:"text-white text-sm mb-1 font-semibold",children:"Distribution Preview:"}),(0,ta.jsxs)("p",{className:"text-white text-xs",children:["Club: \u20b9",(Number(N.totalTips)*Number(j.clubHoldPercentage)/100).toFixed(2)," ","\u2022 Dealer: \u20b9",(Number(N.totalTips)*Number(j.dealerSharePercentage)/100).toFixed(2)," \u2022 Floor: \u20b9",(Number(N.totalTips)*Number(j.floorManagerPercentage)/100).toFixed(2)]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500 h-20",placeholder:"Additional notes...",value:N.notes,onChange:e=>S((0,n.A)((0,n.A)({},N),{},{notes:e.target.value}))})]})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{N.dealerId&&N.totalTips?R.mutate((0,n.A)((0,n.A)({},N),{},{totalTips:Number(N.totalTips)})):vl.error("Please fill in all required fields")},disabled:R.isLoading,className:"flex-1 bg-cyan-600 hover:bg-cyan-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:R.isLoading?"Processing...":"Process Tips"}),(0,ta.jsx)("button",{onClick:()=>{o(!1),m(null),w({clubHoldPercentage:15,dealerSharePercentage:80,floorManagerPercentage:5})},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),d&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb5 Process Dealer Cash Out"}),u&&(0,ta.jsxs)("div",{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 mb-4",children:[(0,ta.jsx)("div",{className:"text-xs text-green-400 mb-1",children:"Processing cashout for:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:u.name}),(0,ta.jsx)("p",{className:"text-sm text-green-300 mt-1",children:u.email})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Cashout Date *"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:C.cashoutDate,onChange:e=>k((0,n.A)((0,n.A)({},C),{},{cashoutDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Cash Out Amount (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"\u20b90.00",value:C.amount,onChange:e=>k((0,n.A)((0,n.A)({},C),{},{amount:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Notes (Optional)"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 h-24",placeholder:"Additional notes about the cash out...",value:C.notes,onChange:e=>k((0,n.A)((0,n.A)({},C),{},{notes:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{C.dealerId&&C.amount?L.mutate((0,n.A)((0,n.A)({},C),{},{amount:Number(C.amount)})):vl.error("Please fill in all required fields")},disabled:L.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:L.isLoading?"Processing...":"Process Cash Out"}),(0,ta.jsx)("button",{onClick:()=>{c(!1),m(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function oo(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("salary");return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Payroll Management"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("salary"),className:"px-6 py-3 font-semibold transition-all ".concat("salary"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Employee Salary"}),(0,ta.jsx)("button",{onClick:()=>l("dealer"),className:"px-6 py-3 font-semibold transition-all ".concat("dealer"===s?"text-emerald-400 border-b-2 border-emerald-400":"text-gray-400 hover:text-white"),children:"Dealer Tips & Cashouts"})]}),"salary"===s?(0,ta.jsx)(no,{selectedClubId:t}):(0,ta.jsx)(io,{selectedClubId:t})]})}const co=["Welcome Bonus","Loyalty Bonus","Referral Bonus","Tournament Bonus","Special Event Bonus","Custom"],uo=["Performance Bonus","Attendance Bonus","Special Achievement","Holiday Bonus","Year-end Bonus","Custom"];function mo(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("player"),[r,n]=(0,a.useState)("process");return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Bonus Management"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>{l("player"),n("process")},className:"px-6 py-3 font-semibold transition-colors ".concat("player"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Player Bonus"}),(0,ta.jsx)("button",{onClick:()=>{l("staff"),n("process")},className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===s?"text-white border-b-2 border-pink-500":"text-gray-400 hover:text-white"),children:"Staff Bonus"})]}),"player"===s&&(0,ta.jsx)(xo,{selectedClubId:t,activeSubTab:r,setActiveSubTab:n}),"staff"===s&&(0,ta.jsx)(ho,{selectedClubId:t,activeSubTab:r,setActiveSubTab:n})]})}function xo(e){let{selectedClubId:t,activeSubTab:s,setActiveSubTab:l}=e;const r=aa(),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(1),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)({search:"",startDate:"",endDate:"",playerId:""}),[g,f]=(0,a.useState)({playerId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""}),{data:y}=ur({queryKey:["bonus-players",t,x],queryFn:()=>jl.KG.getPlayersForBonus(t,x||void 0),enabled:!!t}),{data:v,isLoading:j}=ur({queryKey:["player-bonuses",t,u,p],queryFn:()=>jl.KG.getPlayerBonuses(t,(0,n.A)({page:u,limit:10},p)),enabled:!!t&&"history"===s}),w=pr({mutationFn:e=>jl.KG.processPlayerBonus(t,e),onSuccess:()=>{vl.success("Player bonus processed successfully!"),r.invalidateQueries(["player-bonuses",t]),o(!1),c(null),N()},onError:e=>{vl.error(e.message||"Failed to process bonus")}}),N=()=>{f({playerId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""})},S=(null===y||void 0===y?void 0:y.players)||[],C=(null===v||void 0===v?void 0:v.bonuses)||[],k=(null===v||void 0===v?void 0:v.totalPages)||1,P=(null===v||void 0===v?void 0:v.total)||0;return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("process"),className:"px-6 py-3 font-semibold transition-colors ".concat("process"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Process Bonus"}),(0,ta.jsx)("button",{onClick:()=>l("history"),className:"px-6 py-3 font-semibold transition-colors ".concat("history"===s?"text-white border-b-2 border-orange-500":"text-gray-400 hover:text-white"),children:"Bonus History"})]}),"process"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"\ud83d\udd0d Search Player (Type at least 3 characters)"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Search by name, email, phone number, or player ID...",value:x,onChange:e=>h(e.target.value)}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-2",children:"Only KYC approved/verified players are shown"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Player to Process Bonus"}),0===S.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:x.length>=3?"No players found matching your search":x.length>0?"Type at least 3 characters to search":"No KYC approved players found"}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:S.map(e=>(0,ta.jsxs)("button",{onClick:()=>(e=>{c(e),f((0,n.A)((0,n.A)({},g),{},{playerId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-orange-900/30 to-amber-900/30 border border-orange-700 rounded-lg p-4 hover:from-orange-800/40 hover:to-amber-800/40 transition-all text-left",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,ta.jsx)("p",{className:"text-sm text-orange-400 mt-1",children:e.email}),e.playerId&&(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["ID: ",e.playerId]}),e.phoneNumber&&(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Phone: ",e.phoneNumber]})]},e.id))})]})]}),"history"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Name, email, or ID...",value:p.search,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.startDate,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.endDate,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Player"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:p.playerId,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{playerId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Players"}),S.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Bonus History (Total: ",P,")"]}),j?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No bonuses found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Player"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Bonus Type"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Reason"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,ta.jsx)("tbody",{children:C.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:null===(t=e.player)||void 0===t?void 0:t.name}),(0,ta.jsx)("td",{className:"text-white p-3",children:e.bonusType}),(0,ta.jsxs)("td",{className:"text-right text-orange-400 font-semibold p-3",children:["\u20b9",Number(e.bonusAmount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.reason||"-"}),(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(u-1)+1," to ",Math.min(10*u,P)," of ",P," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(k)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>m(t+1),className:"px-4 py-2 rounded-lg ".concat(u===t+1?"bg-orange-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>m(e=>Math.min(k,e+1)),disabled:u===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-orange-900/90 to-amber-900/90 rounded-xl p-6 max-w-md w-full border border-orange-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Player Bonus"}),d&&(0,ta.jsxs)("div",{className:"bg-orange-900/30 border border-orange-600 rounded-lg p-4 mb-4",children:[(0,ta.jsx)("div",{className:"text-xs text-orange-400 mb-1",children:"Processing bonus for:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:d.name}),(0,ta.jsx)("p",{className:"text-sm text-orange-300 mt-1",children:d.email})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Type *"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",value:g.bonusType,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{bonusType:e.target.value,customBonusType:""})),children:[(0,ta.jsx)("option",{value:"",children:"Select Bonus Type"}),co.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))]})]}),"Custom"===g.bonusType&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Bonus Type Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"Enter custom bonus type name...",value:g.customBonusType,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{customBonusType:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Amount (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500",placeholder:"\u20b90.00",value:g.bonusAmount,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{bonusAmount:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Reason"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-orange-800/50 border border-orange-600 rounded-lg text-white focus:ring-2 focus:ring-orange-500 h-20",placeholder:"Bonus reason...",value:g.reason,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{reason:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{g.playerId&&g.bonusType&&g.bonusAmount?"Custom"!==g.bonusType||g.customBonusType?w.mutate({playerId:g.playerId,bonusType:"Custom"===g.bonusType?g.customBonusType:g.bonusType,bonusAmount:Number(g.bonusAmount),reason:g.reason||void 0}):vl.error("Please enter custom bonus type name"):vl.error("Please fill in all required fields")},disabled:w.isLoading,className:"flex-1 bg-gradient-to-r from-orange-600 to-amber-600 hover:from-orange-500 hover:to-amber-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:w.isLoading?"Processing...":"Process Bonus"}),(0,ta.jsx)("button",{onClick:()=>{o(!1),c(null),N()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function ho(e){let{selectedClubId:t,activeSubTab:s,setActiveSubTab:l}=e;const r=aa(),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null),[u,m]=(0,a.useState)(1),[x,h]=(0,a.useState)(""),[p,b]=(0,a.useState)({search:"",startDate:"",endDate:"",staffId:""}),[g,f]=(0,a.useState)({staffId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""}),{data:y}=ur({queryKey:["bonus-staff",t,x],queryFn:()=>jl.KG.getStaffForBonus(t,x||void 0),enabled:!!t}),{data:v,isLoading:j}=ur({queryKey:["staff-bonuses",t,u,p],queryFn:()=>jl.KG.getStaffBonuses(t,(0,n.A)({page:u,limit:10},p)),enabled:!!t&&"history"===s}),w=pr({mutationFn:e=>jl.KG.processStaffBonus(t,e),onSuccess:()=>{vl.success("Staff bonus processed successfully!"),r.invalidateQueries(["staff-bonuses",t]),o(!1),c(null),N()},onError:e=>{vl.error(e.message||"Failed to process bonus")}}),N=()=>{f({staffId:"",bonusType:"",customBonusType:"",bonusAmount:"",reason:""})},S=(null===y||void 0===y?void 0:y.staff)||[],C=(null===v||void 0===v?void 0:v.bonuses)||[],k=(null===v||void 0===v?void 0:v.totalPages)||1,P=(null===v||void 0===v?void 0:v.total)||0;return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("process"),className:"px-6 py-3 font-semibold transition-colors ".concat("process"===s?"text-white border-b-2 border-pink-500":"text-gray-400 hover:text-white"),children:"Process Bonus"}),(0,ta.jsx)("button",{onClick:()=>l("history"),className:"px-6 py-3 font-semibold transition-colors ".concat("history"===s?"text-white border-b-2 border-pink-500":"text-gray-400 hover:text-white"),children:"Bonus History"})]}),"process"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"\ud83d\udd0d Search Staff Member (Type at least 3 characters)"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Search by name, email, phone number, or employee ID...",value:x,onChange:e=>h(e.target.value)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"\ud83d\udc64 Click a Staff Member to Process Bonus"}),0===S.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:x.length>=3?"No staff members found matching your search":x.length>0?"Type at least 3 characters to search":"No staff members found"}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 max-h-96 overflow-y-auto",children:S.map(e=>(0,ta.jsxs)("button",{onClick:()=>(e=>{c(e),f((0,n.A)((0,n.A)({},g),{},{staffId:e.id})),o(!0)})(e),className:"bg-gradient-to-r from-pink-900/30 to-rose-900/30 border border-pink-700 rounded-lg p-4 hover:from-pink-800/40 hover:to-rose-800/40 transition-all text-left",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold text-lg",children:e.name}),(0,ta.jsx)("p",{className:"text-sm text-pink-400 mt-1",children:e.email||"No email"}),(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Role: ",e.role]}),e.phone&&(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Phone: ",e.phone]}),e.employeeId&&(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Employee ID: ",e.employeeId]})]},e.id))})]})]}),"history"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Name, email, or ID...",value:p.search,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.startDate,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.endDate,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Staff"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:p.staffId,onChange:e=>b((0,n.A)((0,n.A)({},p),{},{staffId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Staff"}),S.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4",children:[(0,ta.jsxs)("h3",{className:"text-lg font-semibold text-white mb-4",children:["Bonus History (Total: ",P,")"]}),j?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No bonuses found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Staff"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Bonus Type"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Reason"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"})]})}),(0,ta.jsx)("tbody",{children:C.map(e=>{var t;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:null===(t=e.staff)||void 0===t?void 0:t.name}),(0,ta.jsx)("td",{className:"text-white p-3",children:e.bonusType}),(0,ta.jsxs)("td",{className:"text-right text-pink-400 font-semibold p-3",children:["\u20b9",Number(e.bonusAmount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.reason||"-"}),(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(u-1)+1," to ",Math.min(10*u,P)," of ",P," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>m(e=>Math.max(1,e-1)),disabled:1===u,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(k)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>m(t+1),className:"px-4 py-2 rounded-lg ".concat(u===t+1?"bg-pink-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>m(e=>Math.min(k,e+1)),disabled:u===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-pink-900/90 to-rose-900/90 rounded-xl p-6 max-w-md w-full border border-pink-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Process Staff Bonus"}),d&&(0,ta.jsxs)("div",{className:"bg-pink-900/30 border border-pink-600 rounded-lg p-4 mb-4",children:[(0,ta.jsx)("div",{className:"text-xs text-pink-400 mb-1",children:"Processing bonus for:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:d.name}),(0,ta.jsx)("p",{className:"text-sm text-pink-300 mt-1",children:d.email||"No email"}),(0,ta.jsxs)("p",{className:"text-xs text-pink-400 mt-1",children:["Role: ",d.role]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Type *"}),(0,ta.jsxs)("select",{className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",value:g.bonusType,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{bonusType:e.target.value,customBonusType:""})),children:[(0,ta.jsx)("option",{value:"",children:"Select Bonus Type"}),uo.map(e=>(0,ta.jsx)("option",{value:e,children:e},e))]})]}),"Custom"===g.bonusType&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Custom Bonus Type Name *"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"Enter custom bonus type name...",value:g.customBonusType,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{customBonusType:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Bonus Amount (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500",placeholder:"\u20b90.00",value:g.bonusAmount,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{bonusAmount:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-1 block",children:"Reason"}),(0,ta.jsx)("textarea",{className:"w-full px-3 py-2 bg-pink-800/50 border border-pink-600 rounded-lg text-white focus:ring-2 focus:ring-pink-500 h-20",placeholder:"Bonus reason...",value:g.reason,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{reason:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{g.staffId&&g.bonusType&&g.bonusAmount?"Custom"!==g.bonusType||g.customBonusType?w.mutate({staffId:g.staffId,bonusType:"Custom"===g.bonusType?g.customBonusType:g.bonusType,bonusAmount:Number(g.bonusAmount),reason:g.reason||void 0}):vl.error("Please enter custom bonus type name"):vl.error("Please fill in all required fields")},disabled:w.isLoading,className:"flex-1 bg-gradient-to-r from-pink-600 to-rose-600 hover:from-pink-500 hover:to-rose-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:w.isLoading?"Processing...":"Process Bonus"}),(0,ta.jsx)("button",{onClick:()=>{o(!1),c(null),N()},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function po(e){let{selectedPlayer:t,onSelect:s,clubId:l,placeholder:r="Search by name, ID, or email...",label:n="Search Player"}=e;const[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),u=(0,a.useRef)(null),{data:m=[],isLoading:x}=ur({queryKey:["approvedPlayers",l],queryFn:async()=>{if(!l)return[];const e=[];let t=1;let s=!0;for(;s;)try{const a=await jl.Dv.getPlayers(l,{limit:50,page:t}),r=(null===a||void 0===a?void 0:a.players)||[];if(!r||0===r.length){s=!1;break}const n=r.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),r.length<50?s=!1:(t++,t>20&&(s=!1))}catch(a){console.error("Error fetching page ".concat(t,":"),a),s=!1}return e},enabled:!!l}),h=m.filter(e=>{if(!i||i.length<1)return!1;const t=i.toLowerCase();return e.name.toLowerCase().includes(t)||e.email.toLowerCase().includes(t)||e.phoneNumber&&e.phoneNumber.includes(i)||e.playerId&&e.playerId.toLowerCase().includes(t)}).slice(0,10);(0,a.useEffect)(()=>{const e=e=>{u.current&&!u.current.contains(e.target)&&c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);return(0,ta.jsxs)("div",{className:"relative",ref:u,children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2",children:[n," ",(0,ta.jsx)("span",{className:"text-gray-400 text-sm",children:"(KYC Verified Players Only)"})]}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)("input",{type:"text",value:t?"".concat(t.name," (").concat(t.email,")"):i,onChange:e=>{const a=e.target.value;t&&s(null),o(a),c(!0)},onFocus:()=>{!i&&t||c(!0)},placeholder:r,readOnly:!!t,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),t&&(0,ta.jsx)("button",{type:"button",onClick:()=>{s(null),o(""),c(!1)},className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white text-xl leading-none",title:"Clear selection",children:"\xd7"})]}),d&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>c(!1)}),(0,ta.jsx)("div",{className:"absolute z-20 w-full mt-2 bg-slate-700 rounded-lg max-h-64 overflow-y-auto shadow-xl border border-slate-600",children:x?(0,ta.jsx)("div",{className:"px-4 py-3 text-gray-400 text-sm",children:(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),(0,ta.jsx)("span",{children:"Loading approved players (searching all pages)..."})]})}):0===h.length?(0,ta.jsx)("div",{className:"px-4 py-3 text-gray-400 text-sm",children:i.length<1?"Start typing to search approved players...":"No approved players found matching your search"}):h.map(e=>(0,ta.jsxs)("button",{type:"button",onClick:()=>(e=>{s(e),o(""),c(!1)})(e),className:"w-full px-4 py-3 text-left hover:bg-slate-600 transition-colors border-b border-slate-600 last:border-b-0",children:[(0,ta.jsx)("div",{className:"text-white font-medium",children:e.name}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:e.email}),e.phoneNumber&&(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:e.phoneNumber}),e.playerId&&(0,ta.jsxs)("div",{className:"text-gray-500 text-xs mt-1",children:["ID: ",e.playerId]})]},e.id))})]}),t&&(0,ta.jsxs)("div",{className:"mt-2 p-3 bg-green-500/10 border border-green-500 rounded-lg",children:[(0,ta.jsx)("div",{className:"text-green-400 font-medium",children:t.name}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:t.email}),t.phoneNumber&&(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:t.phoneNumber})]})]})}function bo(e){var t;let{selectedClubId:s,onBack:l}=e;const r=aa(),[i,o]=(0,a.useState)("buy-in"),[d,c]=(0,a.useState)(1),[u,m]=(0,a.useState)({type:"",playerName:"",startDate:"",endDate:""}),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(""),[g,f]=(0,a.useState)("Cash"),[y,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(null),[C,k]=(0,a.useState)(""),[P,A]=(0,a.useState)("1"),[I,D]=(0,a.useState)(""),[T,_]=(0,a.useState)(!1),[E,R]=(0,a.useState)(null),{data:L}=ur({queryKey:["playerBalance",s,null===N||void 0===N?void 0:N.id],queryFn:()=>jl.Dv.getPlayerBalance(s,N.id),enabled:!!s&&!!N}),{data:O=[]}=ur({queryKey:["recentBuyIns",s],queryFn:async()=>(await jl.Dv.getTransactions(s)).filter(e=>"Deposit"===e.type||"Buy In"===e.type).slice(0,10),enabled:!!s}),{data:M,isLoading:F}=ur({queryKey:["transactionHistory",s,d,u],queryFn:async()=>{let e=(await jl.Dv.getTransactions(s)).filter(e=>"Deposit"===e.type||"Cashout"===e.type||"Buy In"===e.type);if(u.type&&(e=e.filter(e=>e.type===u.type)),u.playerName){const t=u.playerName.toLowerCase();e=e.filter(e=>{var s,a;return(null===(s=e.playerName)||void 0===s?void 0:s.toLowerCase().includes(t))||(null===(a=e.playerId)||void 0===a?void 0:a.toLowerCase().includes(t))})}if(u.startDate){const t=new Date(u.startDate);e=e.filter(e=>new Date(e.createdAt)>=t)}if(u.endDate){const t=new Date(u.endDate);t.setHours(23,59,59,999),e=e.filter(e=>new Date(e.createdAt)<=t)}e.sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt));const t=10*(d-1),a=t+10;return{transactions:e.slice(t,a),total:e.length,totalPages:Math.ceil(e.length/10),currentPage:d,perPage:10}},enabled:!!s&&"history"===i}),{data:B=[]}=ur({queryKey:["playersWithBalance",s],queryFn:async()=>{if(!s)return[];const e=[];let t=1;let a=!0;for(;a;)try{const l=await jl.Dv.getPlayers(s,{limit:50,page:t}),r=(null===l||void 0===l?void 0:l.players)||[];if(!r||0===r.length){a=!1;break}const n=r.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),r.length<50?a=!1:(t++,t>20&&(a=!1))}catch(l){console.error("Error fetching page ".concat(t,":"),l),a=!1}return e},enabled:!!s&&"cash-out"===i}),q=pr({mutationFn:async e=>await jl.Dv.createTransaction(s,{type:"Deposit",playerId:e.playerId,playerName:e.playerName,amount:parseFloat(e.amount),notes:e.notes}),onSuccess:()=>{vl.success("Buy-in processed successfully! Player balance updated."),r.invalidateQueries(["recentBuyIns",s]),r.invalidateQueries(["playerBalance"]),r.invalidateQueries(["clubPlayers",s]),h(null),b(""),f("Cash"),v(""),w("")},onError:e=>{vl.error(e.message||"Failed to process buy-in")}}),z=pr({mutationFn:async e=>await jl.Dv.createTransaction(s,{type:"Cashout",playerId:e.playerId,playerName:e.playerName,amount:parseFloat(e.amount),notes:e.notes}),onSuccess:()=>{vl.success("Cash-out processed successfully! Player balance updated."),r.invalidateQueries(["recentBuyIns",s]),r.invalidateQueries(["playerBalance"]),r.invalidateQueries(["clubPlayers",s]),r.invalidateQueries(["playersWithBalance",s]),S(null),k(""),A("1"),D(""),_(!1),R(null)},onError:e=>{vl.error(e.message||"Failed to process cash-out")}});return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Club Buy-In & Cash Out"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Manage player transactions and balance updates"})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6 border-b border-gray-700",children:[(0,ta.jsx)("button",{onClick:()=>o("buy-in"),className:"px-6 py-3 font-semibold transition-colors ".concat("buy-in"===i?"text-white border-b-2 border-green-500 bg-green-500/10":"text-gray-400 hover:text-white"),children:"Club Buy-In"}),(0,ta.jsx)("button",{onClick:()=>o("cash-out"),className:"px-6 py-3 font-semibold transition-colors ".concat("cash-out"===i?"text-white border-b-2 border-blue-500 bg-blue-500/10":"text-gray-400 hover:text-white"),children:"Cash Out"}),(0,ta.jsx)("button",{onClick:()=>{o("history"),c(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("history"===i?"text-white border-b-2 border-purple-500 bg-purple-500/10":"text-gray-400 hover:text-white"),children:"Transaction History"})]}),"buy-in"===i&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Club Buy-In - Purchase Chips"}),(0,ta.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!x)return void vl.error("Please select a player");if(!p||parseFloat(p)<=0)return void vl.error("Please enter a valid buy-in amount");const t=parseFloat(p);if(t>1e7)return void vl.error("Amount cannot exceed \u20b910,000,000");const s=[j,"Payment: ".concat(g),y?"Ref: ".concat(y):""].filter(Boolean).join(" | ");q.mutate({playerId:x.id,playerName:x.name,amount:t,notes:s})},children:[(0,ta.jsx)("div",{className:"mb-4",children:(0,ta.jsx)(po,{selectedPlayer:x,onSelect:h,clubId:s,placeholder:"Search by name, ID, email, or phone...",label:"Search Player"})}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Buy-In Amount (\u20b9) ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",value:p,onChange:e=>b(e.target.value),placeholder:"\u20b90.00",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",required:!0}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:"Enter the amount in real money (INR)"})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Payment Method ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,ta.jsx)("option",{value:"Cash",children:"Cash"}),(0,ta.jsx)("option",{value:"Bank Transfer",children:"Bank Transfer"}),(0,ta.jsx)("option",{value:"UPI",children:"UPI"}),(0,ta.jsx)("option",{value:"Credit Card",children:"Credit Card"}),(0,ta.jsx)("option",{value:"Debit Card",children:"Debit Card"}),(0,ta.jsx)("option",{value:"Net Banking",children:"Net Banking"})]})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2",children:"Reference/Transaction Number"}),(0,ta.jsx)("input",{type:"text",value:y,onChange:e=>v(e.target.value),placeholder:"Enter transaction reference (optional)",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm mt-1",children:"For bank transfers, UPI, cards, etc."})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2",children:"Notes"}),(0,ta.jsx)("textarea",{value:j,onChange:e=>w(e.target.value),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,ta.jsx)("button",{type:"submit",disabled:q.isPending,className:"w-full bg-gradient-to-r from-green-500 to-green-600 text-white py-3 rounded-lg font-semibold hover:from-green-600 hover:to-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:q.isPending?"Processing...":"Process Club Buy-In"})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Recent Club Buy-Ins"}),(0,ta.jsx)("div",{className:"space-y-3",children:0===O.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No recent buy-ins found"}):O.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 p-4 rounded-lg hover:bg-slate-600 transition-colors",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:e.playerName}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:e.playerId})]}),(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsxs)("div",{className:"text-green-400 font-bold",children:["\u20b9",Number(e.amount).toLocaleString()]}),(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Chips: \u20b9",Number(e.amount).toLocaleString()]})]})]}),e.notes&&(0,ta.jsx)("div",{className:"text-gray-400 text-sm mt-2",children:e.notes.split("|").map((e,t)=>(0,ta.jsx)("div",{children:e.trim()},t))}),(0,ta.jsxs)("div",{className:"text-gray-500 text-xs mt-2",children:["Processed ",new Date(e.createdAt).toLocaleString()]})]},e.id))}),(0,ta.jsxs)("div",{className:"mt-6 p-4 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,ta.jsx)("h3",{className:"text-blue-400 font-semibold mb-2",children:"\ud83d\udca1 Buy-In Information"}),(0,ta.jsxs)("ul",{className:"text-gray-300 text-sm space-y-1",children:[(0,ta.jsx)("li",{children:"\u2022 Players purchase chips using real money (INR)"}),(0,ta.jsx)("li",{children:"\u2022 Chips are added to player's available balance"}),(0,ta.jsx)("li",{children:"\u2022 Standard ratio is 1:1 (\u20b91 = 1 chip)"}),(0,ta.jsx)("li",{children:"\u2022 Players can use chips to buy-in at tables"}),(0,ta.jsx)("li",{children:"\u2022 All transactions are recorded for audit"})]})]})]})]}),"cash-out"===i&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Process Cash Out"}),(0,ta.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!N)return void vl.error("Please select a player");if(!C||parseFloat(C)<=0)return void vl.error("Please enter a valid cash-out amount");if(!E)return void vl.error("Please verify balance before processing cash-out");if("error"===E.status)return void vl.error("Cannot process cash-out with insufficient balance");const t=parseFloat(C),s=parseFloat(P)||1,a=t*s,l=[I,"Conversion Rate: \u20b9".concat(s," per chip"),"Cash Given: \u20b9".concat(a.toLocaleString()),"warning"===E.status?"\u26a0\ufe0f FLAGGED FOR VERIFICATION":"\u2713 Verified"].filter(Boolean).join(" | ");z.mutate({playerId:N.id,playerName:N.name,amount:t,notes:l})},children:[(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)(po,{selectedPlayer:N,onSelect:e=>{S(e),R(null),_(!1)},clubId:s,placeholder:"Search by name, ID, email, or phone...",label:"Search Player"}),N&&L&&(0,ta.jsxs)("div",{className:"mt-2 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,ta.jsx)("div",{className:"text-blue-400 font-medium",children:N.name}),(0,ta.jsx)("div",{className:"text-gray-400 text-sm",children:N.email}),(0,ta.jsxs)("div",{className:"mt-2 pt-2 border-t border-blue-500/30",children:[(0,ta.jsxs)("div",{className:"text-white text-sm",children:["Available Balance: ",(0,ta.jsxs)("span",{className:"font-bold",children:["\u20b9",(null===(t=L.availableBalance)||void 0===t?void 0:t.toLocaleString())||0]})]}),L.tableBalance>0&&(0,ta.jsxs)("div",{className:"text-yellow-400 text-sm",children:["Table Balance: \u20b9",L.tableBalance.toLocaleString()]})]})]})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2",children:["Cash-Out Amount (Chips) ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",value:C,onChange:e=>{k(e.target.value),R(null)},placeholder:"0.00",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2",children:"Conversion Rate (\u20b9 per chip)"}),(0,ta.jsx)("input",{type:"number",value:P,onChange:e=>A(e.target.value),placeholder:"1",step:"0.01",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),(0,ta.jsxs)("div",{className:"text-gray-400 text-sm mt-1",children:["Default: 1 chip = \u20b91 \u2022 Cash to give: \u20b9",(parseFloat(C||0)*parseFloat(P||1)).toLocaleString()]})]}),N&&C&&(0,ta.jsx)("button",{type:"button",onClick:async()=>{if(!N||!C)return void vl.error("Please select a player and enter amount");const e=parseFloat(C);if(!L)return void vl.error("Unable to fetch player balance");const t=L.availableBalance||0,s=L.tableBalance||0,a=L.totalBalance||0;Math.abs(e-t)<.01?(R({status:"success",message:"Balance verification successful",availableBalance:t,tableBalance:s,totalBalance:a}),_(!1),vl.success("Balance verified! You can proceed with cash-out.")):e>a?(R({status:"error",message:"Insufficient balance",availableBalance:t,tableBalance:s,totalBalance:a}),_(!0),vl.error("Cash-out amount exceeds player's total balance!")):e>t?(R({status:"warning",message:"Player has chips at table",availableBalance:t,tableBalance:s,totalBalance:a}),_(!0),vl.warning("Player has chips at table. Collect table chips first.")):(R({status:"warning",message:"Amount mismatch - flagged for review",availableBalance:t,tableBalance:s,totalBalance:a}),_(!0),vl.warning("Balance mismatch detected. Transaction will be flagged for verification."))},className:"w-full mb-4 bg-yellow-500 text-black py-2 rounded-lg font-semibold hover:bg-yellow-600 transition-all",children:"\ud83d\udd0d Verify Balance Before Cash-Out"}),E&&(0,ta.jsxs)("div",{className:"mb-4 p-4 rounded-lg border ".concat("success"===E.status?"bg-green-500/10 border-green-500":"error"===E.status?"bg-red-500/10 border-red-500":"bg-yellow-500/10 border-yellow-500"),children:[(0,ta.jsxs)("div",{className:"font-semibold mb-2 ".concat("success"===E.status?"text-green-400":"error"===E.status?"text-red-400":"text-yellow-400"),children:["success"===E.status?"\u2713":"\u26a0\ufe0f"," ",E.message]}),(0,ta.jsxs)("div",{className:"text-gray-300 text-sm space-y-1",children:[(0,ta.jsxs)("div",{children:["Available: \u20b9",E.availableBalance.toLocaleString()]}),(0,ta.jsxs)("div",{children:["At Table: \u20b9",E.tableBalance.toLocaleString()]}),(0,ta.jsxs)("div",{children:["Total: \u20b9",E.totalBalance.toLocaleString()]}),(0,ta.jsxs)("div",{children:["Requested: \u20b9",parseFloat(C).toLocaleString()]})]})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2",children:"Notes"}),(0,ta.jsx)("textarea",{value:I,onChange:e=>D(e.target.value),placeholder:"Additional notes (optional)",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ta.jsx)("button",{type:"submit",disabled:z.isPending||!E,className:"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 rounded-lg font-semibold hover:from-blue-600 hover:to-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:z.isPending?"Processing...":"Process Cash Out"})]})]}),(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsx)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:"\ud83d\udca1 How Cash Out Works:"}),(0,ta.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,ta.jsx)("li",{children:"\u2022 Select a player who has chips in their available balance"}),(0,ta.jsx)("li",{children:"\u2022 System validates balance consistency across three sources:"}),(0,ta.jsx)("li",{className:"ml-4",children:"- Player Portal Balance"}),(0,ta.jsx)("li",{className:"ml-4",children:"- Table Buy-Out Balance Records"}),(0,ta.jsx)("li",{className:"ml-4",children:"- Cashier/SuperAdmin View Balance"}),(0,ta.jsx)("li",{children:"\u2022 Enter the amount of chips to convert to real money"}),(0,ta.jsx)("li",{children:"\u2022 Set conversion rate (default: 1 chip = \u20b91)"}),(0,ta.jsx)("li",{children:"\u2022 Chips are deducted from player's balance, real money is paid out"})]})]}),(0,ta.jsxs)("div",{className:"bg-yellow-500/10 border border-yellow-500 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-yellow-400 font-semibold mb-3 flex items-center gap-2",children:"\u26a0\ufe0f Balance Validation:"}),(0,ta.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,ta.jsx)("li",{children:"\u2022 System automatically checks if balances match across all sources"}),(0,ta.jsx)("li",{children:"\u2022 If mismatch detected, transaction is flagged with warning"}),(0,ta.jsx)("li",{children:"\u2022 Review flagged transactions carefully before processing"}),(0,ta.jsx)("li",{children:"\u2022 Contact system administrator if balance discrepancies persist"})]})]}),(0,ta.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:"\ud83d\udca1 Important Notes:"}),(0,ta.jsxs)("ul",{className:"text-gray-300 text-sm space-y-2",children:[(0,ta.jsx)("li",{children:"\u2022 Cash out is permanent - chips cannot be recovered"}),(0,ta.jsx)("li",{children:"\u2022 Conversion rate can be adjusted based on club policy"}),(0,ta.jsx)("li",{children:"\u2022 Always verify player identity before processing cash out"}),(0,ta.jsx)("li",{children:"\u2022 Keep transaction records for audit purposes"})]})]}),(0,ta.jsxs)("div",{className:"bg-green-500/10 border border-green-500 rounded-lg p-6",children:[(0,ta.jsx)("h3",{className:"text-green-400 font-semibold mb-3",children:"Players with Available Balance:"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:[B.length," player(s) have chips available for cash out"]})]})]})]}),"history"===i&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Filter Transactions"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Transaction Type"}),(0,ta.jsxs)("select",{value:u.type,onChange:e=>{m((0,n.A)((0,n.A)({},u),{},{type:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,ta.jsx)("option",{value:"",children:"All Types"}),(0,ta.jsx)("option",{value:"Deposit",children:"Buy-In"}),(0,ta.jsx)("option",{value:"Cashout",children:"Cash-Out"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Player Name/ID"}),(0,ta.jsx)("input",{type:"text",value:u.playerName,onChange:e=>{m((0,n.A)((0,n.A)({},u),{},{playerName:e.target.value})),c(1)},placeholder:"Search by name or ID...",className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:u.startDate,onChange:e=>{m((0,n.A)((0,n.A)({},u),{},{startDate:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 text-sm",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:u.endDate,onChange:e=>{m((0,n.A)((0,n.A)({},u),{},{endDate:e.target.value})),c(1)},className:"w-full px-3 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(u.type||u.playerName||u.startDate||u.endDate)&&(0,ta.jsx)("button",{onClick:()=>{m({type:"",playerName:"",startDate:"",endDate:""}),c(1)},className:"mt-4 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Clear All Filters"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6 shadow-xl",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white",children:"Transaction History"}),M&&(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(d-1)+1," - ",Math.min(10*d,M.total)," of ",M.total," transactions"]})]}),F?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Loading transactions..."})]}):M&&0!==M.transactions.length?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Date & Time"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Type"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Player"}),(0,ta.jsx)("th",{className:"text-right py-3 px-4 text-gray-400 font-semibold",children:"Amount"}),(0,ta.jsx)("th",{className:"text-left py-3 px-4 text-gray-400 font-semibold",children:"Notes"})]})}),(0,ta.jsx)("tbody",{children:M.transactions.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700/50 transition-colors",children:[(0,ta.jsxs)("td",{className:"py-4 px-4",children:[(0,ta.jsx)("div",{className:"text-white text-sm",children:new Date(e.createdAt).toLocaleDateString()}),(0,ta.jsx)("div",{className:"text-gray-400 text-xs",children:new Date(e.createdAt).toLocaleTimeString()})]}),(0,ta.jsxs)("td",{className:"py-4 px-4",children:[(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Deposit"===e.type||"Buy In"===e.type?"bg-green-500/20 text-green-400":"bg-blue-500/20 text-blue-400"),children:"Deposit"===e.type||"Buy In"===e.type?"Buy-In":"Cash-Out"}),e.isOverridden&&(0,ta.jsx)("span",{onClick:()=>{e.overrideReason&&alert("Override Reason:\n\n".concat(e.overrideReason))},className:"ml-2 px-2 py-1 rounded text-xs bg-orange-900/30 text-orange-400 border border-orange-700 cursor-pointer hover:bg-orange-900/50 transition-colors inline-block",title:"Click to view override reason",children:"\u270f\ufe0f Overridden"})]}),(0,ta.jsxs)("td",{className:"py-4 px-4",children:[(0,ta.jsx)("div",{className:"text-white font-medium",children:e.playerName}),(0,ta.jsx)("div",{className:"text-gray-400 text-xs",children:e.playerId})]}),(0,ta.jsx)("td",{className:"py-4 px-4 text-right",children:(0,ta.jsxs)("div",{className:"flex flex-col items-end",children:[(0,ta.jsxs)("div",{className:"font-bold ".concat("Deposit"===e.type||"Buy In"===e.type?"text-green-400":"text-blue-400"),children:["Deposit"===e.type||"Buy In"===e.type?"+":"-","\u20b9",Number(e.amount).toLocaleString()]}),e.originalAmount&&(0,ta.jsxs)("div",{className:"text-xs text-gray-400 line-through mt-1",children:["Deposit"===e.type||"Buy In"===e.type?"+":"-","\u20b9",Number(e.originalAmount).toLocaleString()]})]})}),(0,ta.jsx)("td",{className:"py-4 px-4",children:e.notes?(0,ta.jsx)("div",{className:"text-gray-400 text-sm max-w-xs",children:e.notes.split("|").map((e,t)=>(0,ta.jsx)("div",{className:"truncate",children:e.trim()},t))}):(0,ta.jsx)("span",{className:"text-gray-500 text-sm",children:"-"})})]},e.id))})]})}),M.totalPages>1&&(0,ta.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ta.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:Array.from({length:Math.min(5,M.totalPages)},(e,t)=>{let s;return s=M.totalPages<=5||d<=3?t+1:d>=M.totalPages-2?M.totalPages-4+t:d-2+t,(0,ta.jsx)("button",{onClick:()=>c(s),className:"px-4 py-2 rounded-lg transition-colors ".concat(d===s?"bg-purple-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:s},s)})}),(0,ta.jsx)("button",{onClick:()=>c(e=>Math.min(M.totalPages,e+1)),disabled:d===M.totalPages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),(0,ta.jsxs)("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,ta.jsxs)("div",{className:"bg-green-500/10 border border-green-500 rounded-lg p-4",children:[(0,ta.jsx)("div",{className:"text-green-400 text-sm mb-1",children:"Total Buy-Ins"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",M.transactions.filter(e=>"Deposit"===e.type||"Buy In"===e.type).reduce((e,t)=>e+Number(t.amount),0).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"bg-blue-500/10 border border-blue-500 rounded-lg p-4",children:[(0,ta.jsx)("div",{className:"text-blue-400 text-sm mb-1",children:"Total Cash-Outs"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",M.transactions.filter(e=>"Cashout"===e.type).reduce((e,t)=>e+Number(t.amount),0).toLocaleString()]})]}),(0,ta.jsxs)("div",{className:"bg-purple-500/10 border border-purple-500 rounded-lg p-4",children:[(0,ta.jsx)("div",{className:"text-purple-400 text-sm mb-1",children:"Net Flow"}),(0,ta.jsxs)("div",{className:"text-white text-2xl font-bold",children:["\u20b9",(M.transactions.filter(e=>"Deposit"===e.type||"Buy In"===e.type).reduce((e,t)=>e+Number(t.amount),0)-M.transactions.filter(e=>"Cashout"===e.type).reduce((e,t)=>e+Number(t.amount),0)).toLocaleString()]})]})]})]}):(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udcca"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No transactions found"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Try adjusting your filters"})]})]})]})]})}function go(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("players"),[r,i]=(0,a.useState)("dealer-cashout"),[o,d]=(0,a.useState)(1),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(null),[b,g]=(0,a.useState)({amount:"",reason:""}),[f,y]=(0,a.useState)({reason:""}),v=aa(),{data:j,isLoading:w}=ur({queryKey:["financial-overrides",t,s,r,o],queryFn:()=>jl.bM.getAllTransactions(t,{category:"players"===s?"player":"staff",subCategory:"staff"===s?r:void 0,page:o,limit:50}),enabled:!!t}),N=pr({mutationFn:e=>{let{transactionId:s,data:a}=e;return jl.bM.editTransaction(t,s,a)},onSuccess:()=>{vl.success("Transaction edited successfully!"),v.invalidateQueries(["financial-overrides",t]),u(!1),p(null),g({amount:"",reason:""})},onError:e=>{vl.error(e.message||"Failed to edit transaction")}}),S=pr({mutationFn:e=>{let{transactionId:s,data:a}=e;return jl.bM.cancelTransaction(t,s,a)},onSuccess:()=>{vl.success("Transaction cancelled successfully!"),v.invalidateQueries(["financial-overrides",t]),x(!1),p(null),y({reason:""})},onError:e=>{vl.error(e.message||"Failed to cancel transaction")}}),C=(null===j||void 0===j?void 0:j.transactions)||[],k=(null===j||void 0===j?void 0:j.totalPages)||1,P=(null===j||void 0===j?void 0:j.total)||0,A=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"completed":return"text-green-400";case"pending":return"text-yellow-400";case"cancelled":return"text-red-400";case"failed":return"text-red-500";default:return"text-gray-400"}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Financial Overrides"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>{l("players"),d(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("players"===s?"text-white border-b-2 border-cyan-500 bg-cyan-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udc64 Player Transactions"}),(0,ta.jsx)("button",{onClick:()=>{l("staff"),i("dealer-cashout"),d(1)},className:"px-6 py-3 font-semibold transition-colors ".concat("staff"===s?"text-white border-b-2 border-purple-500 bg-purple-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udc54 Staff Transactions"})]}),"staff"===s&&(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700 mt-2",children:[(0,ta.jsx)("button",{onClick:()=>{i("dealer-cashout"),d(1)},className:"px-6 py-2 font-semibold transition-colors text-sm ".concat("dealer-cashout"===r?"text-white border-b-2 border-green-500 bg-green-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb5 Dealer Cashouts"}),(0,ta.jsx)("button",{onClick:()=>{i("salary-bonus"),d(1)},className:"px-6 py-2 font-semibold transition-colors text-sm ".concat("salary-bonus"===r?"text-white border-b-2 border-blue-500 bg-blue-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb0 Salary & Bonuses"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,ta.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["players"===s?"Player Transactions":"dealer-cashout"===r?"Dealer Cashouts":"Salary & Bonuses"," ","(",P,")"]})}),w?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===C.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No transactions found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Type"}),(0,ta.jsxs)("th",{className:"text-left text-white font-semibold p-3",children:["players"===s?"Player":"Staff"," Name"]}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Actions"})]})}),(0,ta.jsx)("tbody",{children:C.map(e=>{return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsxs)("td",{className:"p-3",children:[(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize border ".concat((t=e.type,t.includes("Bonus")?"bg-purple-900/30 text-purple-400 border-purple-700":t.includes("Salary")?"bg-blue-900/30 text-blue-400 border-blue-700":t.includes("Deposit")?"bg-green-900/30 text-green-400 border-green-700":t.includes("Cashout")||t.includes("Withdrawal")?"bg-red-900/30 text-red-400 border-red-700":t.includes("Buy In")?"bg-cyan-900/30 text-cyan-400 border-cyan-700":"bg-gray-900/30 text-gray-400 border-gray-700")),children:e.type}),e.isOverridden&&(0,ta.jsx)("span",{onClick:()=>{e.overrideReason&&alert("Override Reason:\n\n".concat(e.overrideReason))},className:"ml-2 px-2 py-1 rounded text-xs bg-orange-900/30 text-orange-400 border border-orange-700 cursor-pointer hover:bg-orange-900/50 transition-colors",title:"Click to view override reason",children:"\u270f\ufe0f Overridden"})]}),(0,ta.jsx)("td",{className:"text-white p-3",children:e.entityName}),(0,ta.jsx)("td",{className:"text-right p-3",children:(0,ta.jsxs)("div",{className:"flex flex-col items-end",children:[(0,ta.jsxs)("span",{className:"text-white font-semibold",children:["\u20b9",Number(e.amount).toFixed(2)]}),e.originalAmount&&(0,ta.jsxs)("span",{className:"text-xs text-gray-400 line-through",children:["\u20b9",Number(e.originalAmount).toFixed(2)]})]})}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsx)("span",{className:"font-semibold ".concat(A(e.status)),children:e.status})}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:new Date(e.date).toLocaleDateString()}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{p(e),g({amount:e.amount.toString(),reason:""}),u(!0)})(e),disabled:"Cancelled"===e.status,className:"px-3 py-1 bg-blue-900/30 hover:bg-blue-800/50 text-blue-400 rounded-lg text-sm border border-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>(e=>{p(e),y({reason:""}),x(!0)})(e),disabled:"Cancelled"===e.status,className:"px-3 py-1 bg-red-900/30 hover:bg-red-800/50 text-red-400 rounded-lg text-sm border border-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel"})]})})]},e.id);var t})})]})}),k>1&&(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",50*(o-1)+1," to ",Math.min(50*o,P)," of ",P," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>d(e=>Math.max(1,e-1)),disabled:1===o,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(Math.min(k,5))].map((e,t)=>{const s=o<=3?t+1:o-2+t;return s>k?null:(0,ta.jsx)("button",{onClick:()=>d(s),className:"px-4 py-2 rounded-lg ".concat(o===s?"bg-cyan-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:s},s)})}),(0,ta.jsx)("button",{onClick:()=>d(e=>Math.min(k,e+1)),disabled:o===k,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]}),c&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-blue-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\u270f\ufe0f Edit Transaction"}),(0,ta.jsxs)("div",{className:"bg-blue-900/30 border border-blue-600 rounded-lg p-4 mb-6",children:[(0,ta.jsx)("div",{className:"text-xs text-blue-400 mb-1",children:"Transaction Details:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold",children:h.type}),(0,ta.jsxs)("p",{className:"text-sm text-blue-300 mt-1",children:["players"===s?"Player":"Staff",": ",h.entityName]}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Current Amount: \u20b9",Number(h.amount).toFixed(2)]}),h.originalAmount&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Original Amount: \u20b9",Number(h.originalAmount).toFixed(2)]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"New Amount (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500",placeholder:"\u20b90.00",value:b.amount,onChange:e=>g((0,n.A)((0,n.A)({},b),{},{amount:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Reason for Override *"}),(0,ta.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-blue-500 h-24",placeholder:"Please provide a reason for this override...",value:b.reason,onChange:e=>g((0,n.A)((0,n.A)({},b),{},{reason:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{!b.amount||parseFloat(b.amount)<=0?vl.error("Please enter a valid amount"):b.reason.trim()?N.mutate({transactionId:h.transactionId||h.id,data:{amount:parseFloat(b.amount),reason:b.reason.trim()}}):vl.error("Please provide a reason for the override")},disabled:N.isLoading,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:N.isLoading?"Saving...":"Save Changes"}),(0,ta.jsx)("button",{onClick:()=>{u(!1),p(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),m&&h&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-red-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\u274c Cancel Transaction"}),(0,ta.jsxs)("div",{className:"bg-red-900/30 border border-red-600 rounded-lg p-4 mb-6",children:[(0,ta.jsx)("div",{className:"text-xs text-red-400 mb-1",children:"Transaction Details:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold",children:h.type}),(0,ta.jsxs)("p",{className:"text-sm text-red-300 mt-1",children:["players"===s?"Player":"Staff",": ",h.entityName]}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Amount: \u20b9",Number(h.amount).toFixed(2)]})]}),(0,ta.jsx)("div",{className:"space-y-4",children:(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Reason for Cancellation (Optional)"}),(0,ta.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-red-500 h-24",placeholder:"Please provide a reason for cancellation...",value:f.reason,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{reason:e.target.value}))})]})}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{S.mutate({transactionId:h.transactionId||h.id,data:{reason:f.reason.trim()||"Transaction cancelled by admin"}})},disabled:S.isLoading,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:S.isLoading?"Cancelling...":"Cancel Transaction"}),(0,ta.jsx)("button",{onClick:()=>{x(!1),p(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Close"})]})]})})]})}function fo(e){let{clubId:t}=e;const s=aa(),[l,r]=(0,a.useState)(null),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(""),{data:c=[],isLoading:u,refetch:m}=ur({queryKey:["buyInRequests",t],queryFn:()=>jl.Od.getBuyInRequests(t),enabled:!!t,refetchInterval:5e3}),x=pr({mutationFn:e=>{let{requestId:s,amount:a}=e;return jl.Od.approveBuyInRequest(t,s,{amount:a})},onSuccess:()=>{vl.success("Buy-in request approved and balance updated!"),s.invalidateQueries(["buyInRequests",t]),r(null)},onError:e=>{vl.error(e.message||"Failed to approve buy-in request")}}),h=pr({mutationFn:e=>{let{requestId:s,reason:a}=e;return jl.Od.rejectBuyInRequest(t,s,{reason:a})},onSuccess:()=>{vl.success("Buy-in request rejected!"),s.invalidateQueries(["buyInRequests",t]),r(null),i(!1),d("")},onError:e=>{vl.error(e.message||"Failed to reject buy-in request")}}),p=e=>{if(!e)return"";return new Date(e).toLocaleString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"})},b=c.filter(e=>"pending"===e.status);return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Table Buy-In Requests"}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:[b.length," pending request",1!==b.length?"s":""]})]}),u?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading buy-in requests..."}):0===b.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending buy-in requests"}):(0,ta.jsx)("div",{className:"space-y-4",children:b.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,ta.jsx)("div",{className:"flex justify-between items-start mb-4",children:(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.playerName}),(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-600/20 text-yellow-400 rounded text-xs font-semibold",children:"PENDING"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Table:"}),(0,ta.jsx)("span",{className:"text-white ml-2 font-medium",children:e.tableNumber?"Table ".concat(e.tableNumber):"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Seat:"}),(0,ta.jsx)("span",{className:"text-white ml-2 font-medium",children:e.seatNumber?"Seat ".concat(e.seatNumber):"N/A"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Requested Amount:"}),(0,ta.jsxs)("span",{className:"text-green-400 ml-2 font-bold",children:["\u20b9",Number(e.requestedAmount||0).toLocaleString("en-IN")]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Current Balance:"}),(0,ta.jsxs)("span",{className:"text-white ml-2 font-medium",children:["\u20b9",Number(e.currentTableBalance||0).toLocaleString("en-IN")]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Requested At:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:p(e.requestedAt)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Email:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:e.playerEmail||"N/A"})]})]})]})}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-4",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{window.confirm("Approve buy-in request for ".concat(e.playerName,"? Amount: \u20b9").concat(Number(e.requestedAmount||0).toLocaleString("en-IN")))&&x.mutate({requestId:e.id,amount:e.requestedAmount||0})})(e),disabled:x.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:x.isPending?"Processing...":"\u2713 Approve"}),(0,ta.jsx)("button",{onClick:()=>(e=>{r(e),i(!0)})(e),disabled:h.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"\u2717 Reject"})]})]},e.id))})]}),n&&l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-4",children:"Reject Buy-In Request"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["Rejecting buy-in request for ",(0,ta.jsx)("strong",{children:l.playerName})," (\u20b9",Number(l.requestedAmount||0).toLocaleString("en-IN"),")"]}),(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsxs)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:["Reason for Rejection ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("textarea",{value:o,onChange:e=>d(e.target.value),placeholder:"Enter reason for rejection...",className:"w-full bg-slate-700 text-white border border-slate-600 rounded-lg p-3 focus:outline-none focus:border-blue-500",rows:4})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{i(!1),d(""),r(null)},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white px-4 py-2 rounded-lg font-semibold transition-all",children:"Cancel"}),(0,ta.jsx)("button",{onClick:()=>{o.trim()?h.mutate({requestId:l.id,reason:o}):vl.error("Please provide a reason for rejection")},disabled:!o.trim()||h.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white px-4 py-2 rounded-lg font-semibold transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:h.isPending?"Rejecting...":"Reject Request"})]})]})})]})}function yo(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)("tables"),{data:d,isLoading:c}=ur({queryKey:["tables",t],queryFn:()=>jl.rj.getTables(t),enabled:!!t}),u=d||[],m=u.filter(e=>"AVAILABLE"===e.status||"OCCUPIED"===e.status);return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Tables & Waitlist"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view live tables"}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>o("tables"),className:"px-6 py-3 font-semibold transition-all ".concat("tables"===i?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:"Live Tables"}),(0,ta.jsx)("button",{onClick:()=>o("buyin-requests"),className:"px-6 py-3 font-semibold transition-all ".concat("buyin-requests"===i?"text-blue-400 border-b-2 border-blue-400":"text-gray-400 hover:text-white"),children:"Buy-In Requests"})]}),"buyin-requests"===i?(0,ta.jsx)(fo,{clubId:t}):(0,ta.jsxs)(ta.Fragment,{children:[!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view tables."})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold",children:"Live Tables - View Only"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"View live tables and their status."})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 px-4 py-2 rounded-lg",children:[(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Active Tables: ",m.length]}),(0,ta.jsxs)("div",{className:"text-sm text-gray-300",children:["Total Players: ",m.reduce((e,t)=>e+(t.currentSeats||0),0)]})]})]}),c?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tables..."})]}):0===m.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfb2"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No active tables"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:m.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600 hover:border-blue-500 transition-all",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h3",{className:"text-lg font-bold text-white",children:["Table ",e.tableNumber||e.number]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:e.tableType||"Cash Game"})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs font-semibold ".concat("OCCUPIED"===e.status?"bg-green-600/20 text-green-400":"bg-blue-600/20 text-blue-400"),children:e.status})]}),(0,ta.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Stakes:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:["\u20b9",e.minBuyIn||0,"/\u20b9",e.maxBuyIn||0]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Occupied Seats:"}),(0,ta.jsxs)("span",{className:"text-white font-medium",children:[e.currentSeats||0," / ",e.maxSeats||8]})]}),(0,ta.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Available Seats:"}),(0,ta.jsx)("span",{className:"text-green-400 font-medium",children:e.maxSeats-(e.currentSeats||0)})]})]}),(0,ta.jsxs)("button",{onClick:()=>{l(e),n(!0)},className:"w-full bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center justify-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83c\udfaf"}),(0,ta.jsx)("span",{children:"View Table Hologram"})]})]},e.id))})]}),r&&s&&(0,ta.jsx)("div",{className:"fixed inset-0 z-50 bg-black/90 overflow-y-auto",children:(0,ta.jsx)(Fi,{tableId:s.id,onClose:()=>{n(!1),l(null)},isManagerMode:!0,isViewOnly:!0,tables:u})})]})]})}function vo(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),{data:r,isLoading:n}=ur({queryKey:["tournaments",t],queryFn:()=>jl.Re.getTournaments(t),enabled:!!t}),i=Array.isArray(r)?r:(null===r||void 0===r?void 0:r.tournaments)||(null===r||void 0===r?void 0:r.data)||[],o=Array.isArray(i)?i:[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Tournaments"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view tournament information"}),!t&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view tournaments."})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Tournament List - View Only"}),n?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading tournaments..."})]}):0===o.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udfc6"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No tournaments found"})]}):(0,ta.jsx)("div",{className:"space-y-4",children:o.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Tournament"}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),e.buyIn&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,ta.jsxs)("button",{onClick:()=>l(e),className:"bg-gradient-to-r from-blue-600 to-indigo-700 hover:from-blue-500 hover:to-indigo-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ta.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Tournament"}),(0,ta.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),s.buyIn&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,ta.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function jo(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)(null),{data:r,isLoading:n}=ur({queryKey:["rummy-tournaments",t],queryFn:()=>jl.Re.getTournaments(t),enabled:!!t,select:e=>Array.isArray(e)?e.filter(e=>"RUMMY"===e.tableType):[]}),i=r||[];return(0,ta.jsxs)("div",{className:"text-white space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold",children:"Rummy Tournaments"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"View-only mode: You can only view rummy tournament details"})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"All Rummy Tournaments"}),n?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading rummy tournaments..."})]}):0===i.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udccf"}),(0,ta.jsx)("p",{className:"text-xl text-gray-300",children:"No rummy tournaments found"})]}):(0,ta.jsx)("div",{className:"space-y-4",children:i.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700 rounded-xl p-5 border border-slate-600",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:e.name||"Rummy Tournament"}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Status: ",e.status||"Unknown"]}),(0,ta.jsxs)("p",{className:"text-sm text-emerald-400",children:["Variant: ",e.rummyVariant||"Points Rummy"]}),e.buyIn&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Buy-In: \u20b9",e.buyIn]}),e.startTime&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Start: ",new Date(e.startTime).toLocaleString()]}),e.prizePool&&(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Prize Pool: \u20b9",e.prizePool]})]}),(0,ta.jsxs)("button",{onClick:()=>l(e),className:"bg-gradient-to-r from-emerald-600 to-teal-700 hover:from-emerald-500 hover:to-teal-600 text-white px-4 py-2 rounded-lg font-semibold transition-all flex items-center gap-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udc41\ufe0f"}),(0,ta.jsx)("span",{children:"View Details"})]})]})},e.id))})]}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:s.name||"Rummy Tournament"}),(0,ta.jsx)("button",{onClick:()=>l(null),className:"text-gray-400 hover:text-white transition-colors",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Status"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:s.status||"Unknown"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Rummy Variant"}),(0,ta.jsx)("p",{className:"text-emerald-400 font-semibold",children:s.rummyVariant||"Points Rummy"})]}),s.buyIn&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Buy-In"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.buyIn]})]}),s.prizePool&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Prize Pool"}),(0,ta.jsxs)("p",{className:"text-white font-semibold",children:["\u20b9",s.prizePool]})]}),s.startTime&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Start Time"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:new Date(s.startTime).toLocaleString()})]}),s.description&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Description"}),(0,ta.jsx)("p",{className:"text-white",children:s.description})]})]})]})})]})}function wo(){var e,t,s,l,r,i,o,d;const c=ue(),[u,m]=(aa(),(0,a.useState)("Dashboard")),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=localStorage.getItem("clubId");e?h(e):c("/login")},[c]);const{data:j,isLoading:w}=ur({queryKey:["club",x],queryFn:()=>jl.Od.getClub(x),enabled:!!x});(0,a.useEffect)(()=>{j&&b(j)},[j]),(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("cashieruser")||"{}");e.id||t.userId?(e.mustResetPassword||t.mustResetPassword)&&f(!0):c("/login")},[c]);const{data:N,isLoading:S}=ur({queryKey:["clubRevenue",x],queryFn:()=>jl.Od.getClubRevenue(x),enabled:!!x,refetchInterval:3e4}),C=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),k=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("cashieruser")||"{}");t.mustResetPassword=!1,localStorage.setItem("cashieruser",JSON.stringify(t)),f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),P=g&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("cashieruser")||"{}"),a=t.email||s.email;a?y.currentPassword&&y.newPassword&&y.confirmPassword?y.newPassword===y.confirmPassword?y.newPassword.length<8?vl.error("Password must be at least 8 characters"):k.mutate({email:a,currentPassword:y.currentPassword,newPassword:y.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:y.currentPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:y.newPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:y.confirmPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:k.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:k.isLoading?"Resetting...":"Reset Password"})]})]})});if(w||!x)return(0,ta.jsxs)(ta.Fragment,{children:[P,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-white text-center",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]});const A=["Dashboard","Notifications","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides","Leave Management"],I=null!==j&&void 0!==j&&j.rummyEnabled?[...A,"Rummy"]:A;return(0,ta.jsxs)(ta.Fragment,{children:[P,(0,ta.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,ta.jsx)(ro,{activeItem:u,setActiveItem:m,menuItems:I,onSignOut:()=>{localStorage.clear(),c("/login")}}),(0,ta.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===u&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===p||void 0===p?void 0:p.name)||(null===j||void 0===j?void 0:j.name)||"Loading..."]})}),S?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading revenue data..."})]}):(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(e=N.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===N||void 0===N||null===(t=N.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:C((null===N||void 0===N||null===(s=N.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===N||void 0===N||null===(l=N.currentDay)||void 0===l?void 0:l.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(r=N.currentDay)||void 0===r?void 0:r.rake)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(i=N.previousDay)||void 0===i?void 0:i.rake)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(o=N.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:C((null===N||void 0===N||null===(d=N.currentDay)||void 0===d?void 0:d.tips)||0)})]})]})]}),"Payroll Management"===u&&(0,ta.jsx)(oo,{selectedClubId:x}),"Bonus Management"===u&&(0,ta.jsx)(mo,{selectedClubId:x}),"Tables & Waitlist"===u&&(0,ta.jsx)(yo,{selectedClubId:x}),"Club Buy-In"===u&&(0,ta.jsx)(bo,{selectedClubId:x,onBack:()=>m("Dashboard")}),"Push Notifications"===u&&(0,ta.jsx)(Hr,{selectedClubId:x}),"Tournaments"===u&&(0,ta.jsx)(vo,{selectedClubId:x}),"Chat"===u&&x&&(0,ta.jsx)(En,{clubId:x}),"Financial Overrides"===u&&(0,ta.jsx)(go,{selectedClubId:x}),"Leave Management"===u&&x&&(0,ta.jsx)(zi,{clubId:x,userRole:"CASHIER"}),"Rummy"===u&&(0,ta.jsx)(jo,{selectedClubId:x}),"Notifications"===u&&x&&(0,ta.jsx)(ei,{selectedClubId:x,recipientType:"staff"}),!["Dashboard","Payroll Management","Bonus Management","Tables & Waitlist","Club Buy-In","Push Notifications","Tournaments","Chat","Financial Overrides","Rummy","Notifications"].includes(u)&&(0,ta.jsx)("div",{className:"text-white",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-6",children:u})})]})]})]})}function No(e){let{clubId:t}=e;const[s,l]=(0,a.useState)("menu"),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)([]),[d,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)(null);(0,a.useEffect)(()=>{"menu"===s?(y(),v()):j()},[t,s]);const y=async()=>{try{m(!0);const e=await jl.Zl.getMenu(t);n(e)}catch(e){console.error("Error loading menu items:",e),alert("Failed to load menu items")}finally{m(!1)}},v=async()=>{try{const e=await jl.Zl.getAllMenuCategories(t);o(e)}catch(e){console.error("Error loading categories:",e)}},j=async()=>{try{m(!0);const e=await jl.Zl.getInventory(t);c(e)}catch(e){console.error("Error loading inventory:",e),alert("Failed to load inventory")}finally{m(!1)}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{onClick:()=>l("menu"),className:"px-6 py-3 rounded-lg font-semibold ".concat("menu"===s?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Menu Management"}),(0,ta.jsx)("button",{onClick:()=>l("inventory"),className:"px-6 py-3 rounded-lg font-semibold ".concat("inventory"===s?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Inventory Management"})]}),"menu"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsxs)("button",{onClick:()=>h(!0),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\u2795"}),(0,ta.jsx)("span",{children:"Add Menu Item"})]}),(0,ta.jsxs)("button",{onClick:()=>b(!0),className:"bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udcc1"}),(0,ta.jsx)("span",{children:"Add Category"})]})]})}),u?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading menu items..."})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,ta.jsx)(So,{item:e,onEdit:()=>{f(e),h(!0)},onDelete:async()=>{if(window.confirm("Delete this menu item?"))try{await jl.Zl.deleteMenuItem(t,e.id),y()}catch(s){alert("Failed to delete item")}}},e.id))}),0===r.length&&!u&&(0,ta.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-lg",children:"No menu items yet"}),(0,ta.jsx)("button",{onClick:()=>h(!0),className:"mt-4 text-orange-500 hover:text-orange-400",children:"Add your first menu item"})]})]}),"inventory"===s&&(0,ta.jsx)(Po,{clubId:t,inventory:d,loading:u,onUpdate:j}),x&&(0,ta.jsx)(Co,{clubId:t,categories:i,item:g,onClose:()=>{h(!1),f(null)},onSave:()=>{h(!1),f(null),y()}}),p&&(0,ta.jsx)(ko,{clubId:t,onClose:()=>b(!1),onSave:()=>{b(!1),v()}})]})}function So(e){let{item:t,onEdit:s,onDelete:a}=e;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl overflow-hidden border border-slate-700 hover:border-orange-500 transition-all",children:[(0,ta.jsxs)("div",{className:"h-48 bg-slate-900 flex overflow-x-auto",children:[t.imageUrl1&&(0,ta.jsx)("img",{src:t.imageUrl1,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),t.imageUrl2&&(0,ta.jsx)("img",{src:t.imageUrl2,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),t.imageUrl3&&(0,ta.jsx)("img",{src:t.imageUrl3,alt:t.name,className:"h-full w-full object-cover flex-shrink-0"}),!t.imageUrl1&&!t.imageUrl2&&!t.imageUrl3&&(0,ta.jsx)("div",{className:"h-full w-full flex items-center justify-center text-gray-500",children:(0,ta.jsx)("span",{className:"text-6xl",children:"\ud83c\udf7d\ufe0f"})})]}),(0,ta.jsxs)("div",{className:"p-4 space-y-3",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:t.name}),(e=>{const t={available:{bg:"bg-green-500",text:"Available"},limited:{bg:"bg-yellow-500",text:"Limited"},out_of_stock:{bg:"bg-red-500",text:"Out of Stock"}},s=t[e]||t.available;return(0,ta.jsx)("span",{className:"".concat(s.bg," text-white px-3 py-1 rounded-full text-xs font-semibold"),children:s.text})})(t.availability)]}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm line-clamp-2",children:t.description||"No description"}),(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("p",{className:"text-2xl font-bold text-orange-500",children:["\u20b9",t.price]}),(0,ta.jsx)("p",{className:"text-xs text-gray-500",children:t.category})]}),(0,ta.jsx)("div",{className:"text-right",children:(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Stock: ",t.stock]})})]}),(0,ta.jsxs)("div",{className:"flex space-x-2 pt-2",children:[(0,ta.jsx)("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,ta.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})]})}function Co(e){let{clubId:t,categories:s,item:l,onClose:r,onSave:i}=e;const[o,d]=(0,a.useState)({name:(null===l||void 0===l?void 0:l.name)||"",category:(null===l||void 0===l?void 0:l.category)||"",isCustomCategory:(null===l||void 0===l?void 0:l.isCustomCategory)||!1,price:(null===l||void 0===l?void 0:l.price)||0,stock:(null===l||void 0===l?void 0:l.stock)||0,description:(null===l||void 0===l?void 0:l.description)||"",availability:(null===l||void 0===l?void 0:l.availability)||"available",imageUrl1:(null===l||void 0===l?void 0:l.imageUrl1)||"",imageUrl2:(null===l||void 0===l?void 0:l.imageUrl2)||"",imageUrl3:(null===l||void 0===l?void 0:l.imageUrl3)||""}),[c,u]=(0,a.useState)({img1:!1,img2:!1,img3:!1}),[m,x]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:l?"Edit Menu Item":"Add Menu Item"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{x(!0);const e=(0,n.A)((0,n.A)({},o),{},{price:parseFloat(o.price)||0,stock:parseInt(o.stock)||0});l?await jl.Zl.updateMenuItem(t,l.id,e):await jl.Zl.createMenuItem(t,e),i()}catch(s){alert("Failed to save menu item")}finally{x(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Item Name *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Chicken Biryani"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Category *"}),(0,ta.jsxs)("select",{value:o.category,onChange:e=>{const t="Custom"===e.target.value;d((0,n.A)((0,n.A)({},o),{},{category:t?"":e.target.value,isCustomCategory:t}))},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"Select Category"}),s.map(e=>(0,ta.jsx)("option",{value:e.categoryName,children:e.categoryName},e.id)),(0,ta.jsx)("option",{value:"Custom",children:"Custom..."})]}),o.isCustomCategory&&(0,ta.jsx)("input",{type:"text",required:!0,value:o.category,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg mt-2",placeholder:"Enter custom category name"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Price (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",required:!0,min:"0",step:"0.01",value:o.price,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{price:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Stock"}),(0,ta.jsx)("input",{type:"number",min:"0",value:o.stock,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{stock:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Availability *"}),(0,ta.jsxs)("select",{value:o.availability,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{availability:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"available",children:"Available"}),(0,ta.jsx)("option",{value:"limited",children:"Limited"}),(0,ta.jsx)("option",{value:"out_of_stock",children:"Out of Stock"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Description"}),(0,ta.jsx)("textarea",{value:o.description,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{description:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",rows:"3",placeholder:"Describe the item..."})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Images (up to 3)"}),(0,ta.jsx)("div",{className:"grid grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("div",{className:"h-32 bg-slate-700 rounded-lg flex items-center justify-center overflow-hidden",children:o["imageUrl".concat(e)]?(0,ta.jsx)("img",{src:o["imageUrl".concat(e)],alt:"Preview ".concat(e),className:"w-full h-full object-cover"}):(0,ta.jsx)("span",{className:"text-gray-500 text-4xl",children:"\ud83d\udcf7"})}),(0,ta.jsx)("input",{type:"file",accept:"image/*",onChange:s=>s.target.files[0]&&(async(e,s)=>{try{u((0,n.A)((0,n.A)({},c),{},{["img".concat(s)]:!0}));const a=await Ki(e,t,"menu-items");d((0,n.A)((0,n.A)({},o),{},{["imageUrl".concat(s)]:a}))}catch(a){console.error("Image upload error:",a),alert("Failed to upload image: "+(a.message||"Unknown error"))}finally{u((0,n.A)((0,n.A)({},c),{},{["img".concat(s)]:!1}))}})(s.target.files[0],e),disabled:c["img".concat(e)],className:"w-full text-sm text-gray-400"}),c["img".concat(e)]&&(0,ta.jsx)("p",{className:"text-xs text-orange-500",children:"Uploading..."})]},e))})]}),(0,ta.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:m?"Saving...":l?"Update Item":"Add Item"}),(0,ta.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function ko(e){let{clubId:t,onClose:s,onSave:l}=e;const[r,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Add Custom Category"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o(!0),await jl.Zl.createMenuCategory(t,r),l()}catch(s){alert("Failed to create category")}finally{o(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Category Name *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:r,onChange:e=>n(e.target.value),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Special Items"})]}),(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:i?"Adding...":"Add Category"}),(0,ta.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Po(e){let{clubId:t,inventory:s,loading:l,onUpdate:r}=e;const[n,i]=(0,a.useState)(null),[o,d]=(0,a.useState)(!1);return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-blue-600 to-cyan-600 p-4 rounded-lg flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-white font-semibold",children:"End of Day Stock Update"}),(0,ta.jsx)("p",{className:"text-white/80 text-sm",children:"Update inventory levels after service"})]}),(0,ta.jsx)("button",{onClick:()=>d(!0),className:"bg-green-600 hover:bg-green-500 text-white px-6 py-2 rounded-lg font-semibold",children:"+ Add Inventory Item"})]}),l?(0,ta.jsx)("div",{className:"text-center py-12",children:(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"})}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(e=>{const t=(s=e.currentStock,a=e.minStock,0===s?{color:"text-red-500",label:"Out of Stock",bg:"bg-red-500/20"}:s<=a?{color:"text-yellow-500",label:"Critical",bg:"bg-yellow-500/20"}:s<=2*a?{color:"text-orange-500",label:"Low",bg:"bg-orange-500/20"}:{color:"text-green-500",label:"Good",bg:"bg-green-500/20"});var s,a;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 border border-slate-700 ".concat(t.bg),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,ta.jsx)("h4",{className:"text-white font-bold",children:e.name}),(0,ta.jsx)("span",{className:"text-xs font-semibold ".concat(t.color),children:t.label})]}),(0,ta.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Current Stock:"}),(0,ta.jsxs)("span",{className:"font-bold ".concat(t.color),children:[e.currentStock," ",e.unit]})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Min Stock:"}),(0,ta.jsxs)("span",{className:"text-white",children:[e.minStock," ",e.unit]})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Cost:"}),(0,ta.jsxs)("span",{className:"text-white",children:["\u20b9",e.cost||0]})]})]}),(0,ta.jsx)("button",{onClick:()=>i(e),className:"w-full mt-4 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Update Stock"})]},e.id)})}),n&&(0,ta.jsx)(Ao,{clubId:t,item:n,onClose:()=>i(null),onSave:()=>{i(null),r()}}),o&&(0,ta.jsx)(Io,{clubId:t,onClose:()=>d(!1),onSave:()=>{d(!1),r()}})]})}function Ao(e){let{clubId:t,item:s,onClose:l,onSave:r}=e;const[n,i]=(0,a.useState)(s.currentStock),[o,d]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Update Stock"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{d(!0),await jl.Zl.updateInventory(t,s.id,{currentStock:n}),r()}catch(a){alert("Failed to update stock")}finally{d(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("p",{className:"text-gray-400 mb-4",children:["Item: ",(0,ta.jsx)("span",{className:"text-white font-bold",children:s.name})]}),(0,ta.jsxs)("label",{className:"block text-white mb-2",children:["Current Stock (",s.unit,")"]}),(0,ta.jsx)("input",{type:"number",required:!0,min:"0",value:n,onChange:e=>i(parseInt(e.target.value)),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"}),(0,ta.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["Minimum: ",s.minStock," ",s.unit]})]}),(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Updating...":"Update"}),(0,ta.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Io(e){let{clubId:t,onClose:s,onSave:l}=e;const[r,i]=(0,a.useState)({name:"",category:"",currentStock:0,minStock:0,supplier:"",cost:0,unit:"units"}),[o,d]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Add Inventory Item"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{d(!0),await jl.Zl.createInventoryItem(t,r),l()}catch(s){console.error("Error creating inventory item:",s),alert("Failed to create inventory item")}finally{d(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Item Name *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:r.name,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Tomatoes, Flour, etc."})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Category *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:r.category,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Vegetables, Dry Goods, etc."})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Current Stock *"}),(0,ta.jsx)("input",{type:"number",required:!0,min:"0",value:r.currentStock,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{currentStock:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Minimum Stock *"}),(0,ta.jsx)("input",{type:"number",required:!0,min:"0",value:r.minStock,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{minStock:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Unit"}),(0,ta.jsxs)("select",{value:r.unit,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{unit:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"units",children:"Units"}),(0,ta.jsx)("option",{value:"kg",children:"Kilograms (kg)"}),(0,ta.jsx)("option",{value:"g",children:"Grams (g)"}),(0,ta.jsx)("option",{value:"L",children:"Liters (L)"}),(0,ta.jsx)("option",{value:"ml",children:"Milliliters (ml)"}),(0,ta.jsx)("option",{value:"pieces",children:"Pieces"}),(0,ta.jsx)("option",{value:"boxes",children:"Boxes"}),(0,ta.jsx)("option",{value:"packets",children:"Packets"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Cost (\u20b9)"}),(0,ta.jsx)("input",{type:"number",min:"0",step:"0.01",value:r.cost,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{cost:parseFloat(e.target.value)||0})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"0.00"})]}),(0,ta.jsxs)("div",{className:"col-span-2",children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Supplier (Optional)"}),(0,ta.jsx)("input",{type:"text",value:r.supplier,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{supplier:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"Supplier name"})]})]}),(0,ta.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Creating...":"Create Item"}),(0,ta.jsx)("button",{type:"button",onClick:s,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Do(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(1),[u,m]=(0,a.useState)(1),[x,h]=(0,a.useState)("all"),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)(!1);(0,a.useEffect)(()=>{j(),w()},[t,x,d]);const j=async()=>{try{o(!0);const e="all"===x?void 0:x,s=await jl.Zl.getOrders(t,e,d,10);s&&Array.isArray(s.orders)?(l(s.orders),m(s.totalPages||1)):Array.isArray(s)?l(s):l([])}catch(e){console.error("Error loading orders:",e),alert("Failed to load orders"),l([])}finally{o(!1)}},w=async()=>{try{const e=await jl.Zl.getKitchenStations(t,!0);n(e)}catch(e){console.error("Error loading stations:",e)}},N=s||[];return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-4 flex justify-between items-center",children:[(0,ta.jsx)("div",{className:"flex space-x-2",children:["all","pending","processing","ready","delivered","cancelled"].map(e=>(0,ta.jsx)("button",{onClick:()=>{h(e),c(1)},className:"px-4 py-2 rounded-lg font-semibold text-sm ".concat(x===e?"bg-orange-600 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))}),(0,ta.jsx)("button",{onClick:j,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83d\udd04 Refresh"})]}),(0,ta.jsxs)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-xl p-4",children:[(0,ta.jsx)("h3",{className:"text-white font-bold mb-2",children:"\ud83d\udccb Order Processing Workflow"}),(0,ta.jsx)("p",{className:"text-blue-200 text-sm",children:"1. Player places order \u2192 2. FNB Manager processes & sends to Chef \u2192 3. Chef prepares food \u2192 4. Status updates visible in Player Portal"})]}),i?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading orders..."})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"space-y-4",children:N.map(e=>(0,ta.jsx)(To,{order:e,onAccept:()=>{b(e),f(!0)},onReject:()=>{b(e),v(!0)},onMarkReady:()=>(async e=>{try{await jl.Zl.markOrderReady(t,e),alert("Order marked as ready!"),j()}catch(s){alert("Failed to mark order as ready")}})(e.id),onMarkDelivered:()=>(async e=>{try{await jl.Zl.markOrderDelivered(t,e),alert("Order delivered! Invoice generated."),j()}catch(s){alert("Failed to mark order as delivered")}})(e.id)},e.id))}),0===N.length&&(0,ta.jsx)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:(0,ta.jsx)("p",{className:"text-gray-400 text-lg",children:"No orders found"})}),u>1&&(0,ta.jsxs)("div",{className:"flex justify-center items-center space-x-4",children:[(0,ta.jsx)("button",{onClick:()=>c(e=>Math.max(1,e-1)),disabled:1===d,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-white",children:["Page ",d," of ",u]}),(0,ta.jsx)("button",{onClick:()=>c(e=>Math.min(u,e+1)),disabled:d===u,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}),g&&p&&(0,ta.jsx)(_o,{order:p,stations:r,onAccept:async(e,s)=>{try{await jl.Zl.acceptOrder(t,e,s),alert("Order accepted successfully!"),f(!1),j()}catch(a){alert("Failed to accept order")}},onClose:()=>{f(!1),b(null)}}),y&&p&&(0,ta.jsx)(Eo,{order:p,onReject:async(e,s)=>{try{await jl.Zl.rejectOrder(t,e,s),alert("Order rejected"),v(!1),j()}catch(a){alert("Failed to reject order")}},onClose:()=>{v(!1),b(null)}})]})}function To(e){let{order:t,onAccept:s,onReject:a,onMarkReady:l,onMarkDelivered:r}=e;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-3 mb-2",children:[t.orderNumber?(0,ta.jsx)("h3",{className:"text-2xl font-bold text-orange-500",children:t.orderNumber}):(0,ta.jsx)("h3",{className:"text-2xl font-bold text-gray-500",children:"No Order # (Not Accepted)"}),(()=>{const e={pending:{bg:"bg-yellow-500",text:"\u23f3 Pending",icon:"\u23f3"},processing:{bg:"bg-blue-500",text:"\ud83d\udc68\u200d\ud83c\udf73 Processing",icon:"\ud83d\udc68\u200d\ud83c\udf73"},ready:{bg:"bg-green-500",text:"\u2705 Ready",icon:"\u2705"},delivered:{bg:"bg-emerald-500",text:"\ud83c\udf89 Delivered",icon:"\ud83c\udf89"},cancelled:{bg:"bg-red-500",text:"\u274c Cancelled",icon:"\u274c"}},s=e[t.status]||e.pending;return(0,ta.jsx)("span",{className:"".concat(s.bg," text-white px-4 py-2 rounded-full text-sm font-semibold"),children:s.text})})(t.status)]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,ta.jsxs)("p",{className:"text-gray-400",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),t.stationName&&(0,ta.jsxs)("p",{className:"text-blue-400",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Station:"})," ",t.stationName]})]}),(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsxs)("p",{className:"text-3xl font-bold text-orange-500",children:["\u20b9",t.totalAmount]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:new Date(t.createdAt).toLocaleString()}),t.invoiceNumber&&(0,ta.jsxs)("p",{className:"text-sm text-green-400 mt-1",children:["Invoice: ",t.invoiceNumber]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-4",children:[(0,ta.jsx)("h4",{className:"text-white font-semibold mb-2",children:"Order Items:"}),(0,ta.jsx)("ul",{className:"space-y-1",children:t.items.map((e,t)=>(0,ta.jsxs)("li",{className:"text-gray-300 flex justify-between",children:[(0,ta.jsxs)("span",{children:[e.quantity,"x ",e.name]}),(0,ta.jsxs)("span",{className:"text-orange-400",children:["\u20b9",e.price*e.quantity]})]},t))}),t.specialInstructions&&(0,ta.jsx)("div",{className:"mt-3 pt-3 border-t border-slate-700",children:(0,ta.jsxs)("p",{className:"text-yellow-400 text-sm",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Special Instructions:"})," ",t.specialInstructions]})})]}),(0,ta.jsxs)("div",{className:"flex space-x-2",children:["pending"===t.status&&null===t.isAccepted&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:s,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u2705 Accept Order"}),(0,ta.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u274c Reject Order"})]}),"processing"===t.status&&(0,ta.jsx)("button",{onClick:l,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\u2705 Mark as Ready"}),"ready"===t.status&&(0,ta.jsx)("button",{onClick:r,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white px-4 py-2 rounded-lg font-semibold",children:"\ud83c\udf89 Mark as Delivered"}),"cancelled"===t.status&&t.rejectedReason&&(0,ta.jsxs)("div",{className:"flex-1 bg-red-600/20 border border-red-500 text-red-400 px-4 py-2 rounded-lg",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Rejected:"})," ",t.rejectedReason]})]})]})}function _o(e){let{order:t,stations:s,onAccept:l,onClose:r}=e;const[n,i]=(0,a.useState)(""),[o,d]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Accept Order"}),(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),(0,ta.jsxs)("p",{className:"text-orange-500 text-2xl font-bold mt-2",children:["\u20b9",t.totalAmount]})]}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),n?(d(!0),await l(t.id,n),d(!1)):alert("Please select a station")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Select Kitchen Station *"}),(0,ta.jsxs)("select",{value:n,onChange:e=>i(e.target.value),required:!0,className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"-- Select Station --"}),s.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.stationName," (Chef: ",e.chefName||"Unassigned",") - ",e.ordersPending," pending"]},e.id))]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Order will be assigned to this station for preparation"})]}),(0,ta.jsx)("div",{className:"bg-green-600/20 border border-green-500 rounded-lg p-3",children:(0,ta.jsx)("p",{className:"text-green-400 text-sm",children:"\u2705 Accepting will assign an order number and send to kitchen"})}),(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:o,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:o?"Accepting...":"\u2705 Accept & Send to Kitchen"}),(0,ta.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Eo(e){let{order:t,onReject:s,onClose:l}=e;const[r,n]=(0,a.useState)(""),[i,o]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Reject Order"}),(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Player:"})," ",t.playerName]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"font-semibold",children:"Table:"})," ",t.tableNumber]}),(0,ta.jsxs)("p",{className:"text-orange-500 text-2xl font-bold mt-2",children:["\u20b9",t.totalAmount]})]}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),r.trim()?(o(!0),await s(t.id,r),o(!1)):alert("Please provide a rejection reason")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2 font-semibold",children:"Rejection Reason *"}),(0,ta.jsx)("textarea",{value:r,onChange:e=>n(e.target.value),required:!0,rows:"3",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Out of stock, Kitchen closed, etc."})]}),(0,ta.jsx)("div",{className:"bg-red-600/20 border border-red-500 rounded-lg p-3",children:(0,ta.jsx)("p",{className:"text-red-400 text-sm",children:"\u26a0\ufe0f Rejecting will cancel the order (no order number assigned)"})}),(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:i?"Rejecting...":"\u274c Reject Order"}),(0,ta.jsx)("button",{type:"button",onClick:l,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}const Ro=[{value:"meat_poultry",label:"Meat & Poultry"},{value:"vegetables",label:"Vegetables"},{value:"spices",label:"Spices"},{value:"dairy",label:"Dairy"},{value:"beverages",label:"Beverages"}];function Lo(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{u()},[t]);const u=async()=>{try{n(!0);const e=await jl.Zl.getSuppliers(t,!1);l(e)}catch(e){console.error("Error loading suppliers:",e),alert("Failed to load suppliers")}finally{n(!1)}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Supplier Management"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Manage your food & beverage suppliers"})]}),(0,ta.jsxs)("button",{onClick:()=>{c(null),o(!0)},className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\u2795"}),(0,ta.jsx)("span",{children:"Add Supplier"})]})]}),r?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading suppliers..."})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,ta.jsx)(Oo,{supplier:e,onEdit:()=>{c(e),o(!0)},onDelete:async()=>{if(window.confirm('Delete supplier "'.concat(e.name,'"?')))try{await jl.Zl.deleteSupplier(t,e.id),u()}catch(s){alert("Failed to delete supplier")}}},e.id))}),0===s.length&&!r&&(0,ta.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-lg",children:"No suppliers yet"}),(0,ta.jsx)("button",{onClick:()=>o(!0),className:"mt-4 text-orange-500 hover:text-orange-400",children:"Add your first supplier"})]}),i&&(0,ta.jsx)(Mo,{clubId:t,supplier:d,onClose:()=>{o(!1),c(null)},onSave:()=>{o(!1),c(null),u()}})]})}function Oo(e){let{supplier:t,onEdit:s,onDelete:a}=e;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border ".concat(t.isActive?"border-green-500":"border-slate-700"),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-1",children:t.name}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:t.contact||"No contact person"})]}),(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.isActive?"Active":"Inactive"})]}),(0,ta.jsxs)("div",{className:"space-y-2 mb-4",children:[t.phone&&(0,ta.jsxs)("p",{className:"text-gray-300 text-sm flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udcde"}),(0,ta.jsx)("span",{children:t.phone})]}),t.email&&(0,ta.jsxs)("p",{className:"text-gray-300 text-sm flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udce7"}),(0,ta.jsx)("span",{children:t.email})]}),t.address&&(0,ta.jsxs)("p",{className:"text-gray-400 text-xs flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\ud83d\udccd"}),(0,ta.jsx)("span",{className:"line-clamp-2",children:t.address})]})]}),t.rating&&(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-lg",children:(e=>{const t=[],s=Math.floor(e||0),a=(e||0)%1>=.5;for(let l=0;l<5;l++)l<s||l===s&&a?t.push("\u2b50"):t.push("\u2606");return t.join("")})(t.rating)}),(0,ta.jsxs)("p",{className:"text-xs text-gray-400",children:[t.rating,"/5.0"]})]}),t.specializations&&t.specializations.length>0&&(0,ta.jsxs)("div",{className:"mb-4",children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400 mb-2",children:"Specializations:"}),(0,ta.jsx)("div",{className:"flex flex-wrap gap-2",children:t.specializations.map((e,t)=>(0,ta.jsx)("span",{className:"bg-blue-600/30 text-blue-300 px-2 py-1 rounded text-xs",children:e.replace("_"," & ")},t))})]}),(0,ta.jsxs)("div",{className:"flex space-x-2 pt-4 border-t border-slate-700",children:[(0,ta.jsx)("button",{onClick:s,className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,ta.jsx)("button",{onClick:a,className:"flex-1 bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})}function Mo(e){var t;let{clubId:s,supplier:l,onClose:r,onSave:i}=e;const[o,d]=(0,a.useState)({name:(null===l||void 0===l?void 0:l.name)||"",contact:(null===l||void 0===l?void 0:l.contact)||"",phone:(null===l||void 0===l?void 0:l.phone)||"",email:(null===l||void 0===l?void 0:l.email)||"",address:(null===l||void 0===l?void 0:l.address)||"",rating:(null===l||void 0===l?void 0:l.rating)||0,isActive:null===(t=null===l||void 0===l?void 0:l.isActive)||void 0===t||t,specializations:(null===l||void 0===l?void 0:l.specializations)||[]}),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(!1),h=()=>{c.trim()&&!o.specializations.includes(c.trim())&&(d((0,n.A)((0,n.A)({},o),{},{specializations:[...o.specializations,c.trim()]})),u(""))};return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:l?"Edit Supplier":"Add Supplier"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{x(!0),l?await jl.Zl.updateSupplier(s,l.id,o):await jl.Zl.createSupplier(s,o),i()}catch(t){alert("Failed to save supplier")}finally{x(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Supplier Name *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:o.name,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{name:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Fresh Foods Ltd."})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Contact Person"}),(0,ta.jsx)("input",{type:"text",value:o.contact,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{contact:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., John Smith"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Phone"}),(0,ta.jsx)("input",{type:"tel",value:o.phone,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{phone:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"+91 98765 43210"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Email"}),(0,ta.jsx)("input",{type:"email",value:o.email,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{email:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"supplier@example.com"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Address"}),(0,ta.jsx)("textarea",{value:o.address,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{address:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",rows:"2",placeholder:"Full address..."})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Specializations"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsx)("div",{className:"grid grid-cols-2 gap-2",children:Ro.map(e=>(0,ta.jsxs)("label",{className:"flex items-center space-x-2 bg-slate-700 p-3 rounded-lg cursor-pointer hover:bg-slate-600",children:[(0,ta.jsx)("input",{type:"checkbox",checked:o.specializations.includes(e.value),onChange:()=>{return t=e.value,void(o.specializations.includes(t)?d((0,n.A)((0,n.A)({},o),{},{specializations:o.specializations.filter(e=>e!==t)})):d((0,n.A)((0,n.A)({},o),{},{specializations:[...o.specializations,t]})));var t},className:"w-4 h-4"}),(0,ta.jsx)("span",{className:"text-white",children:e.label})]},e.value))}),(0,ta.jsxs)("div",{className:"flex space-x-2",children:[(0,ta.jsx)("input",{type:"text",value:c,onChange:e=>u(e.target.value),className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"Add custom specialization...",onKeyPress:e=>"Enter"===e.key&&(e.preventDefault(),h())}),(0,ta.jsx)("button",{type:"button",onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg",children:"Add"})]}),o.specializations.filter(e=>!Ro.some(t=>t.value===e)).length>0&&(0,ta.jsx)("div",{className:"flex flex-wrap gap-2",children:o.specializations.filter(e=>!Ro.some(t=>t.value===e)).map(e=>(0,ta.jsxs)("span",{className:"bg-purple-600 text-white px-3 py-1 rounded-full text-sm flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:e}),(0,ta.jsx)("button",{type:"button",onClick:()=>(e=>{d((0,n.A)((0,n.A)({},o),{},{specializations:o.specializations.filter(t=>t!==e)}))})(e),className:"text-white hover:text-red-300",children:"\xd7"})]},e))})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Rating (0-5)"}),(0,ta.jsx)("input",{type:"number",min:"0",max:"5",step:"0.1",value:o.rating,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{rating:parseFloat(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Status"}),(0,ta.jsxs)("select",{value:o.isActive?"active":"inactive",onChange:e=>d((0,n.A)((0,n.A)({},o),{},{isActive:"active"===e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"active",children:"Active"}),(0,ta.jsx)("option",{value:"inactive",children:"Inactive"})]})]})]}),(0,ta.jsxs)("div",{className:"flex space-x-4 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:m,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:m?"Saving...":l?"Update Supplier":"Add Supplier"}),(0,ta.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function Fo(e){let{clubId:t}=e;const[s,l]=(0,a.useState)([]),[r,n]=(0,a.useState)([]),[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{g(),f()},[t]);const g=async()=>{try{o(!0);const e=await jl.Zl.getKitchenStations(t,!1);l(e)}catch(e){console.error("Error loading stations:",e),alert("Failed to load kitchen stations")}finally{o(!1)}},f=async()=>{try{const e=await jl.staffAPI.getAllStaffMembers(t),s=(null===e||void 0===e?void 0:e.staff)||e||[],a=Array.isArray(s)?s.filter(e=>{const t="Active"===e.status||!e.status,s="FNB"===e.role,a="Staff"===e.role&&e.customRoleName;return t&&(s||a)}):[];n(a)}catch(e){console.error("Error loading chefs:",e),n([])}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Kitchen Operations"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Manage kitchen stations and track progress"})]}),(0,ta.jsxs)("button",{onClick:()=>{m(null),c(!0)},className:"bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold flex items-center space-x-2",children:[(0,ta.jsx)("span",{children:"\u2795"}),(0,ta.jsx)("span",{children:"Create Station"})]})]}),(0,ta.jsxs)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-xl p-4",children:[(0,ta.jsx)("h3",{className:"text-white font-bold mb-2",children:"\ud83c\udfe0 Kitchen Station Management"}),(0,ta.jsx)("p",{className:"text-blue-200 text-sm",children:"Create multiple stations for different food categories. Each station tracks pending and completed orders in real-time."})]}),i?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading stations..."})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:s.map(e=>(0,ta.jsx)(Bo,{station:e,onEdit:()=>{m(e),c(!0)},onViewStats:()=>(async e=>{try{const s=await jl.Zl.getStationStatistics(t,e);b(s),h(!0)}catch(s){alert("Failed to load station statistics")}})(e.id),onDelete:async()=>{if(window.confirm('Delete station "'.concat(e.stationName,'"?')))try{await jl.Zl.deleteKitchenStation(t,e.id),g()}catch(s){alert(s.message||"Failed to delete station")}},onToggleStatus:async()=>{try{await jl.Zl.updateKitchenStation(t,e.id,{isActive:!e.isActive}),g()}catch(s){alert("Failed to update station status")}}},e.id))}),0===s.length&&!i&&(0,ta.jsxs)("div",{className:"text-center py-12 bg-slate-800 rounded-xl",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-lg mb-2",children:"No kitchen stations yet"}),(0,ta.jsx)("p",{className:"text-gray-500 text-sm mb-4",children:'Create stations like "Station 1 - Quick Snacks", "Station 2 - Main Meals", etc.'}),(0,ta.jsx)("button",{onClick:()=>c(!0),className:"text-orange-500 hover:text-orange-400 font-semibold",children:"Create your first station"})]}),d&&(0,ta.jsx)(qo,{clubId:t,station:u,chefs:r,onClose:()=>{c(!1),m(null)},onSave:()=>{c(!1),m(null),g()}}),x&&p&&(0,ta.jsx)(zo,{stats:p,onClose:()=>{h(!1),b(null)}})]})}function Bo(e){let{station:t,onEdit:s,onViewStats:a,onDelete:l,onToggleStatus:r}=e;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border-2 ".concat(t.isActive?"border-green-500":"border-gray-600"),children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-2 mb-2",children:[(0,ta.jsx)("span",{className:"text-3xl",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,ta.jsxs)("span",{className:"bg-orange-600 text-white px-3 py-1 rounded-full text-sm font-bold",children:["#",t.stationNumber]})]}),(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:t.stationName})]}),(0,ta.jsx)("button",{onClick:r,className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(t.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.isActive?"Active":"Inactive"})]}),(0,ta.jsxs)("div",{className:"mb-4 pb-4 border-b border-slate-700",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Chef:"}),(0,ta.jsx)("p",{className:"text-white font-semibold",children:t.chefName||"Unassigned"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,ta.jsxs)("div",{className:"bg-yellow-600/20 rounded-lg p-3",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-2xl font-bold",children:t.ordersPending}),(0,ta.jsx)("p",{className:"text-yellow-300 text-xs",children:"Pending Orders"})]}),(0,ta.jsxs)("div",{className:"bg-green-600/20 rounded-lg p-3",children:[(0,ta.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:t.ordersCompleted}),(0,ta.jsx)("p",{className:"text-green-300 text-xs",children:"Completed"})]})]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("button",{onClick:a,className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"\ud83d\udcca View Statistics"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,ta.jsx)("button",{onClick:s,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Edit"}),(0,ta.jsx)("button",{onClick:l,className:"bg-red-600 hover:bg-red-500 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Delete"})]})]})]})}function qo(e){var t;let{clubId:s,station:l,chefs:r,onClose:i,onSave:o}=e;const[d,c]=(0,a.useState)({stationName:(null===l||void 0===l?void 0:l.stationName)||"",stationNumber:(null===l||void 0===l?void 0:l.stationNumber)||"",chefName:(null===l||void 0===l?void 0:l.chefName)||"",chefId:(null===l||void 0===l?void 0:l.chefId)||"",isActive:null===(t=null===l||void 0===l?void 0:l.isActive)||void 0===t||t}),[u,m]=(0,a.useState)(!1);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-lg w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:l?"Edit Kitchen Station":"Create Kitchen Station"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{m(!0),l?await jl.Zl.updateKitchenStation(s,l.id,d):await jl.Zl.createKitchenStation(s,d),o()}catch(t){alert(t.message||"Failed to save station")}finally{m(!1)}},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Station Name *"}),(0,ta.jsx)("input",{type:"text",required:!0,value:d.stationName,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{stationName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Station 1 - Quick Snacks"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Station Number *"}),(0,ta.jsx)("input",{type:"number",required:!0,min:"1",value:d.stationNumber,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{stationNumber:parseInt(e.target.value)})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"1, 2, 3..."}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Unique number for this station"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Chef Name"}),(0,ta.jsx)("input",{type:"text",value:d.chefName,onChange:e=>c((0,n.A)((0,n.A)({},d),{},{chefName:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",placeholder:"e.g., Chef Raj"})]}),r.length>0&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Or Select from Staff"}),(0,ta.jsxs)("select",{value:d.chefId||"",onChange:e=>{const t=r.find(t=>t.id===e.target.value);c((0,n.A)((0,n.A)({},d),{},{chefId:e.target.value,chefName:(null===t||void 0===t?void 0:t.name)||d.chefName}))},className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"-- Optional --"}),r.map(e=>{const t="Staff"===e.role&&e.customRoleName?"".concat(e.customRoleName," (Custom)"):e.role;return(0,ta.jsxs)("option",{value:e.id,children:[e.name," ",t?"- ".concat(t):""]},e.id)})]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Showing all active staff members including custom roles"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Status"}),(0,ta.jsxs)("select",{value:d.isActive?"active":"inactive",onChange:e=>c((0,n.A)((0,n.A)({},d),{},{isActive:"active"===e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"active",children:"Active"}),(0,ta.jsx)("option",{value:"inactive",children:"Inactive"})]})]}),(0,ta.jsx)("div",{className:"bg-blue-600/20 border border-blue-500 rounded-lg p-3",children:(0,ta.jsx)("p",{className:"text-blue-300 text-sm",children:"\ud83d\udca1 Orders will be assigned to this station by the FNB manager"})}),(0,ta.jsxs)("div",{className:"flex space-x-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:u,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold disabled:opacity-50",children:u?"Saving...":l?"Update Station":"Create Station"}),(0,ta.jsx)("button",{type:"button",onClick:i,className:"flex-1 bg-slate-700 hover:bg-slate-600 text-white px-6 py-3 rounded-lg font-semibold",children:"Cancel"})]})]})]})})}function zo(e){let{stats:t,onClose:s}=e;return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Station Statistics"}),(0,ta.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,ta.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ta.jsx)("span",{className:"text-4xl",children:"\ud83d\udc68\u200d\ud83c\udf73"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:t.station.name}),(0,ta.jsxs)("p",{className:"text-gray-400",children:["Station #",t.station.number]}),(0,ta.jsxs)("p",{className:"text-gray-400",children:["Chef: ",t.station.chefName||"Unassigned"]})]})]})}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,ta.jsxs)("div",{className:"bg-yellow-600/20 rounded-lg p-6",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-4xl font-bold mb-2",children:t.statistics.todayCompleted}),(0,ta.jsx)("p",{className:"text-yellow-300 text-sm",children:"Completed Today"})]}),(0,ta.jsxs)("div",{className:"bg-blue-600/20 rounded-lg p-6",children:[(0,ta.jsx)("p",{className:"text-blue-400 text-4xl font-bold mb-2",children:t.statistics.todayPending}),(0,ta.jsx)("p",{className:"text-blue-300 text-sm",children:"Pending Today"})]}),(0,ta.jsxs)("div",{className:"bg-green-600/20 rounded-lg p-6",children:[(0,ta.jsx)("p",{className:"text-green-400 text-4xl font-bold mb-2",children:t.statistics.allTimeCompleted}),(0,ta.jsx)("p",{className:"text-green-300 text-sm",children:"All-Time Completed"})]}),(0,ta.jsxs)("div",{className:"bg-purple-600/20 rounded-lg p-6",children:[(0,ta.jsx)("p",{className:"text-purple-400 text-4xl font-bold mb-2",children:t.statistics.storedPending}),(0,ta.jsx)("p",{className:"text-purple-300 text-sm",children:"Currently Pending"})]})]}),(0,ta.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Station Status:"}),(0,ta.jsx)("span",{className:"px-4 py-2 rounded-full font-semibold ".concat(t.station.isActive?"bg-green-500 text-white":"bg-gray-500 text-white"),children:t.station.isActive?"\u2705 Active":"\u2b55 Inactive"})]})}),(0,ta.jsx)("button",{onClick:s,className:"w-full bg-blue-600 hover:bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold",children:"Close"})]})})}function Uo(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ur({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:g}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=f.email||"fnb@pokerroom.com",v=f.displayName||"FNB Manager",j=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e)),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[d&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-orange-500 to-red-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>o(!i),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),d&&i&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>o(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-orange-500/20 via-red-600/30 to-pink-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(d?i?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-orange-400 via-red-300 to-pink-400 drop-shadow-lg mb-6",children:"FNB Portal"}),(0,ta.jsxs)("div",{onClick:()=>m(!0),className:"flex items-center text-white min-w-0 cursor-pointer hover:opacity-90 transition-opacity p-2 -m-2 rounded-lg",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-orange-400 to-red-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:"F"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:v}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:y})]})]}),u&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>m(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?vl.error("Password must be at least 8 characters"):j.mutate({email:y,currentPassword:x.currentPassword,newPassword:x.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:j.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:j.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),g&&g.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:g.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:l.map((e,a)=>(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-orange-400 to-red-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-orange-400/20 hover:to-red-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount})]})},a))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function Wo(){const[e,t]=(0,a.useState)("Menu & Inventory"),s=ue(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[d,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{const e=localStorage.getItem("clubId");e&&c(e)},[]),(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}");(e.mustResetPassword||t.mustResetPassword)&&r(!0)},[]);const u=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("fnb_staffuser",JSON.stringify(t))),r(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),m=l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("fnb_staffuser")||"{}"),a=t.email||s.email||s.userEmail;a?i.currentPassword&&i.newPassword&&i.confirmPassword?i.newPassword===i.confirmPassword?i.newPassword.length<8?vl.error("Password must be at least 8 characters"):u.mutate({email:a,currentPassword:i.currentPassword,newPassword:i.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:i.currentPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:i.newPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:u.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:u.isLoading?"Resetting...":"Reset Password"})]})]})}),x=()=>{localStorage.removeItem("user"),localStorage.removeItem("fnb_staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(Uo,{activeItem:e,setActiveItem:t,menuItems:["Menu & Inventory","Notifications","Order Management","Supplier Management","Kitchen Operations","Leave Management","Chat"],onSignOut:x}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsxs)("header",{className:"bg-gradient-to-r from-orange-600 via-red-500 to-pink-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["FNB Portal - ",e]}),(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage poker club F&B service, menu, and player orders"})]}),(0,ta.jsx)("button",{onClick:x,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view FNB management."})}),"Menu & Inventory"===e&&d&&(0,ta.jsx)(No,{clubId:d}),"Order Management"===e&&d&&(0,ta.jsx)(Do,{clubId:d}),"Supplier Management"===e&&d&&(0,ta.jsx)(Lo,{clubId:d}),"Kitchen Operations"===e&&d&&(0,ta.jsx)(Fo,{clubId:d}),"Chat"===e&&d&&(0,ta.jsx)(En,{clubId:d}),"Notifications"===e&&d&&(0,ta.jsx)(ei,{selectedClubId:d,recipientType:"staff"}),"Leave Management"===e&&d&&(0,ta.jsx)(zi,{clubId:d,userRole:"FNB"})]})})]}),m]})}function Ho(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null,customRoleName:n="Staff"}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),u=localStorage.getItem("clubId"),{data:m}=ur({queryKey:["unreadNotificationCount",u,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(u,"staff"),enabled:!!u,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:x}=ur({queryKey:["club",u],queryFn:()=>jl.Od.getClub(u),enabled:!!u}),h=JSON.parse(localStorage.getItem("user")||"{}"),p=h.email||"",b=h.displayName||"Staff Member";return(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:()=>o(!i),className:"lg:hidden fixed top-4 left-4 z-50 bg-slate-800 p-2 rounded-lg text-white",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:static inset-y-0 left-0 z-40 w-64 bg-gradient-to-b from-slate-900 via-slate-800 to-slate-900 border-r border-slate-700 transform ".concat(i?"translate-x-0":"-translate-x-full"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,ta.jsxs)("div",{className:"flex flex-col h-full",children:[(0,ta.jsxs)("div",{className:"p-6 border-b border-slate-700",children:[(0,ta.jsx)("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:n}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"Staff Portal"})]}),(0,ta.jsxs)("div",{className:"p-4 border-b border-slate-700",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 cursor-pointer hover:bg-slate-700 transition-colors",children:[(0,ta.jsx)("p",{className:"text-white font-semibold truncate",children:b}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm truncate",children:p})]}),x&&(0,ta.jsxs)("div",{className:"mt-4 bg-green-900/30 border border-green-500/50 rounded-lg p-3",children:[(0,ta.jsx)("p",{className:"text-green-400 text-xs font-semibold mb-1",children:"Club Code"}),(0,ta.jsx)("p",{className:"text-green-300 text-lg font-bold",children:x.code||"N/A"}),(0,ta.jsx)("p",{className:"text-green-400/70 text-xs mt-1",children:"Players use this to sign up"})]})]}),(0,ta.jsx)("nav",{className:"flex-1 overflow-y-auto p-4",children:(0,ta.jsx)("ul",{className:"space-y-2",children:l.map(e=>(0,ta.jsx)("li",{children:(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"w-full text-left px-4 py-3 rounded-lg transition-colors ".concat(t===e?"bg-purple-600 text-white":"text-gray-300 hover:bg-slate-700"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,ta.jsx)("span",{children:e}),"Notifications"===e&&(null===m||void 0===m?void 0:m.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:m.unreadCount>9?"9+":m.unreadCount})]})})},e))})}),r&&(0,ta.jsx)("div",{className:"p-4 border-t border-slate-700",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg transition-colors",children:"Sign Out"})})]})}),i&&d&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>o(!1)})]})}function Vo(){const[e,t]=(0,a.useState)("Chat"),s=ue(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),[m,x]=(0,a.useState)(c.customRoleName||u.customRoleName||"Staff"),[h,p]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(d&&c.email)try{const e=await jl.staffAPI.getAllStaffMembers(d),t=((null===e||void 0===e?void 0:e.staff)||e||[]).find(e=>e.email===c.email);if(t&&(p(t.id),t.customRoleName)){x(t.customRoleName);const e=(0,n.A)((0,n.A)({},c),{},{customRoleName:t.customRoleName});localStorage.setItem("user",JSON.stringify(e))}}catch(e){console.error("Error fetching staff data:",e)}})()},[d,c.email]),(0,a.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&r(!0)},[]);const b=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=(0,n.A)((0,n.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,n.A)((0,n.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),r(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),g=l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?i.currentPassword&&i.newPassword&&i.confirmPassword?i.newPassword===i.confirmPassword?i.newPassword.length<8?vl.error("Password must be at least 8 characters"):b.mutate({email:t,currentPassword:i.currentPassword,newPassword:i.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:i.currentPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:i.newPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:b.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:b.isLoading?"Resetting...":"Reset Password"})]})]})}),f=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(Ho,{activeItem:e,setActiveItem:t,menuItems:["Notifications","Chat","Salary History","Bonus History","Leave Management"],onSignOut:f,customRoleName:m}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h1",{className:"text-2xl font-bold text-white",children:[m," Portal - ",e]}),(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:"Staff communication and financial records"})]}),(0,ta.jsx)("button",{onClick:f,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),"Chat"===e&&d&&(0,ta.jsx)(En,{clubId:d,hidePlayerChat:!0}),"Salary History"===e&&d&&h&&(0,ta.jsx)(Jo,{clubId:d,staffId:h}),"Notifications"===e&&d&&(0,ta.jsx)(ei,{selectedClubId:d,recipientType:"staff"}),"Bonus History"===e&&d&&h&&(0,ta.jsx)(Ko,{clubId:d,staffId:h}),"Leave Management"===e&&d&&(0,ta.jsx)(zi,{clubId:d,userRole:"STAFF"})]})})]}),g]})}function Jo(e){let{clubId:t,staffId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ur({queryKey:["salary-payments",t,s,l,i],queryFn:async()=>await jl.oA.getSalaryPayments(t,(0,n.A)({page:l,limit:10,staffId:s},i)),enabled:!!t&&!!s}),u=(null===d||void 0===d?void 0:d.payments)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1,x=(null===d||void 0===d?void 0:d.total)||0,h=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})),p=e=>e?new Date(e).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-";return c?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading salary history..."})]}):(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Your Salary History"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,ta.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Records"}),(0,ta.jsx)("p",{className:"text-white text-2xl font-bold",children:x})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Paid"}),(0,ta.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:h(u.reduce((e,t)=>e+(t.amount||0),0))})]})]})}),(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full text-left",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Payment Date"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Amount"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Period"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Status"})]})}),(0,ta.jsx)("tbody",{children:0===u.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-400",children:"No salary payments found"})}):u.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 text-white",children:p(e.paymentDate)}),(0,ta.jsx)("td",{className:"py-3 text-green-400 font-semibold",children:h(e.amount)}),(0,ta.jsx)("td",{className:"py-3 text-gray-300",children:e.periodStart&&e.periodEnd?"".concat(p(e.periodStart)," - ").concat(p(e.periodEnd)):"-"}),(0,ta.jsx)("td",{className:"py-3",children:(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat("Paid"===e.status?"bg-green-900/30 text-green-400":"bg-yellow-900/30 text-yellow-400"),children:e.status||"Paid"})})]},e.id))})]})}),m>1&&(0,ta.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",m]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(m,e+1)),disabled:l===m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Next"})]})]})})}function Ko(e){let{clubId:t,staffId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ur({queryKey:["staff-bonuses",t,s,l,i],queryFn:async()=>await jl.KG.getStaffBonuses(t,(0,n.A)({page:l,limit:10,staffId:s},i)),enabled:!!t&&!!s}),u=(null===d||void 0===d?void 0:d.bonuses)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1,x=(null===d||void 0===d?void 0:d.total)||0,h=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));return c?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-500 mx-auto"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-4",children:"Loading bonus history..."})]}):(0,ta.jsx)("div",{className:"space-y-6",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-4",children:"Your Bonus History"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white"})]})]}),(0,ta.jsx)("div",{className:"bg-slate-900 rounded-lg p-4 mb-6",children:(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Bonuses"}),(0,ta.jsx)("p",{className:"text-white text-2xl font-bold",children:x})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Total Bonus Amount"}),(0,ta.jsx)("p",{className:"text-green-400 text-2xl font-bold",children:h(u.reduce((e,t)=>e+(t.bonusAmount||0),0))})]})]})}),(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full text-left",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Date"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Bonus Type"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Amount"}),(0,ta.jsx)("th",{className:"pb-3 text-gray-300 font-semibold",children:"Reason"})]})}),(0,ta.jsx)("tbody",{children:0===u.length?(0,ta.jsx)("tr",{children:(0,ta.jsx)("td",{colSpan:"4",className:"py-8 text-center text-gray-400",children:"No bonuses found"})}):u.map(e=>{return(0,ta.jsxs)("tr",{className:"border-b border-slate-700/50 hover:bg-slate-700/30",children:[(0,ta.jsx)("td",{className:"py-3 text-white",children:(t=e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,ta.jsx)("td",{className:"py-3 text-gray-300",children:e.bonusType||e.customBonusType||"-"}),(0,ta.jsx)("td",{className:"py-3 text-green-400 font-semibold",children:h(e.bonusAmount)}),(0,ta.jsx)("td",{className:"py-3 text-gray-400",children:e.reason||"-"})]},e.id);var t})})]})}),m>1&&(0,ta.jsxs)("div",{className:"flex justify-center items-center gap-2 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",m]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(m,e+1)),disabled:l===m,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50",children:"Next"})]})]})})}const Qo={ADMIN:"/admin",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",MANAGER:"/manager",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"};function Go(){var e,t;const[l,r]=(0,a.useState)({email:"",password:""}),[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(!1),u=ue();null===(e=oe().state)||void 0===e||null===(t=e.from)||void 0===t||t.pathname;(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("adminuser")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=JSON.parse(localStorage.getItem("masteradminuser")||"{}");if(e.id||t.userId||s.userId||a.userId){const l=e.role||t.role||s.role||a.role;"SUPER_ADMIN"===l||s.userId?u("/super-admin",{replace:!0}):e.isMasterAdmin||a.userId?u("/master-admin",{replace:!0}):l&&Qo[l]&&u(Qo[l],{replace:!0})}},[u]);const m=e=>{r((0,n.A)((0,n.A)({},l),{},{[e.target.name]:e.target.value}))};return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black flex items-center justify-center p-4",children:(0,ta.jsxs)("div",{className:"max-w-md w-full",children:[(0,ta.jsxs)("div",{className:"text-center mb-8",children:[(0,ta.jsx)("div",{className:"text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600 drop-shadow-lg mb-4",children:"Staff Portal"}),(0,ta.jsx)("p",{className:"text-gray-300",children:"Sign in to access your dashboard"})]}),(0,ta.jsx)("div",{className:"bg-gradient-to-br from-gray-800 via-gray-900 to-black rounded-2xl p-8 shadow-2xl border border-gray-700",children:(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),c(!0);try{var t,a,r,n,d,m,x,h,p,b,g,f;const e=await jl.R2.login(l.email,l.password);if(console.log("Login response:",e),null!==(t=e.user)&&void 0!==t&&t.isMasterAdmin&&(!e.clubRoles||0===e.clubRoles.length))throw new Error("Master Admin should use /master-admin/signin");const o=null===(a=e.tenantRoles)||void 0===a?void 0:a.some(e=>"SUPER_ADMIN"===e.role),c=e.clubRoles&&e.clubRoles.length>0;if(o&&!c)throw new Error("Super Admin should use /super-admin/signin");const y=null===(r=e.clubRoles)||void 0===r||null===(n=r[0])||void 0===n?void 0:n.role,v=null===(d=e.tenantRoles)||void 0===d||null===(m=d[0])||void 0===m?void 0:m.role,j=y||v;if(console.log("Detected role:",j,"clubRoles:",e.clubRoles,"tenantRoles:",e.tenantRoles),!j)throw new Error("No role assigned. Please contact administrator.");let w=null;if("STAFF"===j&&null!==(x=e.clubRoles)&&void 0!==x&&null!==(h=x[0])&&void 0!==h&&null!==(p=h.club)&&void 0!==p&&p.id)try{const{staffAPI:t}=await Promise.resolve().then(s.bind(s,980)),a=e.clubRoles[0].club.id,r=await t.getAllStaffMembers(a),n=((null===r||void 0===r?void 0:r.staff)||r||[]).find(e=>e.email===l.email);null!==n&&void 0!==n&&n.customRoleName&&(w=n.customRoleName)}catch(i){console.error("Error fetching custom role name:",i)}const N={id:e.user.id,email:l.email,displayName:e.user.displayName,role:j,mustResetPassword:e.user.mustResetPassword||!1,customRoleName:w},S="".concat(j.toLowerCase(),"user");localStorage.setItem(S,JSON.stringify({email:l.email,role:j,userId:e.user.id,displayName:e.user.displayName,mustResetPassword:e.user.mustResetPassword||!1,customRoleName:w})),localStorage.setItem("user",JSON.stringify(N)),null!==(b=e.clubRoles)&&void 0!==b&&null!==(g=b[0])&&void 0!==g&&null!==(f=g.club)&&void 0!==f&&f.id&&localStorage.setItem("clubId",e.clubRoles[0].club.id);u(Qo[j]||"/",{replace:!0})}catch(y){console.error("Login error:",y),o(y.message||"Invalid email or password. Please try again.")}finally{c(!1)}},className:"space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-300 mb-2",children:"Email Address"}),(0,ta.jsx)("input",{id:"email",name:"email",type:"email",required:!0,value:l.email,onChange:m,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Enter your email",autoComplete:"email"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-300 mb-2",children:"Password"}),(0,ta.jsx)("input",{id:"password",name:"password",type:"password",required:!0,value:l.password,onChange:m,className:"w-full px-4 py-3 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all",placeholder:"Enter your password",autoComplete:"current-password"})]}),i&&(0,ta.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-300 text-sm",children:i}),(0,ta.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-semibold py-3 rounded-lg transition-all duration-300 shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:d?(0,ta.jsxs)("span",{className:"flex items-center justify-center",children:[(0,ta.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,ta.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,ta.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):"Sign In"})]})})]})})}const Yo=["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Reports & Analytics","System Control","Leave Management"];function $o(e){let{activeItem:t,setActiveItem:s,menuItems:l=Yo,onSignOut:r=null,clubInfo:i=null}=e;const[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(window.innerWidth<1024),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),b=(null===i||void 0===i?void 0:i.rummyEnabled)||!1?[...l,"Rummy"]:l,g=localStorage.getItem("clubId"),{data:f}=ur({queryKey:["unreadNotificationCount",g,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(g,"staff"),enabled:!!g,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const y=JSON.parse(localStorage.getItem("user")||"{}"),v=JSON.parse(localStorage.getItem("adminuser")||"{}"),j=y.email||v.email||"admin@pokerroom.com",w=y.displayName||v.displayName||"Admin",{data:N}=(y.role||v.role,ur({queryKey:["club",g],queryFn:()=>jl.Od.getClub(g),enabled:!!g})),S=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("adminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("adminuser",JSON.stringify(t)),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[c&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-red-500 to-purple-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>d(!o),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),c&&o&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>d(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-red-500/20 via-purple-600/30 to-indigo-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(c?o?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-purple-300 to-indigo-400 drop-shadow-lg mb-6",children:"Admin"}),(0,ta.jsxs)("div",{onClick:()=>x(!0),className:"bg-white/10 rounded-xl p-4 mb-6 text-white shadow-inner cursor-pointer hover:bg-white/15 transition-colors",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold",children:w}),(0,ta.jsx)("div",{className:"text-sm opacity-80",children:j})]}),m&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>x(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("adminuser")||"{}"),a=t.email||s.email;a?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?vl.error("Password must be at least 8 characters"):S.mutate({email:a,currentPassword:h.currentPassword,newPassword:h.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:S.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:S.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),N&&N.code&&(0,ta.jsx)("div",{className:"mb-6",children:(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:N.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:b.map(e=>(0,ta.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-red-400 to-purple-600 text-white font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-red-400/20 hover:to-purple-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===f||void 0===f?void 0:f.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:f.unreadCount>9?"9+":f.unreadCount})]})},e))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function Zo(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)(!1),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(null),[c,u]=(0,a.useState)({title:"",points:"",description:"",stock:"",images:["","",""],imageFiles:[null,null,null],isActive:!0}),{data:m=[],isLoading:x}=ur({queryKey:["vipProducts",t],queryFn:()=>jl.Dv.getVipProducts(t),enabled:!!t}),h=pr({mutationFn:async e=>{const s=[];for(let l=0;l<3;l++)if(e.imageFiles[l])try{const a=await Ki(e.imageFiles[l],t,"vip-store");s.push({url:a})}catch(a){console.error("Failed to upload image ".concat(l+1,":"),a),vl.error("Failed to upload image ".concat(l+1))}else e.images[l]&&""!==e.images[l].trim()&&s.push({url:e.images[l]});return await jl.Dv.createVipProduct(t,{title:e.title,points:parseInt(e.points),description:e.description,stock:parseInt(e.stock)||0,images:s,isActive:e.isActive})},onSuccess:()=>{vl.success("Product created successfully!"),s.invalidateQueries(["vipProducts",t]),r(!1),g()},onError:e=>{vl.error(e.message||"Failed to create product")}}),p=pr({mutationFn:async e=>{let{productId:s,data:a}=e;const l=[];for(let n=0;n<3;n++)if(a.imageFiles[n])try{const e=await Ki(a.imageFiles[n],t,"vip-store");l.push({url:e})}catch(r){console.error("Failed to upload image ".concat(n+1,":"),r),vl.error("Failed to upload image ".concat(n+1))}else a.images[n]&&""!==a.images[n].trim()&&l.push({url:a.images[n]});return await jl.Dv.updateVipProduct(t,s,{title:a.title,points:parseInt(a.points),description:a.description,stock:parseInt(a.stock)||0,images:l,isActive:a.isActive})},onSuccess:()=>{vl.success("Product updated successfully!"),s.invalidateQueries(["vipProducts",t]),i(!1),d(null),g()},onError:e=>{vl.error(e.message||"Failed to update product")}}),b=pr({mutationFn:async e=>await jl.Dv.deleteVipProduct(t,e),onSuccess:()=>{vl.success("Product deleted successfully!"),s.invalidateQueries(["vipProducts",t])},onError:e=>{vl.error(e.message||"Failed to delete product")}}),g=()=>{u({title:"",points:"",description:"",stock:"",images:["","",""],imageFiles:[null,null,null],isActive:!0})};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"VIP Store Management"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Manage products that players can redeem with VIP points"})]}),(0,ta.jsx)("button",{onClick:()=>{g(),r(!0)},className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold rounded-lg transition-all shadow-lg",children:"+ Add New Product"})]}),x?(0,ta.jsx)("div",{className:"text-center text-gray-400 py-12",children:"Loading products..."}):0===m.length?(0,ta.jsxs)("div",{className:"text-center py-12",children:[(0,ta.jsx)("p",{className:"text-gray-400 text-lg mb-4",children:"No products in the VIP Store yet"}),(0,ta.jsx)("button",{onClick:()=>{g(),r(!0)},className:"px-6 py-3 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-colors",children:"Create Your First Product"})]}):(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:m.map(e=>{var t,s;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700 hover:border-purple-500 transition-all shadow-lg",children:[(0,ta.jsxs)("div",{className:"relative h-48 bg-slate-700",children:[e.images&&e.images.length>0&&null!==(t=e.images[0])&&void 0!==t&&t.url?(0,ta.jsx)("img",{src:e.images[0].url,alt:e.title,className:"w-full h-full object-cover",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,ta.jsx)("div",{className:"absolute inset-0 flex items-center justify-center ".concat(e.images&&e.images.length>0&&null!==(s=e.images[0])&&void 0!==s&&s.url?"hidden":"flex"),children:(0,ta.jsx)("div",{className:"text-6xl text-gray-600",children:"\ud83c\udf81"})}),(0,ta.jsx)("div",{className:"absolute top-2 right-2",children:(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(e.isActive?"bg-green-600 text-white":"bg-gray-600 text-gray-300"),children:e.isActive?"Active":"Inactive"})})]}),(0,ta.jsxs)("div",{className:"p-4",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:e.title}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm mb-3 line-clamp-2",children:e.description||"No description"}),(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("div",{className:"text-yellow-400 font-bold text-lg",children:[e.points.toLocaleString()," Points"]}),(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Stock: ",e.stock||0]})]}),e.images&&e.images.length>1&&(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["+",e.images.length-1," more ",2===e.images.length?"image":"images"]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{var t,s,a,l,r,n,o;d(e),u({title:e.title,points:e.points.toString(),description:e.description||"",stock:(null===(t=e.stock)||void 0===t?void 0:t.toString())||"0",images:[(null===(s=e.images)||void 0===s||null===(a=s[0])||void 0===a?void 0:a.url)||"",(null===(l=e.images)||void 0===l||null===(r=l[1])||void 0===r?void 0:r.url)||"",(null===(n=e.images)||void 0===n||null===(o=n[2])||void 0===o?void 0:o.url)||""],imageFiles:[null,null,null],isActive:void 0===e.isActive||e.isActive}),i(!0)})(e),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Edit"}),(0,ta.jsx)("button",{onClick:()=>{return t=e.id,s=e.title,void(window.confirm('Are you sure you want to delete "'.concat(s,'"?'))&&b.mutate(t));var t,s},disabled:b.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Delete"})]})]})]},e.id)})}),l&&(0,ta.jsx)(Xo,{title:"Create New Product",form:c,setForm:u,onSubmit:e=>{e.preventDefault(),c.title.trim()?!c.points||parseInt(c.points)<=0?vl.error("Valid points value is required"):h.mutate(c):vl.error("Product title is required")},onClose:()=>{r(!1),g()},isLoading:h.isPending}),n&&o&&(0,ta.jsx)(Xo,{title:"Edit Product",form:c,setForm:u,onSubmit:e=>{e.preventDefault(),c.title.trim()?!c.points||parseInt(c.points)<=0?vl.error("Valid points value is required"):p.mutate({productId:o.id,data:c}):vl.error("Product title is required")},onClose:()=>{i(!1),d(null),g()},isLoading:p.isPending})]})}function Xo(e){let{title:t,form:s,setForm:a,onSubmit:l,onClose:r,isLoading:i}=e;return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-2xl w-full my-8 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:t}),(0,ta.jsxs)("form",{onSubmit:l,className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Product Title ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"text",value:s.title,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{title:e.target.value})),placeholder:"e.g., Premium Poker Chips Set",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["VIP Points ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",value:s.points,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{points:e.target.value})),placeholder:"e.g., 5000",min:"1",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Stock Quantity"}),(0,ta.jsx)("input",{type:"number",value:s.stock,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{stock:e.target.value})),placeholder:"e.g., 50",min:"0",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Description"}),(0,ta.jsx)("textarea",{value:s.description,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{description:e.target.value})),placeholder:"Describe your product...",rows:3,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-gray-300 mb-2 font-semibold",children:"Product Images (Up to 3)"}),[0,1,2].map(e=>(0,ta.jsxs)("div",{className:"mb-3",children:[(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsxs)("label",{className:"flex-shrink-0 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-semibold cursor-pointer transition-colors",children:[(0,ta.jsx)("input",{type:"file",accept:"image/*",className:"hidden",onChange:t=>{var l;const r=null===(l=t.target.files)||void 0===l?void 0:l[0];if(r){if(r.size>5242880)return void vl.error("Image must be less than 5MB");const t=[...s.imageFiles];t[e]=r,a((0,n.A)((0,n.A)({},s),{},{imageFiles:t}))}}}),s.imageFiles[e]?"\u2713 File Selected":"Choose File"]}),(0,ta.jsx)("input",{type:"url",value:s.images[e],onChange:t=>{const l=[...s.images];l[e]=t.target.value,a((0,n.A)((0,n.A)({},s),{},{images:l}))},placeholder:"Or paste URL ".concat(e+1).concat(0===e?" (Primary)":" (Optional)"),disabled:!!s.imageFiles[e],className:"flex-1 px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 disabled:opacity-50"}),(s.imageFiles[e]||s.images[e])&&(0,ta.jsx)("button",{type:"button",onClick:()=>{const t=[...s.imageFiles],l=[...s.images];t[e]=null,l[e]="",a((0,n.A)((0,n.A)({},s),{},{imageFiles:t,images:l}))},className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors",children:"\xd7"})]}),s.imageFiles[e]&&(0,ta.jsxs)("p",{className:"text-green-400 text-xs mt-1",children:["\ud83d\udcc1 ",s.imageFiles[e].name," (",(s.imageFiles[e].size/1024).toFixed(1)," KB)"]})]},e)),(0,ta.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:"Upload image files (max 5MB each) or paste direct URLs"})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("input",{type:"checkbox",id:"isActive",checked:s.isActive,onChange:e=>a((0,n.A)((0,n.A)({},s),{},{isActive:e.target.checked})),className:"w-5 h-5 text-purple-600 bg-slate-700 border-gray-600 rounded focus:ring-purple-500"}),(0,ta.jsx)("label",{htmlFor:"isActive",className:"text-gray-300 font-semibold",children:"Product is Active (Available for redemption)"})]}),(0,ta.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ta.jsx)("button",{type:"submit",disabled:i,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white font-bold py-3 rounded-lg transition-all disabled:opacity-50",children:i?"Saving...":"Create New Product"===t?"Create Product":"Update Product"}),(0,ta.jsx)("button",{type:"button",onClick:r,className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white font-bold py-3 rounded-lg transition-colors",children:"Cancel"})]})]})]})})}function ed(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("salary");return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Payroll Management"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("salary"),className:"px-6 py-3 font-semibold transition-colors ".concat("salary"===s?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Employee Salary"}),(0,ta.jsx)("button",{onClick:()=>l("tips"),className:"px-6 py-3 font-semibold transition-colors ".concat("tips"===s?"text-white border-b-2 border-purple-500":"text-gray-400 hover:text-white"),children:"Dealer Tips"})]}),"salary"===s&&(0,ta.jsx)(no,{selectedClubId:t}),"tips"===s&&(0,ta.jsx)(io,{selectedClubId:t})]})}function td(e){let{selectedClubId:t}=e;const[s,l]=(0,a.useState)("list"),[r,i]=(0,a.useState)(1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(null),[h,p]=(0,a.useState)(""),[b,g]=(0,a.useState)(""),[f,y]=(0,a.useState)({search:"",status:""}),[v,j]=(0,a.useState)({search:"",startDate:"",endDate:"",affiliateId:""}),[w,N]=(0,a.useState)(1),[S,C]=(0,a.useState)({affiliateId:"",amount:"",transactionType:"payment",description:"",notes:""}),k=aa(),{data:P,isLoading:A}=ur({queryKey:["affiliates",t,r,f],queryFn:()=>jl.Yt.getAffiliates(t,(0,n.A)({page:r,limit:10},f)),enabled:!!t&&"list"===s}),{data:I,isLoading:D}=ur({queryKey:["affiliate-referrals",null===m||void 0===m?void 0:m.id,h,b],queryFn:()=>jl.Yt.getAffiliateReferrals(t,null===m||void 0===m?void 0:m.id,{search:h,kycStatus:b}),enabled:!(null===m||void 0===m||!m.id)&&o}),{data:T,isLoading:_}=ur({queryKey:["affiliate-transactions",t,w,v],queryFn:()=>jl.Yt.getAffiliateTransactions(t,(0,n.A)({page:w,limit:10},v)),enabled:!!t&&"payments"===s}),E=pr({mutationFn:e=>jl.Yt.processAffiliatePayment(t,e),onSuccess:()=>{vl.success("Payment processed successfully!"),k.invalidateQueries(["affiliate-transactions",t]),k.invalidateQueries(["affiliates",t]),u(!1),x(null),C({affiliateId:"",amount:"",transactionType:"payment",description:"",notes:""})},onError:e=>{vl.error(e.message||"Failed to process payment")}}),R=(null===P||void 0===P?void 0:P.affiliates)||[],L=(null===P||void 0===P?void 0:P.totalPages)||1,O=(null===P||void 0===P?void 0:P.total)||0,M=(null===I||void 0===I?void 0:I.players)||[],F=(null===T||void 0===T?void 0:T.transactions)||[],B=(null===T||void 0===T?void 0:T.totalPages)||1,q=(null===T||void 0===T?void 0:T.total)||0,z=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"active":return"text-green-400";case"inactive":default:return"text-gray-400";case"suspended":return"text-red-400"}},U=e=>{switch(null===e||void 0===e?void 0:e.toLowerCase()){case"approved":case"verified":return"bg-green-900/30 text-green-400 border-green-700";case"pending":return"bg-yellow-900/30 text-yellow-400 border-yellow-700";case"rejected":return"bg-red-900/30 text-red-400 border-red-700";default:return"bg-gray-900/30 text-gray-400 border-gray-700"}};return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Affiliate Management"})}),(0,ta.jsxs)("div",{className:"flex gap-2 border-b border-slate-700",children:[(0,ta.jsx)("button",{onClick:()=>l("list"),className:"px-6 py-3 font-semibold transition-colors ".concat("list"===s?"text-white border-b-2 border-yellow-500 bg-yellow-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udccb Affiliates List"}),(0,ta.jsx)("button",{onClick:()=>l("payments"),className:"px-6 py-3 font-semibold transition-colors ".concat("payments"===s?"text-white border-b-2 border-green-500 bg-green-900/20":"text-gray-400 hover:text-white"),children:"\ud83d\udcb0 Payments & Transactions"})]}),"list"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-yellow-500",placeholder:"Search by name, code, or email...",value:f.search,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Status"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-yellow-500",value:f.status,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{status:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"Active",children:"Active"}),(0,ta.jsx)("option",{value:"Inactive",children:"Inactive"}),(0,ta.jsx)("option",{value:"Suspended",children:"Suspended"})]})]})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,ta.jsxs)("h3",{className:"text-xl font-semibold text-white",children:["Affiliates (",O,")"]})}),A?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===R.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No affiliates found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Name"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Email"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Code"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Referrals"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Earnings"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Actions"})]})}),(0,ta.jsx)("tbody",{children:R.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:e.name||"N/A"}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.email}),(0,ta.jsx)("td",{className:"p-3",children:(0,ta.jsx)("span",{className:"px-3 py-1 bg-yellow-900/30 text-yellow-400 rounded-lg font-mono text-sm border border-yellow-700",children:e.code})}),(0,ta.jsxs)("td",{className:"text-center p-3",children:[(0,ta.jsx)("div",{className:"text-cyan-400 font-semibold",children:e.totalReferrals}),(0,ta.jsxs)("div",{className:"text-xs text-gray-400",children:["(",e.verifiedReferrals," verified)"]})]}),(0,ta.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.totalCommission||0).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsx)("span",{className:"font-semibold ".concat(z(e.status)),children:e.status})}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,ta.jsx)("button",{onClick:()=>(e=>{x(e),d(!0),p(""),g("")})(e),className:"px-3 py-1 bg-cyan-900/30 hover:bg-cyan-800/50 text-cyan-400 rounded-lg text-sm border border-cyan-700 transition-colors",children:"View Players"}),(0,ta.jsx)("button",{onClick:()=>(e=>{x(e),C((0,n.A)((0,n.A)({},S),{},{affiliateId:e.id})),u(!0)})(e),className:"px-3 py-1 bg-green-900/30 hover:bg-green-800/50 text-green-400 rounded-lg text-sm border border-green-700 transition-colors",children:"Send Money"})]})})]},e.id))})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(r-1)+1," to ",Math.min(10*r,O)," of ",O," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>i(e=>Math.max(1,e-1)),disabled:1===r,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(L)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>i(t+1),className:"px-4 py-2 rounded-lg ".concat(r===t+1?"bg-yellow-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>i(e=>Math.min(L,e+1)),disabled:r===L,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),"payments"===s&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-4",children:(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Search by name, code, email...",value:v.search,onChange:e=>j((0,n.A)((0,n.A)({},v),{},{search:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.startDate,onChange:e=>j((0,n.A)((0,n.A)({},v),{},{startDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"End Date"}),(0,ta.jsx)("input",{type:"date",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.endDate,onChange:e=>j((0,n.A)((0,n.A)({},v),{},{endDate:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Affiliate"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:v.affiliateId,onChange:e=>j((0,n.A)((0,n.A)({},v),{},{affiliateId:e.target.value})),children:[(0,ta.jsx)("option",{value:"",children:"All Affiliates"}),R.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name||e.email," (",e.code,")"]},e.id))]})]})]})}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-6",children:[(0,ta.jsxs)("h3",{className:"text-xl font-semibold text-white mb-4",children:["Transaction History (",q,")"]}),_?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===F.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No transactions found"}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Date"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Affiliate"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Code"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Type"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Amount"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Description"})]})}),(0,ta.jsx)("tbody",{children:F.map(e=>{var t,s,a,l;return(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:new Date(e.processedAt).toLocaleDateString()}),(0,ta.jsx)("td",{className:"text-white p-3",children:(null===(t=e.affiliate)||void 0===t?void 0:t.name)||(null===(s=e.affiliate)||void 0===s||null===(a=s.user)||void 0===a?void 0:a.email)||"N/A"}),(0,ta.jsx)("td",{className:"p-3",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-yellow-900/30 text-yellow-400 rounded text-xs font-mono border border-yellow-700",children:null===(l=e.affiliate)||void 0===l?void 0:l.code})}),(0,ta.jsx)("td",{className:"p-3",children:(0,ta.jsx)("span",{className:"px-2 py-1 bg-blue-900/30 text-blue-400 rounded text-xs capitalize border border-blue-700",children:e.transactionType})}),(0,ta.jsxs)("td",{className:"text-right text-green-400 font-semibold p-3",children:["\u20b9",Number(e.amount).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.description||e.notes||"-"})]},e.id)})})]})}),(0,ta.jsxs)("div",{className:"flex items-center justify-between mt-4",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing ",10*(w-1)+1," to"," ",Math.min(10*w,q)," of ",q," entries"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>N(e=>Math.max(1,e-1)),disabled:1===w,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),(0,ta.jsx)("div",{className:"flex gap-2",children:[...Array(B)].map((e,t)=>(0,ta.jsx)("button",{onClick:()=>N(t+1),className:"px-4 py-2 rounded-lg ".concat(w===t+1?"bg-green-600 text-white":"bg-slate-700 hover:bg-slate-600 text-white"),children:t+1},t+1))}),(0,ta.jsx)("button",{onClick:()=>N(e=>Math.min(B,e+1)),disabled:w===B,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]}),o&&m&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-5xl w-full border border-cyan-600 max-h-[90vh] overflow-y-auto",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Referral Players"}),(0,ta.jsxs)("p",{className:"text-cyan-400 mt-1",children:["Affiliate: ",m.name||m.email," (",m.code,")"]})]}),(0,ta.jsx)("button",{onClick:()=>{d(!1),x(null)},className:"text-gray-400 hover:text-white text-2xl",children:"\xd7"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Search Player"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",placeholder:"Search by name, email, or phone...",value:h,onChange:e=>p(e.target.value)})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"KYC Status"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-cyan-500",value:b,onChange:e=>g(e.target.value),children:[(0,ta.jsx)("option",{value:"",children:"All Status"}),(0,ta.jsx)("option",{value:"approved",children:"Approved"}),(0,ta.jsx)("option",{value:"verified",children:"Verified"}),(0,ta.jsx)("option",{value:"pending",children:"Pending"}),(0,ta.jsx)("option",{value:"rejected",children:"Rejected"})]})]})]}),D?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading..."}):0===M.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No referral players found"}):(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"w-full",children:[(0,ta.jsx)("thead",{children:(0,ta.jsxs)("tr",{className:"border-b border-slate-700",children:[(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Name"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Email"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Phone"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"KYC Status"}),(0,ta.jsx)("th",{className:"text-center text-white font-semibold p-3",children:"Status"}),(0,ta.jsx)("th",{className:"text-right text-white font-semibold p-3",children:"Total Spent"}),(0,ta.jsx)("th",{className:"text-left text-white font-semibold p-3",children:"Joined"})]})}),(0,ta.jsx)("tbody",{children:M.map(e=>(0,ta.jsxs)("tr",{className:"border-b border-slate-700 hover:bg-slate-700",children:[(0,ta.jsx)("td",{className:"text-white p-3",children:e.name}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.email}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:e.phoneNumber||"N/A"}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsx)("span",{className:"px-2 py-1 rounded text-xs capitalize border ".concat(U(e.kycStatus)),children:e.kycStatus})}),(0,ta.jsx)("td",{className:"text-center p-3",children:(0,ta.jsx)("span",{className:"font-semibold ".concat(z(e.status)),children:e.status})}),(0,ta.jsxs)("td",{className:"text-right text-cyan-400 font-semibold p-3",children:["\u20b9",Number(e.totalSpent||0).toFixed(2)]}),(0,ta.jsx)("td",{className:"text-gray-400 p-3 text-sm",children:new Date(e.createdAt).toLocaleDateString()})]},e.id))})]})})]})}),c&&m&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-green-600",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"\ud83d\udcb0 Send Money to Affiliate"}),(0,ta.jsxs)("div",{className:"bg-green-900/30 border border-green-600 rounded-lg p-4 mb-6",children:[(0,ta.jsx)("div",{className:"text-xs text-green-400 mb-1",children:"Sending to:"}),(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:m.name||m.email}),(0,ta.jsxs)("p",{className:"text-sm text-green-300 mt-1",children:["Code: ",m.code]}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400 mt-1",children:["Current Earnings: \u20b9",Number(m.totalCommission||0).toFixed(2)]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Amount (\u20b9) *"}),(0,ta.jsx)("input",{type:"number",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"\u20b90.00",value:S.amount,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{amount:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Transaction Type"}),(0,ta.jsxs)("select",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",value:S.transactionType,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{transactionType:e.target.value})),children:[(0,ta.jsx)("option",{value:"payment",children:"Payment"}),(0,ta.jsx)("option",{value:"bonus",children:"Bonus"}),(0,ta.jsx)("option",{value:"adjustment",children:"Adjustment"}),(0,ta.jsx)("option",{value:"commission",children:"Commission"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Description"}),(0,ta.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500",placeholder:"Brief description...",value:S.description,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{description:e.target.value}))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block",children:"Notes (Optional)"}),(0,ta.jsx)("textarea",{className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-green-500 h-24",placeholder:"Additional notes...",value:S.notes,onChange:e=>C((0,n.A)((0,n.A)({},S),{},{notes:e.target.value}))})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,ta.jsx)("button",{onClick:()=>{!S.amount||parseFloat(S.amount)<=0?vl.error("Please enter a valid amount"):E.mutate((0,n.A)((0,n.A)({},S),{},{amount:parseFloat(S.amount)}))},disabled:E.isLoading,className:"flex-1 bg-green-600 hover:bg-green-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:E.isLoading?"Processing...":"Process Payment"}),(0,ta.jsx)("button",{onClick:()=>{u(!1),x(null)},className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function sd(e){let{clubId:t}=e;const[s,l]=(0,a.useState)("menu-inventory");return(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-orange-600 via-red-500 to-pink-500 p-6 rounded-xl shadow-lg",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Food & Beverage Management"}),(0,ta.jsx)("p",{className:"text-white/90",children:"Complete F&B management system for your poker club"})]}),(0,ta.jsx)("div",{className:"bg-slate-800 rounded-xl p-2 shadow-lg",children:(0,ta.jsx)("div",{className:"flex space-x-2 overflow-x-auto",children:[{id:"menu-inventory",label:"Menu & Inventory",icon:"\ud83d\udccb"},{id:"order-management",label:"Order Management",icon:"\ud83c\udf7d\ufe0f"},{id:"supplier-management",label:"Supplier Management",icon:"\ud83d\ude9a"},{id:"kitchen-operations",label:"Kitchen Operations",icon:"\ud83d\udc68\u200d\ud83c\udf73"}].map(e=>(0,ta.jsxs)("button",{onClick:()=>l(e.id),className:"flex items-center space-x-2 px-6 py-3 rounded-lg font-semibold transition-all whitespace-nowrap ".concat(s===e.id?"bg-gradient-to-r from-orange-500 to-red-500 text-white shadow-lg":"text-gray-400 hover:text-white hover:bg-slate-700"),children:[(0,ta.jsx)("span",{className:"text-xl",children:e.icon}),(0,ta.jsx)("span",{children:e.label})]},e.id))})}),(0,ta.jsxs)("div",{className:"min-h-[600px]",children:["menu-inventory"===s&&(0,ta.jsx)(No,{clubId:t}),"order-management"===s&&(0,ta.jsx)(Do,{clubId:t}),"supplier-management"===s&&(0,ta.jsx)(Lo,{clubId:t}),"kitchen-operations"===s&&(0,ta.jsx)(Fo,{clubId:t})]})]})}function ad(e){let{clubId:t}=e;const[s,l]=(0,a.useState)(null),r=[{id:"individual_player",name:"Individual Player Report",icon:(0,ta.jsx)(Tn,{className:"text-5xl"}),color:"from-blue-500 to-cyan-500",description:"Detailed report for a specific player"},{id:"cumulative_player",name:"Cumulative Player Report",icon:(0,ta.jsx)(on,{className:"text-5xl"}),color:"from-purple-500 to-pink-500",description:"Overall statistics for all players"},{id:"daily_transactions",name:"Daily Transactions Report",icon:(0,ta.jsx)(xn,{className:"text-5xl"}),color:"from-yellow-500 to-orange-500",description:"All transactions for a date range"},{id:"daily_rake",name:"Daily Rake Report",icon:(0,ta.jsx)(cn,{className:"text-5xl"}),color:"from-red-500 to-pink-500",description:"Rake collected per day"},{id:"per_table_transactions",name:"Per Table Transactions Report",icon:(0,ta.jsx)(kn,{className:"text-5xl"}),color:"from-green-500 to-teal-500",description:"Transactions by table"},{id:"credit_transactions",name:"Credit Transactions Report",icon:(0,ta.jsx)(mn,{className:"text-5xl"}),color:"from-indigo-500 to-purple-500",description:"Credit requests and approvals"},{id:"expenses",name:"Expenses Report",icon:(0,ta.jsx)(Sn,{className:"text-5xl"}),color:"from-orange-500 to-red-500",description:"Salaries, tips, and other expenses"},{id:"bonus",name:"Bonus Report",icon:(0,ta.jsx)(vn,{className:"text-5xl"}),color:"from-pink-500 to-rose-500",description:"Player and staff bonuses"},{id:"custom",name:"Custom Report",icon:(0,ta.jsx)(_n,{className:"text-5xl"}),color:"from-gray-500 to-slate-500",description:"Compile multiple reports"}];return(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-6",children:(0,ta.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-r from-indigo-600 to-purple-600 p-6 rounded-lg mb-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white",children:"Reports & Analytics"}),(0,ta.jsx)("p",{className:"text-white/80 mt-2",children:"Generate comprehensive reports with real-time data"})]}),(0,ta.jsxs)("div",{className:"mb-8",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Available Report Types"}),(0,ta.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(e=>(0,ta.jsx)("button",{onClick:()=>l(e),className:"bg-gradient-to-br ".concat(e.color," p-6 rounded-xl shadow-lg hover:shadow-2xl transform hover:scale-105 transition-all duration-300 text-white"),children:(0,ta.jsxs)("div",{className:"flex flex-col items-center text-center space-y-4",children:[(0,ta.jsx)("div",{className:"p-4 bg-white/20 rounded-full",children:e.icon}),(0,ta.jsx)("h3",{className:"text-xl font-bold",children:e.name}),(0,ta.jsx)("p",{className:"text-sm text-white/80",children:e.description})]})},e.id))})]}),s&&(0,ta.jsx)(ld,{report:s,clubId:t,onClose:()=>l(null)})]})})}function ld(e){let{report:t,clubId:s,onClose:l}=e;const[r,i]=(0,a.useState)({startDate:(new Date).toISOString().split("T")[0],endDate:(new Date).toISOString().split("T")[0],format:"excel",playerId:"",playerSearch:"",tableNumber:"",customReportTypes:[]}),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)([]),[m,x]=(0,a.useState)([]);return(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-8 max-w-2xl w-full my-8",children:[(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white mb-6",children:"Report Configuration"}),(0,ta.jsxs)("div",{className:"bg-gradient-to-r ".concat(t.color," p-4 rounded-lg mb-6 flex items-center gap-4"),children:[(0,ta.jsx)("div",{className:"text-white text-3xl",children:t.icon}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:t.name}),(0,ta.jsx)("p",{className:"text-white/80 text-sm",children:t.description})]})]}),"individual_player"===t.id&&(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsxs)("label",{className:"block text-white mb-2 font-semibold",children:["Search Player ",(0,ta.jsx)("span",{className:"text-red-400",children:"(Type at least 3 characters)"})]}),(0,ta.jsx)("input",{type:"text",value:r.playerSearch,onChange:e=>{i((0,n.A)((0,n.A)({},r),{},{playerSearch:e.target.value})),(async e=>{if(e.length<3)x([]);else try{x([{id:"1",name:"John Doe",email:"john@example.com"},{id:"2",name:"Jane Smith",email:"jane@example.com"}])}catch(t){console.error("Error searching players:",t)}})(e.target.value)},placeholder:"Search by name, ID, or email...",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"}),m.length>0&&(0,ta.jsx)("div",{className:"mt-2 bg-slate-700 rounded-lg max-h-48 overflow-y-auto",children:m.map(e=>(0,ta.jsxs)("button",{onClick:()=>{i((0,n.A)((0,n.A)({},r),{},{playerId:e.id,playerSearch:e.name})),x([])},className:"w-full text-left px-4 py-3 text-white hover:bg-slate-600 transition-colors",children:[(0,ta.jsx)("div",{className:"font-semibold",children:e.name}),(0,ta.jsx)("div",{className:"text-sm text-white/60",children:e.email})]},e.id))})]}),"per_table_transactions"===t.id&&(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsxs)("label",{className:"block text-white mb-2 font-semibold",children:["Table Number ",(0,ta.jsx)("span",{className:"text-white/60 text-sm",children:"(Optional - leave blank for all tables)"})]}),(0,ta.jsx)("input",{type:"text",value:r.tableNumber,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{tableNumber:e.target.value})),placeholder:"e.g., Table 1, T-5",className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]}),"custom"===t.id&&(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-white mb-3 font-semibold",children:"Select Multiple Report Types to Compile"}),(0,ta.jsx)("div",{className:"grid grid-cols-2 gap-3",children:["cumulative_player","daily_transactions","daily_rake","credit_transactions","expenses","bonus"].map(e=>(0,ta.jsxs)("label",{className:"flex items-center gap-2 bg-slate-700 p-3 rounded-lg cursor-pointer hover:bg-slate-600",children:[(0,ta.jsx)("input",{type:"checkbox",checked:r.customReportTypes.includes(e),onChange:t=>{t.target.checked?i((0,n.A)((0,n.A)({},r),{},{customReportTypes:[...r.customReportTypes,e]})):i((0,n.A)((0,n.A)({},r),{},{customReportTypes:r.customReportTypes.filter(t=>t!==e)}))},className:"w-4 h-4"}),(0,ta.jsx)("span",{className:"text-white text-sm capitalize",children:e.replace(/_/g," ")})]},e))})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Date Range"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:r.startDate,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{startDate:e.target.value})),className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:r.endDate,onChange:e=>i((0,n.A)((0,n.A)({},r),{},{endDate:e.target.value})),className:"w-full px-4 py-3 bg-slate-700 text-white rounded-lg"})]})]})]}),(0,ta.jsxs)("div",{className:"mb-8",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Download Format"}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,ta.jsxs)("button",{onClick:()=>i((0,n.A)((0,n.A)({},r),{},{format:"excel"})),className:"p-4 rounded-lg border-2 transition-all ".concat("excel"===r.format?"bg-green-600 border-green-400 text-white":"bg-slate-700 border-slate-600 text-white/70 hover:border-slate-500"),children:[(0,ta.jsx)(gn,{className:"text-4xl mx-auto mb-2"}),(0,ta.jsx)("div",{className:"font-semibold",children:"Excel (.xlsx)"})]}),(0,ta.jsxs)("button",{onClick:()=>i((0,n.A)((0,n.A)({},r),{},{format:"pdf"})),className:"p-4 rounded-lg border-2 transition-all ".concat("pdf"===r.format?"bg-red-600 border-red-400 text-white":"bg-slate-700 border-slate-600 text-white/70 hover:border-slate-500"),children:[(0,ta.jsx)(fn,{className:"text-4xl mx-auto mb-2"}),(0,ta.jsx)("div",{className:"font-semibold",children:"PDF (.pdf)"})]})]})]}),(0,ta.jsxs)("div",{className:"flex gap-4",children:[(0,ta.jsxs)("button",{onClick:async()=>{try{d(!0);const e=(0,n.A)((0,n.A)((0,n.A)({reportType:t.id,startDate:r.startDate,endDate:r.endDate,format:r.format},"individual_player"===t.id&&{playerId:r.playerId}),"per_table_transactions"===t.id&&{tableNumber:r.tableNumber}),"custom"===t.id&&{customReportTypes:r.customReportTypes}),a="http://localhost:3333/api",i=await fetch("".concat(a,"/clubs/").concat(s,"/reports/generate"),{method:"POST",headers:(0,jl.z5)(),body:JSON.stringify(e)});if(!i.ok)throw new Error("Failed to generate report");const o=await i.blob(),c=window.URL.createObjectURL(o),u=document.createElement("a");u.href=c,u.download="".concat(t.id,"_report_").concat(r.startDate,".").concat("excel"===r.format?"xlsx":"pdf"),document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(c),alert("Report generated successfully!"),l()}catch(e){console.error("Error generating report:",e),alert("Failed to generate report")}finally{d(!1)}},disabled:o||"individual_player"===t.id&&!r.playerId||"custom"===t.id&&0===r.customReportTypes.length,className:"flex-1 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white px-6 py-4 rounded-lg font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:[(0,ta.jsx)(hn,{}),o?"Generating...":"Generate Report"]}),(0,ta.jsx)("button",{onClick:l,className:"px-6 py-4 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-semibold",children:"Cancel"})]})]})})}function rd(e){let{clubId:t}=e;const[s,l]=(0,a.useState)(!1),[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)(""),[d,c]=(0,a.useState)(""),[u,m]=(0,a.useState)(""),x=pr({mutationFn:async e=>{let{password:s,confirmationText:a}=e;return await(0,jl.AT)("/clubs/".concat(t,"/system/factory-reset"),{method:"POST",body:JSON.stringify({password:s,confirmationText:a})})},onSuccess:()=>{alert("Factory reset completed successfully. All club data has been wiped. Please refresh the page."),window.location.reload()},onError:e=>{m(e.message||"Failed to perform factory reset")}}),h=()=>{l(!1),n(!1),o(""),c(""),m("")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:[(0,ta.jsxs)("div",{className:"mb-8",children:[(0,ta.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"System Control"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Dangerous operations that affect the entire club"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-8 border border-red-500/30",children:[(0,ta.jsxs)("div",{className:"flex items-start gap-4 mb-6",children:[(0,ta.jsx)("div",{className:"bg-red-500/20 p-4 rounded-xl",children:(0,ta.jsx)(In,{className:"text-3xl text-red-500"})}),(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Factory Reset"}),(0,ta.jsx)("p",{className:"text-gray-300 mb-4",children:"Factory Reset clears local data and resets the UI. Use with caution."}),(0,ta.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4 mb-4",children:(0,ta.jsxs)("div",{className:"flex items-start gap-3",children:[(0,ta.jsx)(bn,{className:"text-red-400 text-xl mt-0.5 flex-shrink-0"}),(0,ta.jsxs)("div",{className:"text-red-200 text-sm",children:[(0,ta.jsx)("p",{className:"font-semibold mb-2",children:"\u26a0\ufe0f WARNING: This action is irreversible!"}),(0,ta.jsxs)("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[(0,ta.jsx)("li",{children:"All players will be permanently deleted"}),(0,ta.jsx)("li",{children:"All staff (except Super Admin & Admin) will be removed"}),(0,ta.jsx)("li",{children:"All financial records will be wiped"}),(0,ta.jsx)("li",{children:"All transactions, bonuses, and credit data will be lost"}),(0,ta.jsx)("li",{children:"All tables, waitlists, and tournaments will be deleted"}),(0,ta.jsx)("li",{children:"All FNB orders, inventory, and suppliers will be removed"}),(0,ta.jsx)("li",{children:"All chat history will be erased"}),(0,ta.jsx)("li",{children:"The club will be reset to a fresh state"})]}),(0,ta.jsx)("p",{className:"mt-3 font-semibold text-green-300",children:"\u2713 Super Admin and Admin accounts will be preserved!"}),(0,ta.jsx)("p",{className:"mt-2 font-semibold text-red-300",children:"This operation cannot be undone. All other data will be permanently lost!"})]})]})})]})]}),(0,ta.jsx)("button",{onClick:()=>{m(""),o(""),c(""),l(!0)},disabled:x.isPending,className:"w-full bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white px-8 py-4 rounded-lg font-bold text-lg transition-all shadow-lg hover:shadow-xl",children:x.isPending?"Processing...":"Factory Reset"})]}),s&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-slate-700 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,ta.jsx)("div",{className:"bg-red-500/20 p-3 rounded-xl",children:(0,ta.jsx)(jn,{className:"text-2xl text-red-500"})}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Verify Password"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"Enter your password to continue"})]})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i?(l(!1),n(!0)):m("Please enter your password")},children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("label",{className:"block text-white font-medium mb-2",children:"Password"}),(0,ta.jsx)("input",{type:"password",value:i,onChange:e=>o(e.target.value),placeholder:"Enter your password",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent",autoFocus:!0})]}),u&&(0,ta.jsx)("div",{className:"mb-4 bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:u}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:h,className:"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 text-white rounded-lg font-medium transition-all",children:"Continue"})]})]})]})}),r&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-2xl p-8 max-w-md w-full border border-red-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-6",children:[(0,ta.jsx)("div",{className:"bg-red-500/20 p-3 rounded-xl",children:(0,ta.jsx)(bn,{className:"text-2xl text-red-500"})}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white",children:"Final Confirmation"}),(0,ta.jsx)("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone!"})]})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"bg-red-900/30 border border-red-500/50 rounded-lg p-4 mb-4",children:(0,ta.jsx)("p",{className:"text-red-200 text-sm font-semibold",children:"You are about to permanently delete ALL club data!"})}),(0,ta.jsxs)("p",{className:"text-white mb-4",children:["To confirm, type ",(0,ta.jsx)("span",{className:"font-bold text-red-400",children:"DELETE ALL DATA"})," below:"]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),"DELETE ALL DATA"===d?(x.mutate({password:i,confirmationText:d}),n(!1)):m('Please type "DELETE ALL DATA" exactly to confirm')},children:[(0,ta.jsx)("input",{type:"text",value:d,onChange:e=>c(e.target.value),placeholder:"Type: DELETE ALL DATA",className:"w-full px-4 py-3 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-red-500 focus:border-transparent mb-4",autoFocus:!0}),u&&(0,ta.jsx)("div",{className:"mb-4 bg-red-900/30 border border-red-500/50 rounded-lg p-3 text-red-200 text-sm",children:u}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:h,className:"flex-1 px-6 py-3 bg-slate-700 hover:bg-slate-600 text-white rounded-lg font-medium transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:x.isPending||"DELETE ALL DATA"!==d,className:"flex-1 px-6 py-3 bg-gradient-to-r from-red-600 to-red-700 hover:from-red-700 hover:to-red-800 disabled:from-gray-600 disabled:to-gray-700 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:x.isPending?"Deleting...":"Delete Everything"})]})]})]})]})})]})}function nd(){var e,t,s,l,r,i,o,d,c;const u=ue(),m=aa(),[x,h]=(0,a.useState)("Dashboard"),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(null),[y,v]=(0,a.useState)(!1),[j,w]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=localStorage.getItem("clubId");e?b(e):u("/login")},[u]);const{data:N,isLoading:S}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p});(0,a.useEffect)(()=>{N&&f(N)},[N]),(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("adminuser")||"{}"),s=jl.R2.getCurrentUser();if(!e.id&&!t.userId)return void u("/login");const a="ADMIN"===e.role||t.userId||"ADMIN"===t.role||"ADMIN"===(null===s||void 0===s?void 0:s.role),l="SUPER_ADMIN"===e.role||"SUPER_ADMIN"===(null===s||void 0===s?void 0:s.role),r=e.isMasterAdmin||(null===s||void 0===s?void 0:s.isMasterAdmin);if(!a&&!l&&!r){const a=(null===s||void 0===s?void 0:s.role)||e.role||t.role,l={MASTER_ADMIN:"/master-admin",SUPER_ADMIN:"/super-admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},r=a&&l[a]?l[a]:"/login";return void u(r,{replace:!0})}(e.mustResetPassword||t.mustResetPassword)&&v(!0)},[u]);const{data:C,isLoading:k}=ur({queryKey:["clubRevenue",p],queryFn:()=>jl.Od.getClubRevenue(p),enabled:!!p,refetchInterval:3e4}),{data:P,isLoading:A}=ur({queryKey:["clubPlayers",p],queryFn:()=>jl.bS.getPlayers(p,{limit:100}),enabled:!!p}),{data:I=[],isLoading:D}=ur({queryKey:["pendingPlayers",p],queryFn:()=>jl.bS.getPendingApprovalPlayers(p),enabled:!!p}),{data:T=[],isLoading:_}=ur({queryKey:["suspendedPlayers",p],queryFn:()=>jl.bS.getSuspendedPlayers(p),enabled:!!p}),E=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),R=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("adminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("adminuser",JSON.stringify(t)),v(!1),w({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),L=y&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("adminuser")||"{}"),a=t.email||s.email;a?j.currentPassword&&j.newPassword&&j.confirmPassword?j.newPassword===j.confirmPassword?j.newPassword.length<8?vl.error("Password must be at least 8 characters"):R.mutate({email:a,currentPassword:j.currentPassword,newPassword:j.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:j.currentPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:j.newPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:j.confirmPassword,onChange:e=>w((0,n.A)((0,n.A)({},j),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:R.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:R.isLoading?"Resetting...":"Reset Password"})]})]})});if(S||!p)return(0,ta.jsxs)(ta.Fragment,{children:[L,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-white text-center",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-xl",children:"Loading club data..."})]})})]});return(0,ta.jsxs)(ta.Fragment,{children:[L,(0,ta.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,ta.jsx)($o,{activeItem:x,setActiveItem:h,menuItems:["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Reports & Analytics","System Control"],onSignOut:()=>{localStorage.clear(),u("/login")},clubInfo:g||N}),(0,ta.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Notifications"===x&&(0,ta.jsx)(ei,{selectedClubId:p,recipientType:"staff"}),"Dashboard"===x&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===g||void 0===g?void 0:g.name)||(null===N||void 0===N?void 0:N.name)||"Loading..."]})}),k?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading revenue data..."})]}):(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(e=C.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(t=C.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:E((null===C||void 0===C||null===(s=C.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===C||void 0===C||null===(l=C.currentDay)||void 0===l?void 0:l.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(r=C.currentDay)||void 0===r?void 0:r.rake)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(i=C.previousDay)||void 0===i?void 0:i.rake)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(o=C.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:E((null===C||void 0===C||null===(d=C.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,ta.jsx)("span",{className:"text-white font-semibold",children:A?"...":(null===P||void 0===P||null===(c=P.players)||void 0===c?void 0:c.length)||0})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,ta.jsx)("span",{className:"text-yellow-400 font-semibold",children:D?"...":I.length})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,ta.jsx)("span",{className:"text-red-400 font-semibold",children:_?"...":T.length})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,ta.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",D?"...":I.length,")"]}),(0,ta.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",_?"...":T.length,")"]})]})]})]})]}),"Player Management"===x&&(0,ta.jsx)(yr,{selectedClubId:p,playersData:P,playersLoading:A,pendingPlayers:I,pendingLoading:D,suspendedPlayers:T,suspendedLoading:_,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,ta.jsx)(jr,{selectedClubId:p}),"VIP Store"===x&&(0,ta.jsx)(Zo,{selectedClubId:p}),"Push Notifications"===x&&(0,ta.jsx)(Hr,{selectedClubId:p}),"Tournaments"===x&&(0,ta.jsx)(Qr,{selectedClubId:p}),"Staff Management"===x&&(0,ta.jsx)(Yi,{selectedClubId:p}),"Payroll Management"===x&&(0,ta.jsx)(ed,{selectedClubId:p}),"Bonus Management"===x&&(0,ta.jsx)(mo,{selectedClubId:p}),"Affiliates"===x&&(0,ta.jsx)(td,{selectedClubId:p}),"FNB"===x&&p&&(0,ta.jsx)(sd,{clubId:p}),"Chat"===x&&p&&(0,ta.jsx)(En,{clubId:p}),"Reports & Analytics"===x&&p&&(0,ta.jsx)(ad,{clubId:p}),"System Control"===x&&p&&(0,ta.jsx)(rd,{clubId:p}),"Rummy"===x&&p&&(0,ta.jsx)(Qn,{selectedClubId:p}),"Notifications"===x&&p&&(0,ta.jsx)(ei,{selectedClubId:p,recipientType:"staff"}),!["Dashboard","Player Management","Tables & Waitlist","VIP Store","Push Notifications","Tournaments","Staff Management","Payroll Management","Bonus Management","Affiliates","FNB","Chat","Reports & Analytics","System Control","Rummy","Notifications"].includes(x)&&(0,ta.jsx)("div",{className:"text-white",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]})}function id(){return(0,ta.jsx)(Ji,{role:"MASTER_ADMIN",roleDisplayName:"Master Admin",redirectPath:"/master-admin",gradientFrom:"from-indigo-400",gradientTo:"to-purple-600",description:"System-wide Administration"})}function od(e){let{title:t,subtitle:s}=e;const[l,r]=a.useState(!1);return(0,ta.jsx)("header",{className:"bg-gradient-to-r from-emerald-600 via-green-500 to-yellow-400 p-6 rounded-xl shadow-md flex items-center justify-between",children:(0,ta.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ta.jsx)("div",{className:"w-12 h-12 rounded-lg bg-white/20 flex items-center justify-center overflow-hidden border border-white/30",children:l?(0,ta.jsx)("div",{className:"text-white font-bold",children:"WL"}):(0,ta.jsx)("img",{src:"/branding/logo.png",alt:"Brand Logo",className:"w-full h-full object-contain",onError:()=>r(!0)})}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h1",{className:"text-2xl font-bold text-white",children:t}),s&&(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:s})]})]})})}function dd(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null,userEmail:i=null,userName:o=null}=e;const[d,c]=(0,a.useState)(!1),[u,m]=(0,a.useState)(window.innerWidth<1024),[x,h]=(0,a.useState)(!1),[p,b]=(0,a.useState)(!1),[g,f]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[y,v]=(0,a.useState)(""),[j,w]=(0,a.useState)(""),[N,S]=(0,a.useState)(!1),[C,k]=(0,a.useState)(!1),[P,A]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;m(e),e||c(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(d&&u){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||c(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[d,u]),(0,ta.jsxs)(ta.Fragment,{children:[u&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-emerald-500 to-teal-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>c(!d),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),u&&d&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>c(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-emerald-500/20 via-teal-600/30 to-cyan-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(u?d?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-emerald-400 via-teal-300 to-cyan-400 drop-shadow-lg mb-6",children:"Master Admin"}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsxs)("button",{onClick:()=>h(!x),className:"flex items-center text-white min-w-0 w-full hover:bg-white/10 p-2 rounded-lg transition-colors",children:[(0,ta.jsx)("div",{className:"w-10 h-10 bg-gradient-to-r from-emerald-400 to-cyan-500 rounded-full flex items-center justify-center mr-3 flex-shrink-0",children:(0,ta.jsx)("span",{className:"text-gray-900 font-bold text-sm",children:o?o.split(" ").map(e=>e[0]).join("").toUpperCase().slice(0,2):"MA"})}),(0,ta.jsxs)("div",{className:"min-w-0 flex-1 text-left",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold truncate",children:o||"Master Admin"}),(0,ta.jsx)("div",{className:"text-sm opacity-80 truncate",children:i||"No email"})]}),(0,ta.jsx)("svg",{className:"w-4 h-4 ml-2 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),x&&(0,ta.jsxs)("div",{className:"absolute top-full left-0 right-0 mt-2 bg-gray-800 rounded-lg shadow-xl border border-gray-700 z-50 overflow-hidden",children:[(0,ta.jsxs)("div",{className:"p-3 border-b border-gray-700",children:[(0,ta.jsx)("div",{className:"text-white font-semibold text-sm mb-1",children:"Profile"}),(0,ta.jsx)("div",{className:"text-gray-400 text-xs truncate",children:i||"No email"})]}),(0,ta.jsxs)("button",{onClick:()=>{b(!0),h(!1)},className:"w-full text-left px-4 py-3 text-white hover:bg-white/10 transition-colors flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Change Password"]})]})]})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:l.map(e=>(0,ta.jsx)("button",{onClick:()=>{s(e),u&&c(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-emerald-400 to-cyan-600 text-gray-900 font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-emerald-400/20 hover:to-cyan-500/20 text-white"),children:(0,ta.jsx)("span",{className:"block truncate",children:e})},e))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})}),p&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-gray-900 rounded-xl shadow-2xl w-full max-w-md border border-gray-700",children:[(0,ta.jsxs)("div",{className:"p-6 border-b border-gray-700 flex justify-between items-center",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white",children:"Change Password"}),(0,ta.jsx)("button",{onClick:()=>{b(!1),f({currentPassword:"",newPassword:"",confirmPassword:""}),v(""),w("")},className:"text-gray-400 hover:text-white transition",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,ta.jsxs)("div",{className:"p-6 space-y-4",children:[y&&(0,ta.jsx)("div",{className:"bg-red-500/20 border border-red-500 text-red-400 px-4 py-3 rounded-lg text-sm",children:y}),j&&(0,ta.jsx)("div",{className:"bg-green-500/20 border border-green-500 text-green-400 px-4 py-3 rounded-lg text-sm",children:j}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Current Password"}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)("input",{type:C?"text":"password",value:g.currentPassword,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{currentPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",disabled:N}),(0,ta.jsx)("button",{type:"button",onClick:()=>k(!C),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:C?(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,ta.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"New Password"}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)("input",{type:P?"text":"password",value:g.newPassword,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{newPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",disabled:N}),(0,ta.jsx)("button",{type:"button",onClick:()=>A(!P),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:P?(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,ta.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-white text-sm font-medium mb-2",children:"Confirm New Password"}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)("input",{type:I?"text":"password",value:g.confirmPassword,onChange:e=>f((0,n.A)((0,n.A)({},g),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-3 pr-12 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",disabled:N}),(0,ta.jsx)("button",{type:"button",onClick:()=>D(!I),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-white transition",children:I?(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):(0,ta.jsxs)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,ta.jsx)("button",{onClick:()=>{b(!1),f({currentPassword:"",newPassword:"",confirmPassword:""}),v(""),w("")},className:"flex-1 px-4 py-3 bg-gray-700 hover:bg-gray-600 text-white rounded-lg font-medium transition",disabled:N,children:"Cancel"}),(0,ta.jsx)("button",{onClick:async()=>{if(v(""),w(""),g.currentPassword&&g.newPassword&&g.confirmPassword)if(g.newPassword.length<6)v("New password must be at least 6 characters");else if(g.newPassword===g.confirmPassword)try{S(!0);const e=await fetch("".concat("http://localhost:3333/api","/auth/change-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,currentPassword:g.currentPassword,newPassword:g.newPassword})}),t=await e.json();if(!e.ok)throw new Error(t.message||"Failed to change password");w("Password changed successfully!"),f({currentPassword:"",newPassword:"",confirmPassword:""}),setTimeout(()=>{b(!1),w("")},2e3)}catch(e){v(e.message||"Failed to change password")}finally{S(!1)}else v("New passwords do not match");else v("All fields are required")},className:"flex-1 px-4 py-3 bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-600 hover:to-teal-700 text-white rounded-lg font-medium transition disabled:opacity-50 disabled:cursor-not-allowed",disabled:N,children:N?"Changing...":"Change Password"})]})]})]})})]})}function cd(){var e,t;const[s,l]=(0,a.useState)("Dashboard"),[r,i]=(0,a.useState)(!0),[o,d]=(0,a.useState)(""),[c,u]=(0,a.useState)(""),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(null),[b,g]=(0,a.useState)([]),[f,y]=(0,a.useState)([]),[v,j]=(0,a.useState)(null),[w,N]=(0,a.useState)(null),[S,C]=(0,a.useState)("all"),[k,P]=(0,a.useState)("name"),[A,I]=(0,a.useState)("name"),[D,T]=(0,a.useState)("price"),[_,E]=(0,a.useState)(null),[R,L]=(0,a.useState)({}),[O,M]=(0,a.useState)(!1),[F,B]=(0,a.useState)(!1),[q,z]=(0,a.useState)(null),[U,W]=(0,a.useState)({tenantName:"",superAdminName:"",superAdminEmail:""}),[H,V]=(0,a.useState)({clubName:"",clubDescription:"",skinColor:"#10b981",gradient:"emerald-green-teal",logoUrl:"",videoUrl:"",tenantId:"",createNewTenant:!1,newTenantName:"",newSuperAdminName:"",newSuperAdminEmail:""}),[J,K]=(0,a.useState)(null),[Q,G]=(0,a.useState)(!1),[Y,$]=(0,a.useState)(!1),[Z,X]=(0,a.useState)(null),[ee,te]=(0,a.useState)(""),[se,ae]=(0,a.useState)(""),[le,re]=(0,a.useState)({termsText:"",publicUrl:""}),ne=ue();(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("masteradminuser")||"{}"),s=jl.R2.getCurrentUser();if(!(e.isMasterAdmin||t.userId||(null===s||void 0===s?void 0:s.isMasterAdmin))){const a=(null===s||void 0===s?void 0:s.role)||e.role||t.role,l={SUPER_ADMIN:"/super-admin",ADMIN:"/admin",MANAGER:"/manager",GRE:"/gre",CASHIER:"/cashier",HR:"/hr",FNB:"/fnb",STAFF:"/staff",DEALER:"/dealer",AFFILIATE:"/affiliate"},r=a&&l[a]?l[a]:"/login";ne(r,{replace:!0})}},[ne]);const ie=[{value:"emerald-green-teal",label:"Emerald \u2192 Green \u2192 Teal",class:"from-emerald-600 via-green-500 to-teal-500"},{value:"teal-cyan-blue",label:"Teal \u2192 Cyan \u2192 Blue",class:"from-teal-500 via-cyan-500 to-blue-500"},{value:"cyan-blue-indigo",label:"Cyan \u2192 Blue \u2192 Indigo",class:"from-cyan-500 via-blue-500 to-indigo-600"},{value:"blue-indigo-purple",label:"Blue \u2192 Indigo \u2192 Purple",class:"from-blue-600 via-indigo-500 to-purple-600"},{value:"purple-pink-rose",label:"Purple \u2192 Pink \u2192 Rose",class:"from-purple-600 via-pink-500 to-rose-500"},{value:"pink-red-orange",label:"Pink \u2192 Red \u2192 Orange",class:"from-pink-500 via-red-500 to-orange-500"},{value:"red-orange-yellow",label:"Red \u2192 Orange \u2192 Yellow",class:"from-red-600 via-orange-500 to-yellow-500"},{value:"orange-yellow-lime",label:"Orange \u2192 Yellow \u2192 Lime",class:"from-orange-500 via-yellow-500 to-lime-500"},{value:"yellow-lime-green",label:"Yellow \u2192 Lime \u2192 Green",class:"from-yellow-500 via-lime-500 to-green-500"},{value:"indigo-purple-pink",label:"Indigo \u2192 Purple \u2192 Pink",class:"from-indigo-600 via-purple-500 to-pink-500"},{value:"gray-slate-zinc",label:"Gray \u2192 Slate \u2192 Zinc",class:"from-gray-600 via-slate-500 to-zinc-500"},{value:"slate-gray-neutral",label:"Slate \u2192 Gray \u2192 Neutral",class:"from-slate-600 via-gray-500 to-neutral-500"}];(0,a.useEffect)(()=>{(async()=>{const e=localStorage.getItem("user"),t=localStorage.getItem("userEmail");if(e)try{const s=JSON.parse(e);return u(s.email||t||""),void x(s.displayName||s.name||"Master Admin")}catch(na){console.error("Failed to parse user data:",na)}if(t)return u(t),void x("Master Admin");t&&(u(t),x("Master Admin"));if(localStorage.getItem("userId")&&!e)try{const e=await jl.o_.getCurrentUser();e&&e.email&&(u(e.email),x(e.displayName||"Master Admin"),localStorage.setItem("user",JSON.stringify({id:e.id,email:e.email,name:e.displayName||e.email,displayName:e.displayName})))}catch(s){console.error("Failed to fetch user info:",s),t&&(u(t),x("Master Admin"))}})()},[]),(0,a.useEffect)(()=>{oe()},[]);const oe=async()=>{i(!0),d("");try{const e=await jl.o_.getDashboardStats();p(e),g(e.clubs||[]),y(e.tenants||[]),e.clubs&&e.clubs.length>0&&N(e.clubs[0].id)}catch(e){console.error("Failed to load dashboard data:",e),d("Failed to load dashboard data: "+e.message)}finally{i(!1)}},de=()=>{jl.R2.logout(),ne("/master-admin/signin")},ce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";te(e),ae(t),setTimeout(()=>{te(""),ae("")},5e3)},me=async(e,t,s)=>{if(confirm("Are you sure you want to ".concat(t," this club?\n\n").concat(s?"Reason: "+s:"")))try{await jl.o_.updateClubStatus(e,t,s),alert("\u2705 Club status updated to: ".concat(t)),oe()}catch(a){alert("Failed to update club status: "+a.message)}},xe=()=>{E(null),L({})},he=async e=>{if(e&&e.preventDefault(),w)if(le.termsText&&""!==le.termsText.trim())try{await jl.o_.updateClubTerms(w,le.termsText),alert("\u2705 Terms & Conditions updated successfully!"),oe();const e=b.find(e=>e.id===w);e&&re((0,n.A)((0,n.A)({},le),{},{termsText:e.termsAndConditions||le.termsText}))}catch(t){alert("Failed to update Terms & Conditions: "+t.message)}else alert("Terms & Conditions text cannot be empty");else alert("Please select a club first")},pe=async(e,t)=>{if(confirm("Are you sure you want to ".concat(t?"enable":"disable"," Rummy mode for this club?")))try{await jl.o_.updateClubRummyEnabled(e,t),ce("\u2705 Rummy mode ".concat(t?"enabled":"disabled"," successfully!"),"success"),oe()}catch(s){ce("Failed to update Rummy mode: "+s.message,"error")}},be=b.filter(e=>"all"===S||e.status===S).sort((e,t)=>"name"===k?e.name.localeCompare(t.name):"status"===k?e.status.localeCompare(t.status):"subscription"===k?parseFloat(t.subscriptionPrice)-parseFloat(e.subscriptionPrice):0),ge=[...f].sort((e,t)=>{if("name"===A)return e.name.localeCompare(t.name);if("clubs"===A){const s=b.filter(t=>t.tenant.id===e.id).length,a=b.filter(e=>e.tenant.id===t.id).length;return a-s}return 0}),fe=w?b.find(e=>e.id===w):null;return r?(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-center",children:[(0,ta.jsx)("div",{className:"w-16 h-16 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-xl font-medium",children:"Loading Master Admin Dashboard..."}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Fetching data from backend..."})]})}):o?(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"max-w-md text-center",children:[(0,ta.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold mb-2",children:"Error Loading Dashboard"}),(0,ta.jsx)("p",{className:"text-gray-400 mb-6",children:o}),(0,ta.jsx)("button",{onClick:oe,className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium",children:"Retry"})]})}):(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(dd,{activeItem:s,setActiveItem:l,menuItems:["Dashboard","Tenants Management","Clubs Management","Rummy Settings","Terms & Conditions","Subscriptions","Reports"],onSignOut:de,userEmail:c,userName:m}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsx)("div",{className:"mt-16 lg:mt-0",children:(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)(od,{title:"Master Admin - ".concat(s),subtitle:"White-label control center"}),(0,ta.jsx)("button",{onClick:de,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]})}),"Dashboard"===s&&h&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-6",children:[(0,ta.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-emerald-400 via-teal-500 to-cyan-500 text-gray-900 shadow-lg",children:[(0,ta.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Total Tenants"}),(0,ta.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.totalTenants}),(0,ta.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"Organization groups"})]}),(0,ta.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-blue-400 via-indigo-500 to-purple-500 text-gray-900 shadow-lg",children:[(0,ta.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Total Clubs"}),(0,ta.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.totalClubs}),(0,ta.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"All poker clubs"})]}),(0,ta.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-green-400 via-emerald-500 to-teal-500 text-gray-900 shadow-lg",children:[(0,ta.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Active Clubs"}),(0,ta.jsx)("div",{className:"text-3xl font-bold mt-2 text-white",children:h.activeClubs}),(0,ta.jsxs)("div",{className:"text-xs mt-1 text-white/70",children:[h.suspendedClubs>0&&"".concat(h.suspendedClubs," suspended, "),h.killedClubs>0&&"".concat(h.killedClubs," killed")]})]}),(0,ta.jsxs)("div",{className:"p-6 rounded-xl bg-gradient-to-br from-yellow-400 via-orange-500 to-red-500 text-gray-900 shadow-lg",children:[(0,ta.jsx)("div",{className:"text-sm opacity-90 text-white/90",children:"Monthly Revenue"}),(0,ta.jsxs)("div",{className:"text-3xl font-bold mt-2 text-white",children:["\u20b9",h.monthlyRevenue.toLocaleString("en-IN")]}),(0,ta.jsx)("div",{className:"text-xs mt-1 text-white/70",children:"From subscriptions"})]})]}),(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Quick Actions"}),(0,ta.jsxs)("div",{className:"flex flex-wrap gap-4",children:[(0,ta.jsx)("button",{onClick:()=>M(!0),className:"bg-gradient-to-r from-emerald-500 to-teal-600 hover:from-emerald-400 hover:to-teal-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"+ Create Tenant"}),(0,ta.jsx)("button",{onClick:()=>B(!0),className:"bg-gradient-to-r from-blue-500 to-indigo-600 hover:from-blue-400 hover:to-indigo-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"+ Create Club"}),(0,ta.jsx)("button",{onClick:()=>l("Reports"),className:"bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-400 hover:to-pink-500 text-white font-bold py-3 px-6 rounded-lg shadow-lg",children:"View Reports"})]})]}),(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white mb-6",children:"Recent Clubs"}),(0,ta.jsx)("div",{className:"space-y-4",children:b.slice(0,5).map(e=>(0,ta.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"font-bold text-white",children:e.name}),(0,ta.jsxs)("div",{className:"text-sm text-gray-400",children:["Code: ",e.code," | Tenant: ",e.tenant.name]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:[(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status}),(0,ta.jsxs)("span",{className:"text-emerald-400 font-medium",children:["\u20b9",e.subscriptionPrice,"/mo"]})]})]},e.id))})]})]}),"Tenants Management"===s&&(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Tenants (",f.length,")"]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsxs)("select",{value:A,onChange:e=>I(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,ta.jsx)("option",{value:"name",children:"Sort by Name"}),(0,ta.jsx)("option",{value:"clubs",children:"Sort by Club Count"})]}),(0,ta.jsx)("button",{onClick:()=>M(!0),className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-medium",children:"+ Create Tenant"})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ge.map(e=>{const t=b.filter(t=>t.tenant.id===e.id),s=v===e.id;return(0,ta.jsxs)("div",{className:"p-6 bg-slate-800/50 rounded-lg border ".concat(s?"border-emerald-500":"border-slate-700"," cursor-pointer transition-all hover:border-emerald-500/50"),children:[(0,ta.jsx)("div",{onClick:()=>j(s?null:e.id),children:(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]}),(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsx)("div",{className:"text-2xl font-bold text-emerald-400",children:t.length}),(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:"Clubs"})]})]})}),s&&t.length>0&&(0,ta.jsxs)("div",{className:"mt-4 pt-4 border-t border-slate-700 space-y-2",children:[(0,ta.jsx)("div",{className:"text-sm font-medium text-gray-300 mb-3",children:"Clubs:"}),t.map(e=>(0,ta.jsx)("div",{className:"p-3 bg-slate-900/50 rounded border border-slate-700",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,ta.jsxs)("div",{className:"text-xs text-gray-400 font-mono",children:["Code: ",e.code]})]}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status})]})},e.id))]}),s&&0===t.length&&(0,ta.jsx)("div",{className:"mt-4 pt-4 border-t border-slate-700 text-center text-gray-400 text-sm",children:"No clubs yet"})]},e.id)}),0===f.length&&(0,ta.jsx)("div",{className:"col-span-full text-center py-12 text-gray-400",children:(0,ta.jsx)("p",{children:"No tenants found. Create your first tenant to get started!"})})]})]}),"Clubs Management"===s&&(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["All Clubs (",be.length,")"]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsxs)("select",{value:S,onChange:e=>C(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,ta.jsx)("option",{value:"all",children:"All Status"}),(0,ta.jsx)("option",{value:"active",children:"Active"}),(0,ta.jsx)("option",{value:"suspended",children:"Suspended"}),(0,ta.jsx)("option",{value:"killed",children:"Killed"})]}),(0,ta.jsxs)("select",{value:k,onChange:e=>P(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,ta.jsx)("option",{value:"name",children:"Sort by Name"}),(0,ta.jsx)("option",{value:"status",children:"Sort by Status"}),(0,ta.jsx)("option",{value:"subscription",children:"Sort by Subscription"})]}),(0,ta.jsx)("button",{onClick:()=>B(!0),className:"bg-emerald-600 hover:bg-emerald-500 px-4 py-2 rounded-lg font-medium",children:"+ Create Club"})]})]}),(0,ta.jsxs)("div",{className:"grid gap-4",children:[be.map(e=>(0,ta.jsx)("div",{className:"p-6 bg-slate-800/50 rounded-lg border border-slate-700",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat("active"===e.status?"bg-green-500/20 text-green-300":"suspended"===e.status?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.status})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Club Code:"}),(0,ta.jsx)("span",{className:"text-white font-mono ml-2",children:e.code})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Tenant:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:e.tenant.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Subscription:"}),(0,ta.jsxs)("span",{className:"text-emerald-400 ml-2 font-medium",children:["\u20b9",e.subscriptionPrice,"/month"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Sub Status:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:e.subscriptionStatus})]})]}),e.description&&(0,ta.jsx)("p",{className:"text-gray-400 mt-3 text-sm",children:e.description})]}),(0,ta.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:["active"===e.status&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("button",{onClick:()=>me(e.id,"suspended","Temporary suspension"),className:"bg-yellow-600 hover:bg-yellow-500 px-3 py-1 rounded text-sm",children:"Suspend"}),(0,ta.jsx)("button",{onClick:()=>me(e.id,"killed","Permanent closure"),className:"bg-red-600 hover:bg-red-500 px-3 py-1 rounded text-sm",children:"Kill"})]}),"suspended"===e.status&&(0,ta.jsx)("button",{onClick:()=>me(e.id,"active","Reactivated"),className:"bg-green-600 hover:bg-green-500 px-3 py-1 rounded text-sm",children:"Reactivate"}),"killed"===e.status&&(0,ta.jsx)("button",{onClick:()=>me(e.id,"active","Restored from killed status"),className:"bg-blue-600 hover:bg-blue-500 px-3 py-1 rounded text-sm",children:"Restore"}),(0,ta.jsx)("button",{onClick:()=>{z(e),l("Subscriptions")},className:"bg-purple-600 hover:bg-purple-500 px-3 py-1 rounded text-sm",children:"Edit Sub"}),(0,ta.jsx)("button",{onClick:()=>{z(e),N(e.id),l("Terms & Conditions")},className:"bg-indigo-600 hover:bg-indigo-500 px-3 py-1 rounded text-sm",children:"Terms"})]})]})},e.id)),0===be.length&&(0,ta.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,ta.jsx)("p",{children:"No clubs found with the selected filters."})})]})]}),"Rummy Settings"===s&&(()=>{const e=b.find(e=>e.id===w);return(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Rummy Mode Settings"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Club Selection"}),(0,ta.jsxs)("select",{value:w||"",onChange:e=>N(e.target.value),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"Choose a club..."}),b.map(e=>(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.code,")"]},e.id))]})]}),e&&(0,ta.jsxs)("div",{className:"p-6 bg-slate-800/70 rounded-lg border border-slate-600",children:[(0,ta.jsxs)("h4",{className:"font-bold text-lg mb-4 text-emerald-400",children:[e.rummyEnabled?"Disable":"Enable"," Rummy Mode for ",e.name]}),(0,ta.jsx)("p",{className:"text-gray-300 text-sm mb-4",children:"When enabled, the club's backend dashboard and player portal will show Rummy-specific features:"}),(0,ta.jsxs)("ul",{className:"space-y-2 text-sm text-gray-400 mb-6",children:[(0,ta.jsx)("li",{children:'\u2022 UI labels change from "Poker Table" to "Rummy Table"'}),(0,ta.jsx)("li",{children:"\u2022 Table shape switches to round for Rummy tables"}),(0,ta.jsx)("li",{children:"\u2022 Rummy variants become available in table creation"}),(0,ta.jsx)("li",{children:"\u2022 Rummy-specific rules and gameplay features are enabled"})]}),e.rummyEnabled?(0,ta.jsx)("button",{onClick:()=>pe(e.id,!1),className:"w-full bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Disable Rummy Mode"}):(0,ta.jsx)("button",{onClick:()=>pe(e.id,!0),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white px-6 py-3 rounded-lg font-medium transition-colors",children:"Enable Rummy Mode"}),(0,ta.jsx)("p",{className:"text-xs text-gray-500 mt-3",children:"Note: Table creation and management is handled by club staff (Admin/Manager) in their respective portals, just like poker tables. This setting only enables/disables Rummy mode features for the club."})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-white mb-4",children:"Club Rummy Status"}),(0,ta.jsx)("div",{className:"space-y-3",children:b.map(e=>(0,ta.jsxs)("div",{className:"p-4 bg-slate-800/70 rounded-lg border border-slate-600 flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,ta.jsxs)("div",{className:"text-xs text-gray-400",children:["Rummy Mode: ",e.rummyEnabled?"Enabled":"Disabled"]})]}),(0,ta.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(e.rummyEnabled?"bg-emerald-500/20 text-emerald-300":"bg-gray-500/20 text-gray-300"),children:e.rummyEnabled?"Enabled":"Disabled"})]},e.id))})]})]})]})})(),"Terms & Conditions"===s&&(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Terms & Conditions (Per Club)"}),(0,ta.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,ta.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ta.jsxs)("select",{value:w||"",onChange:e=>{const t=e.target.value;N(t);const s=b.find(e=>e.id===t);re(s?{termsText:s.termsAndConditions||"",publicUrl:""}:{termsText:"",publicUrl:""})},className:"flex-1 px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"",children:"Choose a club..."}),b.map(e=>{var t;return(0,ta.jsxs)("option",{value:e.id,children:[e.name," (",e.code,") - ",(null===(t=e.tenant)||void 0===t?void 0:t.name)||"No Tenant"]},e.id)})]}),(0,ta.jsx)("input",{type:"text",placeholder:"Optional public URL",value:le.publicUrl,onChange:e=>re((0,n.A)((0,n.A)({},le),{},{publicUrl:e.target.value})),className:"flex-1 px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-500"}),(0,ta.jsx)("button",{onClick:he,disabled:!w,className:"bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-600 disabled:cursor-not-allowed px-8 py-3 rounded-lg font-medium text-white whitespace-nowrap",children:"Upload / Save"})]}),fe?(0,ta.jsxs)("form",{onSubmit:he,className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,ta.jsxs)("h3",{className:"text-lg font-semibold text-white",children:["Editing T&C for: ",(0,ta.jsx)("span",{className:"text-emerald-400",children:fe.name})]}),(0,ta.jsxs)("span",{className:"text-xs text-gray-400",children:["Club Code: ",(0,ta.jsx)("span",{className:"font-mono text-emerald-400",children:fe.code})]})]}),(0,ta.jsxs)("p",{className:"text-sm text-gray-400",children:["Tenant: ",(null===(e=fe.tenant)||void 0===e?void 0:e.name)||"N/A"]})]}),(0,ta.jsx)("textarea",{name:"terms",value:le.termsText,onChange:e=>re((0,n.A)((0,n.A)({},le),{},{termsText:e.target.value})),rows:15,className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white font-mono text-sm placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-emerald-500",placeholder:"Paste Terms & Conditions here... Each club can have different T&C stored separately in the database."}),(0,ta.jsxs)("div",{className:"flex items-center justify-between",children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"\u26a0\ufe0f Only Master Admin can manage club T&C. Each club's T&C is stored separately in the database."}),(0,ta.jsx)("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium text-white transition-colors",children:"Save Terms & Conditions"})]})]}):(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,ta.jsx)("div",{className:"text-4xl mb-4",children:"\ud83d\udcc4"}),(0,ta.jsx)("p",{className:"text-lg mb-2",children:"Select a club from the dropdown above"}),(0,ta.jsx)("p",{className:"text-sm",children:"to edit terms & conditions for that specific club."}),(0,ta.jsx)("p",{className:"text-xs mt-4 text-gray-500",children:"Each club can have different Terms & Conditions stored separately in the database."})]})]})]}),"Subscriptions"===s&&(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsxs)("h2",{className:"text-2xl font-bold text-white",children:["Subscription Management (",b.length,")"]}),(0,ta.jsxs)("select",{value:D,onChange:e=>T(e.target.value),className:"px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white text-sm",children:[(0,ta.jsx)("option",{value:"price",children:"Sort by Price"}),(0,ta.jsx)("option",{value:"name",children:"Sort by Club Name"}),(0,ta.jsx)("option",{value:"tenant",children:"Sort by Tenant Name"}),(0,ta.jsx)("option",{value:"date",children:"Sort by Date Created"})]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[[...b].sort((e,t)=>"price"===D?parseFloat(t.subscriptionPrice)-parseFloat(e.subscriptionPrice):"name"===D?e.name.localeCompare(t.name):"tenant"===D?e.tenant.name.localeCompare(t.tenant.name):"date"===D?new Date(t.createdAt)-new Date(e.createdAt):0).map(e=>(0,ta.jsx)("div",{className:"p-6 bg-slate-800/50 rounded-lg border border-slate-700",children:_===e.id?(0,ta.jsxs)("form",{onSubmit:t=>{t.preventDefault(),(async(e,t)=>{try{await jl.o_.updateClubSubscription(e,t),alert("\u2705 Subscription updated successfully!"),E(null),L({}),oe()}catch(s){alert("Failed to update subscription: "+s.message)}})(e.id,{subscriptionPrice:parseFloat(R.price),subscriptionStatus:R.status,subscriptionNotes:R.notes})},className:"space-y-4",children:[(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Club Name"}),(0,ta.jsxs)("div",{className:"px-4 py-2 bg-slate-900 rounded-lg text-white",children:[e.name," (",e.code,")"]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Tenant"}),(0,ta.jsx)("div",{className:"px-4 py-2 bg-slate-900 rounded-lg text-white",children:e.tenant.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Monthly Price (\u20b9)"}),(0,ta.jsx)("input",{type:"number",step:"0.01",value:R.price,onChange:e=>L((0,n.A)((0,n.A)({},R),{},{price:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Status"}),(0,ta.jsxs)("select",{value:R.status,onChange:e=>L((0,n.A)((0,n.A)({},R),{},{status:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",children:[(0,ta.jsx)("option",{value:"active",children:"Active"}),(0,ta.jsx)("option",{value:"paused",children:"Paused"}),(0,ta.jsx)("option",{value:"cancelled",children:"Cancelled"})]})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium mb-2 text-gray-300",children:"Notes"}),(0,ta.jsx)("textarea",{value:R.notes,onChange:e=>L((0,n.A)((0,n.A)({},R),{},{notes:e.target.value})),rows:3,className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white",placeholder:"Payment notes, reminders, etc."})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"submit",className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium",children:"Save Changes"}),(0,ta.jsx)("button",{type:"button",onClick:xe,className:"bg-slate-600 hover:bg-slate-500 px-6 py-2 rounded-lg font-medium",children:"Cancel"})]})]}):(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,ta.jsx)("h3",{className:"text-xl font-bold text-white",children:e.name}),(0,ta.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-slate-700 text-gray-300",children:e.code})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Tenant:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:e.tenant.name})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Created:"}),(0,ta.jsx)("span",{className:"text-white ml-2",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Monthly Price:"}),(0,ta.jsxs)("span",{className:"text-emerald-400 ml-2 font-bold text-lg",children:["\u20b9",e.subscriptionPrice]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Status:"}),(0,ta.jsx)("span",{className:"ml-2 px-2 py-1 rounded-full text-xs font-medium ".concat("active"===e.subscriptionStatus?"bg-green-500/20 text-green-300":"paused"===e.subscriptionStatus?"bg-yellow-500/20 text-yellow-300":"bg-red-500/20 text-red-300"),children:e.subscriptionStatus})]})]}),e.subscriptionNotes&&(0,ta.jsxs)("div",{className:"mt-3 text-sm text-gray-400",children:[(0,ta.jsx)("span",{className:"font-medium",children:"Notes:"})," ",e.subscriptionNotes]})]}),(0,ta.jsx)("button",{onClick:()=>(e=>{E(e.id),L({price:e.subscriptionPrice,status:e.subscriptionStatus,notes:e.subscriptionNotes||""})})(e),className:"ml-4 bg-purple-600 hover:bg-purple-500 px-4 py-2 rounded-lg font-medium text-sm whitespace-nowrap",children:"Edit Subscription"})]})},e.id)),0===b.length&&(0,ta.jsx)("div",{className:"text-center py-12 text-gray-400",children:(0,ta.jsx)("p",{children:"No clubs found."})})]})]}),"Reports"===s&&(0,ta.jsxs)("section",{className:"p-6 bg-gradient-to-r from-slate-800/50 via-slate-900/50 to-black/50 rounded-xl border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Revenue Reports"}),(0,ta.jsx)("button",{onClick:()=>{const e=b.map(e=>[e.name,e.code,e.tenant.name,e.subscriptionPrice,e.status,e.subscriptionStatus,new Date(e.createdAt).toLocaleDateString()]),t=[["Club Name","Club Code","Tenant Name","Monthly Price (\u20b9)","Status","Subscription Status","Created Date"].join(","),...e.map(e=>e.map(e=>'"'.concat(e,'"')).join(","))].join("\n"),s=new Blob([t],{type:"text/csv;charset=utf-8;"}),a=document.createElement("a"),l=URL.createObjectURL(s);a.setAttribute("href",l),a.setAttribute("download","revenue-report-".concat((new Date).toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a)},className:"bg-emerald-600 hover:bg-emerald-500 px-6 py-2 rounded-lg font-medium text-white",children:"Export CSV"})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[(0,ta.jsxs)("div",{className:"p-6 bg-gradient-to-br from-emerald-500/20 to-teal-500/20 rounded-lg border border-emerald-500/30",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Total Monthly Revenue"}),(0,ta.jsxs)("div",{className:"text-3xl font-bold text-emerald-400 mt-2",children:["\u20b9",null===h||void 0===h?void 0:h.monthlyRevenue.toLocaleString("en-IN")]})]}),(0,ta.jsxs)("div",{className:"p-6 bg-gradient-to-br from-blue-500/20 to-indigo-500/20 rounded-lg border border-blue-500/30",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Active Subscriptions"}),(0,ta.jsx)("div",{className:"text-3xl font-bold text-blue-400 mt-2",children:b.filter(e=>"active"===e.subscriptionStatus).length})]}),(0,ta.jsxs)("div",{className:"p-6 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-lg border border-purple-500/30",children:[(0,ta.jsx)("div",{className:"text-sm text-gray-300",children:"Avg. Subscription"}),(0,ta.jsxs)("div",{className:"text-3xl font-bold text-purple-400 mt-2",children:["\u20b9",b.length>0?Math.round((null===h||void 0===h?void 0:h.monthlyRevenue)/b.length).toLocaleString("en-IN"):0]})]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-bold text-white",children:"Club Revenue Breakdown"}),b.map(e=>(0,ta.jsxs)("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700 flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"font-medium text-white",children:e.name}),(0,ta.jsx)("div",{className:"text-sm text-gray-400",children:e.tenant.name})]}),(0,ta.jsxs)("div",{className:"text-right",children:[(0,ta.jsxs)("div",{className:"text-xl font-bold text-emerald-400",children:["\u20b9",e.subscriptionPrice,"/mo"]}),(0,ta.jsx)("div",{className:"text-xs text-gray-400",children:e.subscriptionStatus})]})]},e.id))]})]})]})})]}),O&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-xl p-8 max-w-2xl w-full max-h-[90vh] overflow-y-auto border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create Tenant + Super Admin"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await jl.Ox.createTenant({name:U.tenantName,superAdminName:U.superAdminName,superAdminEmail:U.superAdminEmail});X({type:"tenant",tenantName:e.tenant.name,superAdminEmail:e.superAdmin.email,tempPassword:e.superAdmin.tempPassword}),$(!0),M(!1),W({tenantName:"",superAdminName:"",superAdminEmail:""}),oe()}catch(t){const e=t.message||"Unknown error";e.includes("already exists")||e.includes("already used")||e.includes("Tenant name")?ce(e,"error"):ce("Failed to create tenant: "+e,"error")}},className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-emerald-400",children:"Tenant Information"}),(0,ta.jsx)("input",{type:"text",placeholder:"Tenant Name (e.g., Poker Group India)",value:U.tenantName,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{tenantName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-blue-400",children:"Super Admin"}),(0,ta.jsx)("input",{type:"text",placeholder:"Super Admin Name",value:U.superAdminName,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{superAdminName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,ta.jsx)("input",{type:"email",placeholder:"Super Admin Email",value:U.superAdminEmail,onChange:e=>W((0,n.A)((0,n.A)({},U),{},{superAdminEmail:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,ta.jsx)("p",{className:"text-sm text-gray-400",children:"A temporary password will be generated automatically"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"submit",className:"flex-1 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-medium text-white",children:"Create Tenant"}),(0,ta.jsx)("button",{type:"button",onClick:()=>M(!1),className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 rounded-lg font-medium text-white",children:"Cancel"})]})]})]})}),F&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,ta.jsxs)("div",{className:"bg-slate-900 rounded-xl p-8 max-w-6xl w-full my-8 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Create Club with Branding"}),(0,ta.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),G(!0);try{var t;let e,a=H.logoUrl;const l=(null===(t=ie.find(e=>e.value===H.gradient))||void 0===t?void 0:t.class)||H.gradient;if(H.createNewTenant){if(e=await jl.o_.createTenantWithClub({tenantName:H.newTenantName,superAdminName:H.newSuperAdminName,superAdminEmail:H.newSuperAdminEmail,clubName:H.clubName,clubDescription:H.clubDescription,skinColor:H.skinColor,gradient:l,logoUrl:H.logoUrl||void 0,videoUrl:H.videoUrl||void 0}),J&&e.club&&e.tenant)try{const t=e.tenant.id,s=e.club.id,l=await jl.Ox.getLogoUploadUrl(t,s);await jl.Ox.uploadLogo(l.signedUrl,J),a=await jl.Ox.getLogoPublicUrl(t,s)}catch(s){console.error("Logo upload failed:",s),ce("Club created but logo upload failed","error")}X({type:"tenant-club",tenant:e.tenant,superAdmin:e.superAdmin,club:e.club,logoUrl:a}),$(!0)}else{if(e=await jl.Ox.createClubWithBranding(H.tenantId,{name:H.clubName,description:H.clubDescription||void 0,skinColor:H.skinColor||void 0,gradient:l||void 0,logoUrl:H.logoUrl||void 0,videoUrl:H.videoUrl||void 0}),J&&e.id)try{const t=H.tenantId,s=e.id,l=await jl.Ox.getLogoUploadUrl(t,s);await jl.Ox.uploadLogo(l.signedUrl,J),a=await jl.Ox.getLogoPublicUrl(t,s)}catch(s){console.error("Logo upload failed:",s),ce("Club created but logo upload failed","error")}X({type:"club",club:e,logoUrl:a}),$(!0)}B(!1),V({clubName:"",clubDescription:"",skinColor:"#10b981",gradient:"emerald-green-teal",logoUrl:"",videoUrl:"",tenantId:"",createNewTenant:!1,newTenantName:"",newSuperAdminName:"",newSuperAdminEmail:""}),K(null),oe()}catch(a){const e=a.message||"Unknown error";e.includes("already exists")||e.includes("already used")?ce(e,"error"):ce("Failed to create club: "+e,"error")}finally{G(!1)}},children:[(0,ta.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-purple-400",children:"Club Information"}),(0,ta.jsx)("input",{type:"text",placeholder:"Club Name (e.g., Emerald Poker Mumbai)",value:H.clubName,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{clubName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!0}),(0,ta.jsx)("textarea",{placeholder:"Club Description",value:H.clubDescription,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{clubDescription:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",rows:3})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-pink-400",children:"Club Branding"}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Club Logo (PNG)"}),(0,ta.jsx)("input",{type:"file",accept:"image/png",onChange:e=>{const t=e.target.files[0];if(t){if(t.size>5242880)return ce("Logo file size must be less than 5MB","error"),void(e.target.value="");if(!t.type.includes("png"))return ce("Logo must be a PNG image","error"),void(e.target.value="");K(t)}},className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:text-sm file:font-semibold file:bg-emerald-600 file:text-white hover:file:bg-emerald-500 file:cursor-pointer"}),J&&(0,ta.jsxs)("p",{className:"text-xs text-emerald-400 mt-2",children:["\u2713 ",J.name," selected (will upload when club is created)"]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Logo will be uploaded to Supabase when you create the club (max 5MB)"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Promo Video URL (mp4) - Optional"}),(0,ta.jsx)("input",{type:"text",placeholder:"Promo Video URL (mp4)",value:H.videoUrl,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{videoUrl:e.target.value})),className:"w-full px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white placeholder-gray-500"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Skin Color"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("input",{type:"color",value:H.skinColor,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{skinColor:e.target.value})),className:"w-16 h-12 bg-slate-800 border border-slate-600 rounded-lg cursor-pointer"}),(0,ta.jsx)("input",{type:"text",value:H.skinColor,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{skinColor:e.target.value})),className:"flex-1 px-4 py-2 bg-slate-800 border border-slate-600 rounded-lg text-white font-mono"})]}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Primary theme color for the club"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm mb-2 text-gray-300",children:"Gradient Selection"}),(0,ta.jsx)("select",{value:H.gradient,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{gradient:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",children:ie.map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,ta.jsx)("p",{className:"text-xs text-gray-400 mt-1",children:"Gradient theme for club branding"})]})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-cyan-400",children:"Tenant Assignment"}),(0,ta.jsxs)("div",{className:"flex items-center gap-4 mb-4",children:[(0,ta.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,ta.jsx)("input",{type:"radio",checked:!H.createNewTenant,onChange:()=>V((0,n.A)((0,n.A)({},H),{},{createNewTenant:!1})),className:"w-4 h-4"}),(0,ta.jsx)("span",{children:"Assign to Existing Tenant"})]}),(0,ta.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer",children:[(0,ta.jsx)("input",{type:"radio",checked:H.createNewTenant,onChange:()=>V((0,n.A)((0,n.A)({},H),{},{createNewTenant:!0})),className:"w-4 h-4"}),(0,ta.jsx)("span",{children:"Create New Tenant"})]})]}),H.createNewTenant?(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h4",{className:"text-sm font-medium text-emerald-400",children:"New Tenant Details"}),(0,ta.jsx)("input",{type:"text",placeholder:"Tenant Name",value:H.newTenantName,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{newTenantName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant}),(0,ta.jsx)("input",{type:"text",placeholder:"Super Admin Name",value:H.newSuperAdminName,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{newSuperAdminName:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant}),(0,ta.jsx)("input",{type:"email",placeholder:"Super Admin Email",value:H.newSuperAdminEmail,onChange:e=>V((0,n.A)((0,n.A)({},H),{},{newSuperAdminEmail:e.target.value})),className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:H.createNewTenant})]}):(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm mb-2",children:"Select Tenant"}),(0,ta.jsxs)("select",{value:H.tenantId,onChange:async e=>{const t=e.target.value;if(V((0,n.A)((0,n.A)({},H),{},{tenantId:t})),t)try{const e=await jl.Ox.getTenant(t);e&&e.superAdmin&&console.log("\u2705 Tenant has super admin:",e.superAdmin.email)}catch(s){console.error("Failed to fetch tenant info:",s)}},className:"w-full px-4 py-3 bg-slate-800 border border-slate-600 rounded-lg text-white",required:!H.createNewTenant,children:[(0,ta.jsx)("option",{value:"",children:"Choose a tenant..."}),f.map(e=>(0,ta.jsx)("option",{value:e.id,children:e.name},e.id))]})]})]}),(0,ta.jsx)("p",{className:"text-sm text-gray-400 text-center",children:"A unique 6-digit club code will be generated automatically"})]}),(0,ta.jsxs)("div",{className:"space-y-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-medium text-white",children:"Live Preview"}),(0,ta.jsx)("div",{className:"p-8 rounded-xl bg-gradient-to-br ".concat((e=>{const t=ie.find(t=>t.value===e);return t?t.class:e})(H.gradient)," min-h-[500px]"),children:(0,ta.jsxs)("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,ta.jsx)("div",{className:"w-16 h-16 rounded-lg flex items-center justify-center text-white font-bold text-xs overflow-hidden",style:{backgroundColor:H.skinColor},children:J?(0,ta.jsx)("img",{src:URL.createObjectURL(J),alt:"Logo Preview",className:"w-full h-full object-cover rounded-lg"}):H.logoUrl?(0,ta.jsx)("img",{src:H.logoUrl,alt:"Logo",className:"w-full h-full object-contain rounded-lg",onError:e=>e.target.style.display="none"}):"LOGO"}),(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("h4",{className:"text-2xl font-bold text-white",children:H.clubName||"Club Name"}),(0,ta.jsx)("p",{className:"text-white/80 text-sm",children:H.clubDescription||"Club description will appear here"})]})]}),(0,ta.jsxs)("div",{className:"space-y-3 text-white",children:[(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"font-medium",children:"Logo:"}),(0,ta.jsx)("span",{className:"text-white/80",children:J?"".concat(J.name," (").concat((J.size/1024).toFixed(1),"KB)"):H.logoUrl?"Set via URL":"Not set"})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"font-medium",children:"Video:"}),(0,ta.jsx)("span",{className:"text-white/80",children:H.videoUrl?"Set":"Not set"})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"font-medium",children:"Skin Color:"}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("div",{className:"w-6 h-6 rounded border-2 border-white",style:{backgroundColor:H.skinColor}}),(0,ta.jsx)("span",{className:"text-white/80 font-mono text-sm",children:H.skinColor})]})]}),(0,ta.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ta.jsx)("span",{className:"font-medium",children:"Gradient:"}),(0,ta.jsx)("span",{className:"text-white/80 text-sm",children:(null===(t=ie.find(e=>e.value===H.gradient))||void 0===t?void 0:t.label)||H.gradient})]})]}),(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/20",children:(0,ta.jsx)("p",{className:"text-white/70 text-sm",children:"This preview shows how the branding will appear in the player portal and club dashboards."})})]})})]})]}),(0,ta.jsxs)("div",{className:"flex gap-3 mt-8",children:[(0,ta.jsx)("button",{type:"submit",disabled:Q,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-600 disabled:cursor-not-allowed px-6 py-3 rounded-lg font-medium text-white",children:Q?"Uploading Logo...":"Create Club"}),(0,ta.jsx)("button",{type:"button",onClick:()=>{B(!1),K(null)},disabled:Q,className:"px-6 py-3 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-800 disabled:cursor-not-allowed rounded-lg font-medium text-white",children:"Cancel"})]})]})]})}),ee&&(0,ta.jsx)("div",{className:"fixed top-4 right-4 z-[100] px-6 py-4 rounded-lg shadow-2xl border-2 ".concat("error"===se?"bg-red-900 border-red-500 text-red-100":"bg-emerald-900 border-emerald-500 text-emerald-100"),children:(0,ta.jsxs)("div",{className:"flex items-center gap-3",children:["error"===se?(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}):(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,ta.jsx)("p",{className:"font-medium",children:ee})]})}),Y&&Z&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[100] p-4",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 rounded-2xl p-8 max-w-2xl w-full border-2 border-emerald-500 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-emerald-500 rounded-full mb-4",children:(0,ta.jsx)("svg",{className:"w-10 h-10 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white mb-2",children:"tenant"===Z.type?"\ud83c\udf89 Tenant Created!":"tenant-club"===Z.type?"\ud83c\udf89 Tenant & Club Created!":"\ud83c\udf89 Club Created!"}),(0,ta.jsx)("p",{className:"text-emerald-400 text-sm",children:"Save these credentials securely!"})]}),(0,ta.jsxs)("div",{className:"space-y-6",children:["tenant"===Z.type&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[(0,ta.jsxs)("h3",{className:"text-purple-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),"Tenant Details"]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.tenantName]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-blue-500/30",children:[(0,ta.jsxs)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Super Admin Login"]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",Z.superAdminEmail]}),(0,ta.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,ta.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:Z.tempPassword})]})]})]})]}),"tenant-club"===Z.type&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-purple-500/30",children:[(0,ta.jsxs)("h3",{className:"text-purple-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{d:"M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"})}),"Tenant Details"]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.tenant.name]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-blue-500/30",children:[(0,ta.jsxs)("h3",{className:"text-blue-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})}),"Super Admin Login"]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Name:"})," ",Z.superAdmin.displayName||Z.superAdmin.email]}),(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Email:"})," ",Z.superAdmin.email]}),(0,ta.jsxs)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-3 mt-2",children:[(0,ta.jsx)("p",{className:"text-yellow-400 text-sm font-medium mb-1",children:"\u26a0\ufe0f Temporary Password"}),(0,ta.jsx)("p",{className:"text-yellow-100 font-mono text-lg font-bold",children:Z.superAdmin.tempPassword})]})]})]})]}),("tenant-club"===Z.type||"club"===Z.type)&&(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-4 border border-emerald-500/30",children:[(0,ta.jsxs)("h3",{className:"text-emerald-400 font-semibold mb-3 flex items-center gap-2",children:[(0,ta.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,ta.jsx)("path",{d:"M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z"})}),"Club Details"]}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("p",{className:"text-white",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Club Name:"})," ",Z.club.name]}),(0,ta.jsxs)("div",{className:"bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3 mt-2",children:[(0,ta.jsx)("p",{className:"text-emerald-400 text-sm font-medium mb-1",children:"\ud83c\udfae Unique Club Code"}),(0,ta.jsx)("p",{className:"text-emerald-100 font-mono text-2xl font-bold tracking-wider",children:Z.club.code}),(0,ta.jsx)("p",{className:"text-emerald-300 text-xs mt-1",children:"Players use this code to sign up"})]}),Z.logoUrl&&(0,ta.jsx)("p",{className:"text-emerald-400 text-sm mt-2",children:"\u2705 Logo uploaded successfully"})]})]})]}),(0,ta.jsx)("button",{onClick:()=>{$(!1),X(null)},className:"w-full mt-6 bg-emerald-600 hover:bg-emerald-500 px-6 py-3 rounded-lg font-bold text-white text-lg transition-colors",children:"Got it! Close"})]})})]})}function ud(){return(0,ta.jsx)(Ji,{role:"SUPER_ADMIN",roleDisplayName:"Super Admin",redirectPath:"/super-admin",gradientFrom:"from-blue-400",gradientTo:"to-indigo-600",description:"Tenant-level Administration"})}const md=["Dashboard","Notifications","Player Management","Staff Management","Payroll Management","Affiliates","Tables & Waitlist","Club Buy-In","Credit Management","VIP Store","Push Notifications","Tournaments","Bonus Management","FNB","Chat","Financial Overrides","Reports & Analytics","Audit Logs","System Control"];function xd(e){let{activeItem:t,setActiveItem:s,menuItems:l=md,onSignOut:r=null,clubs:i=[],selectedClubId:o=null,onClubChange:d=null}=e;const[c,u]=(0,a.useState)(!1),[m,x]=(0,a.useState)(window.innerWidth<1024),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(!1),[f,y]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),v=o||localStorage.getItem("clubId"),{data:j}=ur({queryKey:["unreadNotificationCount",v,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(v,"staff"),enabled:!!v,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;x(e),e||u(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(c&&m){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||u(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[c,m]);const w=i.find(e=>e.clubId===o)||i[0],N=(null===w||void 0===w?void 0:w.rummyEnabled)||!1,S=JSON.parse(localStorage.getItem("user")||"{}"),C=JSON.parse(localStorage.getItem("superadminuser")||"{}"),k=S.email||C.email||"super@admin.com",P=S.displayName||C.displayName||"Root Administrator",A=(S.role||C.role,N?[...l,"Rummy"]:l),I=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("superadminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("superadminuser",JSON.stringify(t)),g(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}});return(0,ta.jsxs)(ta.Fragment,{children:[m&&(0,ta.jsx)("button",{className:"sidebar-toggle fixed top-4 left-4 z-50 bg-gradient-to-r from-red-500 to-purple-600 text-white p-3 rounded-lg shadow-lg hover:shadow-xl transition-all duration-300 lg:hidden",onClick:()=>u(!c),"aria-label":"Toggle sidebar",children:(0,ta.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),m&&c&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-40 transition-opacity duration-300 lg:hidden",onClick:()=>u(!1)}),(0,ta.jsx)("aside",{className:"sidebar-container fixed lg:sticky top-0 left-0 h-screen z-40 w-80 max-w-[90vw] bg-gradient-to-b from-red-500/20 via-purple-600/30 to-indigo-700/30 border-r border-gray-800 shadow-2xl transition-transform duration-300 ease-in-out overflow-y-auto overflow-x-hidden hide-scrollbar ".concat(m?c?"translate-x-0":"-translate-x-full":"translate-x-0"),children:(0,ta.jsxs)("div",{className:"p-5 h-full flex flex-col min-w-0",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("div",{className:"pt-11 lg:pt-0 text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-red-400 via-purple-300 to-indigo-400 drop-shadow-lg mb-6",children:"Super Admin"}),(0,ta.jsxs)("div",{onClick:()=>g(!0),className:"bg-white/10 rounded-xl p-4 mb-6 text-white shadow-inner cursor-pointer hover:bg-white/15 transition-colors",children:[(0,ta.jsx)("div",{className:"text-lg font-semibold",children:P}),(0,ta.jsx)("div",{className:"text-sm opacity-80",children:k})]}),b&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[9999]",onClick:()=>g(!1),children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full mx-4 border border-emerald-600 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Reset Password"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Enter your current and new password"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=t.email||s.email;a?f.currentPassword&&f.newPassword&&f.confirmPassword?f.newPassword===f.confirmPassword?f.newPassword.length<8?vl.error("Password must be at least 8 characters"):I.mutate({email:a,currentPassword:f.currentPassword,newPassword:f.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:f.currentPassword,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter current password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:f.newPassword,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:f.confirmPassword,onChange:e=>y((0,n.A)((0,n.A)({},f),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{type:"button",onClick:()=>{g(!1),y({currentPassword:"",newPassword:"",confirmPassword:""})},className:"flex-1 bg-gray-600 hover:bg-gray-500 text-white font-medium py-3 rounded-lg transition-colors",children:"Cancel"}),(0,ta.jsx)("button",{type:"submit",disabled:I.isLoading,className:"flex-1 bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:I.isLoading?"Resetting...":"Reset Password"})]})]})]})}),document.body),i.length>0&&d&&(0,ta.jsxs)("div",{className:"mb-6 relative min-w-0",children:[(0,ta.jsx)("label",{className:"text-white text-sm mb-2 block font-semibold",children:"\ud83d\udccd Select Club"}),(0,ta.jsxs)("div",{className:"relative min-w-0",children:[(0,ta.jsxs)("button",{type:"button",onClick:()=>p(!h),className:"w-full px-4 py-3 bg-gradient-to-r from-emerald-600/20 to-teal-600/20 border border-emerald-500/40 rounded-lg text-white text-left flex items-center justify-between hover:from-emerald-600/30 hover:to-teal-600/30 transition-all overflow-hidden min-w-0 shadow-md",children:[(0,ta.jsx)("span",{className:"truncate min-w-0 flex-1 font-medium",children:(null===w||void 0===w?void 0:w.clubName)||"Select Club"}),(0,ta.jsx)("svg",{className:"w-5 h-5 ml-2 transition-transform ".concat(h?"rotate-180":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),h&&(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>p(!1)}),(0,ta.jsx)("div",{className:"absolute z-20 w-full mt-2 bg-slate-800 border border-emerald-500/40 rounded-lg shadow-2xl max-h-64 overflow-y-auto overflow-x-hidden hide-scrollbar",children:i.map(e=>(0,ta.jsxs)("button",{type:"button",onClick:()=>{d(e.clubId),p(!1)},className:"w-full px-4 py-3 text-left text-white hover:bg-emerald-600/30 transition-colors overflow-hidden border-b border-slate-700 last:border-b-0 ".concat(o===e.clubId?"bg-emerald-600/40 font-semibold":""),children:[(0,ta.jsx)("span",{className:"block truncate",children:e.clubName}),(0,ta.jsx)("span",{className:"block text-xs text-gray-400 truncate mt-0.5",children:e.tenantName})]},e.clubId))})]})]}),(0,ta.jsxs)("p",{className:"text-xs text-emerald-400 mt-2 font-medium",children:["\ud83d\udcca ",i.length," ",1===i.length?"Club":"Clubs"," Available"]}),w&&w.code&&(0,ta.jsxs)("div",{className:"mt-3 bg-emerald-900/30 border border-emerald-500/50 rounded-lg p-3",children:[(0,ta.jsx)("div",{className:"text-xs text-emerald-300 font-semibold mb-1",children:"\ud83c\udfae Club Code"}),(0,ta.jsx)("div",{className:"text-emerald-100 font-mono text-lg font-bold tracking-wider text-center",children:w.code}),(0,ta.jsx)("div",{className:"text-xs text-emerald-400 mt-1 text-center",children:"Players use this to sign up"})]})]})]}),(0,ta.jsx)("nav",{className:"space-y-3 flex-1 overflow-y-auto overflow-x-hidden hide-scrollbar min-w-0",children:A.map(e=>(0,ta.jsx)("button",{onClick:()=>{s(e),m&&u(!1)},className:"w-full text-left rounded-xl px-4 py-3 font-medium transition-all duration-300 shadow-md overflow-hidden ".concat(t===e?"bg-gradient-to-r from-red-400 to-purple-600 text-white font-bold shadow-lg scale-[1.02]":"bg-white/5 hover:bg-gradient-to-r hover:from-red-400/20 hover:to-purple-500/20 text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between",children:[(0,ta.jsx)("span",{className:"block truncate",children:e}),"Notifications"===e&&(null===j||void 0===j?void 0:j.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:j.unreadCount>9?"9+":j.unreadCount})]})},e))}),r&&(0,ta.jsx)("div",{className:"mt-6 pt-6 border-t border-white/10",children:(0,ta.jsx)("button",{onClick:r,className:"w-full bg-red-600 hover:bg-red-500 text-white px-4 py-3 rounded-lg font-semibold shadow transition",children:"Sign Out"})})]})})]})}function hd(e){let{selectedClubId:t}=e;const s=aa(),[l,r]=(0,a.useState)("players-list"),[n,i]=(0,a.useState)(!1),[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(""),[h,p]=(0,a.useState)(!1),[b,g]=(0,a.useState)(null),[f,y]=(0,a.useState)(""),{data:v=[],isLoading:j}=ur({queryKey:["creditPlayers",t],queryFn:async()=>{if(!t)return[];const e=[];let s=1;let a=!0;for(;a;)try{const l=await jl.Dv.getPlayers(t,{limit:50,page:s}),r=(null===l||void 0===l?void 0:l.players)||[];if(!r||0===r.length){a=!1;break}const n=r.filter(e=>("approved"===e.kycStatus||"verified"===e.kycStatus)&&"Active"===e.status);e.push(...n),r.length<50?a=!1:(s++,s>20&&(a=!1))}catch(l){console.error("Error fetching page ".concat(s,":"),l),a=!1}return e},enabled:!!t}),{data:w=[],isLoading:N}=ur({queryKey:["creditRequests",t],queryFn:()=>jl.Dv.getCreditRequests(t,"Pending"),enabled:!!t&&"credit-requests"===l}),S=pr({mutationFn:async e=>{let{playerId:s,limit:a}=e;return await jl.Dv.unlockCredit(t,s,{creditLimit:parseFloat(a)})},onSuccess:()=>{vl.success("Credit feature unlocked successfully!"),s.invalidateQueries(["creditPlayers",t]),i(!1),u(null),x("")},onError:e=>{vl.error(e.message||"Failed to unlock credit feature")}}),C=pr({mutationFn:async e=>{let{playerId:s,limit:a}=e;return await jl.Dv.updateCreditLimit(t,s,{creditLimit:parseFloat(a)})},onSuccess:()=>{vl.success("Credit limit updated successfully!"),s.invalidateQueries(["creditPlayers",t]),d(!1),u(null),x("")},onError:e=>{vl.error(e.message||"Failed to update credit limit")}}),k=pr({mutationFn:async e=>{let{requestId:s,playerId:a}=e;return await jl.Dv.approveCreditRequest(t,s)},onSuccess:()=>{vl.success("Credit request approved!"),s.invalidateQueries(["creditRequests",t]),s.invalidateQueries(["creditPlayers",t])},onError:e=>{vl.error(e.message||"Failed to approve credit request")}}),P=pr({mutationFn:async e=>{let{requestId:s,reason:a}=e;return await jl.Dv.rejectCreditRequest(t,s,{reason:a})},onSuccess:()=>{vl.success("Credit request rejected"),s.invalidateQueries(["creditRequests",t]),p(!1),g(null),y("")},onError:e=>{vl.error(e.message||"Failed to reject credit request")}});return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 p-6",children:[(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Credit Feature Management"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Ultimate control: players, staff, credit, overrides and more"})]}),(0,ta.jsxs)("div",{className:"flex gap-4 mb-6",children:[(0,ta.jsx)("button",{onClick:()=>r("players-list"),className:"px-6 py-3 font-semibold rounded-t-lg transition-colors ".concat("players-list"===l?"bg-gradient-to-r from-amber-600 to-amber-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Players List & Credit Management"}),(0,ta.jsx)("button",{onClick:()=>r("credit-requests"),className:"px-6 py-3 font-semibold rounded-t-lg transition-colors ".concat("credit-requests"===l?"bg-gradient-to-r from-amber-600 to-amber-500 text-white":"bg-slate-700 text-gray-300 hover:bg-slate-600"),children:"Credit Approval Requests"})]}),(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-amber-900/30 to-orange-900/30 rounded-lg p-6",children:["players-list"===l&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"All Players - Credit Management"}),j?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading players..."}):0===v.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No players found"}):(0,ta.jsx)("div",{className:"space-y-4",children:v.map(e=>(0,ta.jsx)("div",{className:"bg-slate-800/50 rounded-lg p-5 border border-slate-700",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-white font-semibold text-lg",children:e.name}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["ID: ",e.playerId||e.id]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Email: ",e.email]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Balance: ",(0,ta.jsxs)("span",{className:"font-bold text-green-400",children:["\u20b9",e.balance||0]})]}),e.creditEnabled&&(0,ta.jsxs)("div",{className:"mt-2 space-y-1",children:[(0,ta.jsxs)("p",{className:"text-blue-400 text-sm",children:["Credit Limit: ",(0,ta.jsxs)("span",{className:"font-bold",children:["\u20b9",e.creditLimit||0]})]}),(0,ta.jsxs)("p",{className:"text-yellow-400 text-sm",children:["Credit Used: ",(0,ta.jsxs)("span",{className:"font-bold",children:["\u20b9",e.creditUsed||0]})]}),(0,ta.jsxs)("p",{className:"text-green-400 text-sm",children:["Available Credit: ",(0,ta.jsxs)("span",{className:"font-bold",children:["\u20b9",(e.creditLimit||0)-(e.creditUsed||0)]})]})]})]}),(0,ta.jsxs)("div",{className:"flex flex-col gap-2",children:[e.creditEnabled?(0,ta.jsx)("button",{onClick:()=>{var t;u(e),x((null===(t=e.creditLimit)||void 0===t?void 0:t.toString())||""),d(!0)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-lg font-semibold transition-colors",children:"Edit Limit"}):(0,ta.jsx)("button",{onClick:()=>{u(e),i(!0)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded-lg font-semibold transition-colors",children:"Unlock Credit"}),e.creditEnabled&&(0,ta.jsx)("span",{className:"px-4 py-2 bg-green-600 text-white text-center rounded-lg font-semibold",children:"Credit Enabled"})]})]})},e.id))})]}),"credit-requests"===l&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-4",children:"Credit Approval Requests"}),N?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"Loading requests..."}):0===w.length?(0,ta.jsx)("div",{className:"text-gray-400 text-center py-8",children:"No pending credit requests"}):(0,ta.jsx)("div",{className:"space-y-4",children:w.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-800/50 rounded-lg p-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("h3",{className:"text-white font-semibold text-xl",children:e.playerName}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Player ID: ",e.playerId]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Requested Amount: ",(0,ta.jsxs)("span",{className:"font-bold text-yellow-400",children:["\u20b9",Number(e.amount).toLocaleString()]})]}),e.limit&&(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Credit Limit: ",(0,ta.jsxs)("span",{className:"font-bold text-blue-400",children:["\u20b9",Number(e.limit).toLocaleString()]})]}),(0,ta.jsxs)("p",{className:"text-gray-400 text-sm",children:["Requested: ",new Date(e.createdAt).toLocaleDateString()]}),e.notes&&(0,ta.jsxs)("p",{className:"text-gray-300 text-sm mt-2",children:["Notes: ",e.notes]})]}),(0,ta.jsx)("span",{className:"px-3 py-1 bg-yellow-600 text-white text-sm font-semibold rounded",children:"Pending"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>k.mutate({requestId:e.id,playerId:e.playerId}),disabled:k.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:k.isPending?"Approving...":"Approve Credit"}),(0,ta.jsx)("button",{onClick:()=>{g(e),p(!0)},disabled:P.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-3 rounded-lg font-semibold transition-colors disabled:opacity-50",children:"Reject"})]})]},e.id))})]})]}),n&&c&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Unlock Credit Feature"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["Do you want to unlock the credit feature for ",(0,ta.jsx)("span",{className:"font-semibold text-white",children:c.name}),"?"]}),(0,ta.jsx)("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:(0,ta.jsxs)("p",{className:"text-blue-400 text-sm",children:["Current Balance: \u20b9",c.balance||0]})}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Set Credit Limit (\u20b9) ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",value:m,onChange:e=>x(e.target.value),placeholder:"Enter credit limit",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{!m||parseFloat(m)<=0?vl.error("Please enter a valid credit limit"):S.mutate({playerId:c.id,limit:m})},disabled:S.isPending,className:"flex-1 bg-green-600 hover:bg-green-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:S.isPending?"Unlocking...":"Unlock & Set Limit"}),(0,ta.jsx)("button",{onClick:()=>{i(!1),u(null),x("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),o&&c&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Edit Credit Limit"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["Update credit limit for ",(0,ta.jsx)("span",{className:"font-semibold text-white",children:c.name})]}),(0,ta.jsxs)("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500 rounded-lg",children:[(0,ta.jsxs)("p",{className:"text-blue-400 text-sm",children:["Current Limit: \u20b9",c.creditLimit||0]}),(0,ta.jsxs)("p",{className:"text-blue-400 text-sm",children:["Credit Used: \u20b9",c.creditUsed||0]})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["New Credit Limit (\u20b9) ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("input",{type:"number",value:m,onChange:e=>x(e.target.value),placeholder:"Enter new credit limit",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{!m||parseFloat(m)<=0?vl.error("Please enter a valid credit limit"):C.mutate({playerId:c.id,limit:m})},disabled:C.isPending,className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:C.isPending?"Updating...":"Update Limit"}),(0,ta.jsx)("button",{onClick:()=>{d(!1),u(null),x("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})}),h&&b&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/60 flex items-center justify-center z-50 p-4",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 max-w-md w-full border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-2xl font-bold text-white mb-4",children:"Reject Credit Request"}),(0,ta.jsxs)("p",{className:"text-gray-300 mb-4",children:["Rejecting request from ",(0,ta.jsx)("span",{className:"font-semibold text-white",children:b.playerName})]}),(0,ta.jsxs)("div",{className:"mb-6",children:[(0,ta.jsxs)("label",{className:"block text-gray-300 mb-2 font-semibold",children:["Rejection Reason ",(0,ta.jsx)("span",{className:"text-red-400",children:"*"})]}),(0,ta.jsx)("textarea",{value:f,onChange:e=>y(e.target.value),placeholder:"Enter reason for rejection...",rows:4,className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500"})]}),(0,ta.jsxs)("div",{className:"flex gap-3",children:[(0,ta.jsx)("button",{onClick:()=>{f.trim()?P.mutate({requestId:b.id,reason:f}):vl.error("Please provide a reason for rejection")},disabled:P.isPending,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-2 rounded-lg font-semibold transition-colors disabled:opacity-50",children:P.isPending?"Rejecting...":"Confirm Rejection"}),(0,ta.jsx)("button",{onClick:()=>{p(!1),g(null),y("")},className:"flex-1 bg-slate-600 hover:bg-slate-700 text-white py-2 rounded-lg font-semibold transition-colors",children:"Cancel"})]})]})})]})}function pd(e){var t,s;let{clubId:l}=e;const[r,i]=(0,a.useState)(1),[o,d]=(0,a.useState)({search:"",category:"",staffRole:"",startDate:"",endDate:""}),[c,u]=(0,a.useState)({}),[m,x]=(0,a.useState)(!1),{data:h,isLoading:p,refetch:b}=ur({queryKey:["auditLogs",l,r,c],queryFn:async()=>{const e=new URLSearchParams((0,n.A)({page:r.toString(),limit:"10"},c));return await(0,jl.AT)("/clubs/".concat(l,"/audit-logs?").concat(e))},enabled:!!l}),{data:g}=ur({queryKey:["auditLogStats",l],queryFn:async()=>await(0,jl.AT)("/clubs/".concat(l,"/audit-logs/statistics?days=30")),enabled:!!l}),f=e=>{const t=new Date(e);return new Intl.DateTimeFormat("en-IN",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",timeZone:"Asia/Kolkata"}).format(t)};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 p-8",children:[(0,ta.jsxs)("div",{className:"mb-8",children:[(0,ta.jsx)("h1",{className:"text-4xl font-bold text-white mb-2",children:"Audit Logs & Backups"}),(0,ta.jsx)("p",{className:"text-gray-400",children:"Track all staff activities and system events"})]}),g&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white",children:[(0,ta.jsx)("div",{className:"flex items-center justify-between mb-2",children:(0,ta.jsx)(on,{className:"text-3xl opacity-75"})}),(0,ta.jsx)("div",{className:"text-3xl font-bold mb-1",children:g.totalActions}),(0,ta.jsx)("div",{className:"text-sm opacity-90",children:"Total Actions (30 days)"})]}),Object.entries(g.byCategory||{}).slice(0,3).map((e,t)=>{let[s,a]=e;return(0,ta.jsxs)("div",{className:"bg-gradient-to-br ".concat(0===t?"from-green-500 to-green-600":1===t?"from-orange-500 to-orange-600":"from-purple-500 to-purple-600"," rounded-xl p-6 text-white"),children:[(0,ta.jsx)("div",{className:"text-2xl font-bold mb-1",children:a}),(0,ta.jsx)("div",{className:"text-sm opacity-90 capitalize",children:s.replace(/_/g," ")})]},s)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 mb-6 border border-slate-700",children:[(0,ta.jsxs)("div",{className:"flex flex-wrap gap-4 items-end",children:[(0,ta.jsxs)("div",{className:"flex-1 min-w-[200px]",children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Search"}),(0,ta.jsxs)("div",{className:"relative",children:[(0,ta.jsx)(Cn,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,ta.jsx)("input",{type:"text",value:o.search,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{search:e.target.value})),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white placeholder-gray-400 focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:o.startDate,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{startDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:o.endDate,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{endDate:e.target.value})),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),(0,ta.jsxs)("button",{onClick:()=>x(!m),className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg flex items-center gap-2 transition-colors",children:[(0,ta.jsx)(yn,{}),"More Filters"]}),(0,ta.jsx)("button",{onClick:()=>{const e={};o.search&&(e.search=o.search),o.category&&(e.category=o.category),o.staffRole&&(e.staffRole=o.staffRole),o.startDate&&(e.startDate=o.startDate),o.endDate&&(e.endDate=o.endDate),u(e),i(1),x(!1)},className:"px-6 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg font-medium transition-colors",children:"Apply Filters"}),Object.keys(c).length>0&&(0,ta.jsx)("button",{onClick:()=>{d({search:"",category:"",staffRole:"",startDate:"",endDate:""}),u({}),i(1)},className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 text-white rounded-lg transition-colors",children:"Clear"})]}),m&&(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4 pt-4 border-t border-slate-700",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category"}),(0,ta.jsx)("select",{value:o.category,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{category:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[{value:"",label:"All Categories"},{value:"player_management",label:"Player Management"},{value:"financial",label:"Financial"},{value:"table_management",label:"Table Management"},{value:"staff_management",label:"Staff Management"},{value:"tournament",label:"Tournament"},{value:"bonus",label:"Bonus"},{value:"credit",label:"Credit"},{value:"fnb",label:"FNB"},{value:"shift",label:"Shift"},{value:"payroll",label:"Payroll"},{value:"override",label:"Override"},{value:"system",label:"System"}].map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Staff Role"}),(0,ta.jsx)("select",{value:o.staffRole,onChange:e=>d((0,n.A)((0,n.A)({},o),{},{staffRole:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:[{value:"",label:"All Roles"},{value:"SUPER_ADMIN",label:"Super Admin"},{value:"ADMIN",label:"Admin"},{value:"MANAGER",label:"Manager"},{value:"HR",label:"HR"},{value:"GRE",label:"GRE"},{value:"CASHIER",label:"Cashier"},{value:"DEALER",label:"Dealer"},{value:"KITCHEN_STAFF",label:"Kitchen Staff"},{value:"AFFILIATE",label:"Affiliate"}].map(e=>(0,ta.jsx)("option",{value:e.value,children:e.label},e.value))})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800/50 backdrop-blur-xl rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"Audit Log"}),p?(0,ta.jsx)("div",{className:"flex justify-center items-center py-12",children:(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-purple-500"})}):0===(null===h||void 0===h||null===(t=h.logs)||void 0===t?void 0:t.length)?(0,ta.jsxs)("div",{className:"text-center py-12 text-gray-400",children:[(0,ta.jsx)("p",{className:"text-lg",children:"No audit logs found"}),(0,ta.jsx)("p",{className:"text-sm mt-2",children:"Try adjusting your filters"})]}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"space-y-3 mb-6",children:null===h||void 0===h||null===(s=h.logs)||void 0===s?void 0:s.map(e=>(0,ta.jsx)("div",{className:"bg-slate-700/50 border border-slate-600 rounded-lg p-4 hover:bg-slate-700 transition-colors",children:(0,ta.jsxs)("div",{className:"flex justify-between items-start",children:[(0,ta.jsxs)("div",{className:"flex-1",children:[(0,ta.jsx)("p",{className:"text-white font-medium mb-1",children:e.description}),(0,ta.jsxs)("div",{className:"flex flex-wrap gap-3 text-sm text-gray-400",children:[(0,ta.jsxs)("span",{className:"flex items-center gap-1",children:[(0,ta.jsx)("span",{className:"font-medium text-purple-400",children:e.staffName}),(0,ta.jsxs)("span",{children:["(",e.staffRole.replace(/_/g," "),")"]})]}),e.targetName&&(0,ta.jsxs)("span",{children:["\u2192 ",(0,ta.jsx)("span",{className:"font-medium text-blue-400",children:e.targetName})]}),(0,ta.jsx)("span",{className:"text-gray-500",children:"\u2022"}),(0,ta.jsx)("span",{className:"capitalize text-green-400",children:e.actionCategory.replace(/_/g," ")})]})]}),(0,ta.jsx)("div",{className:"text-right text-sm text-gray-400 ml-4",children:f(e.createdAt)})]})},e.id))}),h&&h.totalPages>1&&(0,ta.jsxs)("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[(0,ta.jsxs)("div",{className:"text-gray-400 text-sm",children:["Showing page ",r," of ",h.totalPages," (",h.total," total logs)"]}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>i(e=>Math.max(1,e-1)),disabled:1===r,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Previous"}),(0,ta.jsx)("button",{onClick:()=>i(e=>Math.min(h.totalPages,e+1)),disabled:r===h.totalPages,className:"px-4 py-2 bg-slate-700 hover:bg-slate-600 disabled:opacity-50 disabled:cursor-not-allowed text-white rounded-lg transition-colors",children:"Next"})]})]})]})]})]})}function bd(){var e,t,s,l,r,i,o,d,c;const u=ue(),m=aa(),[x,h]=(0,a.useState)("Dashboard"),[p,b]=(0,a.useState)(null),[g,f]=(0,a.useState)(!1),[y,v]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=JSON.parse(localStorage.getItem("user")||"{}"),t=JSON.parse(localStorage.getItem("superadminuser")||"{}");e.id||t.userId?(e.mustResetPassword||t.mustResetPassword)&&f(!0):u("/super-admin/signin")},[u]);const{data:j=[],isLoading:w,error:N}=ur({queryKey:["superAdminClubs"],queryFn:jl.Dv.getClubs});(0,a.useEffect)(()=>{j&&j.length>0&&!p&&b(j[0].clubId)},[j,p]);const{data:S,isLoading:C}=ur({queryKey:["clubRevenue",p],queryFn:()=>jl.Dv.getClubRevenue(p),enabled:!!p}),{data:k,isLoading:P}=ur({queryKey:["clubPlayers",p],queryFn:()=>jl.Dv.getAllPlayers(p,{limit:100}),enabled:!!p}),{data:A=[],isLoading:I}=ur({queryKey:["pendingPlayers",p],queryFn:()=>jl.Dv.getPendingApprovalPlayers(p),enabled:!!p}),{data:D=[],isLoading:T}=ur({queryKey:["suspendedPlayers",p],queryFn:()=>jl.Dv.getSuspendedPlayers(p),enabled:!!p}),_=j.find(e=>e.clubId===p),E="suspended"===(null===_||void 0===_?void 0:_.status),R="killed"===(null===_||void 0===_?void 0:_.status),L=()=>{localStorage.clear(),u("/super-admin/signin")},O=e=>"\u20b9".concat((e||0).toLocaleString("en-IN")),M=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("superadminuser")||"{}");t.mustResetPassword=!1,localStorage.setItem("superadminuser",JSON.stringify(t)),f(!1),v({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),F=g&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=JSON.parse(localStorage.getItem("user")||"{}"),s=JSON.parse(localStorage.getItem("superadminuser")||"{}"),a=t.email||s.email;a?y.currentPassword&&y.newPassword&&y.confirmPassword?y.newPassword===y.confirmPassword?y.newPassword.length<8?vl.error("Password must be at least 8 characters"):M.mutate({email:a,currentPassword:y.currentPassword,newPassword:y.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:y.currentPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:y.newPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:y.confirmPassword,onChange:e=>v((0,n.A)((0,n.A)({},y),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:M.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:M.isLoading?"Resetting...":"Reset Password"})]})]})});return w?(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center",children:(0,ta.jsxs)("div",{className:"text-white text-center",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{className:"text-xl",children:"Loading clubs..."})]})})]}):N?(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center p-8",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-red-600 max-w-2xl w-full",children:[(0,ta.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,ta.jsx)("p",{className:"text-xl text-red-400 mb-2",children:"Error loading clubs"}),(0,ta.jsx)("p",{className:"text-gray-400 mb-8",children:N.message}),(0,ta.jsx)("button",{onClick:L,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):j&&0!==j.length?R?(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-red-900 flex items-center justify-center p-8",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-red-600 max-w-2xl w-full",children:[(0,ta.jsx)("div",{className:"text-red-400 text-6xl mb-4",children:"\ud83d\udeab"}),(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Club Not Found"}),(0,ta.jsx)("p",{className:"text-gray-400 mb-8",children:"This club has been removed by Master Admin."}),(0,ta.jsx)("button",{onClick:L,className:"bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):E?(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-orange-900 flex items-center justify-center p-8",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-orange-600 max-w-2xl w-full",children:[(0,ta.jsx)("div",{className:"text-orange-400 text-6xl mb-4",children:"\ud83d\udd12"}),(0,ta.jsx)("h1",{className:"text-3xl font-bold text-white mb-4",children:"Club Suspended"}),(0,ta.jsx)("p",{className:"text-gray-400 mb-4",children:"This club has been temporarily suspended by Master Admin."}),(null===_||void 0===_?void 0:_.subscriptionNotes)&&(0,ta.jsxs)("div",{className:"bg-orange-900/30 border border-orange-700 rounded-lg p-4 mb-8",children:[(0,ta.jsx)("p",{className:"text-sm text-orange-300 font-semibold mb-2",children:"Suspension Reason:"}),(0,ta.jsx)("p",{className:"text-gray-300",children:_.subscriptionNotes})]}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mb-8",children:"Please contact Master Admin for more information."}),(0,ta.jsx)("button",{onClick:L,className:"bg-orange-600 hover:bg-orange-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors",children:"Sign Out"})]})})]}):(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsxs)("div",{className:"flex min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900",children:[(0,ta.jsx)(xd,{activeItem:x,setActiveItem:h,clubs:j,selectedClubId:p,onClubChange:b,onSignOut:L}),(0,ta.jsxs)("main",{className:"flex-1 p-8 overflow-y-auto",children:["Dashboard"===x&&(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsx)("div",{className:"flex justify-between items-center",children:(0,ta.jsxs)("h1",{className:"text-3xl font-bold text-white",children:["Dashboard - ",(null===_||void 0===_?void 0:_.clubName)||"Loading..."]})}),C?(0,ta.jsxs)("div",{className:"text-white text-center py-12",children:[(0,ta.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-emerald-500 mx-auto mb-4"}),(0,ta.jsx)("p",{children:"Loading revenue data..."})]}):(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(e=S.previousDay)||void 0===e?void 0:e.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===S||void 0===S||null===(t=S.previousDay)||void 0===t?void 0:t.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-emerald-600",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Revenue"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-emerald-400",children:O((null===S||void 0===S||null===(s=S.currentDay)||void 0===s?void 0:s.revenue)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:(null===S||void 0===S||null===(l=S.currentDay)||void 0===l?void 0:l.date)||"-"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(r=S.currentDay)||void 0===r?void 0:r.rake)||0)}),(0,ta.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"10% of revenue"})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Rake"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(i=S.previousDay)||void 0===i?void 0:i.rake)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Previous Day Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(o=S.previousDay)||void 0===o?void 0:o.tips)||0)})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-gray-400 text-sm mb-2",children:"Today's Tips"}),(0,ta.jsx)("p",{className:"text-3xl font-bold text-white",children:O((null===S||void 0===S||null===(d=S.currentDay)||void 0===d?void 0:d.tips)||0)})]})]}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Players"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Total Players"}),(0,ta.jsx)("span",{className:"text-white font-semibold",children:P?"...":(null===k||void 0===k||null===(c=k.players)||void 0===c?void 0:c.length)||0})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Pending Approval"}),(0,ta.jsx)("span",{className:"text-yellow-400 font-semibold",children:I?"...":A.length})]}),(0,ta.jsxs)("div",{className:"flex justify-between",children:[(0,ta.jsx)("span",{className:"text-gray-400",children:"Suspended"}),(0,ta.jsx)("span",{className:"text-red-400 font-semibold",children:T?"...":D.length})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700",children:[(0,ta.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Quick Actions"}),(0,ta.jsxs)("div",{className:"space-y-2",children:[(0,ta.jsx)("button",{onClick:()=>h("Player Management"),className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white py-2 rounded-lg transition-colors",children:"Manage Players"}),(0,ta.jsxs)("button",{onClick:()=>h("Player Approval"),className:"w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded-lg transition-colors",children:["Review Approvals (",I?"...":A.length,")"]}),(0,ta.jsxs)("button",{onClick:()=>h("Player Suspension"),className:"w-full bg-orange-600 hover:bg-orange-500 text-white py-2 rounded-lg transition-colors",children:["Suspended Players (",T?"...":D.length,")"]})]})]})]})]}),"Player Management"===x&&(0,ta.jsx)(yr,{selectedClubId:p,playersData:k,playersLoading:P,pendingPlayers:A,pendingLoading:I,suspendedPlayers:D,suspendedLoading:T,onRefresh:()=>{m.invalidateQueries(["pendingPlayers",p]),m.invalidateQueries(["clubPlayers",p]),m.invalidateQueries(["suspendedPlayers",p])}}),"Tables & Waitlist"===x&&(0,ta.jsx)(jr,{selectedClubId:p}),"Club Buy-In"===x&&(0,ta.jsx)(bo,{selectedClubId:p}),"Credit Management"===x&&(0,ta.jsx)(hd,{selectedClubId:p}),"VIP Store"===x&&(0,ta.jsx)(Zo,{selectedClubId:p}),"Push Notifications"===x&&(0,ta.jsx)(Hr,{selectedClubId:p}),"Tournaments"===x&&(0,ta.jsx)(Qr,{selectedClubId:p}),"Staff Management"===x&&(0,ta.jsx)(Yi,{selectedClubId:p}),"Payroll Management"===x&&(0,ta.jsx)(ed,{selectedClubId:p}),"Bonus Management"===x&&(0,ta.jsx)(mo,{selectedClubId:p}),"Affiliates"===x&&(0,ta.jsx)(td,{selectedClubId:p}),"Financial Overrides"===x&&(0,ta.jsx)(go,{selectedClubId:p}),"FNB"===x&&p&&(0,ta.jsx)(sd,{clubId:p}),"Chat"===x&&p&&(0,ta.jsx)(En,{clubId:p}),"Reports & Analytics"===x&&p&&(0,ta.jsx)(ad,{clubId:p}),"Audit Logs"===x&&p&&(0,ta.jsx)(pd,{clubId:p}),"Rummy"===x&&p&&(0,ta.jsx)(Qn,{selectedClubId:p}),"Notifications"===x&&p&&(0,ta.jsx)(ei,{selectedClubId:p,recipientType:"staff"}),"System Control"===x&&p&&(0,ta.jsx)(rd,{clubId:p}),!["Dashboard","Player Management","Tables & Waitlist","Club Buy-In","Credit Management","VIP Store","Push Notifications","Tournaments","Staff Management","Payroll Management","Bonus Management","Affiliates","Financial Overrides","FNB","Chat","Reports & Analytics","Audit Logs","Rummy","System Control","Notifications"].includes(x)&&(0,ta.jsx)("div",{className:"text-white",children:(0,ta.jsx)("h1",{className:"text-3xl font-bold mb-6",children:x})})]})]})]}):(0,ta.jsxs)(ta.Fragment,{children:[F,(0,ta.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-emerald-900 flex items-center justify-center p-8",children:(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-12 text-center border border-slate-700 max-w-2xl w-full",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-6xl mb-6",children:"\ud83c\udfe2"}),(0,ta.jsx)("h2",{className:"text-3xl font-bold text-white mb-4",children:"No Clubs Created Yet"}),(0,ta.jsx)("p",{className:"text-gray-400 text-lg mb-8",children:"You don't have any clubs assigned to you. Please contact the Master Admin to create a club for your tenant."}),(0,ta.jsx)("div",{className:"bg-slate-700 rounded-lg p-6 border border-slate-600 mb-8",children:(0,ta.jsx)("p",{className:"text-sm text-gray-300",children:"\ud83d\udcde Need help? Contact Master Admin to set up your first club and start managing players, tables, and tournaments."})}),(0,ta.jsx)("button",{onClick:L,className:"w-full max-w-xs mx-auto bg-red-600 hover:bg-red-500 text-white px-6 py-3 rounded-lg font-semibold transition-colors shadow-lg",children:"Sign Out"})]})})]})}function gd(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null,affiliateCode:i=null}=e;const[o,d]=(0,a.useState)(!1),[c,u]=(0,a.useState)(window.innerWidth<1024),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;u(e),e||d(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(o&&c){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||d(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[o,c]);const b=localStorage.getItem("clubId"),{data:g}=ur({queryKey:["club",b],queryFn:()=>jl.Od.getClub(b),enabled:!!b}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=JSON.parse(localStorage.getItem("staffuser")||"{}"),v=f.email||y.email||"affiliate@pokerroom.com",j=f.displayName||y.displayName||"Affiliate",w=i||f.affiliateCode,N=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("staffuser",JSON.stringify(t))),x(!1),p({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),S=m&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v?h.currentPassword&&h.newPassword&&h.confirmPassword?h.newPassword===h.confirmPassword?h.newPassword.length<8?vl.error("Password must be at least 8 characters"):N.mutate({email:v,currentPassword:h.currentPassword,newPassword:h.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:h.currentPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:h.newPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:h.confirmPassword,onChange:e=>p((0,n.A)((0,n.A)({},h),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:N.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:N.isLoading?"Resetting...":"Reset Password"})]})]})}),document.body);return(0,ta.jsxs)(ta.Fragment,{children:[c&&(0,ta.jsx)("button",{onClick:()=>d(!o),className:"sidebar-toggle fixed top-4 left-4 z-[100] p-2 rounded-md text-white bg-slate-700 lg:hidden",children:(0,ta.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:o?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,ta.jsx)("aside",{className:"sidebar-container fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-br from-gray-800 to-gray-900 text-white shadow-lg transform ".concat(c&&!o?"-translate-x-full":"translate-x-0"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,ta.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,ta.jsxs)("div",{className:"px-6 py-8",children:[(0,ta.jsx)("div",{className:"text-center mb-10",children:(0,ta.jsx)("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Affiliate Portal"})}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-4 mb-8 shadow-inner border border-slate-600 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>x(!0),children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ta.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-lg font-bold",children:j.charAt(0).toUpperCase()}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"font-semibold text-white",children:j}),(0,ta.jsx)("p",{className:"text-sm text-gray-300",children:"Affiliate"})]})]}),b&&(0,ta.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-600 space-y-2",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"Club Code:"}),(0,ta.jsx)("p",{className:"font-mono text-sm text-yellow-400",children:(null===g||void 0===g?void 0:g.code)||"N/A"})]}),w&&(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"Affiliate Code:"}),(0,ta.jsx)("p",{className:"font-mono text-sm text-purple-400",children:w})]})]})]}),(0,ta.jsx)("nav",{className:"space-y-2",children:l.map(e=>(0,ta.jsx)("button",{onClick:()=>{s(e),c&&d(!1)},className:"flex items-center w-full px-4 py-3 rounded-lg text-left font-medium transition-colors duration-200\n                    ".concat(t===e?"bg-purple-600 text-white shadow-md":"text-gray-300 hover:bg-slate-700 hover:text-white"),children:e},e))})]}),(0,ta.jsx)("div",{className:"px-6 pb-8",children:(0,ta.jsxs)("button",{onClick:r,className:"flex items-center justify-center w-full px-4 py-3 rounded-lg font-medium text-red-400 bg-red-900/20 hover:bg-red-900/40 transition-colors duration-200",children:[(0,ta.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})}),S]})}function fd(){const[e,t]=(0,a.useState)("Referral Players"),s=ue(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),m=JSON.parse(localStorage.getItem("affiliateuser")||"{}"),[x,h]=(0,a.useState)(null),[p,b]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(!d)return;const e=c.id||c.userId||u.userId||m.userId;if(e)try{const t=await jl.Yt.getAffiliates(d),s=(null===t||void 0===t?void 0:t.affiliates)||t||[],a=s.find(t=>{var s;if(t.userId===e)return!0;if(t.user_id===e)return!0;if((null===(s=t.user)||void 0===s?void 0:s.id)===e)return!0;if(t.user&&"object"===typeof t.user&&t.user.id===e)return!0;const a=c.email||u.email||m.email;return!(!a||t.email!==a)});if(a){h(a.id),b(a.code);const e=(0,n.A)((0,n.A)({},c),{},{affiliateCode:a.code,affiliateId:a.id});localStorage.setItem("user",JSON.stringify(e))}else if(1===s.length){const e=s[0];h(e.id),b(e.code);const t=(0,n.A)((0,n.A)({},c),{},{affiliateCode:e.code,affiliateId:e.id});localStorage.setItem("user",JSON.stringify(t))}else console.error("Affiliate not found for userId:",e),console.error("Available affiliates:",s.map(e=>({id:e.id,userId:e.userId,user_id:e.user_id,user:e.user?{id:e.user.id,email:e.user.email}:null,code:e.code})))}catch(t){console.error("Error fetching affiliate data:",t)}else console.error("No user ID found")})()},[d,c.id,c.userId,u.userId,m.userId]),(0,a.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&r(!0)},[]);const g=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=(0,n.A)((0,n.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,n.A)((0,n.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),r(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),f=l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?i.currentPassword&&i.newPassword&&i.confirmPassword?i.newPassword===i.confirmPassword?i.newPassword.length<8?vl.error("Password must be at least 8 characters"):g.mutate({email:t,currentPassword:i.currentPassword,newPassword:i.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:i.currentPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:i.newPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:g.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:g.isLoading?"Resetting...":"Reset Password"})]})]})}),y=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(gd,{activeItem:e,setActiveItem:t,menuItems:["Referral Players","Transactions"],onSignOut:y,affiliateCode:p}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Affiliate Portal - ",e]}),(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage your referrals and transactions"})]}),(0,ta.jsx)("button",{onClick:y,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),d&&!x&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Loading affiliate information..."})}),"Referral Players"===e&&d&&x&&(0,ta.jsx)(yd,{clubId:d,affiliateId:x}),"Transactions"===e&&d&&x&&(0,ta.jsx)(vd,{clubId:d,affiliateId:x})]})})]}),f]})}function yd(e){let{clubId:t,affiliateId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({search:"",kycStatus:"",startDate:"",endDate:""}),{data:d,isLoading:c}=ur({queryKey:["affiliate-referrals",t,s,l,i],queryFn:()=>jl.Yt.getAffiliateReferrals(t,s,{search:i.search,kycStatus:i.kycStatus,startDate:i.startDate,endDate:i.endDate}),enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})),m=e=>{const t={pending:{bg:"bg-yellow-100",text:"text-yellow-800",label:"Pending"},approved:{bg:"bg-green-100",text:"text-green-800",label:"Approved"},rejected:{bg:"bg-red-100",text:"text-red-800",label:"Rejected"},verified:{bg:"bg-blue-100",text:"text-blue-800",label:"Verified"}}[null===e||void 0===e?void 0:e.toLowerCase()]||{bg:"bg-gray-100",text:"text-gray-800",label:e||"Unknown"};return(0,ta.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat(t.bg," ").concat(t.text),children:t.label})};if(c)return(0,ta.jsx)("div",{className:"text-center py-8",children:"Loading referral players..."});const x=(null===d||void 0===d?void 0:d.players)||[],h=Math.ceil(x.length/10),p=x.slice(10*(l-1),10*l);return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Referral Players"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Search by Name/Email"}),(0,ta.jsx)("input",{type:"text",value:i.search,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{search:e.target.value})),placeholder:"Search...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"KYC Status"}),(0,ta.jsxs)("select",{value:i.kycStatus,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{kycStatus:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"All"}),(0,ta.jsx)("option",{value:"pending",children:"Pending"}),(0,ta.jsx)("option",{value:"approved",children:"Approved"}),(0,ta.jsx)("option",{value:"rejected",children:"Rejected"}),(0,ta.jsx)("option",{value:"verified",children:"Verified"})]})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"From Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"To Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,ta.jsx)("div",{className:"mb-4 flex justify-end",children:(0,ta.jsx)("button",{onClick:()=>o({search:"",kycStatus:"",startDate:"",endDate:""}),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})}),p.length>0?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Name"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Email"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Phone"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"KYC Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Spent"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Commission"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Created"})]})}),(0,ta.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:p.map(e=>{return(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.name}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.email}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:e.phoneNumber||"-"}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:m(e.kycStatus)}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:u(e.totalSpent||0)}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.totalCommission||0)}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")})]},e.id);var t})})]})}),(0,ta.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",h||1," (Showing ",p.length," of ",x.length," players)"]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(h||1,e+1)),disabled:l===(h||1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No referral players found."})]})}function vd(e){let{clubId:t,affiliateId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({search:"",startDate:"",endDate:""}),{data:d,isLoading:c}=ur({queryKey:["affiliate-transactions",t,s,l,i],queryFn:()=>jl.Yt.getAffiliateTransactions(t,(0,n.A)({page:l,limit:10,affiliateId:s},i)),enabled:!!t&&!!s});if(c)return(0,ta.jsx)("div",{className:"text-center py-8",children:"Loading transactions..."});const u=(null===d||void 0===d?void 0:d.transactions)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Transactions"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Search"}),(0,ta.jsx)("input",{type:"text",value:i.search,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{search:e.target.value})),placeholder:"Search...",className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]})]}),(0,ta.jsx)("div",{className:"mb-4 flex justify-end",children:(0,ta.jsx)("button",{onClick:()=>o({search:"",startDate:"",endDate:""}),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})}),u.length>0?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Type"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Amount"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Notes"})]})}),(0,ta.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:u.map(e=>{return(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.type||"Payment"}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:(s=e.amount||0,"\u20b9".concat((s||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})))}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.date||e.createdAt,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ta.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Completed"===e.status||"Paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status||"Pending"})}),(0,ta.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.notes||e.description||"-"})]},e.id);var t,s})})]})}),(0,ta.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",m]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(m,e+1)),disabled:l===m,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No transactions found."})]})}function jd(e){let{activeItem:t,setActiveItem:s,menuItems:l=[],onSignOut:r=null}=e;const[i,o]=(0,a.useState)(!1),[d,c]=(0,a.useState)(window.innerWidth<1024),[u,m]=(0,a.useState)(!1),[x,h]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),p=localStorage.getItem("clubId"),{data:b}=ur({queryKey:["unreadNotificationCount",p,"staff"],queryFn:()=>jl.Dv.getUnreadNotificationCount(p,"staff"),enabled:!!p,refetchInterval:3e4});(0,a.useEffect)(()=>{const e=()=>{const e=window.innerWidth<1024;c(e),e||o(!1)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.useEffect)(()=>{if(i&&d){const e=e=>{e.target.closest(".sidebar-container")||e.target.closest(".sidebar-toggle")||o(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)}},[i,d]);const{data:g}=ur({queryKey:["club",p],queryFn:()=>jl.Od.getClub(p),enabled:!!p}),f=JSON.parse(localStorage.getItem("user")||"{}"),y=JSON.parse(localStorage.getItem("staffuser")||"{}"),v=f.email||y.email||"dealer@pokerroom.com",j=f.displayName||y.displayName||"Dealer",w=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=JSON.parse(localStorage.getItem("user")||"{}");e.mustResetPassword=!1,localStorage.setItem("user",JSON.stringify(e));const t=JSON.parse(localStorage.getItem("staffuser")||"{}");t.userId&&(t.mustResetPassword=!1,localStorage.setItem("staffuser",JSON.stringify(t))),m(!1),h({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),N=u&&(0,br.createPortal)((0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault(),v?x.currentPassword&&x.newPassword&&x.confirmPassword?x.newPassword===x.confirmPassword?x.newPassword.length<8?vl.error("Password must be at least 8 characters"):w.mutate({email:v,currentPassword:x.currentPassword,newPassword:x.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:x.currentPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:x.newPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:x.confirmPassword,onChange:e=>h((0,n.A)((0,n.A)({},x),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:w.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:w.isLoading?"Resetting...":"Reset Password"})]})]})}),document.body);return(0,ta.jsxs)(ta.Fragment,{children:[d&&(0,ta.jsx)("button",{onClick:()=>o(!i),className:"sidebar-toggle fixed top-4 left-4 z-[100] p-2 rounded-md text-white bg-slate-700 lg:hidden",children:(0,ta.jsx)("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:i?(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"}):(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 6h16M4 12h16M4 18h16"})})}),(0,ta.jsx)("aside",{className:"sidebar-container fixed inset-y-0 left-0 z-50 w-64 bg-gradient-to-br from-gray-800 to-gray-900 text-white shadow-lg transform ".concat(d&&!i?"-translate-x-full":"translate-x-0"," lg:translate-x-0 transition-transform duration-300 ease-in-out"),children:(0,ta.jsxs)("div",{className:"flex h-full flex-col justify-between",children:[(0,ta.jsxs)("div",{className:"px-6 py-8",children:[(0,ta.jsx)("div",{className:"text-center mb-10",children:(0,ta.jsx)("h1",{className:"text-3xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-600",children:"Dealer Portal"})}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-xl p-4 mb-8 shadow-inner border border-slate-600 cursor-pointer hover:bg-slate-600 transition-colors",onClick:()=>m(!0),children:[(0,ta.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,ta.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-purple-500 flex items-center justify-center text-lg font-bold",children:j.charAt(0).toUpperCase()}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("p",{className:"font-semibold text-white",children:j}),(0,ta.jsx)("p",{className:"text-sm text-gray-300",children:"Dealer"})]})]}),p&&(0,ta.jsxs)("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[(0,ta.jsx)("p",{className:"text-xs text-gray-400",children:"Club Code:"}),(0,ta.jsx)("p",{className:"font-mono text-sm text-yellow-400",children:(null===g||void 0===g?void 0:g.code)||"N/A"})]})]}),(0,ta.jsx)("nav",{className:"space-y-2",children:l.map(e=>(0,ta.jsx)("button",{onClick:()=>{s(e),d&&o(!1)},className:"flex items-center w-full px-4 py-3 rounded-lg text-left font-medium transition-colors duration-200\n                    ".concat(t===e?"bg-purple-600 text-white shadow-md":"text-gray-300 hover:bg-slate-700 hover:text-white"),children:(0,ta.jsxs)("span",{className:"flex items-center justify-between w-full",children:[(0,ta.jsx)("span",{children:e}),"Notifications"===e&&(null===b||void 0===b?void 0:b.unreadCount)>0&&(0,ta.jsx)("span",{className:"ml-2 bg-red-600 text-white text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center animate-pulse flex-shrink-0",children:b.unreadCount>9?"9+":b.unreadCount})]})},e))})]}),(0,ta.jsx)("div",{className:"px-6 pb-8",children:(0,ta.jsxs)("button",{onClick:r,className:"flex items-center justify-center w-full px-4 py-3 rounded-lg font-medium text-red-400 bg-red-900/20 hover:bg-red-900/40 transition-colors duration-200",children:[(0,ta.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,ta.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Sign Out"]})})]})}),N]})}function wd(){const[e,t]=(0,a.useState)("Shift Timings"),s=ue(),[l,r]=(0,a.useState)(!1),[i,o]=(0,a.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),d=localStorage.getItem("clubId"),c=JSON.parse(localStorage.getItem("user")||"{}"),u=JSON.parse(localStorage.getItem("staffuser")||"{}"),[m,x]=(0,a.useState)(null);(0,a.useEffect)(()=>{(async()=>{if(d&&c.email)try{const e=await jl.staffAPI.getAllStaffMembers(d),t=((null===e||void 0===e?void 0:e.staff)||e||[]).find(e=>e.email===c.email&&"Dealer"===e.role);t&&x(t.id)}catch(e){console.error("Error fetching dealer data:",e)}})()},[d,c.email]),(0,a.useEffect)(()=>{(c.mustResetPassword||u.mustResetPassword)&&r(!0)},[]);const h=pr({mutationFn:async e=>{const t=await fetch("".concat("http://localhost:3333/api","/auth/reset-password"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok){const e=await t.json();throw new Error(e.message||"Failed to reset password")}return t.json()},onSuccess:()=>{vl.success("Password reset successfully!");const e=(0,n.A)((0,n.A)({},c),{},{mustResetPassword:!1});localStorage.setItem("user",JSON.stringify(e));const t=(0,n.A)((0,n.A)({},u),{},{mustResetPassword:!1});localStorage.setItem("staffuser",JSON.stringify(t)),r(!1),o({currentPassword:"",newPassword:"",confirmPassword:""})},onError:e=>{vl.error(e.message||"Failed to reset password")}}),p=l&&(0,ta.jsx)("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-[200]",children:(0,ta.jsxs)("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-xl p-8 max-w-md w-full border border-emerald-600 shadow-2xl",children:[(0,ta.jsxs)("div",{className:"text-center mb-6",children:[(0,ta.jsx)("div",{className:"text-yellow-400 text-5xl mb-3",children:"\ud83d\udd12"}),(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white",children:"Password Reset Required"}),(0,ta.jsx)("p",{className:"text-gray-400 mt-2",children:"Please set a new password to continue"})]}),(0,ta.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=c.email||u.email;t?i.currentPassword&&i.newPassword&&i.confirmPassword?i.newPassword===i.confirmPassword?i.newPassword.length<8?vl.error("Password must be at least 8 characters"):h.mutate({email:t,currentPassword:i.currentPassword,newPassword:i.newPassword}):vl.error("New passwords do not match"):vl.error("All fields are required"):vl.error("User email not found. Please login again.")},className:"space-y-4",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Current Password"}),(0,ta.jsx)("input",{type:"password",value:i.currentPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{currentPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter temporary password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"New Password"}),(0,ta.jsx)("input",{type:"password",value:i.newPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{newPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Enter new password",required:!0})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Confirm New Password"}),(0,ta.jsx)("input",{type:"password",value:i.confirmPassword,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{confirmPassword:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-white focus:ring-2 focus:ring-emerald-500 focus:border-transparent",placeholder:"Confirm new password",required:!0})]}),(0,ta.jsx)("button",{type:"submit",disabled:h.isLoading,className:"w-full bg-emerald-600 hover:bg-emerald-500 text-white font-medium py-3 rounded-lg transition-colors disabled:opacity-50",children:h.isLoading?"Resetting...":"Reset Password"})]})]})}),b=()=>{localStorage.removeItem("user"),localStorage.removeItem("staffuser"),localStorage.removeItem("clubId"),s("/login")};return(0,ta.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-gray-950 to-black text-white font-sans",children:[(0,ta.jsxs)("div",{className:"flex",children:[(0,ta.jsx)(jd,{activeItem:e,setActiveItem:t,menuItems:["Shift Timings","Notifications","Transactions","Tips","Tip Settings","Leave Management","Chat"],onSignOut:b}),(0,ta.jsx)("main",{className:"flex-1 lg:ml-0 min-w-0",children:(0,ta.jsxs)("div",{className:"mx-auto max-w-[1400px] px-4 sm:px-6 py-6 sm:py-10 space-y-8",children:[(0,ta.jsxs)("header",{className:"bg-gradient-to-r from-purple-600 via-blue-500 to-indigo-400 p-6 rounded-xl shadow-md flex justify-between items-center mt-16 lg:mt-0",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsxs)("h1",{className:"text-2xl font-bold text-white",children:["Dealer Portal - ",e]}),(0,ta.jsx)("p",{className:"text-gray-200 mt-1",children:"Manage your shifts, tips, and transactions"})]}),(0,ta.jsx)("button",{onClick:b,className:"bg-red-600 hover:bg-red-500 text-white font-semibold px-4 py-2 rounded-lg shadow",children:"Sign Out"})]}),!d&&(0,ta.jsx)("div",{className:"bg-yellow-900/30 border border-yellow-500/50 rounded-lg p-4 text-yellow-100",children:(0,ta.jsx)("p",{className:"font-medium",children:"Please select a club to view your information."})}),"Shift Timings"===e&&d&&m&&(0,ta.jsx)(Nd,{clubId:d,dealerId:m}),"Transactions"===e&&d&&m&&(0,ta.jsx)(Sd,{clubId:d,dealerId:m}),"Tips"===e&&d&&m&&(0,ta.jsx)(Cd,{clubId:d,dealerId:m}),"Tip Settings"===e&&d&&m&&(0,ta.jsx)(kd,{clubId:d,dealerId:m}),"Chat"===e&&d&&(0,ta.jsx)(En,{clubId:d,hidePlayerChat:!0}),"Notifications"===e&&d&&(0,ta.jsx)(ei,{selectedClubId:d,recipientType:"staff"}),"Leave Management"===e&&d&&(0,ta.jsx)(zi,{clubId:d,userRole:"DEALER"})]})})]}),p]})}function Nd(e){let{clubId:t,dealerId:s}=e;const[l,r]=(0,a.useState)(new Date),[n,i]=(0,a.useState)("week"),o=()=>{const e=new Date(l),t=new Date(l);if("week"===n){const s=e.getDay(),a=e.getDate()-s+(0===s?-6:1);e.setDate(a),t.setDate(e.getDate()+6)}else e.setDate(1),t.setMonth(t.getMonth()+1),t.setDate(0);return{startDate:e.toISOString().split("T")[0],endDate:t.toISOString().split("T")[0]}},{data:d,isLoading:c}=ur({queryKey:["shifts",t,s,l,n],queryFn:()=>{const{startDate:e,endDate:a}=o();return jl.iw.getShifts(t,{startDate:e,endDate:a,staffId:s})},enabled:!!t&&!!s}),u=e=>{const t=new Date(l);"week"===n?t.setDate(t.getDate()+7*e):t.setMonth(t.getMonth()+e),r(t)},m=(null===d||void 0===d?void 0:d.shifts)||[],x=()=>{const e=[],{startDate:t}=o(),s=new Date(t);for(let a=0;a<7;a++){const t=new Date(s);t.setDate(s.getDate()+a),e.push(t)}return e},h=e=>new Date(e).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0}),p=e=>e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric"});return c?(0,ta.jsx)("div",{className:"text-white text-center py-8",children:"Loading shifts..."}):(0,ta.jsxs)("div",{className:"space-y-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-lg p-4 flex items-center justify-between",children:[(0,ta.jsx)("button",{onClick:()=>u(-1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"\u2190 Previous"}),(0,ta.jsxs)("div",{className:"flex items-center gap-4",children:[(0,ta.jsx)("h2",{className:"text-xl font-bold text-white",children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),(0,ta.jsx)("button",{onClick:()=>r(new Date),className:"bg-slate-700 hover:bg-slate-600 text-white px-3 py-1 rounded-lg text-sm transition-colors",children:"Today"}),(0,ta.jsxs)("div",{className:"flex gap-2",children:[(0,ta.jsx)("button",{onClick:()=>i("week"),className:"px-4 py-2 rounded-lg text-sm font-semibold transition-colors ".concat("week"===n?"bg-purple-600 text-white":"bg-slate-700 text-gray-300"),children:"Week"}),(0,ta.jsx)("button",{onClick:()=>i("month"),className:"px-4 py-2 rounded-lg text-sm font-semibold transition-colors ".concat("month"===n?"bg-purple-600 text-white":"bg-slate-700 text-gray-300"),children:"Month"})]})]}),(0,ta.jsx)("button",{onClick:()=>u(1),className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors",children:"Next \u2192"})]}),"week"===n?(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg overflow-hidden",children:(0,ta.jsxs)("div",{className:"grid grid-cols-8 gap-px bg-slate-700",children:[(0,ta.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold",children:"Date"}),x().map(e=>(0,ta.jsx)("div",{className:"bg-slate-900 p-3 text-white font-semibold text-center",children:p(e)},e.toISOString())),(0,ta.jsx)("div",{className:"bg-slate-800 p-3 text-gray-300",children:"Shifts"}),x().map(e=>{const t=(e=>{const t=e.toISOString().split("T")[0];return m.filter(e=>new Date(e.shiftDate).toISOString().split("T")[0]===t)})(e);return(0,ta.jsx)("div",{className:"bg-slate-800 p-3 min-h-[100px]",children:t.length>0?(0,ta.jsx)("div",{className:"space-y-2",children:t.map(e=>(0,ta.jsxs)("div",{className:"bg-purple-600/20 border border-purple-500/50 rounded p-2 text-sm",children:[(0,ta.jsxs)("div",{className:"text-purple-300 font-semibold",children:[h(e.shiftStartTime)," - ",h(e.shiftEndTime)]}),e.isOffDay&&(0,ta.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:"Off Day"}),e.notes&&(0,ta.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:e.notes})]},e.id))}):(0,ta.jsx)("div",{className:"text-gray-500 text-sm text-center",children:"No shifts"})},e.toISOString())})]})}):(0,ta.jsx)("div",{className:"bg-slate-800 rounded-lg p-6",children:(0,ta.jsxs)("div",{className:"space-y-4",children:[m.map(e=>(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4 flex justify-between items-center",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("div",{className:"text-white font-semibold",children:new Date(e.shiftDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),(0,ta.jsxs)("div",{className:"text-gray-300 text-sm mt-1",children:[h(e.shiftStartTime)," - ",h(e.shiftEndTime)]}),e.notes&&(0,ta.jsx)("div",{className:"text-gray-400 text-xs mt-1",children:e.notes})]}),e.isOffDay&&(0,ta.jsx)("span",{className:"bg-yellow-600 text-white px-3 py-1 rounded-full text-xs font-semibold",children:"Off Day"})]},e.id)),0===m.length&&(0,ta.jsx)("div",{className:"text-center text-gray-400 py-8",children:"No shifts scheduled for this period"})]})})]})}function Sd(e){let{clubId:t,dealerId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({startDate:"",endDate:""}),{data:d,isLoading:c}=ur({queryKey:["dealer-transactions",t,s,l,i],queryFn:async()=>{const e=await jl.bM.getAllTransactions(t,{category:"staff",subCategory:"dealer-cashout",page:l,limit:10}),a=await jl.oA.getSalaryPayments(t,(0,n.A)({page:l,limit:10,staffId:s},i)),r=await jl.KG.getStaffBonuses(t,(0,n.A)({page:l,limit:10,staffId:s},i)),o=[...e.transactions||[],...(a.payments||[]).map(e=>({id:e.id,type:"Salary Payment",amount:e.netAmount,date:e.paymentDate||e.createdAt,status:e.status,notes:e.notes})),...(r.bonuses||[]).map(e=>({id:e.id,type:"Staff Bonus",amount:e.bonusAmount,date:e.processedAt||e.createdAt,status:"Completed",notes:e.reason}))].sort((e,t)=>new Date(t.date)-new Date(e.date));return{transactions:o.slice(10*(l-1),10*l),total:o.length,totalPages:Math.ceil(o.length/10)}},enabled:!!t&&!!s});if(c)return(0,ta.jsx)("div",{className:"text-center py-8",children:"Loading transactions..."});const u=(null===d||void 0===d?void 0:d.transactions)||[],m=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Transactions"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsx)("div",{className:"flex items-end",children:(0,ta.jsx)("button",{onClick:()=>o({startDate:"",endDate:""}),className:"w-full bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})})]}),u.length>0?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Type"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Amount"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Notes"})]})}),(0,ta.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:u.map(e=>{return(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-white",children:e.type}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:(s=e.amount,"\u20b9".concat((s||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})))}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.date,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ta.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Completed"===e.status||"PROCESSED"===e.status||"Paid"===e.status?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,ta.jsx)("td",{className:"px-6 py-4 text-sm text-gray-300",children:e.notes||"-"})]},e.id);var t,s})})]})}),(0,ta.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",m]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(m,e+1)),disabled:l===m,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No transactions found."})]})}function Cd(e){let{clubId:t,dealerId:s}=e;const[l,r]=(0,a.useState)(1),[i,o]=(0,a.useState)({startDate:"",endDate:"",status:""}),{data:d,isLoading:c}=ur({queryKey:["dealer-tips",t,s,l,i],queryFn:()=>jl.oA.getDealerTips(t,(0,n.A)({page:l,limit:10,dealerId:s},i)),enabled:!!t&&!!s}),u=e=>"\u20b9".concat((e||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2}));if(c)return(0,ta.jsx)("div",{className:"text-center py-8",children:"Loading tips..."});const m=(null===d||void 0===d?void 0:d.tips)||[],x=(null===d||void 0===d?void 0:d.totalPages)||1;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Tips"}),(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Start Date"}),(0,ta.jsx)("input",{type:"date",value:i.startDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{startDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"End Date"}),(0,ta.jsx)("input",{type:"date",value:i.endDate,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{endDate:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg"})]}),(0,ta.jsxs)("div",{children:[(0,ta.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Status"}),(0,ta.jsxs)("select",{value:i.status,onChange:e=>o((0,n.A)((0,n.A)({},i),{},{status:e.target.value})),className:"w-full px-4 py-2 bg-slate-700 text-white rounded-lg",children:[(0,ta.jsx)("option",{value:"",children:"All"}),(0,ta.jsx)("option",{value:"Pending",children:"Pending"}),(0,ta.jsx)("option",{value:"Processed",children:"Processed"}),(0,ta.jsx)("option",{value:"Paid",children:"Paid"})]})]}),(0,ta.jsx)("div",{className:"flex items-end",children:(0,ta.jsx)("button",{onClick:()=>o({startDate:"",endDate:"",status:""}),className:"w-full bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg font-semibold",children:"Clear Filters"})})]}),m.length>0?(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("div",{className:"overflow-x-auto",children:(0,ta.jsxs)("table",{className:"min-w-full divide-y divide-slate-700",children:[(0,ta.jsx)("thead",{className:"bg-slate-700",children:(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Date"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Total Tips"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"My Share"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Share %"}),(0,ta.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase",children:"Status"})]})}),(0,ta.jsx)("tbody",{className:"bg-slate-800 divide-y divide-slate-700",children:m.map(e=>{return(0,ta.jsxs)("tr",{children:[(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:(t=e.tipDate,t?new Date(t).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric"}):"-")}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white font-semibold",children:u(e.totalTips)}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-green-400 font-semibold",children:u(e.dealerShareAmount)}),(0,ta.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-300",children:[e.dealerSharePercentage,"%"]}),(0,ta.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:(0,ta.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("Paid"===e.status?"bg-green-100 text-green-800":"Processed"===e.status?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"),children:e.status})})]},e.id);var t})})]})}),(0,ta.jsxs)("div",{className:"mt-6 flex justify-between items-center",children:[(0,ta.jsx)("button",{onClick:()=>r(e=>Math.max(1,e-1)),disabled:1===l,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Previous"}),(0,ta.jsxs)("span",{className:"text-gray-300",children:["Page ",l," of ",x]}),(0,ta.jsx)("button",{onClick:()=>r(e=>Math.min(x,e+1)),disabled:l===x,className:"bg-slate-700 hover:bg-slate-600 text-white px-4 py-2 rounded-lg disabled:opacity-50",children:"Next"})]})]}):(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No tips found."})]})}function kd(e){let{clubId:t,dealerId:s}=e;const{data:a,isLoading:l}=ur({queryKey:["tip-settings",t,s],queryFn:()=>jl.oA.getTipSettings(t,s),enabled:!!t&&!!s});if(l)return(0,ta.jsx)("div",{className:"text-center py-8",children:"Loading tip settings..."});const r=(null===a||void 0===a?void 0:a.settings)||a;return(0,ta.jsxs)("div",{className:"bg-slate-800 rounded-xl p-6 border border-slate-700 shadow-xl",children:[(0,ta.jsx)("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Tip Settings"}),(0,ta.jsx)("div",{className:"bg-blue-900/20 border border-blue-500/50 rounded-lg p-4 mb-6",children:(0,ta.jsx)("p",{className:"text-blue-300 text-sm",children:"\ud83d\udca1 These settings are configured by the administrator. Contact your manager if you need changes."})}),r?(0,ta.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Tip Distribution"}),(0,ta.jsxs)("div",{className:"space-y-3",children:[(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Club Hold:"}),(0,ta.jsxs)("span",{className:"text-white font-semibold",children:[r.clubHoldPercentage||15,"%"]})]}),(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"My Share:"}),(0,ta.jsxs)("span",{className:"text-green-400 font-semibold",children:[r.dealerSharePercentage||85,"%"]})]}),(0,ta.jsxs)("div",{className:"flex justify-between items-center",children:[(0,ta.jsx)("span",{className:"text-gray-300",children:"Floor Manager:"}),(0,ta.jsxs)("span",{className:"text-white font-semibold",children:[r.floorManagerPercentage||5,"%"]})]})]})]}),(0,ta.jsxs)("div",{className:"bg-slate-700 rounded-lg p-4",children:[(0,ta.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Settings Info"}),(0,ta.jsx)("div",{className:"space-y-3",children:(0,ta.jsxs)("div",{children:[(0,ta.jsx)("span",{className:"text-gray-300 text-sm",children:"Last Updated:"}),(0,ta.jsx)("p",{className:"text-white",children:r.updatedAt?new Date(r.updatedAt).toLocaleDateString("en-GB",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})]})})]})]}):(0,ta.jsx)("div",{className:"text-center py-8 text-gray-400",children:"No tip settings found."})]})}function Pd(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter(Boolean).join(" ")}const Ad=a.forwardRef((e,t)=>{let{id:s,name:l,value:r,defaultValue:i,onChange:o,options:d=[],placeholder:c="Select an option",disabled:u=!1,className:m="",dropdownPlacement:x,size:h="md",fullWidth:p=!0,renderValue:b,renderOption:g,ariaLabel:f,ariaDescribedBy:y,allowSearch:v=!1,searchPlaceholder:j="Search\u2026",emptyState:w="No matches found",children:N}=e;const S=(0,a.useRef)(null),C=(0,a.useRef)(null),k=(0,a.useRef)(null),[P,A]=(0,a.useState)(!1),[I,D]=(0,a.useState)(!1),[T,_]=(0,a.useState)(""),E=void 0!==r,[R,L]=(0,a.useState)(null!==i&&void 0!==i?i:""),O=E?r:R,M=(0,a.useMemo)(()=>N?a.Children.toArray(N).filter(e=>a.isValidElement(e)&&("option"===e.type||"optgroup"===e.type)).flatMap((e,t)=>{var s,l,r,n,i,o,d,c,u;if("optgroup"===e.type){const s=e.props.label;return a.Children.toArray(e.props.children||[]).map((e,a)=>{var l,r,n,i,o,d,c,u,m;return{group:s,value:null!==(l=null!==(r=null===(n=e.props)||void 0===n?void 0:n.value)&&void 0!==r?r:null===(i=e.props)||void 0===i?void 0:i.children)&&void 0!==l?l:"option-".concat(t,"-").concat(a),label:null!==(o=null!==(d=null===(c=e.props)||void 0===c?void 0:c.children)&&void 0!==d?d:null===(u=e.props)||void 0===u?void 0:u.value)&&void 0!==o?o:"",disabled:null===(m=e.props)||void 0===m?void 0:m.disabled}})}return{value:null!==(s=null!==(l=null===(r=e.props)||void 0===r?void 0:r.value)&&void 0!==l?l:null===(n=e.props)||void 0===n?void 0:n.children)&&void 0!==s?s:"option-".concat(t),label:null!==(i=null!==(o=null===(d=e.props)||void 0===d?void 0:d.children)&&void 0!==o?o:null===(c=e.props)||void 0===c?void 0:c.value)&&void 0!==i?i:"",disabled:null===(u=e.props)||void 0===u?void 0:u.disabled}}):[],[N]),F=(0,a.useMemo)(()=>(d.length?d:M).map((e,t)=>{var s,a,l,r,i;return(0,n.A)((0,n.A)({},e),{},{key:null!==(s=e.value)&&void 0!==s?s:t.toString(),label:null!==(a=null!==(l=e.label)&&void 0!==l?l:e.value)&&void 0!==a?a:"",value:null!==(r=null!==(i=e.value)&&void 0!==i?i:e.label)&&void 0!==r?r:"option-".concat(t)})}),[d,M]),B=(0,a.useMemo)(()=>{if(!v||!T.trim())return F;const e=T.toLowerCase();return F.filter(t=>{var s,a,l;const r=String(null!==(s=t.label)&&void 0!==s?s:""),n=String(null!==(a=t.value)&&void 0!==a?a:""),i=String(null!==(l=t.description)&&void 0!==l?l:"");return r.toLowerCase().includes(e)||n.toLowerCase().includes(e)||i.toLowerCase().includes(e)})},[F,v,T]),q=F.find(e=>e.value===O),z=null!==x&&void 0!==x?x:"bottom";(0,a.useEffect)(()=>{function e(e){S.current&&!S.current.contains(e.target)&&A(!1)}return P?document.addEventListener("mousedown",e):document.removeEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[P]),(0,a.useEffect)(()=>{!P&&v&&_("")},[P,v]);const U=e=>{var t;if(!e.disabled){if(E||L(e.value),o){const t={target:{value:e.value,name:l},currentTarget:{value:e.value,name:l},value:e.value,option:e,preventDefault:()=>{},stopPropagation:()=>{}};o(t,e)}A(!1),null===(t=C.current)||void 0===t||t.focus()}};return(0,ta.jsxs)("div",{ref:S,className:Pd("relative select-none text-white",p&&"w-full",m),children:[(0,ta.jsxs)("button",{id:s,ref:C,name:l,type:"button",className:Pd("flex items-center justify-between gap-3 rounded-lg border bg-white/5 px-3 py-2 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2","sm"===h?"py-1.5 text-sm":"py-2 text-sm",u?"cursor-not-allowed border-white/10 text-white/40":I?"border-white/40 bg-white/10":"border-white/15 hover:border-white/35 hover:bg-white/10"),"aria-haspopup":"listbox","aria-expanded":P,"aria-label":f,"aria-describedby":y,disabled:u,onClick:()=>A(e=>!e),onKeyDown:e=>{if(!u)switch(e.key){case" ":case"Enter":case"ArrowUp":case"ArrowDown":if(e.preventDefault(),P){if("ArrowUp"===e.key||"ArrowDown"===e.key){const t=B.findIndex(e=>e.value===O);let s="ArrowDown"===e.key?Math.min(t+1,B.length-1):Math.max(t-1,0);-1===t&&(s="ArrowDown"===e.key?0:B.length-1);const a=B[s];a&&!a.disabled&&U(a)}}else A(!0);break;case"Escape":P&&(e.preventDefault(),A(!1))}},onFocus:()=>D(!0),onBlur:()=>D(!1),children:[(0,ta.jsx)("div",{className:"flex-1 text-left truncate",children:q?b?b(q):(0,ta.jsx)("span",{className:"font-medium text-white",children:q.label}):(0,ta.jsx)("span",{className:"text-gray-400",children:c})}),(0,ta.jsx)("svg",{className:Pd("h-4 w-4 flex-shrink-0 text-gray-300 transition-transform",P?"rotate-180":"rotate-0"),viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:(0,ta.jsx)("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 10.94l3.71-3.71a.75.75 0 111.06 1.06l-4.24 4.25a.75.75 0 01-1.06 0L5.21 8.29a.75.75 0 01.02-1.08z",clipRule:"evenodd"})})]}),P&&(0,ta.jsxs)("div",{ref:k,role:"listbox",tabIndex:-1,className:Pd("absolute z-40 mt-1 max-h-56 overflow-y-auto rounded-lg border border-white/10 bg-gray-900/95 shadow-xl backdrop-blur-sm","top"===z?"bottom-full mb-2":"top-full"),children:[v&&(0,ta.jsx)("div",{className:"p-3 border-b border-white/10",children:(0,ta.jsx)("input",{autoFocus:!0,type:"text",value:T,onChange:e=>_(e.target.value),placeholder:j,className:"w-full rounded-md border border-white/15 bg-white/5 px-3 py-2 text-sm text-white placeholder:text-gray-500 focus:border-white/40 focus:outline-none focus:ring-0"})}),(0,ta.jsxs)("ul",{className:"py-1",children:[0===B.length&&(0,ta.jsx)("li",{className:"px-3 py-6 text-center text-sm text-gray-400",children:w}),B.map(e=>{const t=e.value===O,s=Pd("flex flex-col gap-1 px-3 py-2 cursor-pointer transition text-sm",e.disabled?"cursor-not-allowed text-gray-500":t?"bg-white/15 border-l-2 border-emerald-400 text-white":"text-gray-200 hover:bg-white/10");return(0,ta.jsx)("li",{role:"option","aria-selected":t,className:s,onClick:()=>U(e),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),U(e))},children:g?g(e,{isSelected:t}):(0,ta.jsxs)(ta.Fragment,{children:[(0,ta.jsx)("span",{className:"font-medium",children:e.label}),e.description&&(0,ta.jsx)("span",{className:"text-xs text-gray-400",children:e.description})]})},e.key)})]})]})]})});Ad.displayName="CustomSelect";const Id=new ea({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e5}}});const Dd=function(){return(0,ta.jsx)(la,{client:Id,children:(0,ta.jsx)(ct,{children:(0,ta.jsxs)("div",{className:"App",children:[(0,ta.jsx)(yl,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1e293b",color:"#fff",border:"1px solid #334155"},success:{iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{iconTheme:{primary:"#ef4444",secondary:"#fff"}}}}),(0,ta.jsxs)(Te,{children:[(0,ta.jsx)(Ie,{path:"/login",element:(0,ta.jsx)(Go,{})}),(0,ta.jsx)(Ie,{path:"/master-admin/signin",element:(0,ta.jsx)(id,{})}),(0,ta.jsx)(Ie,{path:"/super-admin/signin",element:(0,ta.jsx)(ud,{})}),(0,ta.jsx)(Ie,{path:"/gre/signin",element:(0,ta.jsx)(Ae,{to:"/login",replace:!0})}),(0,ta.jsx)(Ie,{path:"/hr/signin",element:(0,ta.jsx)(Ae,{to:"/login",replace:!0})}),(0,ta.jsx)(Ie,{path:"/cashier/signin",element:(0,ta.jsx)(Ae,{to:"/login",replace:!0})}),(0,ta.jsx)(Ie,{path:"/fnb/signin",element:(0,ta.jsx)(Ae,{to:"/login",replace:!0})}),(0,ta.jsx)(Ie,{path:"/admin/signin",element:(0,ta.jsx)(Ae,{to:"/login",replace:!0})}),(0,ta.jsx)(Ie,{path:"/gre",element:(0,ta.jsx)(Nl,{requiredRole:"GRE",children:(0,ta.jsx)(Vi,{})})}),(0,ta.jsx)(Ie,{path:"/hr",element:(0,ta.jsx)(Nl,{requiredRole:"HR",children:(0,ta.jsx)(ao,{})})}),(0,ta.jsx)(Ie,{path:"/cashier",element:(0,ta.jsx)(Nl,{requiredRole:"CASHIER",children:(0,ta.jsx)(wo,{})})}),(0,ta.jsx)(Ie,{path:"/fnb",element:(0,ta.jsx)(Nl,{requiredRole:"FNB",children:(0,ta.jsx)(Wo,{})})}),(0,ta.jsx)(Ie,{path:"/admin",element:(0,ta.jsx)(Nl,{requiredRole:"ADMIN",children:(0,ta.jsx)(nd,{})})}),(0,ta.jsx)(Ie,{path:"/master-admin",element:(0,ta.jsx)(Nl,{requiredRole:"MASTER_ADMIN",children:(0,ta.jsx)(cd,{})})}),(0,ta.jsx)(Ie,{path:"/super-admin",element:(0,ta.jsx)(Nl,{requiredRole:"SUPER_ADMIN",children:(0,ta.jsx)(bd,{})})}),(0,ta.jsx)(Ie,{path:"/manager",element:(0,ta.jsx)(Nl,{requiredRole:"MANAGER",children:(0,ta.jsx)(ti,{})})}),(0,ta.jsx)(Ie,{path:"/staff",element:(0,ta.jsx)(Nl,{requiredRole:"STAFF",children:(0,ta.jsx)(Vo,{})})}),(0,ta.jsx)(Ie,{path:"/dealer",element:(0,ta.jsx)(Nl,{requiredRole:"DEALER",children:(0,ta.jsx)(wd,{})})}),(0,ta.jsx)(Ie,{path:"/affiliate",element:(0,ta.jsx)(Nl,{requiredRole:"AFFILIATE",children:(0,ta.jsx)(fd,{})})}),(0,ta.jsx)(Ie,{path:"/404",element:(0,ta.jsx)(Sl,{})}),(0,ta.jsx)(Ie,{path:"/",element:(0,ta.jsx)(Ae,{to:"/manager",replace:!0})}),(0,ta.jsx)(Ie,{path:"*",element:(0,ta.jsx)(Sl,{})})]})]})})})};l.createRoot(document.getElementById("root")).render((0,ta.jsx)(a.StrictMode,{children:(0,ta.jsx)(Dd,{})}))})();
//# sourceMappingURL=main.2186eda3.js.map